// ======= DRAWER: state machine (S0–S3), drag, snap =======
//
// ================================================================
// ПРАВАЯ ПАНЕЛЬ -- полная карта блоков, данных и правила редактирования
// ================================================================
//
// 1. БЛОКИ ПРАВОГО ЭКРАНА (index.html -- внешняя оболочка)
// ---------------------------------------------------------
// data-role                    id                   Назначение
// right-pane                   rightPane            Корневой контейнер
// right-pane-inner             --                   Внутренняя обёртка
// right-pane-header            --                   Шапка панели
// right-pane-collapse-btn      rightPaneCollapseBtn Кнопка «Свернуть»
// right-pane-header-actions    drawerHeaderActions  Правый блок шапки
// right-pane-user-block        adminWrapper         Профиль/выход
// right-pane-user-label        adminText            Логин / «ADMIN»
// right-pane-avatar            avatar               Иконка пользователя
// right-pane-content           drawerContent        Область контента
// right-pane-iframe            drawerIframe         iframe карточки авто
//
// 2. БЛОКИ ВНУТРИ IFRAME (DRAWER_DATA_URL -- закодированный HTML)
// ---------------------------------------------------------
// data-role                        id                  Назначение
// right-inner-wrap                 --                  Корень iframe
// right-card-title                 --                  «Карточка авто»
// right-section-specs              mainSpecsSection    Осн. хар-ки
// right-section-specs-content      mainSpecsContent    Контент секции
// right-section-docs               docsSection         Документы
// right-section-docs-content       docsContent         Контент секции
// right-section-finance            financeSection      Финансы
// right-section-finance-content    financeContent      Контент секции
// right-section-additional         additionalSection   Доп. информация
// right-section-additional-content additionalContent   Контент секции
// right-comments                   commentsSection     Комментарии
// right-comments-list              commentsList        Список комм.
// right-links                      linksSection        Ссылки
// right-links-list                 linksList           Список ссылок
// right-content-header             --                  Заголовок «Контент»
// right-content-kits               kits                Блоки контента
// right-content-add-btn            addKitBtn           Кнопка добавления
// right-archive-header             --                  Заголовок «Архив»
// right-archive-kits               archiveKits         Архивные блоки
// right-viewer                     viewerBackdrop      Просмотр фото
//
// 3. СХЕМА ДАННЫХ АВТО (из window.CARS_DATA / cars-data.js)
// ---------------------------------------------------------
// Блок                         Поля
// right-section-specs          brand, model, year, color, fuelType,
//                               engineVolume, horsepower, gearbox, drive,
//                               mileage, bodyType, interiorType, owners,
//                               showroom, manager
// right-section-docs           vin, govNumber, cts, ptsType, legalEntity,
//                               registered, arrivalDate, forSale, serviceBook
// right-section-finance        entryPrice, entryWithExpenses, repairCost,
//                               salePrice, carrierCost, deregistrationCost
// right-comments               comments[] {text, createdAt}
// right-links                  links[] {type, url}
// right-content-kits           kits[] {id, title, photos[], used, usedDate}
// right-archive-kits           archivedKits[] (то же, что kits, флаг used=true)
// right-card-title             vin (отображается в заголовке)
//
// 4. ФУНКЦИИ И СОБЫТИЯ
// ---------------------------------------------------------
// expandRightPane()    -- открыть панель (устанавливает ширину >= MIN)
// collapseRightPane()  -- свернуть панель (ширина -> 0 / скрыть)
// openDrawer()         -- загрузить DRAWER_DATA_URL в drawerIframe
// closeDrawer()        -- no-op в split-режиме
// setRightPaneWidth(w) -- задать ширину; вызывается при drag
//
// Событие «открыть»: клик по .car-card -> handleCarClick() (app.js)
//   -> expandRightPane() + openDrawer()
// Событие «свернуть»: клик #rightPaneCollapseBtn / drag к левому краю
//
// Зависимость от роли (auth.js):
//   admin        -- доступны все фильтры, полный контент iframe
//   photographer -- заблокированы чужие фильтры; right-pane-user-label
//                   показывает логин фотографа
//
// 5. ПРАВИЛА БЕЗОПАСНОГО РЕДАКТИРОВАНИЯ
// ---------------------------------------------------------
// МОЖНО менять:
//   - CSS-стили (цвета, отступы, шрифты) секций
//   - Текст заголовков секций (.section-header-title)
//   - Порядок .spec-item внутри .specs-grid
//   - Добавлять новые секции-аккордеоны (копируя шаблон collapse-section
//     и регистрируя через setupCollapse())
//   - HTML-комментарии и data-* атрибуты, не ломающие логику
//
// НЕЛЬЗЯ трогать без анализа последствий:
//   - id элементов (на них завязаны getElementById в JS)
//   - data-action атрибуты тайлов (.tile, .collage-cell)
//   - data-kit-id атрибуты (ключ хранилища)
//   - Структуру viewer-backdrop / viewer-stage (обрабатывается openViewer)
//   - Обработчики событий на window (drag, keydown, message)
//   - DRAWER_DATA_URL -- менять только через декод -> правка -> энкод, не вручную
//   - Функции expandRightPane / collapseRightPane / openDrawer в app.js
// ================================================================
const DRAWER_DATA_URL = 'data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InJ1Ij4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIi8+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+CjxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8c3R5bGU+CiAgICA6cm9vdHsKICAgICAgLS1pbnRlci1yZWd1bGFyOiA0MDA7CiAgICAgIC0taW50ZXItbWVkaXVtOiA1MDA7CiAgICAgIC0taW50ZXItc2VtaWJvbGQ6IDYwMDsKCiAgICAgIC0tcGFnZS1iZzogI0YxRjFGMTsKCiAgICAgIC0td2hpdGU6ICNGRkZGRkY7CiAgICAgIC0tdGV4dC1wcmltYXJ5OiAjMUExQTFBOwogICAgICAtLXRleHQtc2Vjb25kYXJ5OiAjNEI1NTYzOwogICAgICAtLXRleHQtdGVydGlhcnk6ICM4MDgwODA7CgogICAgICAtLWJvcmRlcjogI0Q5RDlEOTsKICAgICAgLS1kaXZpZGVyOiAjRDlEOUQ5OwoKICAgICAgLS1hZGQtcGhvdG8tY29sb3I6IHZhcigtLWJvcmRlcik7CiAgICAgIC0tYWRkLXBob3RvLWNvbG9yLXVzZWQ6IHZhcigtLXVzZWQtYm9yZGVyKTsKCiAgICAgIC0tYnRuLWRhcms6ICMxQTFBMUE7CiAgICAgIC0tYnRuLWRhcmstaG92ZXI6ICMyQTJCMkU7CgogICAgICAtLWJ0bi1kYW5nZXI6ICNGRjRENTc7CiAgICAgIC0tYnRuLWRhbmdlci1ob3ZlcjogI0U2M0I0NTsKCiAgICAgIC0tdXNlZC1iZzogI0VBRjBFRDsKICAgICAgLS11c2VkLWJvcmRlcjogIzAyRDE1QzsKICAgICAgLS11c2VkLWRpdmlkZXI6ICNFN0YwRUI7CiAgICAgIC0tdXNlZC1wYWdlLWJnOiAjRUNGMEVFOwoKICAgICAgLS10aWxlLWVtcHR5OiB2YXIoLS1wYWdlLWJnKTsKICAgICAgLS10aWxlLWFkZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1hZGQtdXNlZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1lbXB0eS11c2VkOiAjRDFFREREOwoKICAgICAgLS1zaGFkb3ctZmxvYXQ6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjEyKTsKCiAgICAgIC0tcmFkaXVzLWNhcmQ6IDIwcHg7CiAgICAgIC0tcmFkaXVzLWJ0bjogMTBweDsKICAvKiBEZWZpbmUgbGFyZ2VyIHJhZGl1cyB2YWx1ZXMgdG8gbWF0Y2ggY2FyZCBzdHlsaW5nIGZyb20gcGFnZTEgKi8KICAtLXJhZGl1cy1sZzogMjRweDsKICAtLXJhZGl1cy1tZDogMTJweDsKCiAgICAgIC0tZ2FwLXRpbGVzOiA0cHg7CiAgICAgIC0tdGlsZS1yYXRpbzogMTYvOTsKCiAgICAgIC0tYnRuLXNpemU6IDQycHg7CiAgICAgIC0tY2FyZC1wYWQ6IDIwcHg7CgogICAgICAvKiB2aWV3ZXIgY29sb3JzICjQv9C+0LQg0YDQtdGE0LXRgNC10L3RgSkgKi8KICAgICAgLS12aWV3ZXItb3ZlcmxheTogcmdiYSgyMzMsIDIzNiwgMjM5LCAwLjk1KTsgLyog0YHQtdGA0YvQuSDRgdC70L7QuSAqLwogICAgICAtLXZpZXdlci1wYW5lbDogcmdiYSgxNywgMjQsIDM5LCAwLjkyKTsgICAgICAvKiDRgtGR0LzQvdGL0Lkg0LHQu9C+0LogKi8KICAgICAgLS12aWV3ZXItcGFuZWwtMjogcmdiYSgxNywgMjQsIDM5LCAwLjgyKTsKICAgICAgLS12aWV3ZXItc3Ryb2tlOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICAtLXZpZXdlci1zdHJva2UtMjogcmdiYSgyNTUsMjU1LDI1NSwwLjE2KTsKICAgIH0KCiAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveDsgbWFyZ2luOjA7IHBhZGRpbmc6MDt9CiAgICBodG1sLGJvZHl7aGVpZ2h0OmF1dG87bWluLWhlaWdodDowO3dpZHRoOjEwMCU7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTp2aXNpYmxlO30KICAgIGh0bWwsIGJvZHkgewogICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7CiAgICAgIHNjcm9sbGJhci13aWR0aDogbm9uZTsKICAgIH0KICAgIGh0bWw6Oi13ZWJraXQtc2Nyb2xsYmFyLAogICAgYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgICB3aWR0aDogMDsKICAgICAgaGVpZ2h0OiAwOwogICAgfQogICAgYm9keXsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtYmcpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICB9CgogICAgLndyYXB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWFyZ2luOiAwOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgZ2FwOiAyMHB4OwogICAgfQoKICAgIC8qIFNlY3Rpb24gaGVhZGVyICovCiAgICAuc2VjdGlvbi1oZWFkZXJ7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgZ2FwOiAxMnB4OwogICAgfQogICAgLnNlY3Rpb24tdGl0bGV7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CiAgICAuc2VjdGlvbi1hY3Rpb25zewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgZ2FwOiA4cHg7CiAgICB9CgogICAgLyogQnV0dG9ucyAqLwogICAgLmljb24tYnRuewogICAgICB3aWR0aDogdmFyKC0tYnRuLXNpemUpOwogICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2UsIHRyYW5zZm9ybSAwLjFzIGVhc2U7CiAgICAgIGZsZXgtc2hyaW5rOjA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGxpbmUtaGVpZ2h0OiAwOwogICAgfQogICAgLmljb24tYnRuOmFjdGl2ZXt0cmFuc2Zvcm06IG5vbmU7fQogICAgLmljb24tYnRuLS1kYXJre2JhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrKTsgY29sb3I6ICNmZmY7fQogICAgLmljb24tYnRuLS1kYXJrOmhvdmVye2JhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyKTt9CiAgICAuaWNvbi1idG4tLWRhbmdlcntiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyKTsgY29sb3I6ICNmZmY7fQogICAgLmljb24tYnRuLS1kYW5nZXI6aG92ZXJ7YmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlci1ob3Zlcik7fQogICAgLmljb24tYnRuLS1naG9zdHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsKICAgICAgY29sb3I6I2ZmZjsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQogICAgLmljb24tYnRuLS1naG9zdDpob3ZlcnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE2KTsgfQoKICAgIC5pY29uewogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgIH0KICAgIC5pY29uIHN2Z3sKICAgICAgd2lkdGg6IDE4cHg7ICAgICAgICAgICAgICAgLyog0LLQuNC30YPQsNC70YzQvdC+ICLRgtC+0L3RjNGI0LUiICovCiAgICAgIGhlaWdodDogMThweDsKICAgICAgZGlzcGxheTpibG9jazsKICAgICAgb3BhY2l0eTogMC45MjsKICAgIH0KCiAgICAucm90YXRlLTQ1eyB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7IH0KCiAgICAvKiA9PT09PSDQodCy0L7RgNCw0YfQuNCy0LDQtdC80YvQtSDRgdC10LrRhtC40Lgg0LrQsNGA0YLQvtGH0LrQuCDQsNCy0YLQvtC80L7QsdC40LvRjyA9PT09PSAqLwogICAgLmNvbGxhcHNlLXNlY3Rpb24gewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIC8qIFVzZSBsYXJnZXIgYm9yZGVyLXJhZGl1cyBmb3IgY29sbGFwc2libGUgc2VjdGlvbnMgdG8gbWF0Y2ggcGFnZTEgZGVzaWduICovCiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICB9CiAgICAuc2VjdGlvbi1oZWFkZXIgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIHBhZGRpbmc6IDE2cHggMjBweDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgfQogICAgLnNlY3Rpb24taGVhZGVyOmhvdmVyIHsKICAgICAgLyogVXNlIGxpZ2h0IGdyZXkgaG92ZXIgY29sb3VyIHNpbWlsYXIgdG8gcGFnZTEgKCNFREVERUQpICovCiAgICAgIGJhY2tncm91bmQ6ICNFREVERUQ7CiAgICB9CiAgICAuc2VjdGlvbi1oZWFkZXItbGVmdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogMTJweDsKICAgIH0KICAgIC5zZWN0aW9uLWhlYWRlci10aXRsZSB7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgfQogICAgLmNvbGxhcHNlLWljb24gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgd2lkdGg6IDI0cHg7CiAgICAgIGhlaWdodDogMjRweDsKICAgICAgY29sb3I6ICNEQURBREE7CiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7CiAgICB9CiAgICAuY29sbGFwc2UtaWNvbiBzdmcgewogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgfQogICAgLmNvbGxhcHNlLWljb24uZXhwYW5kZWQgewogICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7CiAgICB9CiAgICAuc2VjdGlvbi1jb250ZW50IHsKICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIHBhZGRpbmc6IHZhcigtLWNhcmQtcGFkKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgfQogICAgLnNlY3Rpb24tY29udGVudC5jb2xsYXBzZWQgewogICAgICBkaXNwbGF5OiBub25lOwogICAgfQogICAgLnNwZWNzLWdyaWQgewogICAgICBkaXNwbGF5OiBncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIyMHB4LCAxZnIpKTsKICAgICAgZ2FwOiAyMHB4IDI0cHg7CiAgICB9CiAgICAuc3BlYy1pdGVtIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiA2cHg7CiAgICB9CiAgICAuc3BlYy1sYWJlbCB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLW1lZGl1bSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgfQogICAgLnNwZWMtdmFsdWUgewogICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkOwogICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsKICAgIH0KCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAg0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjyAo0YHQutC+0L/QuNGA0L7QstCw0L3QviDQuCDQsNC00LDQv9GC0LjRgNC+0LLQsNC90L4g0LjQtyBwYWdlMSkKICAgICAgINCt0YLQuCDRgdGC0LjQu9C4INC/0YDQuNC80LXQvdGP0Y7RgtGB0Y8g0YLQvtC70YzQutC+INCy0L3Rg9GC0YDQuCDRgdC10LrRhtC40LggI2FkZGl0aW9uYWxTZWN0aW9uCiAgICAgICDRh9GC0L7QsdGLINCy0L3QtdGI0L3QuNC1INGN0LvQtdC80LXQvdGC0Ysg0YHRgtGA0LDQvdC40YbRiyDQvtGB0YLQsNC70LjRgdGMINC90LXQuNC30LzQtdC90L3Ri9C80LguCiAgICAqLwoKICAgIC8qINCX0LDQs9C+0LvQvtCy0L7QuiDQutCw0YDRgtC+0YfQutC4INCw0LLRgtC+0LzQvtCx0LjQu9GPICovCiAgICAuY2FyLWNhcmQtdGl0bGV7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CgogICAgLyog0JHQu9C+0Log0Lgg0L/QvtC00L/Rg9C90LrRgtGLINC00L7Qvy4g0LjQvdGE0L7RgNC80LDRhtC40LggKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1ibG9jayB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGdhcDogMjBweDsKICAgICAgcGFkZGluZzogMDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1pdGVtIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAyMHB4OwogICAgfQogICAgLyog0YPRgdGC0YDQsNC90Y/QtdC8INC00LLQvtC50L3QvtC5INC+0YLRgdGC0YPQvyDQv9GA0Lgg0L/Rg9GB0YLRi9GFINGB0L/QuNGB0LrQsNGFICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSB7CiAgICAgIGdhcDogMDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1pdGVtLmlzLWVtcHR5IC5jb21tZW50cy1saXN0LAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWl0ZW0uaXMtZW1wdHkgLmxpbmtzLWxpc3QgewogICAgICBkaXNwbGF5OiBub25lOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWhlYWRlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLXRpdGxlIHsKICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItc2VtaWJvbGQpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICB9CiAgICAvKiDQodC/0LjRgdC+0Log0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnRzLWxpc3QgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDRweDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuY29tbWVudC1ibG9jayB7CiAgICAgIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgIGdhcDogMTJweDsKICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgKyA0MHB4KTsKICAgICAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtdGV4dCB7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgIGZsZXg6IDE7CiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7CiAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtaW5wdXQgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICAvKiBJbmhlcml0IHRoZSBsaWdodCBncmV5IGJhY2tncm91bmQgZnJvbSB0aGUgY29udGFpbmVyICovCiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgIC8qIFNob3cgYSBzdWJ0bGUgYm9yZGVyIGxpa2UgaW4gcGFnZTEgKi8KICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsKICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwOwogICAgICBtYXJnaW46IDA7CiAgICAgIHJlc2l6ZTogbm9uZTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgbWluLWhlaWdodDogMS42ZW07CiAgICAgIGhlaWdodDogYXV0bzsKICAgICAgZmxleDogMTsKICAgICAgcGFkZGluZy1yaWdodDogMjBweDsKICAgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICB0ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgfQoKICAgIC8qIENoYW5nZSBib3JkZXIgY29sb3Igb2YgdGhlIGNvbW1lbnQgdGV4dGFyZWEgb24gZm9jdXMgc2ltaWxhciB0byBwYWdlMSAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5jb21tZW50LWlucHV0OmZvY3VzIHsKICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KICAgIC8qINCh0L/QuNGB0L7QuiDRgdGB0YvQu9C+0LogKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGlua3MtbGlzdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGdhcDogNHB4OwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICAgIGdhcDogMTJweDsKICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJ0bi1zaXplKSArIDQwcHgpOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWluZm8gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleDogMTsKICAgICAgbWluLXdpZHRoOiAwOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXR5cGUgewogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgZmxleDogMCAwIGF1dG87CiAgICB9CiAgICAvKiDQtNC+0LHQsNCy0LvRj9C10Lwg0LTQstC+0LXRgtC+0YfQuNC1INC/0L7RgdC70LUg0L3QsNC30LLQsNC90LjRjyDRgtC40L/QsCAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW06bm90KC5lZGl0aW5nKSAubGluay10eXBlOjphZnRlciB7CiAgICAgIGNvbnRlbnQ6ICI6IjsKICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybCB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIC8qIHVuZGVybGluZSBvbmx5IHVuZGVyIHRoZSB0ZXh0IChub3QgdGhlIHdob2xlIGZsZXggd2lkdGgpICovCiAgICAgIHRleHQtZGVjb3JhdGlvbi1saW5lOiB1bmRlcmxpbmU7CiAgICAgIHRleHQtZGVjb3JhdGlvbi1zdHlsZTogZGFzaGVkOwogICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6ICNDQkQ1RTE7CiAgICAgIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMnB4OwoKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgIGZsZXg6IDEgMSBhdXRvOwogICAgICBtaW4td2lkdGg6IDA7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmhvdmVyIHsKICAgICAgdGV4dC1kZWNvcmF0aW9uLXN0eWxlOiBzb2xpZDsKICAgICAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjNjQ3NDhCOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWVkaXQgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleDogMTsKICAgICAgbWluLXdpZHRoOiAwOwogICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBsaW5lLWhlaWdodDogbm9ybWFsOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXR5cGUtaW5wdXQgewogICAgICB3aWR0aDogMTIwcHg7CiAgICAgIG1pbi13aWR0aDogMTIwcHg7CiAgICAgIHBhZGRpbmc6IDZweCAxMHB4OwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgIGZsZXg6IDAgMCBhdXRvOwogICAgICBvdmVyZmxvdzogdmlzaWJsZTsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXQgewogICAgICBmbGV4OiAxOwogICAgICBtaW4td2lkdGg6IDE0MHB4OwogICAgICBwYWRkaW5nOiA2cHggMTBweDsKICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXQ6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItY29sb3I6ICNEOUQ5RDk7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstYWN0aW9ucyB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBmbGV4LXNocmluazogMDsKICAgIH0KICAgIC8qINCh0YLQuNC70Lgg0LrQvdC+0L/QvtC6INCy0L3Rg9GC0YDQuCDQsdC70L7QutCwINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdC+0Lkg0LjQvdGE0L7RgNC80LDRhtC40LggKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uZWRpdC1idXR0b24gewogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5lZGl0LWJ1dHRvbjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMyQTJBMkE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkIHsKICAgICAgYmFja2dyb3VuZDogI0RBREFEQTsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZDpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b24gewogICAgICAvKiBNYXRjaCBwYWdlMTogcmVkIGZpbGxlZCBidXR0b24gd2l0aCB3aGl0ZSBpY29uICovCiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICB9CgogICAgLyogRW5zdXJlIHRoZSB0cmFzaCBpY29uIGluc2lkZSB0aGUgZGVsZXRlIGJ1dHRvbiB1c2VzIHRoZSBidXR0b24ncyB3aGl0ZSBjb2xvdXIgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uIHN2ZywKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uOmhvdmVyIHN2ZyB7CiAgICAgIGZpbGw6ICNGRkZGRkY7CiAgICB9CgogICAgLyogRm9yY2UgcGF0aHMgaW5zaWRlIHRoZSB0cmFzaCBpY29uIHRvIHVzZSB3aGl0ZSBmaWxsIGZvciBwcm9wZXIgY29udHJhc3QgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uIHN2ZyBwYXRoLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b246aG92ZXIgc3ZnIHBhdGggewogICAgICBmaWxsOiAjRkZGRkZGICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogUmVtb3ZlIHJvdW5kZWQgY29ybmVycyBmcm9tIHRoZSB0ZXh0YXJlYSBvbmx5IHdoZW4gZWRpdGluZyB0byBtYXRjaCBwYWdlMSAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5jb21tZW50LWJsb2NrLmVkaXRpbmcgLmNvbW1lbnQtaW5wdXR7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBVc2UgYnV0dG9uLXNpemVkIHJhZGl1cyBmb3IgbGluayBpbnB1dHMgdG8gYmV0dGVyIG1hdGNoIHBhZ2UxICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZS1pbnB1dCwKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXR7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1idG4pOwogICAgfQoKICAgIC8qIE9uIGZvY3VzLCB1c2UgdGVydGlhcnkgdGV4dCBjb2xvdXIgZm9yIGxpbmsgaW5wdXQgYm9yZGVycyAoc2ltaWxhciB0byBwYWdlMSkgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay10eXBlLWlucHV0OmZvY3VzLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybC1pbnB1dDpmb2N1c3sKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KCiAgICAvKiBLaXRzIGdyaWQgKNC60LDQuiDQsiDQnNC10L3Rji5odG06IGF1dG8tZmlsbCArIG1pbm1heCkgKi8KICAgIC5raXRzewogICAgICBkaXNwbGF5OmdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDUyMHB4LCAxZnIpKTsKICAgICAgZ2FwOiAyMHB4OwogICAgICBhbGlnbi1pdGVtczpzdGFydDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC13aWR0aDogMTEwMHB4KXsKICAgICAgLmtpdHN7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDQ2MHB4LCAxZnIpKTsgfQogICAgfQogICAgQG1lZGlhIChtYXgtd2lkdGg6IDc4MHB4KXsKICAgICAgYm9keXsgcGFkZGluZzogMjBweDsgfQoua2l0c3sgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IH0KICAgIH0KCiAgICAvKiBLaXQgY2FyZCAqLwogICAgLmtpdC1jYXJkewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgICAgcGFkZGluZzogdmFyKC0tY2FyZC1wYWQpOwogICAgICBtaW4td2lkdGg6IDA7CiAgICAgIAogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB9CgogICAgLyogRHJhZyBoYW5kbGUgKNCy0LXRgNGF0L3QuNC5INC60L7QvdGC0YPRgCkgKi8KICAgIC5raXQtZHJhZy1oYW5kbGV7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICB0b3A6MDsKICAgICAgbGVmdDowOwogICAgICByaWdodDowOwogICAgICBoZWlnaHQ6IDE0cHg7CiAgICAgIGN1cnNvcjogZ3JhYjsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgIH0KICAgIC5raXQtZHJhZy1oYW5kbGU6aG92ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMjYsMjYsMjYsMC4wMyk7IH0KICAgIC5raXQtY2FyZC5pcy1kcmFnZ2luZyAua2l0LWRyYWctaGFuZGxleyBjdXJzb3I6IGdyYWJiaW5nOyB9CgogICAgLmtpdC1jYXJkLmlzLWRyYWdnaW5newogICAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctZmxvYXQpOwogICAgfQoKICAgIC5raXQtcGxhY2Vob2xkZXJ7CiAgICAgIC8qIHBsYWNlaG9sZGVyIG9jY3VwaWVzIHNwYWNlIGJ1dCBpcyBpbnZpc2libGUgKG5vICdsYW5kaW5nIHNsb3QnIFVJKSAqLwogICAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgIH0KICAgIC5raXQtY2FyZC5pcy11c2VkICsgLmtpdC1wbGFjZWhvbGRlcnsgYm9yZGVyLWNvbG9yOiB2YXIoLS11c2VkLWJvcmRlcik7IH0KCiAgICAua2l0LWNhcmQuaXMtdXNlZHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdXNlZC1iZyk7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdXNlZC1ib3JkZXIpOwogICAgfQoKICAgIC5raXQtdG9wewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47CiAgICAgIGdhcDogMTJweDsKICAgIH0KCiAgICAua2l0LXRpdGxlewogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBtaW4td2lkdGg6IDA7CiAgICAgIGZsZXg6IDE7CiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgfQogICAgLmtpdC10aXRsZVtjb250ZW50ZWRpdGFibGU9InRydWUiXXsgb3V0bGluZTpub25lOyB9CiAgICAua2l0LWFjdGlvbnN7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleC1zaHJpbms6MDsKICAgIH0KCiAgICAvKiBkaXZpZGVyIG11c3Qgc3BhbiBmdWxsIHdpZHRoICovCiAgICAua2l0LWRpdmlkZXJ7CiAgICAgIGhlaWdodDogMXB4OwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kaXZpZGVyKTsKICAgICAgbWFyZ2luOiAyMHB4IDA7IC8qIDE2cHgg0L7RgiDRiNCw0L/QutC4INC00L4g0LvQuNC90LjQuCDQuCAxNnB4INC+0YIg0LvQuNC90LjQuCDQtNC+ICfQmNGB0L/QvtC70YzQt9C+0LLQsNC90L4nICovCiAgICAgIC8qIGZ1bGwtYmxlZWQg0LLQvdGD0YLRgNC4INC60LDRgNGC0L7Rh9C60Lgg0L/RgNC4IHBhZGRpbmcgNDBweCAqLwogICAgICBtYXJnaW4tbGVmdDogY2FsYyh2YXIoLS1jYXJkLXBhZCkgKiAtMSk7CiAgICAgIG1hcmdpbi1yaWdodDogY2FsYyh2YXIoLS1jYXJkLXBhZCkgKiAtMSk7CiAgICB9CgogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmtpdC1kaXZpZGVyeyBiYWNrZ3JvdW5kOiB2YXIoLS11c2VkLWJvcmRlcik7IH0KCiAgICAvKiBVc2VkIHJvdyAqLwogICAgLmtpdC11c2VkLXJvd3sKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogMTBweDsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKCiAgICAgIC8qIHNhbWUgdHlwb2dyYXBoeSBhcyBmb290ZXIgKCLQktGB0LXQs9C+INGE0L7RgtC+IiwgItCX0LDQs9GA0YPQttC10L3QviIpICovCiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXJlZ3VsYXIpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CgogICAgICAvKiByb3cgaXRzZWxmIGlzIG5vdCBjbGlja2FibGU7IG9ubHkgdGhlIGNoZWNrYm94IGlzICovCiAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIH0KCiAgICAua2l0LWNoZWNreyBjdXJzb3I6IGRlZmF1bHQ7IH0KICAgIC5raXQtY2FyZC5pcy1lZGl0IC5raXQtY2hlY2t7IGN1cnNvcjogcG9pbnRlcjsgfQoKLmtpdC1jaGVja3sKICAgICAgd2lkdGg6IDIwcHg7CiAgICAgIGhlaWdodDogMjBweDsKICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLWJnKTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGZsZXgtc2hyaW5rOjA7CiAgICB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAua2l0LWNoZWNreyBiYWNrZ3JvdW5kOiAjMDJEMTVDOyB9CiAgICAua2l0LWNoZWNrIHN2Z3t3aWR0aDogMTRweDsgaGVpZ2h0OiAxNHB4OyBjb2xvcjogI2ZmZjsgZGlzcGxheTpub25lOyBvcGFjaXR5OiAxO30KICAgIC5raXQtY2FyZC5pcy11c2VkIC5raXQtY2hlY2sgc3Zne2Rpc3BsYXk6YmxvY2s7fQoKICAgIC8qIFBob3RvIGdyaWQgKi8KICAgIC5raXQtZ3JpZHsKICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSk7CiAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDIsIGF1dG8pOwogICAgICBnYXA6IHZhcigtLWdhcC10aWxlcyk7CiAgICB9CgogICAgLnRpbGV7CiAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgYXNwZWN0LXJhdGlvOiB2YXIoLS10aWxlLXJhdGlvKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eSk7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgYm9yZGVyLXJhZGl1czogMDsgLyog0LrQstCw0LTRgNCw0YLQvdGL0LUgKi8KICAgICAgY3Vyc29yOiBkZWZhdWx0OwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLnRpbGUuaXMtZW1wdHl7IGJhY2tncm91bmQ6IHZhcigtLXRpbGUtZW1wdHktdXNlZCk7IH0KICAgIC50aWxlLmlzLWVtcHR5LAogICAgLmNvbGxhZ2UtY2VsbC5pcy1lbXB0eXsKICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIH0KCiAgICAudGlsZS5pcy1hZGR7CiAgICAgIC8qINGG0LLQtdGCINC60LDQuiDRhNC+0L0g0LvQtdCy0L7Qs9C+INGN0LrRgNCw0L3QsCAqLwogICAgICBiYWNrZ3JvdW5kOiAjRTVFNUU1OwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMTQwbXMgZWFzZTsKICAgIH0KICAgIC50aWxlLmlzLWFkZDpob3ZlciwKICAgIC50aWxlLmlzLWFkZC5pcy1kcmFnb3ZlcnsKICAgICAgYmFja2dyb3VuZDogI0RFREVERTsKICAgIH0KCiAgICAvKiBQbHVzIHNpemUgaW4gImFkZCBwaG90byIgdGlsZSAqLwogICAgLnRpbGUuaXMtYWRkIC5pY29ueyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyB9CiAgICAudGlsZS5pcy1hZGQgLmljb24gc3ZneyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyBvcGFjaXR5OiAxOyB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAudGlsZS5pcy1hZGR7CiAgICAgIGJhY2tncm91bmQ6ICNEMUVEREQ7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgfQoKICAgIC50aWxlIGltZ3sKICAgICAgd2lkdGg6MTAwJTsKICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgICBkaXNwbGF5OmJsb2NrOwogICAgfQoKICAgIC8qIEhvdmVyOiBvbmx5IGRhcmtlbiwgbm8gaWNvbnMgKi8KICAgIC50aWxlLmlzLXBob3RvOjphZnRlciwKICAgIC5jb2xsYWdlLWNlbGwuaXMtcGhvdG86OmFmdGVyewogICAgICBjb250ZW50OiIiOwogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwKTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQogICAgLnRpbGUuaXMtcGhvdG86aG92ZXI6OmFmdGVyLAogICAgLmNvbGxhZ2UtY2VsbC5pcy1waG90bzpob3Zlcjo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4xMik7IH0KCiAgICAvKiBjb2xsYWdlICh0aWxlIDYpICovCiAgICAudGlsZS5pcy1jb2xsYWdleyBwYWRkaW5nOjA7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyB9CiAgICAuY29sbGFnZS1ncmlkewogICAgICB3aWR0aDoxMDAlOwogICAgICBoZWlnaHQ6MTAwJTsKICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgyLCAxZnIpOwogICAgICBnYXA6IHZhcigtLWdhcC10aWxlcyk7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgfQogICAgLmNvbGxhZ2UtY2VsbHsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eSk7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmNvbGxhZ2UtY2VsbC5pcy1lbXB0eXsgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eS11c2VkKTsgfQogICAgLmNvbGxhZ2UtY2VsbCBpbWd7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBvYmplY3QtZml0OiBjb3ZlcjsgZGlzcGxheTpibG9jazsgfQogICAgLmNvbGxhZ2UtY2VsbC5pcy1waG90bzpob3Zlcjo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4yNSk7IH0KCiAgICAubW9yZS1vdmVybGF5ewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC42KTsKICAgICAgY29sb3I6I2ZmZjsKICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KCiAgICAua2l0LWZvb3RlcnsKICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgZ2FwOiAxMnB4OwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXJlZ3VsYXIpOwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmtpdC1mb290ZXJ7IGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IH0KCiAgICAKICAgIC8qID09PT09IFZpZXdlciAo0L/QtdGA0LXRgNCw0LHQvtGC0LDQvTogZnVsbC1zY3JlZW4gKyBibHVyIGJhY2tncm91bmQgKyDQu9C10L3RgtCwINGB0L/RgNCw0LLQsCkgPT09PT0gKi8KICAgIC52aWV3ZXItYmFja2Ryb3B7CiAgICAgIHBvc2l0aW9uOmZpeGVkOwogICAgICBpbnNldDowOwogICAgICBkaXNwbGF5Om5vbmU7CiAgICAgIHotaW5kZXg6IDk5OTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KICAgIC52aWV3ZXItYmFja2Ryb3Aub3BlbnsKICAgICAgZGlzcGxheTpibG9jazsKICAgICAgcG9pbnRlci1ldmVudHM6YXV0bzsKICAgIH0KCiAgICAvKiBCbHVyIGV2ZXJ5dGhpbmcgYmVoaW5kIHZpZXdlciAqLwogICAgYm9keS52aWV3ZXItb3BlbiA+ICo6bm90KC52aWV3ZXItYmFja2Ryb3ApewogICAgICBmaWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKICAgIH0KCiAgICAudmlld2VyewogICAgICBwb3NpdGlvbjpmaXhlZDsKICAgICAgaW5zZXQ6IDA7CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGRpc3BsYXk6Z3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMzJweCAxZnI7CiAgICAgIGdhcDogMTZweDsKICAgICAgei1pbmRleDogMTAwMDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC13aWR0aDogOTAwcHgpewogICAgICAudmlld2VyeyBwYWRkaW5nOiAxNnB4OyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDExMHB4IDFmcjsgfQogICAgfQoKICAgIC52aWV3ZXItcmFpbHsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgcGFkZGluZzogMTBweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogOHB4OwogICAgICBtaW4taGVpZ2h0OiAwOwogICAgfQoKICAgIC5yYWlsLWJ0bnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMzZweDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiNmZmY7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZTsKICAgICAgZmxleC1zaHJpbms6MDsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE0KTsgfQogICAgLnJhaWwtYnRuOmRpc2FibGVkeyBvcGFjaXR5OiAwLjU7IGN1cnNvcjogZGVmYXVsdDsgfQoKICAgIC52aWV3ZXItdGh1bWJzewogICAgICBvdmVyZmxvdzphdXRvOwogICAgICBzY3JvbGwtYmVoYXZpb3I6IHNtb290aDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogOHB4OwogICAgICBwYWRkaW5nLXJpZ2h0OiAycHg7CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIGZsZXg6IDE7CiAgICB9CiAgICAudmlld2VyLXRodW1iczo6LXdlYmtpdC1zY3JvbGxiYXJ7IHdpZHRoOiA2cHg7IH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhci10aHVtYnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE4KTsgYm9yZGVyLXJhZGl1czogNnB4OyB9CiAgICAudmlld2VyLXRodW1iczo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2t7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wNik7IH0KCiAgICAudGh1bWJ7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpOwogICAgICBhc3BlY3QtcmF0aW86IDEvMTsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA4KTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgICBjdXJzb3I6cG9pbnRlcjsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgZmxleC1zaHJpbms6IDA7CiAgICB9CiAgICAudGh1bWIgaW1neyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgb2JqZWN0LWZpdDogY292ZXI7IGRpc3BsYXk6YmxvY2s7IH0KICAgIC50aHVtYjo6YWZ0ZXJ7CiAgICAgIGNvbnRlbnQ6IiI7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICBpbnNldDowOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKSwgb3BhY2l0eSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIHBvaW50ZXItZXZlbnRzOm5vbmU7CiAgICB9CiAgICAudGh1bWI6aG92ZXI6OmFmdGVyeyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOyB9CiAgICAudGh1bWIuYWN0aXZlewogICAgICBib3JkZXItY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC4zNSk7CiAgICB9CiAgICAudGh1bWIuYWN0aXZlOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjApOyB9CiAgICAudGh1bWIgaW1neyB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKTsgfQogICAgLnRodW1iLmFjdGl2ZSBpbWd7IG9wYWNpdHk6IDE7IH0KCiAgICAvKiBSaWdodDogdmVydGljYWwgZmlsbXN0cmlwIChwcmV2L2N1cnJlbnQvbmV4dCkgKi8KICAgIC52aWV3ZXItc3RhZ2V7CiAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBvdmVyZmxvdzpoaWRkZW47CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgfQoKICAgIC5zdGFnZS1zdGFja3sKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgZ2FwOiAxMnB4OwogICAgICBwYWRkaW5nOiAxOHB4IDE2cHg7CiAgICB9CgogICAgLnN0YWdlLWl0ZW17CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgLXdlYmtpdC11c2VyLWRyYWc6bm9uZTsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3ewogICAgICBoZWlnaHQ6IDE4dmg7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAKICAgICAgCiAgICAgIAogICAgfQoKICAgIC5zdGFnZS1pdGVtLnByZXZpZXc6aG92ZXJ7IG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsgfQoKICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIGhlaWdodDogNTh2aDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC1oZWlnaHQ6IDc0MHB4KXsKICAgICAgLnN0YWdlLWl0ZW0ucHJldmlld3sgaGVpZ2h0OiAxNnZoOyB9CiAgICAgIC5zdGFnZS1pdGVtLm1haW57IGhlaWdodDogNTJ2aDsgfQogICAgfQoKICAgIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgLXdlYmtpdC11c2VyLWRyYWc6bm9uZTsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogOTYlOwogICAgICBtYXgtaGVpZ2h0OiA5NiU7CiAgICB9CgogICAgLyogc3VidGxlIGhvdmVyIG9uIHByZXZpZXdzICovCiAgICAvKiBUb3AgY29udHJvbHMgKi8KICAgIC52aWV3ZXItdG9wYmFyewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgdG9wOiAxNHB4OwogICAgICByaWdodDogMTRweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogMTBweDsKICAgICAgei1pbmRleDogNTsKICAgIH0KICAgIC52aWV3ZXItY291bnRlcnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIGxlZnQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDI1OwogICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIH0KCiAgICAvKiBSaWdodCBzaWRlIHZlcnRpY2FsIG5hdiBidXR0b25zIChvcHRpb25hbCkgKi8KICAgIC52bmF2ewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgcmlnaHQ6IDE2cHg7CiAgICAgIHRvcDogNTAlOwogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246Y29sdW1uOwogICAgICBnYXA6IDEwcHg7CiAgICAgIHotaW5kZXg6IDU7CiAgICB9CiAgICAudm5hdiAubmF2LWJ0bnsKICAgICAgd2lkdGg6IDQ2cHg7CiAgICAgIGhlaWdodDogNDZweDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICBjb2xvcjojZmZmOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZTsKICAgIH0KICAgIC52bmF2IC5uYXYtYnRuOmhvdmVyeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTYpOyB9CiAgICAudm5hdiAubmF2LWJ0biBzdmd7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IGRpc3BsYXk6YmxvY2s7IH0KCiAgICAvKiBwcmV2ZW50IGJhY2tkcm9wIGNsaWNrIHNlbGVjdGluZyAqLwogICAgLnZpZXdlciwgLnZpZXdlciAqeyAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50OyB9CiAgCiAgICAuaWNvbi1idG4tLXVwbG9hZHsKICAgICAgLyogc2FtZSBzdHlsZSBhcyAiYWRkIHBob3RvIiB0aWxlICovCiAgICAgIGJhY2tncm91bmQ6ICNEQURBREE7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMTQwbXMgZWFzZSwgdHJhbnNmb3JtIDAuMXMgZWFzZTsKICAgIH0KICAgIC5pY29uLWJ0bi0tdXBsb2FkOmhvdmVyewogICAgICBiYWNrZ3JvdW5kOiAjRDJEMkQyOwogICAgfQoKICAKICAgIC8qID09PT09IFZpZXdlciBvdmVycmlkZXMgdG8gbWF0Y2ggbGF0ZXN0IHNwZWMgPT09PT0gKi8KICAgIC8qIEJhY2tncm91bmQ6IGJsdXIgb25seSwgbm8gdGludCAqLwogICAgYm9keS52aWV3ZXItb3BlbiA+ICo6bm90KC52aWV3ZXItYmFja2Ryb3ApewogICAgICBmaWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKICAgIH0KCiAgICAudmlld2VyeyBwYWRkaW5nOiAwOyBnYXA6IDA7IH0gLyogZnVsbC1zY3JlZW4sIG5vIGV4dHJhIG1hcmdpbnMgKi8KCiAgICAvKiBMZWZ0IHJhaWwgdXNlcyBibHVyIChnbGFzcykgKi8KICAgIC52aWV3ZXItcmFpbHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBwYWRkaW5nOiAxMHB4OwogICAgICB3aWR0aDogMTMycHg7CiAgICB9CgogICAgLyogUmFpbCBidXR0b25zOiBibGFjayB3aXRoIHdoaXRlIGFycm93ICovCiAgICAucmFpbC1idG57CiAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIGhlaWdodDogNTJweDsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDogIzJBMkIyRTsgfQoKICAgIC8qIHRodW1icyBnYXAgNHB4ICovCiAgICAudmlld2VyLXRodW1ic3sgZ2FwOiA0cHg7IH0KICAgIC50aHVtYnsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTgpOwogICAgfQoKICAgIC8qIFN0YWdlOiBhbHNvIGdsYXNzIGJsdXIgKi8KICAgIC52aWV3ZXItc3RhZ2V7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wOCk7CiAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgIH0KCiAgICAvKiBWZXJ0aWNhbCBzdGFjazogc2hvdyBwcmV2L25leHQgc2xpZ2h0bHkgKi8KICAgIC5zdGFnZS1zdGFja3sKICAgICAgZ2FwOiA0cHg7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgfQogICAgLnN0YWdlLWl0ZW0ucHJldmlld3sKICAgICAgaGVpZ2h0OiAxOHZoOwogICAgICBvcGFjaXR5OiAwLjMyICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluewogICAgICBoZWlnaHQ6IDY0dmg7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgIH0KICAgIC5zdGFnZS1pbWd7IG1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwJTsgfQoKICAgIC8qIENsb3NlIGJ1dHRvbjogc3RhbmRhcmQgYmxhY2sgc3F1YXJlIHdpdGggcmFkaXVzICh1c2VzIG91ciBpY29uLWJ0biBkYXJrKSAqLwogICAgI3ZpZXdlckNsb3NlewogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KCiAgICAvKiBUb3BiYXIgcG9zaXRpb25pbmcgKi8KICAgIC52aWV3ZXItdG9wYmFyeyB0b3A6IDIwcHg7IHJpZ2h0OiAyMHB4OyBnYXA6IDEwcHg7IH0KCiAgICAvKiBEZWxldGUgYnV0dG9uOiBvbmx5IGluIGVkaXQsIG9uIG1haW4gcGhvdG8gdG9wLXJpZ2h0IHdpdGggMjBweCBpbnNldCAqLwogICAgI3ZpZXdlckRlbGV0ZUJ0bnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiA2OwogICAgfQogICAgLyogV2hlbiBkZWxldGUgc2hvd24sIGtlZXAgY2xvc2UgYXQgdGhlIHZlcnkgdG9wLXJpZ2h0IChzdGFjaykgKi8KICAgICN2aWV3ZXJDbG9zZXsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiA3OwogICAgfQoKICAgIC8qIENvdW50ZXIgc3VidGxlICovCiAgICAudmlld2VyLWNvdW50ZXJ7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAyMHB4OwogICAgICBsZWZ0OiAyMHB4OwogICAgICB6LWluZGV4OiAyNTsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB9CgogICAgLyogUmVtb3ZlIGFueSByZW1haW5pbmcgbmF2IGJsb2NrcyAqLwogICAgLnZuYXZ7IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9CgogIAogICAgLyogPT09PT0gVmlld2VyIHR1bmU6IGNlbnRlciBpbWFnZSBiaWdnZXIsIHByZXZpZXdzIDIwJSB2aXNpYmxlIGFuZCAyMCUgc21hbGxlciA9PT09PSAqLwogICAgLnZpZXdlcnsgcGFkZGluZzogMDsgfQogICAgLnZpZXdlcnsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMzJweCAxZnI7IH0KICAgIC52aWV3ZXItcmFpbHsgd2lkdGg6IDEzMnB4OyB9CiAgICAudmlld2VyeyBnYXA6IDRweDsgfSAvKiA0cHggYmV0d2VlbiBsZWZ0IHJhaWwgYW5kIHN0YWdlICovCgogICAgLnZpZXdlci1zdGFnZXsgcGFkZGluZy1yaWdodDogNHB4OyB9IC8qIDRweCBmcm9tIHJpZ2h0IGVkZ2UgKi8KICAgIC5zdGFnZS1zdGFja3sKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgcGFkZGluZzogMDsKICAgICAgZ2FwOiA0cHg7IC8qIGdhcHMgYmV0d2VlbiBwaG90b3MgNHB4ICovCiAgICAgIGRpc3BsYXk6Z3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyMHZoIDFmciAyMHZoOyAvKiB2aXNpYmxlIGFyZWEgZm9yIHByZXYvbmV4dCB+MjAlICovCiAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoOwogICAgICBqdXN0aWZ5LWl0ZW1zOiBzdHJldGNoOwogICAgfQogICAgLnN0YWdlLWl0ZW17CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBvdmVyZmxvdzpoaWRkZW47CiAgICB9CiAgICAvKiBtYWluIHRha2VzIG1vc3Qgc3BhY2UgKi8KICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA4cHgpOyAgLyogNHB4IGZyb20gbGVmdCAoZ2FwKSArIDRweCBmcm9tIHJpZ2h0IChzdGFnZSBwYWRkaW5nKSBhcHByb3hpbWF0aW9uICovCiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgbWF4LXdpZHRoOiBub25lOwogICAgICBtYXgtaGVpZ2h0OiBub25lOwogICAgICBvYmplY3QtZml0OiBjb250YWluOwogICAgfQogICAgLyogcHJldmlld3MgYXJlIDIwJSBzbWFsbGVyIHRoYW4gbWFpbiB2aXN1YWxseSB2aWEgc2NhbGUgKi8KICAgIC5zdGFnZS1pdGVtLnByZXZpZXd7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsKICAgIH0KICAgIC5zdGFnZS1pdGVtLnByZXZpZXcgLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAKICAgIC8qID09PT09IFBBVENIIHYyNzogZm9yY2Ugb3ZlcnJpZGUgKG1haW4g0LzQsNC60YHQuNC80LDQu9GM0L3QviDQsdC+0LvRjNGI0L7QuSwgcHJldi9uZXh0ID0g0YLQvtGCINC20LUg0LrQsNC00YAsINCy0LjQtNC90LAg0YLQvtC70YzQutC+INC/0L7Qu9C+0YHQutCwKSA9PT09PSAqLwogICAgLnZpZXdlcnsKICAgICAgaW5zZXQ6MDsKICAgICAgcGFkZGluZzowICFpbXBvcnRhbnQ7CiAgICAgIGdhcDo0cHggIWltcG9ydGFudDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxNTZweCAxZnIgIWltcG9ydGFudDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA4KTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgIH0KCiAgICAvKiBSYWlsIGFuZCBzdGFnZSB0cmFuc3BhcmVudCBzbyBubyBzZWFtcyAqLwogICAgLnZpZXdlci1yYWlsLAogICAgLnZpZXdlci1zdGFnZXsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogTEVGVCBSQUlMOiBzcGFjaW5nIDRweCBldmVyeXdoZXJlICovCiAgICAudmlld2VyLXJhaWx7CiAgICAgIHdpZHRoOiAxNTZweCAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbiAhaW1wb3J0YW50OwogICAgICBnYXA6IDRweCAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgfQoKICAgIC5yYWlsLWJ0bnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogNTZweDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBICFpbXBvcnRhbnQ7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBkaXNwbGF5OmZsZXggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXIgIWltcG9ydGFudDsKICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50OwogICAgICBmbGV4OiAwIDAgYXV0bzsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDojMkEyQjJFICFpbXBvcnRhbnQ7IH0KICAgIC5yYWlsLWJ0bjpkaXNhYmxlZHsgYmFja2dyb3VuZDojMUExQTFBICFpbXBvcnRhbnQ7IGN1cnNvcjogZGVmYXVsdDsgfQogICAgLnJhaWwtYnRuOmRpc2FibGVkIHN2Z3sgb3BhY2l0eTogMC4zNTsgfQoKICAgIC5yYWlsLWJ0biBzdmd7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IG9wYWNpdHk6IDAuOTI7IH0KCiAgICAudmlld2VyLXRodW1ic3sKICAgICAgZmxleDogMSAxIGF1dG87CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6ZmxleCAhaW1wb3J0YW50OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW4gIWltcG9ydGFudDsKICAgICAgZ2FwOiA0cHggIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGF1dG87CiAgICAgIHNjcm9sbGJhci13aWR0aDogbm9uZTsKICAgIH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhcnsgd2lkdGg6IDA7IGhlaWdodDogMDsgfQoKICAgIC50aHVtYnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIGZsZXg6IDAgMCBhdXRvOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTgpOwogICAgfQoKICAgIC8qIFRodW1icyBkYXJrZXIgd2hlbiBub3QgYWN0aXZlICovCiAgICAudGh1bWI6OmFmdGVyewogICAgICBjb250ZW50OiIiOwogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjU4KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSksIG9wYWNpdHkgMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpOwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQogICAgLnRodW1iOmhvdmVyOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjU4KTsgfQogICAgLnRodW1iLmFjdGl2ZTo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4wKTsgfQogICAgLnRodW1iIGltZ3sgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7IH0KICAgIC50aHVtYi5hY3RpdmUgaW1neyBvcGFjaXR5OiAxOyB9CgogICAgLyogU1RBR0U6IGZvcmNlIGZ1bGwgaGVpZ2h0LCBubyBpbm5lciBwYWRkaW5nICovCiAgICAudmlld2VyLXN0YWdlewogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwogICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgIH0KCiAgICAvKiBDb3JlOiBhYnNvbHV0ZSBzdGFja2luZywgMToxIGZyYW1pbmcgZm9yIGFsbCB0aHJlZSAqLwogICAgLnN0YWdlLXN0YWNrewogICAgICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKCiAgICAgIC8qIFZpc2libGUgc2xpdmVyOyBzbWFsbGVyID0+IG1haW4gYmlnZ2VyICovCiAgICAgIC0tcGVlazogY2xhbXAoNDRweCwgN3ZoLCA4MHB4KTsKICAgICAgLS1nYXA6IDRweDsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbXsKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IDAgIWltcG9ydGFudDsKICAgICAgcmlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgdG9wOiBjYWxjKHZhcigtLXBlZWspICsgdmFyKC0tZ2FwKSkgIWltcG9ydGFudDsKICAgICAgYm90dG9tOiBjYWxjKHZhcigtLXBlZWspICsgdmFyKC0tZ2FwKSkgIWltcG9ydGFudDsKCiAgICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50OwoKICAgICAgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlciAhaW1wb3J0YW50OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5tYWluewogICAgICB6LWluZGV4OiAyOwogICAgICBvcGFjaXR5OiAxOwogICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgIHRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAgIC5zdGFnZS1pdGVtLnByZXZpZXd7CiAgICAgIHotaW5kZXg6IDE7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsgICAgICAgICAgICAgICAgLyog0YLQtdC80L3QtdC1ICovCiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7ICAgICAgIC8qINGD0LHQuNGC0Ywg0YHRgtCw0YDRi9C1IDE4dmggKi8KICAgIH0KCiAgICAvKiBTaGlmdCBieSBpdHMgb3duIGZyYW1lIGhlaWdodCArIDRweCBnYXAgc28gb25seSBwZWVrIGlzIHZpc2libGUgKi8KICAgICNzdGFnZVByZXZ7IHRyYW5zZm9ybTogdHJhbnNsYXRlWShjYWxjKC0xMDAlIC0gdmFyKC0tZ2FwKSkpICFpbXBvcnRhbnQ7IH0KICAgICNzdGFnZU5leHR7IHRyYW5zZm9ybTogdHJhbnNsYXRlWShjYWxjKCAxMDAlICsgdmFyKC0tZ2FwKSkpICFpbXBvcnRhbnQ7IH0KCiAgICAvKiBQcmV2L05leHQgYXJlIDIwJSBuYXJyb3dlciB0aGFuIG1haW4gKDEwJSBpbnNldCBmcm9tIGVhY2ggc2lkZSkgKi8KICAgICNzdGFnZVByZXYsICNzdGFnZU5leHR7CiAgICAgIGxlZnQ6IDEwJSAhaW1wb3J0YW50OwogICAgICByaWdodDogMTAlICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50OwogICAgICBtYXgtaGVpZ2h0OiBub25lICFpbXBvcnRhbnQ7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3IC5zdGFnZS1pbWd7CiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgICBvYmplY3QtZml0OiBjb250YWluOwogICAgICBmaWx0ZXI6IG5vbmUgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBEZWxldGUgaW5zaWRlIG1haW4sIDIwcHggaW5zZXQgKi8KICAgICNzdGFnZU1haW57IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgI3ZpZXdlckRlbGV0ZUJ0bnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiAxMDsKICAgIH0KCiAgICAjdmlld2VyQ2xvc2V7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAyMHB4OwogICAgICByaWdodDogMjBweDsKICAgICAgei1pbmRleDogMjA7CiAgICB9CgogIAogICAgLyogQ09VTlRFUiBPVkVSUklERSAqLwogICAgLnZpZXdlci1zdGFnZSAudmlld2VyLWNvdW50ZXJ7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OwogICAgICB0b3A6IDIwcHggIWltcG9ydGFudDsKICAgICAgbGVmdDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogYXV0byAhaW1wb3J0YW50OwogICAgICBib3R0b206IGF1dG8gIWltcG9ydGFudDsKICAgIAogIAogICAgfQogICAgLyogPT09PT0gUEFUQ0ggdjM2OiBzaW5nbGUgY2VudGVyZWQgcGhvdG8sIG1heCBmaWxsIHdpdGggZml4ZWQgaW5zZXRzID09PT09ICovCiAgICAvKiBSaWdodCBzdGFnZSBzaG91bGQgYmUgYSBjbGVhbiB2aWV3cG9ydCAqLwogICAgLnZpZXdlci1zdGFnZXsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBTdGFnZSBzdGFjayBqdXN0IGZpbGxzIHN0YWdlICovCiAgICAjc3RhZ2VTdGFja3sKICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogTWFpbiBwaG90byBmcmFtZTogdG9wL2JvdHRvbSA0cHgsIGxlZnQvcmlnaHQgMjBweCAqLwogICAgI3N0YWdlTWFpbnsKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogNHB4ICFpbXBvcnRhbnQ7CiAgICAgIGJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IHZhcigtLW1haW4tbGVmdCwgMjBweCkgIWltcG9ydGFudDsKICAgICAgcmlnaHQ6IHZhcigtLW1haW4tcmlnaHQsIDIwcHgpICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogUGhvdG86IG1heGltaXplIGFyZWEgd2l0aG91dCBjcm9wcGluZyAoZGVjaXNpb246IGNvbnRhaW4pICovCiAgICAjdmlld2VySW1newogICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIG1heC1oZWlnaHQ6IG5vbmUgIWltcG9ydGFudDsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbiAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIERlbGV0ZSBidXR0b24gc3RheXMgaW5zaWRlIHBob3RvLCAyMHB4IGluc2V0ICovCiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHotaW5kZXg6IDEwICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogQ291bnRlcjogdG9wLWxlZnQgMjBweCAoYWxyZWFkeSksIGtlZXAgYmxhY2sgKi8KICAgIC52aWV3ZXItY291bnRlcnsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IDIwcHggIWltcG9ydGFudDsKICAgICAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICAgICAgei1pbmRleDogMjUgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBDbG9zZSBidXR0b246IHRvcC1yaWdodCAyMHB4ICovCiAgICAjdmlld2VyQ2xvc2V7CiAgICAgIHRvcDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogMjBweCAhaW1wb3J0YW50OwogICAgICB6LWluZGV4OiAzMCAhaW1wb3J0YW50OwogICAgfQoKICAKICAgIC8qID09PT09IFZpZXdlciBhY3Rpb25zIHN0YWNrIChjbG9zZSArIGRlbGV0ZSkgPT09PT0gKi8KICAgIC52aWV3ZXItYWN0aW9uc3sKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogMjBweCAhaW1wb3J0YW50OwogICAgICB6LWluZGV4OiA1MCAhaW1wb3J0YW50OwogICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4gIWltcG9ydGFudDsKICAgICAgZ2FwOiA4cHggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kICFpbXBvcnRhbnQ7CiAgICB9CiAgICAjdmlld2VyQ2xvc2UsCiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogYXV0byAhaW1wb3J0YW50OwogICAgICByaWdodDogYXV0byAhaW1wb3J0YW50OwogICAgICBsZWZ0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGJvdHRvbTogYXV0byAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgIH0KCiAgCgovKiDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPICovCiAgICAgICAgLmFkZGl0aW9uYWwtYmxvY2sgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBnYXA6IDIwcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAuYWRkaXRpb25hbC1pdGVtIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLyogLS0tIHNwYWNpbmcgd2hlbiBjb21tZW50cy9saW5rcyBsaXN0cyBhcmUgZW1wdHkgLS0tCiAgICAgICAgICAg0KLRgNC10LHQvtCy0LDQvdC40LU6INC80LXQttC00YMg0LrQvdC+0L/QutCw0LzQuCAoKykgItCa0L7QvNC80LXQvdGC0LDRgNC40LkiINC4ICLQn9GA0LjQutGA0LXQv9C70ZHQvdC90YvQtSDRgdGB0YvQu9C60LgiINC00L7Qu9C20L3QviDQsdGL0YLRjCAyMHB4LAogICAgICAgICAgINCx0LXQtyDRg9C00LLQvtC10L3QuNGPIDIwKzIwLiDQn9C+0Y3RgtC+0LzRgyDRg9Cx0LjRgNCw0LXQvCDQstC90YPRgtGA0LXQvdC90LjQuSBnYXAg0YMg0YHQtdC60YbQuNC4LCDQutC+0LPQtNCwINGB0L/QuNGB0L7QuiDQv9GD0YHRgtC+0LkuICovCiAgICAgICAgLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSB7IGdhcDogMDsgfQogICAgICAgIC5hZGRpdGlvbmFsLWl0ZW0uaXMtZW1wdHkgLmNvbW1lbnRzLWxpc3QsCiAgICAgICAgLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSAubGlua3MtbGlzdCB7IGRpc3BsYXk6IG5vbmU7IH0KCgogICAgICAgIC5hZGRpdGlvbmFsLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgIH0KCiAgICAgICAgLmFkZGl0aW9uYWwtdGl0bGUgewogICAgICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgICAgICBmb250LWZhbWlseTogIkludGVyIiwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwOwogICAgICAgIH0KCiAgICAgICAgLyog0JXQtNC40L3Ri9C5INGB0YLQuNC70Ywg0LTQu9GPINCy0YHQtdGFINC60L3QvtC/0L7QuiAqLwogICAgICAgIC5hY3Rpb24tYnV0dG9uIHsKICAgICAgICAgICAgd2lkdGg6IHZhcigtLWJ1dHRvbi1zaXplKTsKICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1idXR0b24tc2l6ZSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1yZWd1bGFyKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXNtKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlOwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC5hY3Rpb24tYnV0dG9uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tZ3JheS0xMDApOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWdyYXktNDAwKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgfQoKICAgICAgICAvKiBJY29uIGJ1dHRvbnMgKG5ldyBzcGVjKSAqLwogICAgICAgIC5pY29uLWJ0bnsKICAgICAgICAgICAgd2lkdGg6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtc20pOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1yZWd1bGFyKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC5pY29uLWJ0bjpob3ZlcnsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tZ3JheS0xMDApOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWdyYXktNDAwKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgfQoKICAgICAgICAuaWNvbi1idG4gLmljb257CiAgICAgICAgICAgIHdpZHRoOiAyNHB4OwogICAgICAgICAgICBoZWlnaHQ6IDI0cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC8qIERlZmF1bHQgU1ZHIHNpemUgZm9yIGVkaXQgaWNvbiAqLwogICAgICAgIC5pY29uLWJ0biAuaWNvbiBzdmd7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLyogRWRpdCAocGVuY2lsKSBidXR0b24gKi8KICAgICAgICAuaWNvbi1idG4uZWRpdC1idXR0b257CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgICAgfQoKICAgICAgICAuaWNvbi1idG4uZWRpdC1idXR0b246aG92ZXJ7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyQTJBMkE7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgICAgfQoKICAgICAgICAvKiBVcGxvYWQgKCspIGJ1dHRvbiAqLwogICAgICAgIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjREFEQURBOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgIH0KCiAgICAgICAgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgfQoKICAgICAgICAvKiBQbHVzIFNWRyBzaXplIChzYW1lIGFzIGVkaXQpICovCiAgICAgICAgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQgLmljb24gc3ZnewogICAgICAgICAgICB3aWR0aDogMThweDsKICAgICAgICAgICAgaGVpZ2h0OiAxOHB4OwogICAgICAgIH0KCgogICAgICAgIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG4gewogICAgICAgICAgICBjb2xvcjogdmFyKC0tcmVkLWVycm9yKTsKICAgICAgICB9CgogICAgICAgIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG46aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1yZWQtZXJyb3IpOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXJlZC1lcnJvcik7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC5kZWxldGUtYnV0dG9uOjpiZWZvcmUgeyBjb250ZW50OiBub25lOyB9CiAgICAgICAgLmRlbGV0ZS1idXR0b24gc3Zne3dpZHRoOjE4cHg7aGVpZ2h0OjE4cHg7ZGlzcGxheTpibG9jazt9CgogICAgICAgIC5kb3dubG9hZC1idXR0b24gc3ZnIHsKICAgICAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICB9CgogICAgICAgIC8qINCa0L7QvNC80LXQvdGC0LDRgNC40LkgKi8KICAgICAgICAuY29tbWVudHMtbGlzdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGdhcDogNHB4OyAvKiDQntGC0YHRgtGD0L8g0LzQtdC20LTRgyDQsdC70L7QutCw0LzQuCAqLwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtYmxvY2sgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRjFGMUYxOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgICAgICBnYXA6IDEycHg7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNDBweCk7IC8qINCc0LjQvdC40LzQsNC70YzQvdCw0Y8g0LLRi9GB0L7RgtCwINC60LDQuiDRgyDRgdGB0YvQu9C+0LogKi8KICAgICAgICAKICAgICAgICAgICAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICAgICAgfQoKICAgICAgICAuY29tbWVudC10ZXh0IHsKICAgICAgICAgICAgZm9udDogaW5oZXJpdDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsKCiAgICAgICAgICAgIC8qINC+0YHRgtCw0LLQu9GP0LXQvCDigJzQstC+0LfQtNGD0YXigJ0g0LTQviDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyAqLwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtaW5wdXQgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgZm9udDogaW5oZXJpdDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwoKICAgICAgICAgICAgLyog0LLQstC+0LQg0L/RgNGP0LzQviDigJzQsiDRgdC10YDQvtC8INC60YPQsdC40LrQteKAnSAqLwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgICAgICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICByZXNpemU6IG5vbmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IC8qINGD0LHQuNGA0LDQtdC8INGB0LrRgNC+0LvQuyAqLwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxLjZlbTsKICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwoKICAgICAgICAgICAgLyog0KfRgtC+0LHRiyDQr9C90LTQtdC60YEvQ2hyb21lINC90LUg4oCc0L/QvtC00YLQsNGB0LrQuNCy0LDQu+KAnSDRgNCw0LfQvNC10YDRiyDRgtC10LrRgdGC0LAgKi8KICAgICAgICAgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICAgICAgICB0ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtaW5wdXQ6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICB9CgogICAgICAgIC5jb21tZW50LWlucHV0OmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ncmF5LTUwMCk7CiAgICAgICAgfQoKICAgICAgICAvKiDQodGB0YvQu9C60LggKi8KICAgICAgICAubGlua3MtbGlzdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGdhcDogNHB4OyAvKiDQntGC0YHRgtGD0L8g0LzQtdC20LTRgyDQsdC70L7QutCw0LzQuCAqLwogICAgICAgIH0KCiAgICAgICAgLmxpbmstaXRlbSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI0YxRjFGMTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNDBweCk7CiAgICAgICAgfQoKICAgICAgICAubGluay1pdGVtLmVkaXRpbmd7CiAgICAgICAgICAgIC8qINGE0LjQutGB0LjRgNGD0LXQvCDQstGL0YHQvtGC0YMg0Lgg0LLRi9GA0LDQstC90LjQstCw0L3QuNC1INC40L3Qv9GD0YLQvtCyINC/0L4g0YbQtdC90YLRgNGDICovCiAgICAgICAgfQoKICAgICAgICAKICAgICAgICAubGluay1pbmZvIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIG1pbi13aWR0aDogMDsgLyog0JLQsNC20L3QviDQtNC70Y8g0L7QsdGA0LXQt9C60Lgg0YLQtdC60YHRgtCwICovCiAgICAgICAgfQoKICAgICAgICAubGluay10eXBlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgIGZsZXg6IDAgMCBhdXRvOyAvKiDQv9C+0LrQsNC30YvQstCw0LXQvCDRgtC10LrRgdGCINGC0LjQv9CwINC/0L7Qu9C90L7RgdGC0YzRjiAqLwogICAgICAgIH0KCi8qINCU0LLQvtC10YLQvtGH0LjQtSDQv9C+0YHQu9C1INC90LDQt9Cy0LDQvdC40Y8gKNGC0L7Qu9GM0LrQviDQsiAi0YHQv9C+0LrQvtC50L3QvtC8IiDRgNC10LbQuNC80LUpICovCi5saW5rLWl0ZW06bm90KC5lZGl0aW5nKSAubGluay10eXBlOjphZnRlcnsKICAgICAgICAgICAgY29udGVudDogIjoiOwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDZweDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgfQoKICAgICAgICAubGluay11cmwgewogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgdmFyKC0tZ3JheS00MDApOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgZmxleDogMSAxIGF1dG87ICAgLyog0YHRgdGL0LvQutCwINC30LDQvdC40LzQsNC10YIg0L7RgdGC0LDRgtC+0LogKi8KICAgICAgICAgICAgbWluLXdpZHRoOiAwOyAgICAgIC8qINC/0L7Qt9Cy0L7Qu9GP0LXRgiDRgNC10LDQu9GM0L3QviDRgdC20LjQvNCw0YLRjNGB0Y8gKi8KICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lOyAgIC8qINC90LUg0L7Qs9GA0LDQvdC40YfQuNCy0LDQtdC8IDMwMHB4ICovCiAgICAgICAgfQoKICAgICAgICAubGluay11cmw6aG92ZXIgewogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZ3JheS02MDApOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstZWRpdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBtaW4td2lkdGg6IDA7CiAgICAgICAgCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgfQoKICAgICAgICAubGluay10eXBlLWlucHV0IHsKICAgICAgICAgICAgd2lkdGg6IDEyMHB4OyAvKiDQuNGB0YXQvtC00L3QvtC1INC/0YPRgdGC0L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUgKi8KICAgICAgICAgICAgbWluLXdpZHRoOiAxMjBweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtc20pOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKCiAgICAgICAgICAgIC8qINGH0YLQvtCx0Ysg0L3QtSDRgNCw0YHRgtGP0LPQuNCy0LDQu9C+INC60LDRgNGC0L7Rh9C60YMg0LHQtdGB0LrQvtC90LXRh9C90L4gKi8KICAgICAgICAKICAgICAgICAgICAgZmxleDogMCAwIGF1dG87CiAgICAgICAgICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO30KCiAgICAgICAgLmxpbmstdXJsLWlucHV0IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgbWluLXdpZHRoOiAxNDBweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zbSk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIGhlaWdodDogdmFyKC0tYnRuLXNpemUpOwoKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsKICAgICAgICB9CgogICAgICAgIC5saW5rLXR5cGUtaW5wdXQ6Zm9jdXMsIC5saW5rLXVybC1pbnB1dDpmb2N1cyB7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZ3JheS01MDApOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC8qINCQ0LTQsNC/0YLQuNCy0L3QvtGB0YLRjCAqLwogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkgewogICAgICAgICAgICAuc3BlY3MtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzAwcHgpIHsKICAgICAgICAgICAgLnNwZWNzLWdyaWQgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdXJsIHsKICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgewogICAgICAgICAgICAubGluay1pdGVtIHsKICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstaW5mbyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdXJsIHsKICAgICAgICAgICAgICAgIG1heC13aWR0aDogbm9uZTsKICAgICAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLWVkaXQgewogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLXR5cGUtaW5wdXQgewogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLXVybC1pbnB1dCB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstYWN0aW9ucyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgewogICAgICAgICAgICAuc3BlY3MtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnNlY3Rpb24tY29udGVudCB7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay11cmwgewogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxNTBweDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAovKiA9PT09PSBBVVRPQ09OVEVOVDogYXBwbGllZCBzdHlsZXMgZnJvbSAi0JrQsNGA0YLQvtGH0LrQuCDQutC+0L3RgtC10L3RgiIgPT09PT0gKi8KOnJvb3R7CiAgLS1pbnRlci1yZWd1bGFyOiA0MDA7CiAgLS1pbnRlci1tZWRpdW06IDUwMDsKICAtLWludGVyLXNlbWlib2xkOiA2MDA7CiAgLS1pbnRlci1ib2xkOiA3MDA7CgogIC0tcGFnZS1iZzogI0YxRjFGMTsKCiAgLS13aGl0ZTogI0ZGRkZGRjsKICAtLXRleHQtcHJpbWFyeTogIzFBMUExQTsKICAtLXRleHQtc2Vjb25kYXJ5OiAjNEI1NTYzOwogIC0tdGV4dC10ZXJ0aWFyeTogIzgwODA4MDsKCiAgLS1ib3JkZXI6ICNEOUQ5RDk7CiAgLS1kaXZpZGVyOiAjRDlEOUQ5OwoKICAtLWJ0bi1kYXJrOiAjMUExQTFBOwogIC0tYnRuLWRhcmstaG92ZXI6ICMyQTJCMkU7CgogIC0tYnRuLWRhbmdlcjogI0ZGNEQ1NzsKICAtLWJ0bi1kYW5nZXItaG92ZXI6ICNFNjNCNDU7CgogIC0tc2hhZG93LWNhcmQ6IDAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMDQpLCAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAyKTsKICAtLXNoYWRvdy1mbG9hdDogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMTIpOwoKICAtLXJhZGl1cy1jYXJkOiAyMHB4OwogIC0tcmFkaXVzLWJ0bjogMTBweDsKICAtLXJhZGl1cy1tZDogMTJweDsKCiAgLS1idG4tc2l6ZTogNDJweDsKICAtLWNhcmQtcGFkOiAyMHB4OwoKICAvKiBhbGlhc2VzIHRvIGtlZXAgZXhpc3RpbmcgcnVsZXMgd29ya2luZyAqLwogIC0tZ3JheS0xMDA6IHZhcigtLXBhZ2UtYmcpOwogIC0tZ3JheS0yMDA6IHZhcigtLWJvcmRlcik7CiAgLS1ncmF5LTMwMDogdmFyKC0tYm9yZGVyKTsKICAtLWdyYXktNDAwOiAjRDlEOUQ5OwogIC0tZ3JheS01MDA6IHZhcigtLXRleHQtdGVydGlhcnkpOwogIC0tZ3JheS02MDA6ICM0QjU1NjM7CgogIC0tYm9yZGVyLWxpZ2h0OiB2YXIoLS1ib3JkZXIpOwogIC0tYm9yZGVyLXJlZ3VsYXI6IHZhcigtLWJvcmRlcik7CgogIC0tcmFkaXVzLXNtOiB2YXIoLS1yYWRpdXMtYnRuKTsKICAtLXJhZGl1cy1sZzogdmFyKC0tcmFkaXVzLWNhcmQpOwogIC0tc3BhY2UtdW5pdDogMjBweDsKICAtLWJ1dHRvbi1zaXplOiB2YXIoLS1idG4tc2l6ZSk7CiAgLS1yZWQtZXJyb3I6IHZhcigtLWJ0bi1kYW5nZXIpOwp9Cgpib2R5ewogIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtYmcpOwogIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogIHBhZGRpbmc6IDIwcHg7Cn0KCi5jb2xsYXBzZS1zZWN0aW9uewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5zZWN0aW9uLWhlYWRlcjpob3ZlcnsgYmFja2dyb3VuZDogI0VERURFRDsgfQoKLnNlY3Rpb24taGVhZGVyLXRpdGxlewogIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7Cn0KCi5zZWN0aW9uLWNvbnRlbnR7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXIpOwogIHBhZGRpbmc6IHZhcigtLWNhcmQtcGFkKTsKICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7Cn0KCi8qIEJ1dHRvbnMgKHVuaWZ5IHdpdGggaWNvbi1idG4gbG9vaykgKi8KLmFjdGlvbi1idXR0b257CiAgd2lkdGg6IHZhcigtLWJ0bi1zaXplKTsKICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKICBib3JkZXI6IG5vbmU7CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmspOwogIGNvbG9yOiAjZmZmOwogIGN1cnNvcjogcG9pbnRlcjsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2UsIHRyYW5zZm9ybSAwLjFzIGVhc2U7CiAgcGFkZGluZzogMDsKICBsaW5lLWhlaWdodDogMDsKfQouYWN0aW9uLWJ1dHRvbjpob3ZlcnsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIpOyBjb2xvcjojZmZmOyB9Ci5hY3Rpb24tYnV0dG9uOmFjdGl2ZXsgdHJhbnNmb3JtOiBub25lOyB9CgovKiBJY29ucyBpbnNpZGUgYWN0aW9uIGJ1dHRvbnMgKi8KLmFjdGlvbi1idXR0b24gc3ZnewogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKICBkaXNwbGF5OiBibG9jazsKfQoKLyogUGx1cyBidXR0b25zIGluICLQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPIiAqLwouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWR7CiAgYmFja2dyb3VuZDogI0RBREFEQTsKICBjb2xvcjogIzFBMUExQTsKfQouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgYmFja2dyb3VuZDogI0QyRDJEMjsKICBjb2xvcjogIzFBMUExQTsKfQoKCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG4sCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b257CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlcik7CiAgY29sb3I6ICNmZmY7Cn0KLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ0bjpob3ZlciwKLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTsKICBjb2xvcjogI2ZmZjsKfQoKLyogSW5uZXIgYmxvY2tzICovCi5jb21tZW50LWJsb2NrLAoubGluay1pdGVtewogIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlICovCi5jb21tZW50LWlucHV0LAoubGluay10eXBlLWlucHV0LAoubGluay11cmwtaW5wdXR7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKfQouY29tbWVudC1pbnB1dDpmb2N1cywKLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstdXJsLWlucHV0OmZvY3VzewogIG91dGxpbmU6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKLyogTGluayB1bmRlcmxpbmUgc3R5bGUgY2xvc2VyIHRvIHJlZiAqLwoubGluay11cmx7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoubGluay11cmw6aG92ZXJ7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKfQoKLmtpdC1jYXJkewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogMjBweDsKfQoKCi5raXQtZGl2aWRlcnsKICBoZWlnaHQ6IDFweDsKICBiYWNrZ3JvdW5kOiB2YXIoLS1kaXZpZGVyKTsKfQoKCiAgICAgICAgLyog0YPQvdC40YTQuNC60LDRhtC40Y8g0YLQtdC60YHRgtCwINC60L7QvNC80LXQvdGC0LDRgNC40LXQsiDQuCDRgdGB0YvQu9C+0Log0L/QvtC0INGB0YLQuNC70Ywg0LvQtdC50LHQu9C+0LIgKEludGVyIDE0LzQwMCkgKi8KICAgICAgICAuY29tbWVudC10ZXh0LAogICAgICAgIC5saW5rLXR5cGUgewogICAgICAgICAgICBmb250LWZhbWlseTogSW50ZXIsIHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstdXJsLAogICAgICAgIC5saW5rLXVybDp2aXNpdGVkLAogICAgICAgIC5saW5rLXVybDpob3ZlciwKICAgICAgICAubGluay11cmw6YWN0aXZlLAogICAgICAgIC5saW5rLXVybDpmb2N1cyB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBJbnRlciwgc3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7CiAgICAgICAgfQoKCi8qID09PSBMaW5rIGVkaXQgbW9kZTogc2FtZSB0eXBvZ3JhcGh5L2NvbG9ycyBhcyB2aWV3IG1vZGUsIG5vIHVuZGVybGluZSA9PT0gKi8KLmxpbmstaW5mb3ttaW4td2lkdGg6MDt9Ci5saW5rLXR5cGV7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7ICAgICAvKiDQv9C+0LrQsNC30YvQstCw0LXQvCDQsiDQvtC00L3RgyDRgdGC0YDQvtC60YMgKi8KICBvdmVyZmxvdzogdmlzaWJsZTsgICAgICAgLyog0J3QlSDQvtCx0YDQtdC30LDQtdC8ICovCiAgdGV4dC1vdmVyZmxvdzogY2xpcDsgICAgIC8qINCx0LXQtyDRgtGA0L7QtdGC0L7Rh9C40Y8gKi8KICBtYXgtd2lkdGg6IG5vbmU7ICAgICAgICAgLyog0LHQtdC3INC70LjQvNC40YLQsCDRiNC40YDQuNC90YsgKi8KICBtaW4td2lkdGg6IDA7CiAgZmxleDogMCAwIGF1dG87ICAgICAgICAgIC8qINGI0LjRgNC40L3QsCA9INGB0L7QtNC10YDQttC40LzQvtC1ICovCn0KCi5saW5rLXVybHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7CiAgbWF4LXdpZHRoOiBub25lOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLyogRWRpdGluZyBsYXlvdXQgc3RheXMgYWxpZ25lZCB3aXRoIGJ1dHRvbnMgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLWVkaXR7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogOHB4OwogIGZsZXg6IDE7CiAgbWluLXdpZHRoOiAwOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlOiB3aGl0ZSBibG9ja3MgbGlrZSBpbiBpbmFjdGl2ZSBtb2RlLCBrZWVwIGJ1dHRvbi1oZWlnaHQgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXR5cGUtaW5wdXQsCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwoKICBiYWNrZ3JvdW5kOiAjRkZGRkZGOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgcGFkZGluZzogMCAxMnB4OwoKICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICBsaW5lLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgLSAycHgpOyAvKiBjb21wZW5zYXRlIGJvcmRlciAqLwoKICBvdmVyZmxvdzogaGlkZGVuOwogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay10eXBlLWlucHV0ewogIC8qINGI0LjRgNC40L3RgyDQt9Cw0LTQsNGR0YIgSlMsINC/0L7Qu9C1INGA0LDRgdGC0ZHRgiDQv9C+INC80LXRgNC1INCy0LLQvtC00LAgKi8KICBmbGV4OiAwIDAgYXV0bzsKICB3aWR0aDogMTIwcHg7CiAgbWF4LXdpZHRoOiA2MCU7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZmxleDogMSAxIGF1dG87CiAgbWluLXdpZHRoOiAwOwp9CgoubGluay1pdGVtLmVkaXRpbmcgLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXVybC1pbnB1dDpmb2N1c3sKICBvdXRsaW5lOiBub25lOwogIGJveC1zaGFkb3c6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKCi8qIC0tLSBGSVg6IHJlbW92ZSByb3VuZGVkICJjYXBzdWxlIiBhcm91bmQgY29tbWVudCB0ZXh0YXJlYSBPTkxZIGluIGVkaXQgbW9kZSAtLS0gKi8KLmNvbW1lbnQtYmxvY2suZWRpdGluZyAuY29tbWVudC1pbnB1dHsKICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7Cn0KCjwvc3R5bGU+CjxzdHlsZT4KLyogRm9yY2UgbGluayB1bmRlcmxpbmUgdG8gYmUgYmxhY2sgYW5kIG9ubHkgdW5kZXIgdGhlIHRleHQgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybCwKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybDp2aXNpdGVkLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmhvdmVyLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmFjdGl2ZSB7CiAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICB0ZXh0LWRlY29yYXRpb24tbGluZTogdW5kZXJsaW5lICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjMUExQTFBICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLXRoaWNrbmVzczogZnJvbS1mb250OwogIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMnB4Owp9Cgo8L3N0eWxlPgo8c3R5bGU+Ci8qIFJlc3RvcmUgYnV0dG9uIGNvbG9ycyAob3ZlcnJpZGUgYW55IGdlbmVyaWMgbGluayBjb2xvciBydWxlcykgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi0tdXBsb2FkIHsgYmFja2dyb3VuZDogI0RBREFEQSAhaW1wb3J0YW50OyBjb2xvcjogIzFBMUExQSAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmVkaXQtYnV0dG9uIHsgYmFja2dyb3VuZDogIzFBMUExQSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmRlbGV0ZS1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyKSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSkgIWltcG9ydGFudDsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLXJlZ3VsYXIpICFpbXBvcnRhbnQ7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpICFpbXBvcnRhbnQ7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmctaG92ZXIpICFpbXBvcnRhbnQ7IH0KPC9zdHlsZT4KPHN0eWxlPgovKiA9PT0gQnV0dG9uIGNvbG9yIHN0YW5kYXJkaXphdGlvbiAobWF0Y2ggcGFnZTJfZml4ZWQuaHRtKSA9PT0gKi8KLmljb24tYnRuewogIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlLCAjZmZmKTsKICBib3JkZXI6IG5vbmU7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSwgIzFBMUExQSk7Cn0KLmljb24tYnRuLS1kYXJrewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKSAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7Cn0KLmljb24tYnRuLS1kYXJrOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyLCAjMkEyQjJFKSAhaW1wb3J0YW50Owp9Ci5pY29uLWJ0bi0tZGFuZ2VyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQouaWNvbi1idG4tLWRhbmdlcjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyLCAjRTYzQjQ1KSAhaW1wb3J0YW50Owp9CgovKiBBZGRpdGlvbmFsLWluZm8gaW50ZXJuYWwgYnV0dG9ucyAqLwouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXItaG92ZXIsICNFNjNCNDUpICFpbXBvcnRhbnQ7Cn0KCi8qICJBZGQiIGJ1dHRvbnMgKHBsdXMpIGluIHNlY3Rpb24gaGVhZGVycyDigJQgc2FtZSBhcyAi0JTQvtCx0LDQstC40YLRjCDQutC+0L3RgtC10L3RgiIgKi8KLmFkZC1idG4sIC5hZGQtY29tbWVudC1idG4sIC5hZGQtbGluay1idG4sICNhZGRDb21tZW50QnRuLCAjYWRkTGlua0J0bnsKICBiYWNrZ3JvdW5kOiAjREFEQURBICFpbXBvcnRhbnQ7CiAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQouYWRkLWJ0bjpob3ZlciwgLmFkZC1jb21tZW50LWJ0bjpob3ZlciwgLmFkZC1saW5rLWJ0bjpob3ZlciwgI2FkZENvbW1lbnRCdG46aG92ZXIsICNhZGRMaW5rQnRuOmhvdmVyewogIGJhY2tncm91bmQ6ICNEMkQyRDIgIWltcG9ydGFudDsKfQoKLyogRWRpdCBidXR0b25zIGluc2lkZSBjb250ZW50ICovCi5lZGl0LWJ1dHRvbi5pY29uLWJ0biwgLmVkaXQtYnV0dG9uewogIC8qIGlmIGl0J3MgYSBwbGFpbiBidXR0b24gd2l0aG91dCBtb2RpZmllciBjbGFzcyAqLwogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKTsKICBjb2xvcjogI2ZmZjsKfQouZWRpdC1idXR0b246aG92ZXJ7CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIsICMyQTJCMkUpOwp9Cjwvc3R5bGU+CjxzdHlsZT4KLyogRW5zdXJlIGFkZGl0aW9uYWwtc2VjdGlvbiBidXR0b25zIGZvbGxvdyBwYWdlMl9maXhlZC5odG0gcGFsZXR0ZSAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmljb24tYnRuLS1kYXJrIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmssICMxQTFBMUEpOyBjb2xvcjojZmZmOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLWRhcms6aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyay1ob3ZlciwgIzJBMkIyRSk7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tZGFuZ2VyIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlciwgI0ZGNEQ1Nyk7IGNvbG9yOiNmZmY7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tZGFuZ2VyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlci1ob3ZlciwgI0U2M0I0NSk7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkIHsgYmFja2dyb3VuZDojREFEQURBOyBjb2xvcjojMUExQTFBOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZDpob3ZlciB7IGJhY2tncm91bmQ6I0QyRDJEMjsgfQoKLyogRm9yY2Ugc2VjdGlvbiB0aXRsZXMgYW5kIGNvcm5lcnMgdG8gbWF0Y2ggItCa0L7QvdGC0LXQvdGCIiArIGNvbnRlbnQgY2FyZHMgKi8KI21haW5TcGVjc1NlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojZG9jc1NlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojZmluYW5jZVNlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojYWRkaXRpb25hbEhlYWRlciAuc2VjdGlvbi1oZWFkZXItdGl0bGUgewogIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKSAhaW1wb3J0YW50Owp9CgojbWFpblNwZWNzU2VjdGlvbiwKI2RvY3NTZWN0aW9uLAojZmluYW5jZVNlY3Rpb24sCiNhZGRpdGlvbmFsU2VjdGlvbiB7CiAgYm9yZGVyLXJhZGl1czogMjBweCAhaW1wb3J0YW50OwogIG1hcmdpbjogMCAhaW1wb3J0YW50Owp9CgovKiBBbGlnbiBzZWN0aW9uIGFycm93cyB3aXRoIHRoZSBjb2xsYXBzZSBidXR0b24gcm93ICovCiNtYWluU3BlY3NTZWN0aW9uID4gLnNlY3Rpb24taGVhZGVyLAojZG9jc1NlY3Rpb24gPiAuc2VjdGlvbi1oZWFkZXIsCiNmaW5hbmNlU2VjdGlvbiA+IC5zZWN0aW9uLWhlYWRlciwKI2FkZGl0aW9uYWxIZWFkZXIgewogIHBhZGRpbmctbGVmdDogOXB4ICFpbXBvcnRhbnQ7Cn0KCiNtYWluU3BlY3NTZWN0aW9uID4gLnNlY3Rpb24taGVhZGVyIC5zZWN0aW9uLWhlYWRlci1sZWZ0LAojZG9jc1NlY3Rpb24gPiAuc2VjdGlvbi1oZWFkZXIgLnNlY3Rpb24taGVhZGVyLWxlZnQsCiNmaW5hbmNlU2VjdGlvbiA+IC5zZWN0aW9uLWhlYWRlciAuc2VjdGlvbi1oZWFkZXItbGVmdCwKI2FkZGl0aW9uYWxIZWFkZXIgLnNlY3Rpb24taGVhZGVyLWxlZnQgewogIGdhcDogOXB4ICFpbXBvcnRhbnQ7Cn0KCgovKiBLZWVwIGV4YWN0IDIwcHggc3BhY2luZyBiZXR3ZWVuIHRoZSBmb3VyIHRvcCBzZWN0aW9ucyAqLwoud3JhcCB7CiAgcm93LWdhcDogMjBweCAhaW1wb3J0YW50Owp9CgovKiBNYXRjaCBtdXRlZCBoZWFkZXIgdGV4dCBzdHlsZSAo0JDQtNC80LjQvS/QpNC+0YLQvtCz0YDQsNGEKSBmb3IgcmVxdWVzdGVkIHJpZ2h0LXBhbmVsIHRleHRzICovCi5raXQtdXNlZC1yb3csCi5raXQtZm9vdGVyLAoua2l0LWNhcmQuaXMtdXNlZCAua2l0LWZvb3RlciwKLmFyY2hpdmUtZW1wdHktdGV4dCB7CiAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKICBmb250LXdlaWdodDogNDAwICFpbXBvcnRhbnQ7CiAgY29sb3I6ICM4MDgwODAgIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7CiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbCAhaW1wb3J0YW50OwogIHRleHQtdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KCi8qIEFwcGx5IHNhbWUgbXV0ZWQgc3R5bGUgdG8gY2FyZCBmaWVsZCBsYWJlbHMgKNCc0LDRgNC60LAsINCf0YDQuNCy0L7QtCwg0JPQvtGBLiDQvdC+0LzQtdGALCBldGMuKSAqLwouc3BlYy1sYWJlbCB7CiAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKICBmb250LXdlaWdodDogNDAwICFpbXBvcnRhbnQ7CiAgY29sb3I6ICM4MDgwODAgIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7CiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbCAhaW1wb3J0YW50OwogIHRleHQtdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KCgouYXJjaGl2ZS1lbXB0eS10ZXh0IHsKICBwYWRkaW5nOiA2cHggMnB4Owp9CgovKiBLZWVwIGFjdGlvbiBidXR0b25zIGluc2lkZSBjb21tZW50L2xpbmsgY2FyZHMgZm9yIGFueSB0ZXh0IGxlbmd0aC9zdGF0ZSAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtYmxvY2ssCiNhZGRpdGlvbmFsU2VjdGlvbiAubGluay1pdGVtLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbS5lZGl0aW5nIHsKICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsKICBtaW4taGVpZ2h0OiBjYWxjKHZhcigtLWJ0bi1zaXplKSArIDQwcHgpICFpbXBvcnRhbnQ7Cn0KCi8qIEtlZXAgbGluayBhY3Rpb24gYXQgdG9wLXJpZ2h0IHdoaWxlIHRleHQgc3RheXMgdmVydGljYWxseSBjZW50ZXJlZCAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50OwogIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNTJweCkgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0gLmxpbmstYWN0aW9ucyB7CiAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgdG9wOiAyMHB4OwogIHJpZ2h0OiAyMHB4OwogIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgYWxpZ24tc2VsZjogYXV0byAhaW1wb3J0YW50Owp9CgojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbSAubGluay1pbmZvIHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7CiAgbWluLWhlaWdodDogdmFyKC0tYnRuLXNpemUpOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLyogRWRpdCBtb2RlIGtlZXBzIHJvdyBsYXlvdXQgYW5kIGFjdGlvbiBpbiB0aGUgdG9wLXJpZ2h0IGNvcm5lciAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbS5lZGl0aW5nIHsKICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydCAhaW1wb3J0YW50OwogIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNTJweCkgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0uZWRpdGluZyAubGluay1hY3Rpb25zIHsKICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICB0b3A6IDIwcHg7CiAgcmlnaHQ6IDIwcHg7CiAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICBtYXJnaW46IDAgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0uZWRpdGluZyAubGluay1lZGl0IHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7Cn0KCjwvc3R5bGU+CjxzdHlsZT4KLyogVW5pZmllZCBTVkcgc2l6ZSBmb3IgYWxsIGJ1dHRvbnMgaW4gcmlnaHQtcGFuZWwgaWZyYW1lICovCmJ1dHRvbiBzdmcsCmJ1dHRvbiAuaWNvbiBzdmcgewogIHdpZHRoOiAxOHB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi8qIEVkaXQgYnV0dG9uczogaWNvbiAxcHggc21hbGxlciAqLwpidXR0b25bZGF0YS1hY3Rpb249ImVkaXQiXSBzdmcsCmJ1dHRvbltkYXRhLWFjdGlvbj0iZWRpdCJdIC5pY29uIHN2ZywKYnV0dG9uLmVkaXQtYnV0dG9uIHN2ZywKYnV0dG9uLmVkaXQtYnV0dG9uIC5pY29uIHN2ZywKLmVkaXQtYnV0dG9uIHN2ZywKLmVkaXQtYnV0dG9uIC5pY29uIHN2ZyB7CiAgd2lkdGg6IDE3cHggIWltcG9ydGFudDsKICBoZWlnaHQ6IDE3cHggIWltcG9ydGFudDsKfQo8L3N0eWxlPgo8c3R5bGU+Ci8qIFJlbW92ZSAiYWN0aXZlIiAvIHRhcCBoaWdobGlnaHQgYmFja2dyb3VuZCBvbiBjYXJkcyAo0JrQvtC90YLQtdC90YIgKyDQkNGA0YXQuNCyKSAqLwoua2l0LWNhcmQsCi50aWxlLAouY29sbGFnZS1jZWxsLAoua2l0LWRyYWctaGFuZGxlLAoua2l0LWFjdGlvbnMgYnV0dG9uewogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5raXQtY2FyZDpmb2N1cywKLmtpdC1jYXJkOmZvY3VzLXdpdGhpbiwKLmtpdC1jYXJkOmFjdGl2ZXsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7CiAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9CgovKiBLZWVwIGNhcmQgYmFja2dyb3VuZHMgc3RhYmxlIHdoZW4gaW50ZXJhY3RlZCB3aXRoICovCi5raXQtY2FyZDphY3RpdmV7IGJhY2tncm91bmQ6IHZhcigtLXdoaXRlLCAjZmZmKSAhaW1wb3J0YW50OyB9Ci5raXQtY2FyZC5pcy11c2VkOmFjdGl2ZXsgYmFja2dyb3VuZDogdmFyKC0tdXNlZC1iZywgI0QxRURERCkgIWltcG9ydGFudDsgfQoKLyogQWxzbyBraWxsIGFueSBmb2N1cyByaW5nIGNhdXNlZCBieSBjbGlja2FibGUgY2hpbGRyZW4gKi8KLmtpdC1jYXJkICo6Zm9jdXN7IG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsgfQo8L3N0eWxlPgo8c3R5bGU+Ci8qID09PSBLaWxsIG1vYmlsZSB0YXAvYWN0aXZlIGhpZ2hsaWdodCBvbiBBTEwgY2xpY2thYmxlIGNlbGxzIGluc2lkZSDQmtC+0L3RgtC10L3Rgi/QkNGA0YXQuNCyID09PSAqLwoua2l0cywgLmtpdHMgKnsKICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi50aWxlLCAuY29sbGFnZS1jZWxsLCAua2l0LXRpdGxlLCAua2l0LWNoZWNrLCAua2l0LWRyYWctaGFuZGxlewogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7Cn0KCi8qIFByZXZlbnQgYW55IFVBIGFjdGl2ZSBiYWNrZ3JvdW5kIGZsYXNoICovCi50aWxlOmFjdGl2ZSwKLmNvbGxhZ2UtY2VsbDphY3RpdmUsCi5raXQtdGl0bGU6YWN0aXZlLAoua2l0LWNoZWNrOmFjdGl2ZXsKICBiYWNrZ3JvdW5kOiBpbmhlcml0ICFpbXBvcnRhbnQ7Cn0KCi8qIElmIHNvbWV0aGluZyBhcHBsaWVzIGEgdHJhbnNsdWNlbnQgb3ZlcmxheSB2aWEgYmFja2dyb3VuZC1jb2xvciwgbmV1dHJhbGl6ZSBpdCAqLwoudGlsZS5pcy1waG90bzphY3RpdmU6OmFmdGVyLAouY29sbGFnZS1jZWxsLmlzLXBob3RvOmFjdGl2ZTo6YWZ0ZXJ7CiAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjI1KTsgLyogc2FtZSBhcyBob3Zlciwgbm8gZXh0cmEgZmxhc2ggKi8KfQo8L3N0eWxlPgo8c3R5bGU+Ci8qINCa0L7QvdGC0LXQvdGCICsg0JDRgNGF0LjQsjogdGhlc2UgYXJlIHBsYWluIGhlYWRlcnMsIHNob3VsZCBOT1QgaW5oZXJpdCBjb2xsYXBzZS1zZWN0aW9uIGhlYWRlciBob3Zlci9iYWNrZ3JvdW5kL3BhZGRpbmcgKi8KLndyYXAgPiAuc2VjdGlvbi1oZWFkZXJ7CiAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50OwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KLndyYXAgPiAuc2VjdGlvbi1oZWFkZXI6aG92ZXIsCi53cmFwID4gLnNlY3Rpb24taGVhZGVyOmFjdGl2ZSwKLndyYXAgPiAuc2VjdGlvbi1oZWFkZXI6Zm9jdXMsCi53cmFwID4gLnNlY3Rpb24taGVhZGVyOmZvY3VzLXdpdGhpbnsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7Cn0KPC9zdHlsZT4KPHN0eWxlPgogIGh0bWwsYm9keXtoZWlnaHQ6MTAwJTt9CiAgYm9keXttYXJnaW46MDsgcGFkZGluZzoyMHB4OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDt9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxkaXYgY2xhc3M9IndyYXAiIGRhdGEtcm9sZT0icmlnaHQtaW5uZXItd3JhcCI+CiAgICA8IS0tINCa0LDRgNGC0L7Rh9C60LAg0LDQstGC0L7QvNC+0LHQuNC70Y8g0Lgg0YHQstC+0YDQsNGH0LjQstCw0LXQvNGL0LUg0YHQtdC60YbQuNC4IC0tPgogICAgPGRpdiBjbGFzcz0iY2FyLWNhcmQtdGl0bGUiIGlkPSJjYXJkVGl0bGUiIGRhdGEtcm9sZT0icmlnaHQtY2FyZC10aXRsZSI+0JrQsNGA0YLQvtGH0LrQsCDQsNCy0YLQvtC80L7QsdC40LvRjzwvZGl2PgoKICAgIDwhLS0g0JHQm9Ce0JogMTog0J7RgdC90L7QstC90YvQtSDRhdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutC4IC0tPgogICAgPGRpdiBjbGFzcz0iY29sbGFwc2Utc2VjdGlvbiIgaWQ9Im1haW5TcGVjc1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1zcGVjcyI+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIiBpZD0ibWFpblNwZWNzSGVhZGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlci1sZWZ0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb2xsYXBzZS1pY29uIiBpZD0ibWFpblNwZWNzSWNvbiI+CiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItdGl0bGUiPtCe0YHQvdC+0LLQvdGL0LUg0YXQsNGA0LDQutGC0LXRgNC40YHRgtC40LrQuDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tY29udGVudCBjb2xsYXBzZWQiIGlkPSJtYWluU3BlY3NDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tc3BlY3MtY29udGVudCI+CiAgICAgICAgPGRpdiBjbGFzcz0ic3BlY3MtZ3JpZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JzQsNGA0LrQsDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImJyYW5kIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QnNC+0LTQtdC70Yw8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJtb2RlbCI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JPQvtC0INCy0YvQv9GD0YHQutCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ieWVhciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KbQstC10YI8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJjb2xvciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JTQstC40LPQsNGC0LXQu9GMPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iZnVlbFR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCe0LHRitC10Lw8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJlbmdpbmVWb2x1bWUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCbLtChLjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImhvcnNlcG93ZXIiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCa0J/Qnzwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImdlYXJib3giPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCf0YDQuNCy0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImRyaXZlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9GA0L7QsdC10LM8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJtaWxlYWdlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QmtGD0LfQvtCyPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iYm9keVR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCi0LjQvyDRgdCw0LvQvtC90LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJpbnRlcmlvclR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCh0L7QsdGB0YLQstC10L3QvdC40Lo8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJvd25lcnMiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCo0L7Rg9GA0YPQvDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InNob3dyb29tIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QnNC10L3QtdC00LbQtdGAPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ibWFuYWdlciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSDQkdCb0J7QmiAyOiDQlNC+0LrRg9C80LXQvdGC0Ysg0Lgg0YDQtdCz0LjRgdGC0YDQsNGG0LjRjyAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbGxhcHNlLXNlY3Rpb24iIGlkPSJkb2NzU2VjdGlvbiIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLWRvY3MiPgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9ImRvY3NIZWFkZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyLWxlZnQiPgogICAgICAgICAgPHNwYW4gY2xhc3M9ImNvbGxhcHNlLWljb24iIGlkPSJkb2NzSWNvbiI+CiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItdGl0bGUiPtCU0L7QutGD0LzQtdC90YLRiyDQuCDRgNC10LPQuNGB0YLRgNCw0YbQuNGPPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1jb250ZW50IGNvbGxhcHNlZCIgaWQ9ImRvY3NDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tZG9jcy1jb250ZW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjcy1ncmlkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj5WSU48L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJ2aW4iPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCT0L7RgS4g0L3QvtC80LXRgDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9Imdvdk51bWJlciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KHQotChPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iY3RzIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9Ci0KE8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJwdHNUeXBlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QrtGALiDQu9C40YbQvjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImxlZ2FsRW50aXR5Ij7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QndCwINGD0YfQtdGC0LU8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJyZWdpc3RlcmVkIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9GA0LjRhdC+0LQ8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJhcnJpdmFsRGF0ZSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JIg0L/RgNC+0LTQsNC20LU8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJmb3JTYWxlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QodC10YDQstC40YHQvdCw0Y8g0LrQvdC40LbQutCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ic2VydmljZUJvb2siPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0g0JHQm9Ce0JogMzog0KTQuNC90LDQvdGB0Ysg0Lgg0YDQsNGB0YXQvtC00YsgLS0+CiAgICA8ZGl2IGNsYXNzPSJjb2xsYXBzZS1zZWN0aW9uIiBpZD0iZmluYW5jZVNlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1maW5hbmNlIj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiIGlkPSJmaW5hbmNlSGVhZGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlci1sZWZ0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb2xsYXBzZS1pY29uIiBpZD0iZmluYW5jZUljb24iPgogICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC4wNjEgMTkuMDYxTDE3LjEyMSAxMmwtNy4wNi03LjA2MWwtMi4xMjIgMi4xMjJMMTIuODc5IDEybC00Ljk0IDQuOTM5eiIgZmlsbD0iY3VycmVudENvbG9yIi8+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9InNlY3Rpb24taGVhZGVyLXRpdGxlIj7QpNC40L3QsNC90YHRiyDQuCDRgNCw0YHRhdC+0LTRizwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tY29udGVudCBjb2xsYXBzZWQiIGlkPSJmaW5hbmNlQ29udGVudCIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLWZpbmFuY2UtY29udGVudCI+CiAgICAgICAgPGRpdiBjbGFzcz0ic3BlY3MtZ3JpZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JfQsNGF0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImVudHJ5UHJpY2UiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JfQsNGF0L7QtCDRgSDRgNCw0YHRhdC+0LTQsNC80Lg8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJlbnRyeVdpdGhFeHBlbnNlcyIgZGF0YS1mb3JtYXQ9ImN1cnJlbmN5Ij7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QoNC10LzQvtC90YI8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJyZXBhaXJDb3N0IiBkYXRhLWZvcm1hdD0iY3VycmVuY3kiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCf0YDQvtC00LDQttCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ic2FsZVByaWNlIiBkYXRhLWZvcm1hdD0iY3VycmVuY3kiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCQ0LLRgtC+0LLQvtC3PC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iY2FycmllckNvc3QiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KHQvdGP0YLQuNC1INGBINGD0YfQtdGC0LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJkZXJlZ2lzdHJhdGlvbkNvc3QiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSDQkdCb0J7QmiA0OiDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPIC0tPgogICAgPGRpdiBjbGFzcz0iY29sbGFwc2Utc2VjdGlvbiIgaWQ9ImFkZGl0aW9uYWxTZWN0aW9uIiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tYWRkaXRpb25hbCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9ImFkZGl0aW9uYWxIZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyLWxlZnQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iY29sbGFwc2UtaWNvbiIgaWQ9ImFkZGl0aW9uYWxJY29uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWN0aW9uLWhlYWRlci10aXRsZSI+0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1jb250ZW50IiBjb2xsYXBzZWQgaWQ9ImFkZGl0aW9uYWxDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tYWRkaXRpb25hbC1jb250ZW50Ij4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWJsb2NrIj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDQmtC+0LzQvNC10L3RgtCw0YDQuNC4IC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWl0ZW0iIGlkPSJjb21tZW50c1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtY29tbWVudHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWRkaXRpb25hbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZGRpdGlvbmFsLXRpdGxlIj7QmtC+0LzQvNC10L3RgtCw0YDQuNC5PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS11cGxvYWQgYWRkLWJ1dHRvbiIgaWQ9ImFkZENvbW1lbnRCdG4iIHRpdGxlPSLQlNC+0LHQsNCy0LjRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40LkiIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuSI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTFoLTZWNWgtMnY2SDV2Mmg2djZoMnYtNmg2eiIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudHMtbGlzdCIgaWQ9ImNvbW1lbnRzTGlzdCIgZGF0YS1yb2xlPSJyaWdodC1jb21tZW50cy1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0g0J/RgNC40LrRgNC10L/Qu9GR0L3QvdGL0LUg0YHRgdGL0LvQutC4IC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWl0ZW0iIGlkPSJsaW5rc1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtbGlua3MiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWRkaXRpb25hbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZGRpdGlvbmFsLXRpdGxlIj7Qn9GA0LjQutGA0LXQv9C70ZHQvdC90YvQtSDRgdGB0YvQu9C60Lg8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLXVwbG9hZCBhZGQtYnV0dG9uIiBpZD0iYWRkTGlua0J0biIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0YHRgdGL0LvQutGDIiBhcmlhLWxhYmVsPSLQlNC+0LHQsNCy0LjRgtGMINGB0YHRi9C70LrRgyI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTFoLTZWNWgtMnY2SDV2Mmg2djZoMnYtNmg2eiIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGlua3MtbGlzdCIgaWQ9ImxpbmtzTGlzdCIgZGF0YS1yb2xlPSJyaWdodC1saW5rcy1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiIGRhdGEtcm9sZT0icmlnaHQtY29udGVudC1oZWFkZXIiIHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4OyI+0JrQvtC90YLQtdC90YI8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tdXBsb2FkIiBpZD0iYWRkS2l0QnRuIiBkYXRhLXJvbGU9InJpZ2h0LWNvbnRlbnQtYWRkLWJ0biIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC90YLQtdC90YIiIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC90YLQtdC90YIiPjxzcGFuIGNsYXNzPSJpY29uIiBpZD0ic3ZnUGx1c0J0biI+PC9zcGFuPjwvYnV0dG9uPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWFjdGlvbnMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImtpdHMiIGlkPSJraXRzIiBkYXRhLXJvbGU9InJpZ2h0LWNvbnRlbnQta2l0cyI+PC9kaXY+CgogICAgPCEtLSDQkNGA0YXQuNCyIC0tPgogICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiIGRhdGEtcm9sZT0icmlnaHQtYXJjaGl2ZS1oZWFkZXIiIHN0eWxlPSJtYXJnaW4tdG9wOiA0cHg7Ij4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+0JDRgNGF0LjQsjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWFjdGlvbnMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImtpdHMiIGlkPSJhcmNoaXZlS2l0cyIgZGF0YS1yb2xlPSJyaWdodC1hcmNoaXZlLWtpdHMiPjwvZGl2PgoKICA8L2Rpdj4KCiAgPCEtLSBWaWV3ZXIgLS0+CiAgPGRpdiBjbGFzcz0idmlld2VyLWJhY2tkcm9wIiBpZD0idmlld2VyQmFja2Ryb3AiIGRhdGEtcm9sZT0icmlnaHQtdmlld2VyIiBhcmlhLWhpZGRlbj0idHJ1ZSIgdGFiaW5kZXg9Ii0xIj4KICAgIDxkaXYgY2xhc3M9InZpZXdlciIgcm9sZT0iZGlhbG9nIiBhcmlhLW1vZGFsPSJ0cnVlIiBhcmlhLWxhYmVsPSLQn9GA0L7RgdC80L7RgtGAINGE0L7RgtC+Ij4KICAgICAgPGRpdiBjbGFzcz0idmlld2VyLXJhaWwiPgogICAgICAgIDxidXR0b24gY2xhc3M9InJhaWwtYnRuIiBpZD0icmFpbFVwIiBhcmlhLWxhYmVsPSLQn9GA0L7QutGA0YPRgtC40YLRjCDQstCy0LXRgNGFIj4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTcuNDEgMTUuNDEgMTIgMTAuODNsNC41OSA0LjU4TDE4IDE0bC02LTYtNiA2eiIvPjwvc3ZnPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9InZpZXdlci10aHVtYnMiIGlkPSJ2aWV3ZXJUaHVtYnMiPjwvZGl2PgogICAgICAgIDxidXR0b24gY2xhc3M9InJhaWwtYnRuIiBpZD0icmFpbERvd24iIGFyaWEtbGFiZWw9ItCf0YDQvtC60YDRg9GC0LjRgtGMINCy0L3QuNC3Ij4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0ibTcuNDEgOC41OSA0LjU5IDQuNTggNC41OS00LjU4TDE4IDEwbC02IDYtNi02eiIvPjwvc3ZnPgogICAgICAgIDwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIAogICAgICA8ZGl2IGNsYXNzPSJ2aWV3ZXItc3RhZ2UiIGlkPSJ2aWV3ZXJTdGFnZSI+CiAgICAgICAgPGRpdiBjbGFzcz0idmlld2VyLWNvdW50ZXIiIGlkPSJ2aWV3ZXJDb3VudGVyIj4wLzA8L2Rpdj4KPGRpdiBjbGFzcz0idmlld2VyLWFjdGlvbnMiIGlkPSJ2aWV3ZXJBY3Rpb25zIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgaWQ9InZpZXdlckNsb3NlIiBhcmlhLWxhYmVsPSLQl9Cw0LrRgNGL0YLRjCI+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiByb3RhdGUtNDUiIGlkPSJzdmdDbG9zZSI+PC9zcGFuPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYW5nZXIiIGlkPSJ2aWV3ZXJEZWxldGVCdG4iIHRpdGxlPSLQo9C00LDQu9C40YLRjCDRhNC+0YLQviIgYXJpYS1sYWJlbD0i0KPQtNCw0LvQuNGC0Ywg0YTQvtGC0L4iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiIgaWQ9InN2Z1RyYXNoVmlld2VyIj48L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAKICAgICAgPC9kaXY+Cgo8ZGl2IGNsYXNzPSJzdGFnZS1zdGFjayIgaWQ9InN0YWdlU3RhY2siPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhZ2UtaXRlbSBtYWluIiBpZD0ic3RhZ2VNYWluIj4KPGltZyBjbGFzcz0ic3RhZ2UtaW1nIiBpZD0idmlld2VySW1nIiBhbHQ9ItCk0L7RgtC+INCw0LLRgtC+0LzQvtCx0LjQu9GPIj4KICAgICAgICAgIDwvZGl2Pgo8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJmaWxlSW5wdXQiIGFjY2VwdD0iaW1hZ2UvKiIgbXVsdGlwbGUgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIC8+CgogIDxzY3JpcHQ+CiAgICAvKiA9PT09PSBTVkcgSUNPTlMgKHByb3ZpZGVkKSA9PT09PSAqLwogICAgY29uc3QgU1ZHX0RPV05MT0FEID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNiAxOGgxMnYySDZ6bTUtMTR2OC41ODZMNi43MDcgOC4yOTNMNS4yOTMgOS43MDdMMTIgMTYuNDE0bDYuNzA3LTYuNzA3bC0xLjQxNC0xLjQxNEwxMyAxMi41ODZWNHoiLz48L3N2Zz5gOwogICAgY29uc3QgU1ZHX1RSQVNIID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNSAyMGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWOGgyVjZoLTRWNGEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYySDN2Mmgyek05IDRoNnYySDl6TTggOGg5djEySDdWOHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDEwaDJ2OEg5em00IDBoMnY4aC0yeiIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfUExVUyA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE5IDExaC02VjVoLTJ2Nkg1djJoNnY2aDJ2LTZoNnoiLz48L3N2Zz5gOwogICAgY29uc3QgU1ZHX0lNQUdFX0FERCA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjx0aXRsZT5JbWFnZS1hZGQgU1ZHIEljb248L3RpdGxlPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTQgNWgxM3Y3aDJWNWMwLTEuMTAzLS44OTctMi0yLTJINGMtMS4xMDMgMC0yIC44OTctMiAydjEyYzAgMS4xMDMuODk3IDIgMiAyaDh2LTJINHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Im04IDExbC0zIDRoMTFsLTQtNmwtMyA0eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE5IDE0aC0ydjNoLTN2MmgzdjNoMnYtM2gzdi0yaC0zeiIvPjwvc3ZnPmA7CiAgICAvLyB1c2VyJ3MgbmV3IGVkaXQgaWNvbgogICAgY29uc3QgU1ZHX0VESVQgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfQ0hFQ0sgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNOSAxNi4yIDQuOCAxMmwtMS40IDEuNEw5IDE5IDIxIDdsLTEuNC0xLjR6Ii8+PC9zdmc+YDsKICAgIGNvbnN0IFNWR19SRVNUT1JFID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTAgMTFoNnY3aDJ2LThhMSAxIDAgMCAwLTEtMWgtN1Y2bC01IDRsNSA0eiIvPjwvc3ZnPmA7CgogICAgLy8gbW91bnQgaWNvbnMKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdmdQbHVzQnRuJykuaW5uZXJIVE1MID0gU1ZHX1BMVVM7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnVHJhc2hWaWV3ZXInKS5pbm5lckhUTUwgPSBTVkdfVFJBU0g7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnQ2xvc2UnKS5pbm5lckhUTUwgPSBTVkdfUExVUzsKCgogICAgLyogPT09PT0gSEVMUEVSUyA9PT09PSAqLwogICAgZnVuY3Rpb24gdWlkKCl7CiAgICAgIGlmICh3aW5kb3cuY3J5cHRvICYmIGNyeXB0by5yYW5kb21VVUlEKSByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTsKICAgICAgcmV0dXJuICdpZF8nICsgRGF0ZS5ub3coKS50b1N0cmluZygzNikgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYWQyKG4peyByZXR1cm4gU3RyaW5nKG4pLnBhZFN0YXJ0KDIsJzAnKTsgfQogICAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkKXsKICAgICAgLy8gZGQubW0ueXl5eQogICAgICBjb25zdCBkYXkgPSBwYWQyKGQuZ2V0RGF0ZSgpKTsKICAgICAgY29uc3QgbW9uID0gcGFkMihkLmdldE1vbnRoKCkrMSk7CiAgICAgIGNvbnN0IHlyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICByZXR1cm4gYCR7ZGF5fS4ke21vbn0uJHt5cn1gOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGQpewogICAgICAvLyBkZC5tbS55eXl5IEhIOk1NICjQsdC10Lcg0YHQtdC60YPQvdC0KQogICAgICBjb25zdCBkYXkgPSBwYWQyKGQuZ2V0RGF0ZSgpKTsKICAgICAgY29uc3QgbW9uID0gcGFkMihkLmdldE1vbnRoKCkrMSk7CiAgICAgIGNvbnN0IHlyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBoaCA9IHBhZDIoZC5nZXRIb3VycygpKTsKICAgICAgY29uc3QgbW0gPSBwYWQyKGQuZ2V0TWludXRlcygpKTsKICAgICAgcmV0dXJuIGAke2RheX0uJHttb259LiR7eXJ9ICR7aGh9OiR7bW19YDsKICAgIH0KCgogICAgZnVuY3Rpb24gY3JlYXRlS2l0KCl7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgIHRpdGxlOiAn0J3QvtCy0YvQuSDQutC+0L3RgtC10L3RgicsCiAgICAgICAgcGhvdG9zOiBbXSwKICAgICAgICB1c2VkOiBmYWxzZSwKICAgICAgICB1c2VkRGF0ZTogbnVsbCwKICAgICAgICBjcmVhdGVkQXQ6IG51bGwKICAgICAgfTsKICAgIH0KCgogICAgLyogPT09PT0gU1RBVEUgPT09PT0gKi8KICAgIGNvbnN0IGtpdHNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdraXRzJyk7CiAgICBjb25zdCBhcmNoaXZlS2l0c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hpdmVLaXRzJyk7CiAgICBjb25zdCBhZGRLaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkS2l0QnRuJyk7CiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7CgogICAgLy8gVmlld2VyCiAgICBjb25zdCB2aWV3ZXJCYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJCYWNrZHJvcCcpOwogICAgY29uc3Qgdmlld2VyVGh1bWJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlclRodW1icycpOwogICAgY29uc3Qgdmlld2VySW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckltZycpOwpjb25zdCBzdGFnZVN0YWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YWdlU3RhY2snKTsKICAgIGNvbnN0IHZpZXdlckNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckNsb3NlJyk7CmNvbnN0IHZpZXdlckNvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyQ291bnRlcicpOwogICAgY29uc3Qgdmlld2VyRGVsZXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckRlbGV0ZUJ0bicpOwogICAgY29uc3QgcmFpbFVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhaWxVcCcpOwogICAgY29uc3QgcmFpbERvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFpbERvd24nKTsKCiAgICBsZXQga2l0cyA9IFtjcmVhdGVLaXQoKV07CiAgICBsZXQgYXJjaGl2ZWRLaXRzID0gW107CiAgICBsZXQgY3VycmVudENhclZpbiA9IG51bGw7CiAgICBsZXQgY3VycmVudFVzZXJSb2xlID0gJyc7CgogICAgZnVuY3Rpb24gc2VyaWFsaXplTWFpbktpdHMoKXsKICAgICAgcmV0dXJuIGtpdHMubWFwKGZ1bmN0aW9uKGtpdCwgaW5kZXgpewogICAgICAgIGNvbnN0IHBob3RvcyA9IChraXQucGhvdG9zIHx8IFtdKS5tYXAoZnVuY3Rpb24ocGhvdG8peyByZXR1cm4gcGhvdG8gJiYgcGhvdG8uc3JjOyB9KS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBraXQuaWQsCiAgICAgICAgICBvcmRlcjogaW5kZXgsCiAgICAgICAgICBjcmVhdGVkQXQ6IGtpdC5jcmVhdGVkQXQgfHwgbnVsbCwKICAgICAgICAgIHVzZWQ6ICEha2l0LnVzZWQsCiAgICAgICAgICBwaG90b3M6IHBob3RvcwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIG5vdGlmeUNhclBob3Rvc1VwZGF0ZWQoKXsKICAgICAgaWYgKCFjdXJyZW50Q2FyVmluKSByZXR1cm47CiAgICAgIGNvbnN0IHNlcmlhbGl6ZWRLaXRzID0gc2VyaWFsaXplTWFpbktpdHMoKTsKICAgICAgY29uc3QgZmlyc3RLaXRQaG90b3MgPSBzZXJpYWxpemVkS2l0c1swXSAmJiBBcnJheS5pc0FycmF5KHNlcmlhbGl6ZWRLaXRzWzBdLnBob3RvcykgPyBzZXJpYWxpemVkS2l0c1swXS5waG90b3MgOiBbXTsKICAgICAgY29uc3QgbG9hZGVkS2l0c0NvdW50ID0gc2VyaWFsaXplZEtpdHMuZmlsdGVyKGZ1bmN0aW9uKGtpdCl7IHJldHVybiBBcnJheS5pc0FycmF5KGtpdC5waG90b3MpICYmIGtpdC5waG90b3MubGVuZ3RoID4gMDsgfSkubGVuZ3RoOwogICAgICBjb25zdCB1c2VkS2l0c0NvdW50ID0gc2VyaWFsaXplZEtpdHMuZmlsdGVyKGZ1bmN0aW9uKGtpdCl7IHJldHVybiAhIWtpdC51c2VkOyB9KS5sZW5ndGg7CiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdjYXJfcGhvdG9zX3VwZGF0ZScsCiAgICAgICAgdmluOiBjdXJyZW50Q2FyVmluLAogICAgICAgIGtpdHM6IHNlcmlhbGl6ZWRLaXRzLAogICAgICAgIHBob3RvczogZmlyc3RLaXRQaG90b3MsCiAgICAgICAgcGhvdG9zQ291bnQ6IGxvYWRlZEtpdHNDb3VudCwKICAgICAgICB0b3RhbFBob3Rvczogc2VyaWFsaXplZEtpdHMubGVuZ3RoLAogICAgICAgIHVzZWRDb3VudDogdXNlZEtpdHNDb3VudAogICAgICB9LCAnKicpOwogICAgfQoKICAgIC8vIG1pc3Npbmcgc3RhdGUgdmFycwogICAgbGV0IGFjdGl2ZUVkaXRLaXRJZCA9IG51bGw7CiAgICBsZXQgdmlld2VyS2l0SWQgPSBudWxsOwogICAgbGV0IHZpZXdlckluZGV4ID0gMDsKICAgIGxldCB2aWV3ZXJDYW5EZWxldGUgPSBmYWxzZTsKCiAgICBmdW5jdGlvbiBnZXRLaXRCeUlkKGtpdElkKXsKICAgICAgcmV0dXJuIGtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpIHx8IGFyY2hpdmVkS2l0cy5maW5kKGs9PmsuaWQ9PT1raXRJZCkgfHwgbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0tpdEluTWFpbihraXRJZCl7CiAgICAgIHJldHVybiBraXRzLnNvbWUoaz0+ay5pZD09PWtpdElkKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0T25seU9uZUVkaXQoa2l0SWQpewogICAgICBhY3RpdmVFZGl0S2l0SWQgPSBraXRJZDsKICAgICAgcmVuZGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZXhpdEVkaXQoKXsKICAgICAgYWN0aXZlRWRpdEtpdElkID0gbnVsbDsKICAgICAgcmVuZGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNFZGl0KGtpdElkKXsgcmV0dXJuIGFjdGl2ZUVkaXRLaXRJZCA9PT0ga2l0SWQ7IH0KCiAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHN0cil7CiAgICAgIHJldHVybiBTdHJpbmcoc3RyKQogICAgICAgIC5yZXBsYWNlQWxsKCcmJywnJmFtcDsnKQogICAgICAgIC5yZXBsYWNlQWxsKCc8JywnJmx0OycpCiAgICAgICAgLnJlcGxhY2VBbGwoJz4nLCcmZ3Q7JykKICAgICAgICAucmVwbGFjZUFsbCgnIicsJyZxdW90OycpCiAgICAgICAgLnJlcGxhY2VBbGwoIiciLCcmIzAzOTsnKTsKICAgIH0KCiAgICAKICAgIC8vIC0tLSBaSVAgZG93bmxvYWQgKG5vIGV4dGVybmFsIGxpYnMpLiBTdG9yZWQgbWV0aG9kIChubyBjb21wcmVzc2lvbikgLS0tCiAgICBmdW5jdGlvbiBzYW5pdGl6ZUZpbGVOYW1lKG5hbWUpewogICAgICByZXR1cm4gKG5hbWUgfHwgJ2NvbnRlbnQnKQogICAgICAgIC50b1N0cmluZygpCiAgICAgICAgLnRyaW0oKQogICAgICAgIC5yZXBsYWNlKC9bXC9cXDoqPyI8PnxdKy9nLCAnXycpCiAgICAgICAgLnJlcGxhY2UoL1xzKy9nLCAnICcpCiAgICAgICAgLnNsaWNlKDAsIDgwKSB8fCAnY29udGVudCc7CiAgICB9CgogICAgZnVuY3Rpb24gZGF0YVVybFRvQmxvYih1cmwpewogICAgICAvLyBmZXRjaCB3b3JrcyBmb3IgZGF0YTogVVJMcyBhbmQgYmxvYjogVVJMcwogICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKHIgPT4gci5ibG9iKCkpOwogICAgfQoKICAgIC8vIENSQzMyIGZvciBaSVAKICAgIGNvbnN0IF9jcmNUYWJsZSA9ICgoKSA9PiB7CiAgICAgIGNvbnN0IHRhYmxlID0gbmV3IFVpbnQzMkFycmF5KDI1Nik7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspewogICAgICAgIGxldCBjID0gaTsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDg7IGsrKyl7CiAgICAgICAgICBjID0gKGMgJiAxKSA/ICgweEVEQjg4MzIwIF4gKGMgPj4+IDEpKSA6IChjID4+PiAxKTsKICAgICAgICB9CiAgICAgICAgdGFibGVbaV0gPSBjID4+PiAwOwogICAgICB9CiAgICAgIHJldHVybiB0YWJsZTsKICAgIH0pKCk7CgogICAgZnVuY3Rpb24gY3JjMzIoYnVmKXsKICAgICAgbGV0IGMgPSAweEZGRkZGRkZGOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7IGkrKyl7CiAgICAgICAgYyA9IF9jcmNUYWJsZVsoYyBeIGJ1ZltpXSkgJiAweEZGXSBeIChjID4+PiA4KTsKICAgICAgfQogICAgICByZXR1cm4gKGMgXiAweEZGRkZGRkZGKSA+Pj4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiB1MTYobil7IHJldHVybiBuZXcgVWludDhBcnJheShbbiAmIDI1NSwgKG4gPj4+IDgpICYgMjU1XSk7IH0KICAgIGZ1bmN0aW9uIHUzMihuKXsgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtuICYgMjU1LCAobiA+Pj4gOCkgJiAyNTUsIChuID4+PiAxNikgJiAyNTUsIChuID4+PiAyNCkgJiAyNTVdKTsgfQoKICAgIGZ1bmN0aW9uIGNvbmNhdFVpbnQ4KGFycmF5cyl7CiAgICAgIGNvbnN0IHRvdGFsID0gYXJyYXlzLnJlZHVjZSgocyxhKT0+cythLmxlbmd0aCwwKTsKICAgICAgY29uc3Qgb3V0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWwpOwogICAgICBsZXQgb2ZmID0gMDsKICAgICAgZm9yIChjb25zdCBhIG9mIGFycmF5cyl7IG91dC5zZXQoYSwgb2ZmKTsgb2ZmICs9IGEubGVuZ3RoOyB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgZnVuY3Rpb24gZG9zRGF0ZVRpbWUoZGF0ZSl7CiAgICAgIGNvbnN0IGQgPSBkYXRlIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGUgOiBuZXcgRGF0ZSgpOwogICAgICBjb25zdCB0aW1lID0KICAgICAgICAoKGQuZ2V0SG91cnMoKSAmIDB4MUYpIDw8IDExKSB8CiAgICAgICAgKChkLmdldE1pbnV0ZXMoKSAmIDB4M0YpIDw8IDUpIHwKICAgICAgICAoKE1hdGguZmxvb3IoZC5nZXRTZWNvbmRzKCkvMikpICYgMHgxRik7CiAgICAgIGNvbnN0IGRheSA9IGQuZ2V0RGF0ZSgpOwogICAgICBjb25zdCBtb250aCA9IGQuZ2V0TW9udGgoKSArIDE7CiAgICAgIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCkgLSAxOTgwOwogICAgICBjb25zdCBkb3NEYXRlID0KICAgICAgICAoKHllYXIgJiAweDdGKSA8PCA5KSB8CiAgICAgICAgKChtb250aCAmIDB4MEYpIDw8IDUpIHwKICAgICAgICAoZGF5ICYgMHgxRik7CiAgICAgIHJldHVybiB7IHRpbWUsIGRhdGU6IGRvc0RhdGUgfTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBtYWtlWmlwKGZpbGVzKXsKICAgICAgLy8gZmlsZXM6IFt7bmFtZSwgYmxvYn1dCiAgICAgIGNvbnN0IGxvY2FsUGFydHMgPSBbXTsKICAgICAgY29uc3QgY2VudHJhbFBhcnRzID0gW107CiAgICAgIGxldCBvZmZzZXQgPSAwOwoKICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgY29uc3QgZHQgPSBkb3NEYXRlVGltZShub3cpOwoKICAgICAgZm9yIChjb25zdCBmIG9mIGZpbGVzKXsKICAgICAgICBjb25zdCBuYW1lQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZi5uYW1lKTsKICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgZi5ibG9iLmFycmF5QnVmZmVyKCkpOwogICAgICAgIGNvbnN0IGNyYyA9IGNyYzMyKGRhdGEpOwogICAgICAgIGNvbnN0IGNvbXBTaXplID0gZGF0YS5sZW5ndGg7CiAgICAgICAgY29uc3QgdW5jb21wU2l6ZSA9IGRhdGEubGVuZ3RoOwoKICAgICAgICAvLyBMb2NhbCBmaWxlIGhlYWRlcgogICAgICAgIGNvbnN0IGxvY2FsSGVhZGVyID0gY29uY2F0VWludDgoWwogICAgICAgICAgdTMyKDB4MDQwMzRiNTApLCAgICAgICAgLy8gc2lnbmF0dXJlCiAgICAgICAgICB1MTYoMjApLCAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZAogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZmxhZ3MKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGNvbXByZXNzaW9uIDAgPSBzdG9yZWQKICAgICAgICAgIHUxNihkdC50aW1lKSwgICAgICAgICAgIC8vIG1vZCB0aW1lCiAgICAgICAgICB1MTYoZHQuZGF0ZSksICAgICAgICAgICAvLyBtb2QgZGF0ZQogICAgICAgICAgdTMyKGNyYyksICAgICAgICAgICAgICAgLy8gY3JjMzIKICAgICAgICAgIHUzMihjb21wU2l6ZSksICAgICAgICAgIC8vIGNvbXByZXNzZWQgc2l6ZQogICAgICAgICAgdTMyKHVuY29tcFNpemUpLCAgICAgICAgLy8gdW5jb21wcmVzc2VkIHNpemUKICAgICAgICAgIHUxNihuYW1lQnl0ZXMubGVuZ3RoKSwgIC8vIGZpbGUgbmFtZSBsZW5ndGgKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGV4dHJhIGxlbmd0aAogICAgICAgICAgbmFtZUJ5dGVzCiAgICAgICAgXSk7CgogICAgICAgIGxvY2FsUGFydHMucHVzaChsb2NhbEhlYWRlciwgZGF0YSk7CgogICAgICAgIC8vIENlbnRyYWwgZGlyZWN0b3J5IGhlYWRlcgogICAgICAgIGNvbnN0IGNlbnRyYWxIZWFkZXIgPSBjb25jYXRVaW50OChbCiAgICAgICAgICB1MzIoMHgwMjAxNGI1MCksICAgICAgICAvLyBzaWduYXR1cmUKICAgICAgICAgIHUxNigyMCksICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gbWFkZSBieQogICAgICAgICAgdTE2KDIwKSwgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBuZWVkZWQKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGZsYWdzCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBjb21wcmVzc2lvbgogICAgICAgICAgdTE2KGR0LnRpbWUpLAogICAgICAgICAgdTE2KGR0LmRhdGUpLAogICAgICAgICAgdTMyKGNyYyksCiAgICAgICAgICB1MzIoY29tcFNpemUpLAogICAgICAgICAgdTMyKHVuY29tcFNpemUpLAogICAgICAgICAgdTE2KG5hbWVCeXRlcy5sZW5ndGgpLAogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZXh0cmEKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGNvbW1lbnQKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGRpc2sgbnVtYmVyCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBpbnRlcm5hbCBhdHRycwogICAgICAgICAgdTMyKDApLCAgICAgICAgICAgICAgICAgLy8gZXh0ZXJuYWwgYXR0cnMKICAgICAgICAgIHUzMihvZmZzZXQpLCAgICAgICAgICAgIC8vIGxvY2FsIGhlYWRlciBvZmZzZXQKICAgICAgICAgIG5hbWVCeXRlcwogICAgICAgIF0pOwoKICAgICAgICBjZW50cmFsUGFydHMucHVzaChjZW50cmFsSGVhZGVyKTsKCiAgICAgICAgb2Zmc2V0ICs9IGxvY2FsSGVhZGVyLmxlbmd0aCArIGRhdGEubGVuZ3RoOwogICAgICB9CgogICAgICBjb25zdCBjZW50cmFsRGlyID0gY29uY2F0VWludDgoY2VudHJhbFBhcnRzKTsKICAgICAgY29uc3QgY2VudHJhbE9mZnNldCA9IG9mZnNldDsKICAgICAgb2Zmc2V0ICs9IGNlbnRyYWxEaXIubGVuZ3RoOwoKICAgICAgLy8gRW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5CiAgICAgIGNvbnN0IGVuZCA9IGNvbmNhdFVpbnQ4KFsKICAgICAgICB1MzIoMHgwNjA1NGI1MCksCiAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZGlzawogICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGRpc2sKICAgICAgICB1MTYoZmlsZXMubGVuZ3RoKSwgICAgICAvLyBlbnRyaWVzIG9uIGRpc2sKICAgICAgICB1MTYoZmlsZXMubGVuZ3RoKSwgICAgICAvLyB0b3RhbCBlbnRyaWVzCiAgICAgICAgdTMyKGNlbnRyYWxEaXIubGVuZ3RoKSwgLy8gY2VudHJhbCBkaXIgc2l6ZQogICAgICAgIHUzMihjZW50cmFsT2Zmc2V0KSwgICAgIC8vIGNlbnRyYWwgZGlyIG9mZnNldAogICAgICAgIHUxNigwKSAgICAgICAgICAgICAgICAgIC8vIGNvbW1lbnQgbGVuZ3RoCiAgICAgIF0pOwoKICAgICAgY29uc3QgemlwQnl0ZXMgPSBjb25jYXRVaW50OChbLi4ubG9jYWxQYXJ0cywgY2VudHJhbERpciwgZW5kXSk7CiAgICAgIHJldHVybiBuZXcgQmxvYihbemlwQnl0ZXNdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi96aXAnIH0pOwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkS2l0WmlwKGtpdElkKXsKICAgICAgY29uc3Qga2l0ID0gZ2V0S2l0QnlJZChraXRJZCk7CiAgICAgIGlmICgha2l0KSByZXR1cm47CgogICAgICBjb25zdCBwaG90b3MgPSAoa2l0LnBob3RvcyB8fCBbXSkuc2xpY2UoKTsKICAgICAgaWYgKCFwaG90b3MubGVuZ3RoKXsKICAgICAgICBhbGVydCgn0J3QtdGCINGE0L7RgtC+0LPRgNCw0YTQuNC5INC00LvRjyDRgdC60LDRh9C40LLQsNC90LjRjy4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIEJ1aWxkIGZpbGUgbGlzdAogICAgICBjb25zdCBmaWxlcyA9IFtdOwogICAgICBsZXQgaSA9IDE7CiAgICAgIGZvciAoY29uc3QgcCBvZiBwaG90b3MpewogICAgICAgIHRyeXsKICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBkYXRhVXJsVG9CbG9iKHAuc3JjKTsKICAgICAgICAgIGNvbnN0IGV4dCA9IChibG9iLnR5cGUgfHwgJycpLmluY2x1ZGVzKCdwbmcnKSA/ICdwbmcnCiAgICAgICAgICAgICAgICAgICA6IChibG9iLnR5cGUgfHwgJycpLmluY2x1ZGVzKCd3ZWJwJykgPyAnd2VicCcKICAgICAgICAgICAgICAgICAgIDogKGJsb2IudHlwZSB8fCAnJykuaW5jbHVkZXMoJ2dpZicpID8gJ2dpZicKICAgICAgICAgICAgICAgICAgIDogJ2pwZyc7CiAgICAgICAgICBjb25zdCBudW0gPSBTdHJpbmcoaSsrKS5wYWRTdGFydCgyLCcwJyk7CiAgICAgICAgICBmaWxlcy5wdXNoKHsgbmFtZTogYHBob3RvXyR7bnVtfS4ke2V4dH1gLCBibG9iIH0pOwogICAgICAgIH1jYXRjaChlcnIpe30KICAgICAgfQoKICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpewogICAgICAgIGFsZXJ0KCfQndC1INGD0LTQsNC70L7RgdGMINC/0L7QtNCz0L7RgtC+0LLQuNGC0Ywg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0LTQu9GPINGB0LrQsNGH0LjQstCw0L3QuNGPLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgemlwQmxvYiA9IGF3YWl0IG1ha2VaaXAoZmlsZXMpOwogICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBjb25zdCB0aXRsZSA9IHNhbml0aXplRmlsZU5hbWUoa2l0LnRpdGxlIHx8ICdjb250ZW50Jyk7CiAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoemlwQmxvYik7CiAgICAgIGEuZG93bmxvYWQgPSBgJHt0aXRsZX0uemlwYDsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgYS5jbGljaygpOwogICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICAgIH0sIDEwMDApOwogICAgfQoKCmZ1bmN0aW9uIHJlbmRlcigpewogICAgICBmdW5jdGlvbiByZW5kZXJMaXN0KGxpc3QsIGhvc3RFbCwgbW9kZSl7CiAgICAgICAgY29uc3QgaXNBcmNoaXZlID0gbW9kZSA9PT0gJ2FyY2hpdmUnOwogICAgICAgIGhvc3RFbC5pbm5lckhUTUwgPSBsaXN0Lm1hcChraXQgPT4gewogICAgICAgICAgY29uc3QgZWRpdCA9ICghaXNBcmNoaXZlKSAmJiBpc0VkaXQoa2l0LmlkKTsKICAgICAgICAgIGNvbnN0IHVzZWRDbGFzcyA9IGtpdC51c2VkID8gJ2lzLXVzZWQnIDogJyc7CiAgICAgICAgICBjb25zdCBlZGl0Q2xhc3MgPSBlZGl0ID8gJ2lzLWVkaXQnIDogJyc7CgogICAgICAgICAgY29uc3QgdGl0bGVBdHRyID0gZWRpdCA/ICdjb250ZW50ZWRpdGFibGU9InRydWUiJyA6ICcnOwogICAgICAgICAgY29uc3QgdGl0bGVEYXRhID0ga2l0LnRpdGxlIHx8ICfQndC+0LLRi9C5INC60L7QvdGC0LXQvdGCJzsKCiAgICAgICAgICBjb25zdCB0b3RhbCA9IGtpdC5waG90b3MubGVuZ3RoOwogICAgICAgICAgY29uc3QgdXBsb2FkZWQgPSBraXQuY3JlYXRlZEF0ID8ga2l0LmNyZWF0ZWRBdCA6ICfigJQnOwoKICAgICAgICAgIC8vIEluIGFyY2hpdmU6IG5vIGFkZC1waG90b3MgdGlsZQogICAgICAgICAgY29uc3QgcHJldmlld05vQWRkID0gaXNBcmNoaXZlID8gdHJ1ZSA6ICEha2l0LnVzZWQ7CgogICAgICAgICAgY29uc3QgcGhvdG9UaWxlID0gKHBob3RvLCBnbG9iYWxJbmRleCkgPT4gewogICAgICAgICAgICBpZiAoIXBob3RvKSByZXR1cm4gYDxkaXYgY2xhc3M9InRpbGUgaXMtZW1wdHkiPjwvZGl2PmA7CiAgICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZSBpcy1waG90byIgZGF0YS1hY3Rpb249Im9wZW4iIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIGRhdGEtaW5kZXg9IiR7Z2xvYmFsSW5kZXh9Ij4KICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3Bob3RvLnNyY30iIGFsdD0i0KTQvtGC0L4iPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgfTsKCiAgICAgICAgICBsZXQgcmVtYWluaW5nID0gMDsKICAgICAgICAgIGxldCBtYWluUGhvdG9zID0gW107CiAgICAgICAgICBsZXQgY29sbGFnZVBob3RvcyA9IFtdOwogICAgICAgICAgbGV0IG1haW5JZHhCYXNlID0gMDsKICAgICAgICAgIGxldCBjb2xsYWdlSWR4QmFzZSA9IDA7CiAgICAgICAgICBsZXQgZmlyc3RDZWxsSHRtbCA9ICcnOwoKICAgICAgICAgIGlmIChwcmV2aWV3Tm9BZGQpewogICAgICAgICAgICAvLyBbMF0gZmlyc3QgY2VsbCBwaG90by9lbXB0eTsgWzEuLjRdIG1haW47IFs1Li44XSBjb2xsYWdlICg5IHZpc2libGUpCiAgICAgICAgICAgIGZpcnN0Q2VsbEh0bWwgPSBwaG90b1RpbGUoa2l0LnBob3Rvc1swXSB8fCBudWxsLCAwKTsKICAgICAgICAgICAgbWFpblBob3RvcyA9IGtpdC5waG90b3Muc2xpY2UoMSwgNSk7CiAgICAgICAgICAgIGNvbGxhZ2VQaG90b3MgPSBraXQucGhvdG9zLnNsaWNlKDUsIDkpOwogICAgICAgICAgICByZW1haW5pbmcgPSBNYXRoLm1heCgwLCBraXQucGhvdG9zLmxlbmd0aCAtIDkpOwogICAgICAgICAgICBtYWluSWR4QmFzZSA9IDE7CiAgICAgICAgICAgIGNvbGxhZ2VJZHhCYXNlID0gNTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIERlZmF1bHQgbWFpbiBsaXN0OiBmaXJzdCBjZWxsIGlzIGFkZCBwaG90b3MKICAgICAgICAgICAgZmlyc3RDZWxsSHRtbCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpbGUgaXMtYWRkIiBkYXRhLWFjdGlvbj0iYWRkLXBob3RvcyIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0YTQvtGC0L4iIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0YTQvtGC0L4iPgogICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+JHtTVkdfSU1BR0VfQUREfTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICBtYWluUGhvdG9zID0ga2l0LnBob3Rvcy5zbGljZSgwLCA0KTsKICAgICAgICAgICAgY29sbGFnZVBob3RvcyA9IGtpdC5waG90b3Muc2xpY2UoNCwgOCk7CiAgICAgICAgICAgIHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGtpdC5waG90b3MubGVuZ3RoIC0gOCk7CiAgICAgICAgICAgIG1haW5JZHhCYXNlID0gMDsKICAgICAgICAgICAgY29sbGFnZUlkeEJhc2UgPSA0OwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGNvbGxhZ2VDZWxsID0gKHBob3RvLCBnbG9iYWxJbmRleCwgaXNMYXN0Q2VsbCkgPT4gewogICAgICAgICAgICBpZiAoIXBob3RvKSByZXR1cm4gYDxkaXYgY2xhc3M9ImNvbGxhZ2UtY2VsbCBpcy1lbXB0eSI+PC9kaXY+YDsKICAgICAgICAgICAgY29uc3QgbW9yZSA9IChpc0xhc3RDZWxsICYmIHJlbWFpbmluZz4wKSA/IGA8ZGl2IGNsYXNzPSJtb3JlLW92ZXJsYXkiPtCV0YnQtSAke3JlbWFpbmluZ308L2Rpdj5gIDogJyc7CiAgICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sbGFnZS1jZWxsIGlzLXBob3RvIiBkYXRhLWFjdGlvbj0ib3BlbiIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgZGF0YS1pbmRleD0iJHtnbG9iYWxJbmRleH0iPgogICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7cGhvdG8uc3JjfSIgYWx0PSLQpNC+0YLQviI+CiAgICAgICAgICAgICAgICAke21vcmV9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICB9OwoKICAgICAgICAgIGNvbnN0IFtBLEIsQyxEXSA9IFttYWluUGhvdG9zWzBdfHxudWxsLCBtYWluUGhvdG9zWzFdfHxudWxsLCBtYWluUGhvdG9zWzJdfHxudWxsLCBtYWluUGhvdG9zWzNdfHxudWxsXTsKCiAgICAgICAgICBjb25zdCBjZWxscyA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspewogICAgICAgICAgICBjZWxscy5wdXNoKGNvbGxhZ2VDZWxsKGNvbGxhZ2VQaG90b3NbaV0gfHwgbnVsbCwgY29sbGFnZUlkeEJhc2UgKyBpLCBpID09PSAzKSk7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGFjdGlvbnNIdG1sID0gJyc7CiAgICAgICAgICBpZiAoaXNBcmNoaXZlKXsKICAgICAgICAgICAgY29uc3QgaXNQaG90b2dyYXBoZXJBcmNoaXZlID0gY3VycmVudFVzZXJSb2xlID09PSAncGhvdG9ncmFwaGVyJzsKICAgICAgICAgICAgYWN0aW9uc0h0bWwgPSBgCiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsiIGRhdGEtYWN0aW9uPSJhcmNoaXZlLWRvd25sb2FkIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0KHQutCw0YfQsNGC0YwiIGFyaWEtbGFiZWw9ItCh0LrQsNGH0LDRgtGMIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19ET1dOTE9BRH08L3NwYW4+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgJHtpc1Bob3RvZ3JhcGhlckFyY2hpdmUgPyAnJyA6IGAKICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImFyY2hpdmUtcmVzdG9yZSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgdGl0bGU9ItCS0LXRgNC90YPRgtGMIiBhcmlhLWxhYmVsPSLQktC10YDQvdGD0YLRjCDQuNC3INCw0YDRhdC40LLQsCI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+JHtTVkdfUkVTVE9SRX08L3NwYW4+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciIgZGF0YS1hY3Rpb249ImFyY2hpdmUtZGVsZXRlIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0KPQtNCw0LvQuNGC0YwiIGFyaWEtbGFiZWw9ItCj0LTQsNC70LjRgtGMINC90LDQstGB0LXQs9C00LAiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX1RSQVNIfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICBgfQogICAgICAgICAgICBgOwogICAgICAgICAgfSBlbHNlIGlmIChlZGl0KXsKICAgICAgICAgICAgYWN0aW9uc0h0bWwgPSBgCiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciIgZGF0YS1hY3Rpb249ImRlbGV0ZS1raXQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQkiDQsNGA0YXQuNCyIiBhcmlhLWxhYmVsPSLQn9C10YDQtdC80LXRgdGC0LjRgtGMINCyINCw0YDRhdC40LIiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX1RSQVNIfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFjdGlvbnNIdG1sID0gYAogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIiBkYXRhLWFjdGlvbj0iZG93bmxvYWQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQodC60LDRh9Cw0YLRjCIgYXJpYS1sYWJlbD0i0KHQutCw0YfQsNGC0YwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0RPV05MT0FEfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImVkaXQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0VESVR9PC9zcGFuPgogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHVzZWRUZXh0ID0ga2l0LnVzZWQKICAgICAgICAgICAgPyBg0JjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC+OiAke2tpdC51c2VkRGF0ZSB8fCBraXQuY3JlYXRlZEF0IHx8IGZvcm1hdERhdGUobmV3IERhdGUoKSl9YAogICAgICAgICAgICA6ICfQmNGB0L/QvtC70YzQt9C+0LLQsNC90L4nOwoKICAgICAgICAgIGNvbnN0IHVzZWRDaGVja0h0bWwgPSBpc0FyY2hpdmUKICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz0ia2l0LWNoZWNrIj4ke1NWR19DSEVDS308L2Rpdj5gCiAgICAgICAgICAgIDogYDxkaXYgY2xhc3M9ImtpdC1jaGVjayIgZGF0YS1hY3Rpb249InRvZ2dsZS11c2VkIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9Ij4ke1NWR19DSEVDS308L2Rpdj5gOwoKICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGVIdG1sID0gaXNBcmNoaXZlCiAgICAgICAgICAgID8gJycKICAgICAgICAgICAgOiBgPGRpdiBjbGFzcz0ia2l0LWRyYWctaGFuZGxlIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0J/QtdGA0LXRgtCw0YnQuNGC0YwiPjwvZGl2PmA7CgogICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWNhcmQgJHt1c2VkQ2xhc3N9ICR7ZWRpdENsYXNzfSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSI+CiAgICAgICAgICAgICAgJHtkcmFnSGFuZGxlSHRtbH0KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtdG9wIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC10aXRsZSIgJHt0aXRsZUF0dHJ9IGRhdGEtYWN0aW9uPSJ0aXRsZSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSI+JHtlc2NhcGVIdG1sKHRpdGxlRGF0YSl9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtYWN0aW9ucyI+JHthY3Rpb25zSHRtbH08L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWRpdmlkZXIiPjwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtdXNlZC1yb3ciPgogICAgICAgICAgICAgICAgJHt1c2VkQ2hlY2tIdG1sfQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LXVzZWQtdGV4dCI+JHt1c2VkVGV4dH08L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWdyaWQiPgogICAgICAgICAgICAgICAgJHtmaXJzdENlbGxIdG1sfQogICAgICAgICAgICAgICAgJHtwaG90b1RpbGUoQSwgbWFpbklkeEJhc2UrMCl9CiAgICAgICAgICAgICAgICAke3Bob3RvVGlsZShCLCBtYWluSWR4QmFzZSsxKX0KICAgICAgICAgICAgICAgICR7cGhvdG9UaWxlKEMsIG1haW5JZHhCYXNlKzIpfQogICAgICAgICAgICAgICAgJHtwaG90b1RpbGUoRCwgbWFpbklkeEJhc2UrMyl9CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZSBpcy1jb2xsYWdlIj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sbGFnZS1ncmlkIj4ke2NlbGxzLmpvaW4oJycpfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC1mb290ZXIiPgogICAgICAgICAgICAgICAgPGRpdj7QktGB0LXQs9C+INGE0L7RgtC+OiAke3RvdGFsfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj7Ql9Cw0LPRgNGD0LbQtdC90L46ICR7dXBsb2FkZWR9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDsKICAgICAgICB9KS5qb2luKCcnKTsKCiAgICAgICAgaWYgKGlzQXJjaGl2ZSAmJiBsaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICBob3N0RWwuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImFyY2hpdmUtZW1wdHktdGV4dCI+0JIg0LDRgNGF0LjQstC1INC/0L7QutCwINC90LjRh9C10LPQviDQvdC10YI8L2Rpdj5gOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVuZGVyTGlzdChraXRzLCBraXRzRWwsICdtYWluJyk7CiAgICAgIHJlbmRlckxpc3QoYXJjaGl2ZWRLaXRzLCBhcmNoaXZlS2l0c0VsLCAnYXJjaGl2ZScpOwogICAgfQoKCiAgICAvKiA9PT09PSBFVkVOVFMgPT09PT0gKi8KCiAgICBhZGRLaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAga2l0cy5wdXNoKGNyZWF0ZUtpdCgpKTsKICAgICAgcmVuZGVyKCk7CiAgICAgIG5vdGlmeUNhclBob3Rvc1VwZGF0ZWQoKTsKICAgIH0pOwoKICAgIC8vIERlbGVnYXRlZCBjbGljayBpbnNpZGUga2l0cwogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IGFjdGlvbkVsID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpOwogICAgICBpZiAoIWFjdGlvbkVsKSByZXR1cm47CiAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbkVsLmRhdGFzZXQuYWN0aW9uOwogICAgICBjb25zdCBraXRJZCA9IGFjdGlvbkVsLmRhdGFzZXQua2l0SWQ7CgogICAgICBpZiAoYWN0aW9uID09PSAnZWRpdCcpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgc2V0T25seU9uZUVkaXQoa2l0SWQpOwogICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSBraXRzRWwucXVlcnlTZWxlY3RvcihgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2tpdElkfSJdIC5raXQtdGl0bGVgKTsKICAgICAgICAgIGlmICh0aXRsZUVsKXsKICAgICAgICAgICAgdGl0bGVFbC5mb2N1cygpOwogICAgICAgICAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0aXRsZUVsKTsKICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOwogICAgICAgICAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsKICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTsKICAgICAgICAgIH0KICAgICAgICB9LDApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2RlbGV0ZS1raXQnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGlmICghY29uZmlybSgn0J/QtdGA0LXQvNC10YHRgtC40YLRjCDRjdGC0L7RgiDQutC+0L3RgtC10L3RgiDQsiDQsNGA0YXQuNCyPycpKSByZXR1cm47CiAgICAgICAgY29uc3QgaWR4ID0ga2l0cy5maW5kSW5kZXgoayA9PiBrLmlkID09PSBraXRJZCk7CiAgICAgICAgaWYgKGlkeCAhPT0gLTEpewogICAgICAgICAgY29uc3QgW2tpdF0gPSBraXRzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAga2l0LmFyY2hpdmVkQXQgPSBmb3JtYXREYXRlKG5ldyBEYXRlKCkpOwogICAgICAgICAgYXJjaGl2ZWRLaXRzLnVuc2hpZnQoa2l0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGtpdHMubGVuZ3RoID09PSAwKSBraXRzID0gW2NyZWF0ZUtpdCgpXTsKICAgICAgICBpZiAoYWN0aXZlRWRpdEtpdElkID09PSBraXRJZCkgYWN0aXZlRWRpdEtpdElkID0gbnVsbDsKICAgICAgICByZW5kZXIoKTsKICAgICAgICBub3RpZnlDYXJQaG90b3NVcGRhdGVkKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnZG93bmxvYWQnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGRvd25sb2FkS2l0WmlwKGtpdElkKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICd0b2dnbGUtdXNlZCcpewogICAgICAgIC8vIEtlZXAgInVzZWQiIHRvZ2dsZSBibG9ja2VkIGluIGJvdGggdmlldyBhbmQgZWRpdCBtb2RlcwogICAgICAgIGlmIChhY3RpdmVFZGl0S2l0SWQgIT09IGtpdElkIHx8IGFjdGl2ZUVkaXRLaXRJZCAhPT0gbnVsbCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGtpdCA9IGtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpOwogICAgICAgIGlmICgha2l0KSByZXR1cm47CiAgICAgICAga2l0LnVzZWQgPSAha2l0LnVzZWQ7CiAgICAgICAgaWYgKGtpdC51c2VkICYmICFraXQudXNlZERhdGUpewogICAgICAgICAga2l0LnVzZWREYXRlID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFraXQudXNlZCkgewogICAgICAgICAga2l0LnVzZWREYXRlID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmVuZGVyKCk7CiAgICAgICAgbm90aWZ5Q2FyUGhvdG9zVXBkYXRlZCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FkZC1waG90b3MnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGZpbGVJbnB1dC5kYXRhc2V0LmtpdElkID0ga2l0SWQ7CiAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnb3BlbicpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChhY3Rpb25FbC5kYXRhc2V0LmluZGV4LDEwKTsKICAgICAgICBvcGVuVmlld2VyKGtpdElkLCBpbmRleCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9KTsKCgogICAgLy8gRGVsZWdhdGVkIGNsaWNrIGluc2lkZSBhcmNoaXZlCiAgICBhcmNoaXZlS2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IGFjdGlvbkVsID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpOwogICAgICBpZiAoIWFjdGlvbkVsKSByZXR1cm47CiAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbkVsLmRhdGFzZXQuYWN0aW9uOwogICAgICBjb25zdCBraXRJZCA9IGFjdGlvbkVsLmRhdGFzZXQua2l0SWQ7CgogICAgICBpZiAoYWN0aW9uID09PSAnYXJjaGl2ZS1kb3dubG9hZCcpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZG93bmxvYWRLaXRaaXAoa2l0SWQpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FyY2hpdmUtcmVzdG9yZScpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgY29uc3QgaWR4ID0gYXJjaGl2ZWRLaXRzLmZpbmRJbmRleChrID0+IGsuaWQgPT09IGtpdElkKTsKICAgICAgICBpZiAoaWR4ICE9PSAtMSl7CiAgICAgICAgICBjb25zdCBba2l0XSA9IGFyY2hpdmVkS2l0cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICAgIGtpdHMudW5zaGlmdChraXQpOwogICAgICAgIH0KICAgICAgICByZW5kZXIoKTsKICAgICAgICBub3RpZnlDYXJQaG90b3NVcGRhdGVkKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnYXJjaGl2ZS1kZWxldGUnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGlmICghY29uZmlybSgn0KPQtNCw0LvQuNGC0Ywg0Y3RgtC+0YIg0LrQvtC90YLQtdC90YIg0L3QsNCy0YHQtdCz0LTQsD8g0K3RgtC+INC00LXQudGB0YLQstC40LUg0L3QtdC70YzQt9GPINC+0YLQvNC10L3QuNGC0YwuJykpIHJldHVybjsKICAgICAgICBhcmNoaXZlZEtpdHMgPSBhcmNoaXZlZEtpdHMuZmlsdGVyKGsgPT4gay5pZCAhPT0ga2l0SWQpOwogICAgICAgIHJlbmRlcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ29wZW4nKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoYWN0aW9uRWwuZGF0YXNldC5pbmRleCwxMCk7CiAgICAgICAgb3BlblZpZXdlcihraXRJZCwgaW5kZXgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSk7CgogICAgLyogPT09PT0gRFJBRyAmIERST1AgVE8gQUREIFBIT1RPUyA9PT09PSAqLwogICAgZnVuY3Rpb24gZ2V0QWRkVGlsZUZyb21FdmVudFRhcmdldCh0YXJnZXQpewogICAgICBjb25zdCB0aWxlID0gdGFyZ2V0Py5jbG9zZXN0Py4oJy50aWxlLmlzLWFkZFtkYXRhLWFjdGlvbj0iYWRkLXBob3RvcyJdJyk7CiAgICAgIHJldHVybiB0aWxlIHx8IG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCBvbil7CiAgICAgIGlmICghdGlsZSkgcmV0dXJuOwogICAgICB0aWxlLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWRyYWdvdmVyJywgISFvbik7CiAgICB9CgogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpPT57CiAgICAgIGNvbnN0IHRpbGUgPSBnZXRBZGRUaWxlRnJvbUV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsKICAgICAgaWYgKCF0aWxlKSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCB0cnVlKTsKICAgIH0pOwoKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoZSk9PnsKICAgICAgY29uc3QgdGlsZSA9IGdldEFkZFRpbGVGcm9tRXZlbnRUYXJnZXQoZS50YXJnZXQpOwogICAgICBpZiAoIXRpbGUpIHJldHVybjsKICAgICAgaWYgKHRpbGUuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkgcmV0dXJuOwogICAgICBzZXRBZGRUaWxlRHJhZ1N0YXRlKHRpbGUsIGZhbHNlKTsKICAgIH0pOwoKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpPT57CiAgICAgIGNvbnN0IHRpbGUgPSBnZXRBZGRUaWxlRnJvbUV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsKICAgICAgaWYgKCF0aWxlKSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCBmYWxzZSk7CiAgICAgIGNvbnN0IGtpdElkID0gdGlsZS5kYXRhc2V0LmtpdElkOwogICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXI/LmZpbGVzIHx8IFtdKTsKICAgICAgaWYgKCFraXRJZCB8fCAhZmlsZXMubGVuZ3RoKSByZXR1cm47CiAgICAgIGF3YWl0IGFkZEZpbGVzVG9LaXQoa2l0SWQsIGZpbGVzKTsKICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKT0+ewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGlsZS5pcy1hZGQuaXMtZHJhZ292ZXInKS5mb3JFYWNoKGVsPT5lbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnb3ZlcicpKTsKICAgIH0pOwoKCiAgICAvLyBUaXRsZSBlZGl0aW5nOiByZW1lbWJlciBsYXN0IGZpdHRpbmcgdmFsdWUKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwogICAgICB0aXRsZUVsLmRhdGFzZXQucHJldlRpdGxlID0gdGl0bGVFbC50ZXh0Q29udGVudCB8fCAnJzsKICAgIH0pOwoKICAgIC8vIFRpdGxlIGVkaXRpbmc6IHN5bmMgb24gaW5wdXQsIHN0b3AgdHlwaW5nIHdoZW4gZWxsaXBzaXMgcmVhY2hlZAogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwoKICAgICAgLy8gTm9ybWFsaXplIGxpbmUgYnJlYWtzIHRvIHNwYWNlcwogICAgICBjb25zdCBub3JtYWxpemVkID0gKHRpdGxlRWwudGV4dENvbnRlbnQgfHwgJycpLnJlcGxhY2UoL1tcclxuXSsvZywgJyAnKTsKICAgICAgaWYgKG5vcm1hbGl6ZWQgIT09IHRpdGxlRWwudGV4dENvbnRlbnQpIHRpdGxlRWwudGV4dENvbnRlbnQgPSBub3JtYWxpemVkOwoKICAgICAgLy8gSWYgb3ZlcmZsb3cgLT4gcmV2ZXJ0IHRvIGxhc3QgZml0dGluZyB2YWx1ZSAoZWZmZWN0aXZlbHkgYmxvY2tzIGZ1cnRoZXIgdHlwaW5nKQogICAgICBjb25zdCBwcmV2ID0gdGl0bGVFbC5kYXRhc2V0LnByZXZUaXRsZSA/PyAnJzsKICAgICAgaWYgKHRpdGxlRWwuc2Nyb2xsV2lkdGggPiB0aXRsZUVsLmNsaWVudFdpZHRoICsgMSl7CiAgICAgICAgdGl0bGVFbC50ZXh0Q29udGVudCA9IHByZXY7CgogICAgICAgIC8vIGNhcmV0IHRvIGVuZAogICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGl0bGVFbCk7CiAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOwogICAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7CiAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRpdGxlRWwuZGF0YXNldC5wcmV2VGl0bGUgPSB0aXRsZUVsLnRleHRDb250ZW50OwoKICAgICAgY29uc3Qga2l0SWQgPSB0aXRsZUVsLmRhdGFzZXQua2l0SWQ7CiAgICAgIGNvbnN0IGtpdCA9IGtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpOwogICAgICBpZiAoIWtpdCkgcmV0dXJuOwogICAgICBraXQudGl0bGUgPSB0aXRsZUVsLnRleHRDb250ZW50LnRyaW0oKSB8fCAn0J3QvtCy0YvQuSDQutC+0L3RgtC10L3Rgic7CiAgICB9KTsKCgogICAgCiAgICAvLyBUaXRsZSBlZGl0aW5nOiBwcmV2ZW50IG5ldyBsaW5lczsgRW50ZXIgZmluaXNoZXMgZWRpdGluZwogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PnsKICAgICAgY29uc3QgdGl0bGVFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtdGl0bGVbY29udGVudGVkaXRhYmxlPSJ0cnVlIl0nKTsKICAgICAgaWYgKCF0aXRsZUVsKSByZXR1cm47CgogICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAvLyBmaW5hbGl6ZSB0aXRsZSB2YWx1ZQogICAgICAgIHRpdGxlRWwuYmx1cigpOwogICAgICAgIGV4aXRFZGl0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBQYXN0ZSBhcyBwbGFpbiB0ZXh0IChubyBsaW5lIGJyZWFrcykgaW50byB0aXRsZQogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCB0ZXh0ID0gKGUuY2xpcGJvYXJkRGF0YSB8fCB3aW5kb3cuY2xpcGJvYXJkRGF0YSkuZ2V0RGF0YSgndGV4dCcpIHx8ICcnOwogICAgICBjb25zdCBjbGVhbiA9IHRleHQucmVwbGFjZSgvW1xyXG5dKy9nLCAnICcpLnRyaW0oKTsKICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY2xlYW4pOwogICAgfSk7CgovLyBDbGljayBvdXRzaWRlOiBleGl0IGVkaXQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IGNsaWNrZWRJbnNpZGVLaXQgPSAhIWUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtY2FyZCcpOwogICAgICBjb25zdCBjbGlja2VkSW5zaWRlVmlld2VyID0gISFlLnRhcmdldC5jbG9zZXN0KCcudmlld2VyJyk7CiAgICAgIGlmICghY2xpY2tlZEluc2lkZUtpdCAmJiAhY2xpY2tlZEluc2lkZVZpZXdlciAmJiBhY3RpdmVFZGl0S2l0SWQpewogICAgICAgIHNldFRpbWVvdXQoKCk9PmV4aXRFZGl0KCksMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEV4aXQgZWRpdCBpbW1lZGlhdGVseSBpZiBjbGljayBhbm90aGVyIGtpdCBhcmVhCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpPT57CiAgICAgIGNvbnN0IGtpdENhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LWNhcmQnKTsKICAgICAgaWYgKCFraXRDYXJkKSByZXR1cm47CiAgICAgIGNvbnN0IGtpdElkID0ga2l0Q2FyZC5kYXRhc2V0LmtpdElkOwogICAgICBpZiAoYWN0aXZlRWRpdEtpdElkICYmIGFjdGl2ZUVkaXRLaXRJZCAhPT0ga2l0SWQpewogICAgICAgIGV4aXRFZGl0KCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEFkZCBpbWFnZSBmaWxlcyB0byBraXQgKHVzZWQgYnkgZmlsZSBpbnB1dCBhbmQgZHJhZyZkcm9wKQogICAgYXN5bmMgZnVuY3Rpb24gYWRkRmlsZXNUb0tpdChraXRJZCwgZmlsZXMpewogICAgICBjb25zdCBraXQgPSBraXRzLmZpbmQoaz0+ay5pZD09PWtpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKICAgICAgY29uc3QgaW1nRmlsZXMgPSAoZmlsZXN8fFtdKS5maWx0ZXIoZj0+ZiAmJiBmLnR5cGUgJiYgZi50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKTsKICAgICAgaWYgKCFpbWdGaWxlcy5sZW5ndGgpIHJldHVybjsKCiAgICAgIGNvbnN0IHRvRGF0YVVybCA9IChmaWxlKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+ewogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyLnJlc3VsdCk7CiAgICAgICAgci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIHIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgfSk7CgogICAgICBsZXQgYWRkZWRDb3VudCA9IDA7CiAgICAgIGZvciAoY29uc3QgZiBvZiBpbWdGaWxlcyl7CiAgICAgICAgdHJ5ewogICAgICAgICAgY29uc3Qgc3JjID0gYXdhaXQgdG9EYXRhVXJsKGYpOwogICAgICAgICAgaWYgKCFzcmMpIGNvbnRpbnVlOwogICAgICAgICAga2l0LnBob3Rvcy5wdXNoKHsgaWQ6IFN0cmluZyhEYXRlLm5vdygpKSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpLCBzcmMgfSk7CiAgICAgICAgICBhZGRlZENvdW50ICs9IDE7CiAgICAgICAgfWNhdGNoKGVycil7fQogICAgICB9CiAgICAgIGlmICghYWRkZWRDb3VudCkgcmV0dXJuOwogICAgICBraXQuY3JlYXRlZEF0ID0gZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoKSk7CiAgICAgIHJlbmRlcigpOwogICAgICBub3RpZnlDYXJQaG90b3NVcGRhdGVkKCk7CiAgICB9CgogICAgLy8gRmlsZSBpbnB1dCBsb2FkCiAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpPT57CiAgICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcyB8fCBbXSk7CiAgICAgIGNvbnN0IGtpdElkID0gZmlsZUlucHV0LmRhdGFzZXQua2l0SWQ7CiAgICAgIGZpbGVJbnB1dC52YWx1ZSA9ICcnOwogICAgICBpZiAoIWZpbGVzLmxlbmd0aCB8fCAha2l0SWQpIHJldHVybjsKICAgICAgYXdhaXQgYWRkRmlsZXNUb0tpdChraXRJZCwgZmlsZXMpOwogICAgfSk7CgovKiA9PT09PSBWSUVXRVIgPT09PT0gKi8KICAgIGxldCB3aGVlbExvY2sgPSBmYWxzZTsKICAgIGZ1bmN0aW9uIG9uU3RhZ2VXaGVlbChlKXsKICAgICAgaWYgKCF2aWV3ZXJCYWNrZHJvcC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmICh3aGVlbExvY2spIHJldHVybjsKICAgICAgd2hlZWxMb2NrID0gdHJ1ZTsKICAgICAgY29uc3QgZGlyID0gZS5kZWx0YVkgPiAwID8gMSA6IC0xOwogICAgICBzdGVwVmlld2VyKGRpcik7CiAgICAgIHNldFRpbWVvdXQoKCk9Pnsgd2hlZWxMb2NrID0gZmFsc2U7IH0sIDQ1MCk7CiAgICB9CgogICAgCiAgICBmdW5jdGlvbiBsYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCl7CiAgICAgIC8vIEVuc3VyZSB0aGUgbWFpbiBwaG90byBmcmFtZSBrZWVwcyAyMHB4IGdhcCBmcm9tIGNvdW50ZXIgKGxlZnQpIGFuZCBjbG9zZSBidXR0b24gKHJpZ2h0KSBvbiBhbnkgc2NyZWVuLgogICAgICB0cnl7CiAgICAgICAgY29uc3Qgc3RhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlld2VyLXN0YWdlJyk7CiAgICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFnZU1haW4nKTsKICAgICAgICBjb25zdCBjb3VudGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckNvdW50ZXInKTsKICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJDbG9zZScpOwogICAgICAgIGlmKCFzdGFnZSB8fCAhbWFpbikgcmV0dXJuOwoKICAgICAgICBjb25zdCBzID0gc3RhZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgbGV0IGxlZnRJbnNldCA9IDIwOyAgIC8vIG1pbmltYWwgaW5zZXQgZnJvbSBzdGFnZSBlZGdlIGlmIGNvdW50ZXIgaXMgbWlzc2luZwogICAgICAgIGxldCByaWdodEluc2V0ID0gMjA7ICAvLyBtaW5pbWFsIGluc2V0IGZyb20gc3RhZ2UgZWRnZSBpZiBjbG9zZSBpcyBtaXNzaW5nCgogICAgICAgIGlmKGNvdW50ZXIpewogICAgICAgICAgY29uc3QgYyA9IGNvdW50ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAvLyBwaG90byBsZWZ0IHNob3VsZCBiZSBjb3VudGVyJ3MgcmlnaHQgKyAyMAogICAgICAgICAgbGVmdEluc2V0ID0gTWF0aC5tYXgobGVmdEluc2V0LCAoYy5yaWdodCAtIHMubGVmdCkgKyAyMCk7CiAgICAgICAgfQoKICAgICAgICBpZihjbG9zZUJ0bil7CiAgICAgICAgICBjb25zdCBiID0gY2xvc2VCdG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAvLyBwaG90byByaWdodCBzaG91bGQgYmUgY2xvc2UncyBsZWZ0IC0gMjAgID0+IHJpZ2h0SW5zZXQgPSBzdGFnZVJpZ2h0IC0gKGNsb3NlTGVmdCAtIDIwKQogICAgICAgICAgcmlnaHRJbnNldCA9IE1hdGgubWF4KHJpZ2h0SW5zZXQsIChzLnJpZ2h0IC0gYi5sZWZ0KSArIDIwKTsKICAgICAgICB9CgogICAgICAgIG1haW4uc3R5bGUuc2V0UHJvcGVydHkoJy0tbWFpbi1sZWZ0JywgbGVmdEluc2V0ICsgJ3B4Jyk7CiAgICAgICAgbWFpbi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1tYWluLXJpZ2h0JywgcmlnaHRJbnNldCArICdweCcpOwogICAgICB9Y2F0Y2goZSl7fQogICAgfQoKZnVuY3Rpb24gb3BlblZpZXdlcihraXRJZCwgaW5kZXgpewogICAgICBjb25zdCBraXQgPSBnZXRLaXRCeUlkKGtpdElkKTsKICAgICAgaWYgKCFraXQgfHwgIWtpdC5waG90b3MubGVuZ3RoKSByZXR1cm47CgogICAgICB2aWV3ZXJLaXRJZCA9IGtpdElkOwogICAgICB2aWV3ZXJJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCBraXQucGhvdG9zLmxlbmd0aC0xKSk7CiAgICAgIHZpZXdlckNhbkRlbGV0ZSA9IGlzRWRpdChraXRJZCkgJiYgaXNLaXRJbk1haW4oa2l0SWQpOyAvLyDRhNC40LrRgdC40YDRg9C10Lwg0YDQtdC20LjQvCDQsiDQvNC+0LzQtdC90YIg0L7RgtC60YDRi9GC0LjRjwoKICAgICAgcmVuZGVyVmlld2VyKCk7CiAgICAgIHZpZXdlckJhY2tkcm9wLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTsKICAgICAgbGF5b3V0Vmlld2VyTWFpbkluc2V0cygpOwogICAgICAvLyBjb3VudGVyIHRleHQvbWV0cmljcyBjYW4gY2hhbmdlIGFmdGVyIHJlbmRlcjsgcmVjYWxjIG9uIG5leHQgZnJhbWVzCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+bGF5b3V0Vmlld2VyTWFpbkluc2V0cygpKTsKICAgICAgc2V0VGltZW91dCgoKT0+bGF5b3V0Vmlld2VyTWFpbkluc2V0cygpLCA1MCk7CiAgICAgIC8vIG1ha2UgRXNjIGhhbmRsaW5nIG1vcmUgcmVsaWFibGUKICAgICAgdHJ5eyB2aWV3ZXJCYWNrZHJvcC5mb2N1cygpOyB9Y2F0Y2goZSl7fQogICAgICB2aWV3ZXJCYWNrZHJvcC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywnZmFsc2UnKTsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ZpZXdlci1vcGVuJyk7CiAgICAgIHN5bmNSYWlsQnV0dG9ucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlVmlld2VyKCl7CiAgICAgIHZpZXdlckJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsKICAgICAgdmlld2VyQmFja2Ryb3Auc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsJ3RydWUnKTsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnOwogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ZpZXdlci1vcGVuJyk7CiAgICAgIHZpZXdlcktpdElkID0gbnVsbDsKICAgICAgdmlld2VySW5kZXggPSAwOwogICAgICB2aWV3ZXJDYW5EZWxldGUgPSBmYWxzZTsKICAgICAgdmlld2VyVGh1bWJzLmlubmVySFRNTCA9ICcnOwogICAgICB0cnl7IGRlbGV0ZSB2aWV3ZXJUaHVtYnMuZGF0YXNldC5raXRJZDsgfWNhdGNoKGUpe30KICAgICAgaWYgKHR5cGVvZiB0aHVtYnNTY3JvbGxUaW1lciAhPT0gJ3VuZGVmaW5lZCcgJiYgdGh1bWJzU2Nyb2xsVGltZXIpeyBjbGVhclRpbWVvdXQodGh1bWJzU2Nyb2xsVGltZXIpOyB0aHVtYnNTY3JvbGxUaW1lciA9IG51bGw7IH0KICAgICAgdmlld2VySW1nLnNyYyA9ICcnOwogICAgfQoKICAgIGxldCB0aHVtYnNTY3JvbGxUaW1lciA9IG51bGw7CgpmdW5jdGlvbiBidWlsZFZpZXdlclRodW1icyhwaG90b3MpewogIHZpZXdlclRodW1icy5pbm5lckhUTUwgPSBwaG90b3MubWFwKChwLCBpKT0+YAogICAgPGRpdiBjbGFzcz0idGh1bWIiIGRhdGEtaW5kZXg9IiR7aX0iPgogICAgICA8aW1nIHNyYz0iJHtwLnNyY30iIGFsdD0i0JzQuNC90LjQsNGC0Y7RgNCwIj4KICAgIDwvZGl2PgogIGApLmpvaW4oJycpOwogIHZpZXdlclRodW1icy5kYXRhc2V0LmtpdElkID0gdmlld2VyS2l0SWQgfHwgJyc7Cn0KCmZ1bmN0aW9uIHNldEFjdGl2ZVRodW1iKGlkeCl7CiAgY29uc3QgcHJldiA9IHZpZXdlclRodW1icy5xdWVyeVNlbGVjdG9yKCcudGh1bWIuYWN0aXZlJyk7CiAgaWYgKHByZXYpIHByZXYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CgogIGNvbnN0IG5leHQgPSB2aWV3ZXJUaHVtYnMucXVlcnlTZWxlY3RvcihgLnRodW1iW2RhdGEtaW5kZXg9IiR7aWR4fSJdYCk7CiAgaWYgKG5leHQpIG5leHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CgogIGNsZWFyVGltZW91dCh0aHVtYnNTY3JvbGxUaW1lcik7CiAgdGh1bWJzU2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpPT57CiAgICBjb25zdCBhY3RpdmUgPSB2aWV3ZXJUaHVtYnMucXVlcnlTZWxlY3RvcignLnRodW1iLmFjdGl2ZScpOwogICAgaWYgKGFjdGl2ZSkgYWN0aXZlLnNjcm9sbEludG9WaWV3KHtibG9jazonbmVhcmVzdCcsIGJlaGF2aW9yOidzbW9vdGgnfSk7CiAgICBzeW5jUmFpbEJ1dHRvbnMoKTsKICB9LCAxNDApOwp9CgpmdW5jdGlvbiByZW5kZXJWaWV3ZXIoKXsKICBjb25zdCBraXQgPSBnZXRLaXRCeUlkKHZpZXdlcktpdElkKTsKICBpZiAoIWtpdCkgcmV0dXJuOwogIGNvbnN0IHBob3RvcyA9IGtpdC5waG90b3M7CiAgaWYgKCFwaG90b3MubGVuZ3RoKXsgY2xvc2VWaWV3ZXIoKTsgcmV0dXJuOyB9CgogIHZpZXdlckluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odmlld2VySW5kZXgsIHBob3Rvcy5sZW5ndGgtMSkpOwogIHZpZXdlckltZy5zcmMgPSBwaG90b3Nbdmlld2VySW5kZXhdLnNyYzsKICB2aWV3ZXJDb3VudGVyLnRleHRDb250ZW50ID0gYCR7dmlld2VySW5kZXgrMX0vJHtwaG90b3MubGVuZ3RofWA7CiAgbGF5b3V0Vmlld2VyTWFpbkluc2V0cygpOwogIHZpZXdlckRlbGV0ZUJ0bi5zdHlsZS5kaXNwbGF5ID0gdmlld2VyQ2FuRGVsZXRlID8gJ2ZsZXgnIDogJ25vbmUnOwoKICAvLyBCdWlsZCB0aHVtYnMgb25seSB3aGVuIG9wZW5pbmcgdmlld2VyIC8gc3dpdGNoaW5nIGtpdCAvIHBob3RvIGNvdW50IGNoYW5nZWQKICBpZiAodmlld2VyVGh1bWJzLmRhdGFzZXQua2l0SWQgIT09IFN0cmluZyh2aWV3ZXJLaXRJZCkgfHwgdmlld2VyVGh1bWJzLmNoaWxkcmVuLmxlbmd0aCAhPT0gcGhvdG9zLmxlbmd0aCl7CiAgICBidWlsZFZpZXdlclRodW1icyhwaG90b3MpOwogIH0KCiAgc2V0QWN0aXZlVGh1bWIodmlld2VySW5kZXgpOwp9CgpmdW5jdGlvbiBzdGVwVmlld2VyKGRlbHRhKXsKICAgICAgY29uc3Qga2l0ID0gZ2V0S2l0QnlJZCh2aWV3ZXJLaXRJZCk7CiAgICAgIGlmICgha2l0KSByZXR1cm47CgogICAgICBjb25zdCBsZW4gPSBraXQucGhvdG9zLmxlbmd0aDsKICAgICAgaWYgKGxlbiA8PSAxKSByZXR1cm47CgogICAgICB2aWV3ZXJJbmRleCA9ICh2aWV3ZXJJbmRleCArIGRlbHRhICsgbGVuKSAlIGxlbjsKICAgICAgcmVuZGVyVmlld2VyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gc3luY1JhaWxCdXR0b25zKCl7CiAgICAgIGNvbnN0IGVsID0gdmlld2VyVGh1bWJzOwogICAgICAvLyBzbWFsbCB0b2xlcmFuY2UKICAgICAgY29uc3QgYXRUb3AgPSBlbC5zY3JvbGxUb3AgPD0gMjsKICAgICAgY29uc3QgYXRCb3R0b20gPSAoZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50SGVpZ2h0KSA+PSAoZWwuc2Nyb2xsSGVpZ2h0IC0gMik7CiAgICAgIHJhaWxVcC5kaXNhYmxlZCA9IGF0VG9wOwogICAgICByYWlsRG93bi5kaXNhYmxlZCA9IGF0Qm90dG9tOwogICAgfQoKICAgIHZpZXdlclRodW1icy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzeW5jUmFpbEJ1dHRvbnMpOwoKICAgIHJhaWxVcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB2aWV3ZXJUaHVtYnMuc2Nyb2xsQnkoe3RvcDogLTIyMCwgYmVoYXZpb3I6ICdzbW9vdGgnfSk7CiAgICB9KTsKICAgIHJhaWxEb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHZpZXdlclRodW1icy5zY3JvbGxCeSh7dG9wOiAyMjAsIGJlaGF2aW9yOiAnc21vb3RoJ30pOwogICAgfSk7CgogICAgdmlld2VyQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsgZS5zdG9wUHJvcGFnYXRpb24oKTsgY2xvc2VWaWV3ZXIoKTsgfSk7CgogICAgdmlld2VyQmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgLy8g0LrQu9C40Log0L/QviDRgdC10YDQvtC80YMg0YTQvtC90YMg0LfQsNC60YDRi9Cy0LDQtdGCCiAgICAgIGlmIChlLnRhcmdldCA9PT0gdmlld2VyQmFja2Ryb3ApIGNsb3NlVmlld2VyKCk7CiAgICB9KTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKT0+ewogICAgICBpZiAoIXZpZXdlckJhY2tkcm9wLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSByZXR1cm47CiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpeyBlLnByZXZlbnREZWZhdWx0KCk7IGNsb3NlVmlld2VyKCk7IH0KICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dMZWZ0Jyl7IGUucHJldmVudERlZmF1bHQoKTsgc3RlcFZpZXdlcigtMSk7IH0KICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dSaWdodCcpeyBlLnByZXZlbnREZWZhdWx0KCk7IHN0ZXBWaWV3ZXIoMSk7IH0KICAgIAogICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJyl7IGUucHJldmVudERlZmF1bHQoKTsgc3RlcFZpZXdlcigtMSk7IH0KICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJyl7IGUucHJldmVudERlZmF1bHQoKTsgc3RlcFZpZXdlcigxKTsgfQp9KTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCk9PnsKICAgICAgaWYgKCF2aWV3ZXJCYWNrZHJvcC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuOwogICAgICBsYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCk7CiAgICAgIC8vIGNvdW50ZXIgdGV4dC9tZXRyaWNzIGNhbiBjaGFuZ2UgYWZ0ZXIgcmVuZGVyOyByZWNhbGMgb24gbmV4dCBmcmFtZXMKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT5sYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCkpOwogICAgICBzZXRUaW1lb3V0KCgpPT5sYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCksIDUwKTsKICAgIH0pOwoKCiAgICBzdGFnZVN0YWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgb25TdGFnZVdoZWVsLCB7cGFzc2l2ZTpmYWxzZX0pOwoKICAgIHZpZXdlclRodW1icy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBjb25zdCB0aHVtYiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50aHVtYicpOwogICAgICBpZiAoIXRodW1iKSByZXR1cm47CiAgICAgIGNvbnN0IGlkeCA9IHBhcnNlSW50KHRodW1iLmRhdGFzZXQuaW5kZXgsMTApOwogICAgICB2aWV3ZXJJbmRleCA9IGlkeDsKICAgICAgcmVuZGVyVmlld2VyKCk7CiAgICB9KTsKCiAgICAvLyBEZWxldGUgY3VycmVudCBwaG90byAodmlld2VyIG9ubHksIG9ubHkgaWYgb3BlbmVkIGZyb20gZWRpdC1tb2RlKQogICAgdmlld2VyRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGlmICghdmlld2VyQ2FuRGVsZXRlKSByZXR1cm47CgogICAgICBjb25zdCBraXQgPSBnZXRLaXRCeUlkKHZpZXdlcktpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKCiAgICAgIAoKICAgICAgaWYgKCFjb25maXJtKCfQo9C00LDQu9C40YLRjCDRhNC+0YLQvj8g0K3RgtC+INC00LXQudGB0YLQstC40LUg0L3QtdC70YzQt9GPINC+0YLQvNC10L3QuNGC0YwuJykpIHJldHVybjsKCiAgICAgIGtpdC5waG90b3Muc3BsaWNlKHZpZXdlckluZGV4LDEpOwogICAgICBpZiAoa2l0LnBob3Rvcy5sZW5ndGggPT09IDApewogICAgICAgIGtpdC5jcmVhdGVkQXQgPSBudWxsOwogICAgICAgIGNsb3NlVmlld2VyKCk7CiAgICAgIH1lbHNlewogICAgICAgIHZpZXdlckluZGV4ID0gTWF0aC5taW4odmlld2VySW5kZXgsIGtpdC5waG90b3MubGVuZ3RoLTEpOwogICAgICAgIGtpdC5jcmVhdGVkQXQgPSBmb3JtYXREYXRlVGltZShuZXcgRGF0ZSgpKTsKICAgICAgICByZW5kZXJWaWV3ZXIoKTsKICAgICAgfQogICAgICByZW5kZXIoKTsgLy8gdXBkYXRlIGNvdW50cy9ncmlkCiAgICAgIG5vdGlmeUNhclBob3Rvc1VwZGF0ZWQoKTsKICAgIH0pOwoKCiAgICAvKiA9PT09PSBFRElUIE1PREUgRVhJVCBVWCA9PT09PSAqLwogICAgLy8gRXhpdCBlZGl0IG9uIEVzYwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKT0+ewogICAgICBpZiAoZS5rZXkgIT09ICdFc2NhcGUnKSByZXR1cm47CiAgICAgIGlmICghYWN0aXZlRWRpdEtpdElkKSByZXR1cm47CiAgICAgIC8vIGRvbid0IGludGVyZmVyZSB3aXRoIHZpZXdlciBjb250cm9scyBpZiBuZWVkZWQKICAgICAgZXhpdEVkaXQoKTsKICAgIH0pOwoKICAgIC8vIEV4aXQgZWRpdCB3aGVuIGNsaWNraW5nIG91dHNpZGUgYWxsb3dlZCBhcmVhcyBvZiB0aGUgYWN0aXZlIGNhcmQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpPT57CiAgICAgIGlmICghYWN0aXZlRWRpdEtpdElkKSByZXR1cm47CgogICAgICAvLyBBbGxvdyBjbGlja2luZyBhY3Rpb24gYnV0dG9ucyBpbnNpZGUgdGhlIGFjdGl2ZSBjYXJkIChlZGl0L2RlbGV0ZS9kb3dubG9hZCBldGMuKQogICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWFjdGlvbnNgKSkgcmV0dXJuOwoKICAgICAgLy8gSWYgdmlld2VyIGlzIG9wZW4sIGlnbm9yZSBvdXRzaWRlIGNsaWNrcyAodmlld2VyIG92ZXJsYXkgaGFuZGxlcyBpdHNlbGYpCiAgICAgIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJCYWNrZHJvcCcpOwogICAgICBpZiAodmlld2VyICYmIHZpZXdlci5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuOwoKICAgICAgY29uc3QgY2FyZCA9IGtpdHNFbC5xdWVyeVNlbGVjdG9yKGAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdYCk7CiAgICAgIGlmICghY2FyZCkgcmV0dXJuOwoKICAgICAgY29uc3QgYWxsb3dlZCA9IGUudGFyZ2V0LmNsb3Nlc3QoCiAgICAgICAgYC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il0gLmtpdC1ncmlkLAogICAgICAgICAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdIC5raXQtdGl0bGUsCiAgICAgICAgIC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il0gLmtpdC1jaGVjaywKICAgICAgICAgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWRyYWctaGFuZGxlYAogICAgICApOwoKICAgICAgaWYgKCFhbGxvd2VkKXsKICAgICAgICBleGl0RWRpdCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsKCgoKCiAgICAvKiA9PT09PSBEcmFnIHJlb3JkZXIgKHN0YWJsZSBpUGhvbmUtbGlrZSkgPT09PT0gKi8KICAgIChmdW5jdGlvbiBzZXR1cERyYWdSZW9yZGVyKCl7CiAgICAgIC8qKgogICAgICAgKiBDZW50ZXItYmFzZWQgc3RhYmxlIGdyaWQgcmVvcmRlcmluZyAoU3ByaW5nQm9hcmQtaXNoIOKAnGNlbnRlcnMgZGVjaWRl4oCdKS4KICAgICAgICoKICAgICAgICogR29hbHM6CiAgICAgICAqIC0gVGFyZ2V0IHBvc2l0aW9uIGlzIGRlcml2ZWQgZnJvbSB0aGUgZHJhZ2dlZCBDQVJEIChpdHMgY2VudGVyKSwgbm90IHRoZSBjdXJzb3IuCiAgICAgICAqIC0gT3RoZXIgY2FyZHMg4oCcZGVjaWRl4oCdIHNoaWZ0cyBieSBjb21wYXJpbmcgY2VudGVycyAocm93LW1ham9yIG9yZGVyKS4KICAgICAgICogLSBTaW5nbGUgcGxhY2Vob2xkZXIgKOKAnGhvbGXigJ0pIHJlcHJlc2VudHMgdGhlIGluc2VydGlvbiBzbG90LgogICAgICAgKiAtIEFudGktaml0dGVyOiByQUYgYmF0Y2hpbmcgKyBjb29sZG93biArIGh5c3RlcmVzaXMgKyBzbWFsbCBkZWFkLXpvbmUgYXJvdW5kIGNlbnRlcnMuCiAgICAgICAqCiAgICAgICAqIE1vZGVsOgogICAgICAgKiAxKSBMaWZ0IGRyYWdnZWQgY2FyZCBpbnRvIG92ZXJsYXkgKHBvc2l0aW9uOmZpeGVkIGluIDxib2R5PikKICAgICAgICogMikgTGVhdmUgcGxhY2Vob2xkZXIgaW4gZ3JpZCBhdCBvcmlnaW5hbCBwb3NpdGlvbgogICAgICAgKiAzKSBXaGlsZSBkcmFnZ2luZywgY29tcHV0ZSBkcmFnZ2VkIGNlbnRlcjsgY29tcHV0ZSBjbG9zZXN0IGNhcmQgY2VudGVyOyBkZWNpZGUKICAgICAgICogICAgd2hldGhlciBob2xlIHNob3VsZCBiZSBiZWZvcmUgb3IgYWZ0ZXIgdGhhdCBjYXJkIChieSBjZW50ZXJzKSwgdGhlbiBtb3ZlIHBsYWNlaG9sZGVyLgogICAgICAgKiA0KSBPbiBkcm9wLCBpbnNlcnQgY2FyZCBhdCBwbGFjZWhvbGRlci4KICAgICAgICovCiAgICAgIGNvbnN0IGdyaWQgPSBraXRzRWw7IC8vICNraXRzCiAgICAgIGlmICghZ3JpZCkgcmV0dXJuOwoKICAgICAgLy8gLS0tLSBUdW5pbmcga25vYnMgLS0tLQogICAgICBjb25zdCBBVVRPU0NST0xMX01BUkdJTiA9IDYwOyAvLyBweCBmcm9tIHZpZXdwb3J0IGVkZ2UKICAgICAgY29uc3QgQVVUT1NDUk9MTF9NQVggPSAyMjsgICAgLy8gcHggcGVyIGZyYW1lCgogICAgICAvLyBNb3ZlIHBvbGljeSAoYW50aS1qaXR0ZXIpOiBhbGxvdyBtb3ZlcywgYnV0IG5ldmVyICJjaGF0dGVyIgogICAgICBjb25zdCBNT1ZFX0NPT0xET1dOX01TID0gOTA7ICAvLyBtaW4gdGltZSBiZXR3ZWVuIGhvbGUgbW92ZXMKICAgICAgY29uc3QgTU9WRV9IWVNUX1BYID0gMTI7ICAgICAgLy8gbWluIGNlbnRlciB0cmF2ZWwgYmV0d2VlbiBtb3ZlcwoKICAgICAgLy8gTWlsZCBzbW9vdGhpbmcgb2YgdGhlIGRyYWdnZWQgY2FyZCAoYWRkcyBhIHNtYWxsIGRlbGF5IHNvIHRoZSBmaW5nZXIvY3Vyc29yIGRvZXNuJ3QgInRlbGVwb3J0IiB0aGUgY2FyZCkKICAgICAgY29uc3QgRFJBR19FQVNFID0gMC4zNTsgICAgICAgLy8gMC4uMSAoaGlnaGVyID0gc25hcHBpZXIpCgogICAgICAvLyBQbGFubmluZyArIGNvbW1pdCBwb2xpY3kgKHByZS1wbGFuIHRhcmdldCwgY29tbWl0IG9ubHkgd2hlbiBvdmVybGFwIGlzIHN0cm9uZykKICAgICAgY29uc3QgUExBTl9UUklHR0VSID0gMC4yMDsgICAgICAgLy8gc3RhcnQgInBsYW5uaW5nIiBvbmNlIG92ZXJsYXAgaXMgbm90aWNlYWJsZQogICAgICBjb25zdCBQTEFOX1NUQUJMRV9NUyA9IDkwOyAgICAgICAvLyBjYW5kaWRhdGUgbXVzdCBiZSBzdGFibGUgdGhpcyBsb25nIHRvIGJlY29tZSB0aGUgcGxhbgogICAgICBjb25zdCBQTEFOX1NXSVRDSF9IWVNUID0gMC4xMjsgICAvLyBzd2l0Y2ggcGxhbiBvbmx5IGlmIG5ldyBpcyBiZXR0ZXIgYnkgdGhpcyBtYXJnaW4KICAgICAgY29uc3QgUExBTl9EUk9QID0gMC4wODsgICAgICAgICAgLy8gZHJvcCBwbGFuIGlmIG92ZXJsYXAgZmFsbHMgYmVsb3cgdGhpcwoKICAgICAgY29uc3QgQ09NTUlUX1RSSUdHRVIgPSAwLjgwOyAgICAgLy8gODAlIG92ZXJsYXAgPT4gbW92ZSBwbGFjZWhvbGRlciAoeW91ciAiZGVjaXNpb24gcG9pbnQiKQogICAgICBjb25zdCBDT01NSVRfU1RBQkxFX01TID0gODA7ICAgICAvLyBrZWVwID49IDgwJSBvdmVybGFwIGZvciB0aGlzIGxvbmcgYmVmb3JlIG1vdmluZwogICAgICBjb25zdCBMT0NLX0FGVEVSX01PVkVfTVMgPSAxNjA7ICAvLyBhZnRlciBhIG1vdmUsIGZyZWV6ZSByZS1wbGFubmluZyBicmllZmx5IChwcmV2ZW50cyBwaW5nLXBvbmcpCgogICAgICAvLyBDYW5kaWRhdGUgc3RpY2tpbmVzczoga2VlcCBwcmV2aW91cyBiZXN0IHVubGVzcyB0aGUgbmV3IG9uZSBpcyBjbGVhcmx5IGJldHRlcgogICAgICBjb25zdCBPVkVSTEFQX0hZU1QgPSAwLjEwOwoKICAgICAgLy8gU21hbGwgbG9vay1haGVhZCB1c2luZyBjYXJkIHZlbG9jaXR5IChzdGlsbCAiZnJvbSB0aGUgY2FyZCIsIG5vdCBmcm9tIGN1cnNvcikKICAgICAgY29uc3QgUFJFRElDVF9NUyA9IDkwOyAgICAgICAgLy8gbXMgYWhlYWQKCiAgICAgIGNvbnN0IFJPV19CQU5EX0ZSQUMgPSAwLjQ4OyAgICAvLyBzYW1lIHJvdyBpZiB8ZHl8IDwgbWVkaWFuSCAqIGZyYWMKICAgICAgY29uc3QgQ0VOVEVSX0RFQURfRlJBQyA9IDAuMDg7IC8vIGRlYWQtem9uZSBhcm91bmQgdGFyZ2V0IGNlbnRlciAoZnJhY3Rpb24gb2Ygdy9oKQoKICAgICAgbGV0IGRyYWcgPSBudWxsOwogICAgICBsZXQgcmFmSWQgPSAwOwoKICAgICAgZnVuY3Rpb24gcHgobil7IHJldHVybiBNYXRoLnJvdW5kKG4pICsgJ3B4JzsgfQoKICAgICAgZnVuY3Rpb24gdmlld3BvcnRBdXRvU2Nyb2xsKGNsaWVudFgsIGNsaWVudFkpewogICAgICAgIGNvbnN0IHZoID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgIGNvbnN0IHZ3ID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgbGV0IHZ5ID0gMCwgdnggPSAwOwoKICAgICAgICBpZiAoY2xpZW50WSA8IEFVVE9TQ1JPTExfTUFSR0lOKXsKICAgICAgICAgIHZ5ID0gLUFVVE9TQ1JPTExfTUFYICogKDEgLSBjbGllbnRZIC8gQVVUT1NDUk9MTF9NQVJHSU4pOwogICAgICAgIH0gZWxzZSBpZiAoY2xpZW50WSA+IHZoIC0gQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnkgPSBBVVRPU0NST0xMX01BWCAqICgxIC0gKHZoIC0gY2xpZW50WSkgLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2xpZW50WCA8IEFVVE9TQ1JPTExfTUFSR0lOKXsKICAgICAgICAgIHZ4ID0gLUFVVE9TQ1JPTExfTUFYICogKDEgLSBjbGllbnRYIC8gQVVUT1NDUk9MTF9NQVJHSU4pOwogICAgICAgIH0gZWxzZSBpZiAoY2xpZW50WCA+IHZ3IC0gQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnggPSBBVVRPU0NST0xMX01BWCAqICgxIC0gKHZ3IC0gY2xpZW50WCkgLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfQoKICAgICAgICBpZiAodnggfHwgdnkpIHdpbmRvdy5zY3JvbGxCeSh2eCwgdnkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBtYWtlUGxhY2Vob2xkZXIoZnJvbUNhcmQpewogICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgcGguY2xhc3NOYW1lID0gJ2tpdC1wbGFjZWhvbGRlcic7CiAgICAgICAgY29uc3QgciA9IGZyb21DYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHBoLnN0eWxlLmhlaWdodCA9IHB4KHIuaGVpZ2h0KTsKICAgICAgICBwaC5zdHlsZS5taW5IZWlnaHQgPSBweChyLmhlaWdodCk7CiAgICAgICAgcGguc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgcGguc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgICAgICByZXR1cm4gcGg7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG5leHRDYXJkQWZ0ZXIobm9kZSl7CiAgICAgICAgbGV0IG4gPSBub2RlID8gbm9kZS5uZXh0RWxlbWVudFNpYmxpbmcgOiBudWxsOwogICAgICAgIHdoaWxlIChuICYmICFuLmNsYXNzTGlzdC5jb250YWlucygna2l0LWNhcmQnKSkgbiA9IG4ubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgIHJldHVybiBuOwogICAgICB9CgogICAgICBmdW5jdGlvbiBpc1BsYWNlaG9sZGVyQXRFbmQoKXsKICAgICAgICBjb25zdCByZWYgPSBuZXh0Q2FyZEFmdGVyKGRyYWc/LnBsYWNlaG9sZGVyKTsKICAgICAgICByZXR1cm4gIXJlZjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZmxpcEFuaW1hdGVBZnRlckRPTUNoYW5nZShkb0NoYW5nZSl7CiAgICAgICAgY29uc3QgZmlyc3QgPSBuZXcgTWFwKCk7CiAgICAgICAgZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcua2l0LWNhcmQsIC5raXQtcGxhY2Vob2xkZXInKS5mb3JFYWNoKG4gPT4gZmlyc3Quc2V0KG4sIG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpKTsKCiAgICAgICAgZG9DaGFuZ2UoKTsKCiAgICAgICAgY29uc3QgbGFzdCA9IG5ldyBNYXAoKTsKICAgICAgICBncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCwgLmtpdC1wbGFjZWhvbGRlcicpLmZvckVhY2gobiA9PiBsYXN0LnNldChuLCBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSk7CgogICAgICAgIGxhc3QuZm9yRWFjaCgobHIsIG5vZGUpPT57CiAgICAgICAgICBjb25zdCBmciA9IGZpcnN0LmdldChub2RlKTsKICAgICAgICAgIGlmICghZnIpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGR4ID0gZnIubGVmdCAtIGxyLmxlZnQ7CiAgICAgICAgICBjb25zdCBkeSA9IGZyLnRvcCAtIGxyLnRvcDsKICAgICAgICAgIGlmIChkeCB8fCBkeSl7CiAgICAgICAgICAgIG5vZGUuYW5pbWF0ZShbCiAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtkeH1weCwgJHtkeX1weClgIH0sCiAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwwKScgfQogICAgICAgICAgICBdLCB7IGR1cmF0aW9uOiAyMjAsIGVhc2luZzogJ2N1YmljLWJlemllciguMiwuODUsLjIsMSknIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBnZXREcmFnVG9wTGVmdCgpewogICAgICAgIC8vIEtlZXAgb3ZlcmxheSBjYXJkIHVuZGVyIHBvaW50ZXIgd2l0aCBmaXhlZCBncmFiIG9mZnNldCwgYnV0IHNtb290aCBhIGJpdCB0byByZWR1Y2Ugaml0dGVyLgogICAgICAgIGNvbnN0IHRhcmdldFRvcCA9IGRyYWcubGFzdENsaWVudFkgLSBkcmFnLmdyYWJEeTsKICAgICAgICBjb25zdCB0YXJnZXRMZWZ0ID0gZHJhZy5sYXN0Q2xpZW50WCAtIGRyYWcuZ3JhYkR4OwoKICAgICAgICBpZiAoZHJhZy5fc21vb3RoVG9wID09IG51bGwpewogICAgICAgICAgZHJhZy5fc21vb3RoVG9wID0gdGFyZ2V0VG9wOwogICAgICAgICAgZHJhZy5fc21vb3RoTGVmdCA9IHRhcmdldExlZnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRyYWcuX3Ntb290aFRvcCArPSAodGFyZ2V0VG9wIC0gZHJhZy5fc21vb3RoVG9wKSAqIERSQUdfRUFTRTsKICAgICAgICAgIGRyYWcuX3Ntb290aExlZnQgKz0gKHRhcmdldExlZnQgLSBkcmFnLl9zbW9vdGhMZWZ0KSAqIERSQUdfRUFTRTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7IHRvcDogZHJhZy5fc21vb3RoVG9wLCBsZWZ0OiBkcmFnLl9zbW9vdGhMZWZ0IH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNsYW1wKG4sIGEsIGIpeyByZXR1cm4gTWF0aC5tYXgoYSwgTWF0aC5taW4oYiwgbikpOyB9CgogICAgICBmdW5jdGlvbiByZWN0RnJvbUNlbnRlcihjeCwgY3ksIHcsIGgpewogICAgICAgIGNvbnN0IGxlZnQgPSBjeCAtIHcvMjsKICAgICAgICBjb25zdCB0b3AgPSBjeSAtIGgvMjsKICAgICAgICByZXR1cm4geyBsZWZ0LCB0b3AsIHJpZ2h0OiBsZWZ0ICsgdywgYm90dG9tOiB0b3AgKyBoLCB3aWR0aDogdywgaGVpZ2h0OiBoIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGludGVyc2VjdGlvbkFyZWEoYSwgYil7CiAgICAgICAgY29uc3QgaXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhLnJpZ2h0LCBiLnJpZ2h0KSAtIE1hdGgubWF4KGEubGVmdCwgYi5sZWZ0KSk7CiAgICAgICAgY29uc3QgaXkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhLmJvdHRvbSwgYi5ib3R0b20pIC0gTWF0aC5tYXgoYS50b3AsIGIudG9wKSk7CiAgICAgICAgcmV0dXJuIGl4ICogaXk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG92ZXJsYXBTY29yZShkcmFnUmVjdCwgdGFyZ2V0UmVjdCl7CiAgICAgICAgY29uc3QgYXJlYSA9IGludGVyc2VjdGlvbkFyZWEoZHJhZ1JlY3QsIHRhcmdldFJlY3QpOwogICAgICAgIGlmICghYXJlYSkgcmV0dXJuIDA7CiAgICAgICAgY29uc3QgYTEgPSBkcmFnUmVjdC53aWR0aCAqIGRyYWdSZWN0LmhlaWdodDsKICAgICAgICBjb25zdCBhMiA9IHRhcmdldFJlY3Qud2lkdGggKiB0YXJnZXRSZWN0LmhlaWdodDsKICAgICAgICByZXR1cm4gYXJlYSAvIE1hdGgubWluKGExLCBhMik7IC8vIDAuLjEKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY29tcHV0ZVJvd01ham9yT3JkZXIoKXsKICAgICAgICBjb25zdCBjYXJkcyA9IFsuLi5ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCcpXTsKICAgICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICAgIGZvciAoY29uc3QgZWwgb2YgY2FyZHMpewogICAgICAgICAgY29uc3QgciA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICAgIGVsLAogICAgICAgICAgICByZWN0OiByLAogICAgICAgICAgICBjeDogci5sZWZ0ICsgci53aWR0aC8yLAogICAgICAgICAgICBjeTogci50b3AgKyByLmhlaWdodC8yLAogICAgICAgICAgICB3OiByLndpZHRoLAogICAgICAgICAgICBoOiByLmhlaWdodAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4geyBvcmRlcjogW10sIHJvd0JhbmQ6IDAgfTsKCiAgICAgICAgY29uc3QgaHMgPSBpdGVtcy5tYXAoaT0+aS5oKS5zb3J0KChhLGIpPT5hLWIpOwogICAgICAgIGNvbnN0IG1lZEggPSBoc1tNYXRoLmZsb29yKGhzLmxlbmd0aC8yKV0gfHwgMDsKICAgICAgICBjb25zdCByb3dCYW5kID0gTWF0aC5tYXgoMTIsIG1lZEggKiBST1dfQkFORF9GUkFDKTsKCiAgICAgICAgLy8gZ3JvdXAgaW50byByb3dzIGJ5IGNlbnRlclkKICAgICAgICBpdGVtcy5zb3J0KChhLGIpPT5hLmN5IC0gYi5jeSk7CiAgICAgICAgY29uc3Qgcm93cyA9IFtdOwogICAgICAgIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpewogICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dzLmxlbmd0aC0xXTsKICAgICAgICAgIGlmICghcm93KXsKICAgICAgICAgICAgcm93cy5wdXNoKHsgY3k6IGl0LmN5LCBpdGVtczogW2l0XSB9KTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoTWF0aC5hYnMoaXQuY3kgLSByb3cuY3kpIDw9IHJvd0JhbmQpewogICAgICAgICAgICByb3cuaXRlbXMucHVzaChpdCk7CiAgICAgICAgICAgIHJvdy5jeSA9IHJvdy5jeSArIChpdC5jeSAtIHJvdy5jeSkvcm93Lml0ZW1zLmxlbmd0aDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJvd3MucHVzaCh7IGN5OiBpdC5jeSwgaXRlbXM6IFtpdF0gfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIHNvcnQgd2l0aGluIHJvd3MgYnkgY2VudGVyWCBhbmQgZmxhdHRlbgogICAgICAgIGNvbnN0IG9yZGVyID0gW107CiAgICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cyl7CiAgICAgICAgICByb3cuaXRlbXMuc29ydCgoYSxiKT0+YS5jeCAtIGIuY3gpOwogICAgICAgICAgZm9yIChjb25zdCBpdCBvZiByb3cuaXRlbXMpIG9yZGVyLnB1c2goaXQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4geyBvcmRlciwgcm93QmFuZCB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBjb21wdXRlSW5zZXJ0UmVmSW5PcmRlcihvcmRlciwgcm93QmFuZCwgY2hvc2VuSSwgZHJhZ0N4LCBkcmFnQ3kpewogICAgICAgIGNvbnN0IGNob3NlbiA9IG9yZGVyW2Nob3NlbkldOwogICAgICAgIGNvbnN0IHNhbWVSb3cgPSBNYXRoLmFicyhkcmFnQ3kgLSBjaG9zZW4uY3kpIDw9IHJvd0JhbmQvMjsKCiAgICAgICAgaWYgKHNhbWVSb3cpewogICAgICAgICAgY29uc3QgZGVhZFggPSBNYXRoLm1heCg2LCBjaG9zZW4udyAqIENFTlRFUl9ERUFEX0ZSQUMpOwogICAgICAgICAgaWYgKGRyYWdDeCA8IGNob3Nlbi5jeCAtIGRlYWRYKSByZXR1cm4gY2hvc2VuLmVsOyAvLyBiZWZvcmUKICAgICAgICAgIGlmIChkcmFnQ3ggPiBjaG9zZW4uY3ggKyBkZWFkWCkgcmV0dXJuIChjaG9zZW5JICsgMSA8IG9yZGVyLmxlbmd0aCkgPyBvcmRlcltjaG9zZW5JICsgMV0uZWwgOiBudWxsOyAvLyBhZnRlcgogICAgICAgICAgcmV0dXJuIG5leHRDYXJkQWZ0ZXIoZHJhZy5wbGFjZWhvbGRlcik7IC8vIGRlYWQtem9uZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBkZWFkWSA9IE1hdGgubWF4KDYsIGNob3Nlbi5oICogQ0VOVEVSX0RFQURfRlJBQyk7CiAgICAgICAgICBpZiAoZHJhZ0N5IDwgY2hvc2VuLmN5IC0gZGVhZFkpIHJldHVybiBjaG9zZW4uZWw7CiAgICAgICAgICBpZiAoZHJhZ0N5ID4gY2hvc2VuLmN5ICsgZGVhZFkpIHJldHVybiAoY2hvc2VuSSArIDEgPCBvcmRlci5sZW5ndGgpID8gb3JkZXJbY2hvc2VuSSArIDFdLmVsIDogbnVsbDsKICAgICAgICAgIHJldHVybiBuZXh0Q2FyZEFmdGVyKGRyYWcucGxhY2Vob2xkZXIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gY29tcHV0ZUNhbmRpZGF0ZShkcmFnQ3gsIGRyYWdDeSwgZHJhZ1JlY3QpewogICAgICAgIGNvbnN0IHsgb3JkZXIsIHJvd0JhbmQgfSA9IGNvbXB1dGVSb3dNYWpvck9yZGVyKCk7CiAgICAgICAgaWYgKCFvcmRlci5sZW5ndGgpIHJldHVybiB7IHJlZjogbnVsbCwgdGFyZ2V0RWw6IG51bGwsIHRhcmdldFNjb3JlOiAwIH07CgogICAgICAgIGNvbnN0IGRyID0gZHJhZ1JlY3Q7CgogICAgICAgIC8vIDEpIEJlc3Qgb3ZlcmxhcCAod2hvIGlzIG1vc3QgY292ZXJlZCBieSB0aGUgZHJhZ2dlZCBjYXJkKQogICAgICAgIGxldCBiZXN0SSA9IC0xOwogICAgICAgIGxldCBiZXN0U2NvcmUgPSAwOwogICAgICAgIGZvciAobGV0IGk9MDtpPG9yZGVyLmxlbmd0aDtpKyspewogICAgICAgICAgY29uc3QgaXQgPSBvcmRlcltpXTsKICAgICAgICAgIGNvbnN0IHMgPSBvdmVybGFwU2NvcmUoZHIsIGl0LnJlY3QpOwogICAgICAgICAgaWYgKHMgPiBiZXN0U2NvcmUpewogICAgICAgICAgICBiZXN0U2NvcmUgPSBzOwogICAgICAgICAgICBiZXN0SSA9IGk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAyKSBDaG9vc2Ugd2l0aCBzdGlja2luZXNzIChwcmV2ZW50cyByYXBpZCBmbGlwcyB3aGlsZSBob3ZlcmluZykKICAgICAgICBsZXQgY2hvc2VuSSA9IC0xOwogICAgICAgIGxldCBjaG9zZW5TY29yZSA9IDA7CgogICAgICAgIGlmIChiZXN0SSAhPT0gLTEgJiYgYmVzdFNjb3JlID4gMCl7CiAgICAgICAgICBjaG9zZW5JID0gYmVzdEk7CiAgICAgICAgICBjaG9zZW5TY29yZSA9IGJlc3RTY29yZTsKCiAgICAgICAgICBpZiAoZHJhZy5sYXN0VGFyZ2V0RWwpewogICAgICAgICAgICBjb25zdCBwcmV2SSA9IG9yZGVyLmZpbmRJbmRleChpdCA9PiBpdC5lbCA9PT0gZHJhZy5sYXN0VGFyZ2V0RWwpOwogICAgICAgICAgICBpZiAocHJldkkgIT09IC0xKXsKICAgICAgICAgICAgICBjb25zdCBwcmV2U2NvcmUgPSBvdmVybGFwU2NvcmUoZHIsIG9yZGVyW3ByZXZJXS5yZWN0KTsKICAgICAgICAgICAgICBpZiAocHJldlNjb3JlID49IGNob3NlblNjb3JlIC0gT1ZFUkxBUF9IWVNUKXsKICAgICAgICAgICAgICAgIGNob3NlbkkgPSBwcmV2STsKICAgICAgICAgICAgICAgIGNob3NlblNjb3JlID0gcHJldlNjb3JlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBGYWxsYmFjazogY2xvc2VzdCBjZW50ZXIgKGJldHdlZW4gY2FyZHMgLyBpbiBnYXBzKQogICAgICAgICAgbGV0IGNpID0gMDsKICAgICAgICAgIGxldCBiZXN0RCA9IEluZmluaXR5OwogICAgICAgICAgZm9yIChsZXQgaT0wO2k8b3JkZXIubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGNvbnN0IGl0ID0gb3JkZXJbaV07CiAgICAgICAgICAgIGNvbnN0IGR4ID0gZHJhZ0N4IC0gaXQuY3g7CiAgICAgICAgICAgIGNvbnN0IGR5ID0gZHJhZ0N5IC0gaXQuY3k7CiAgICAgICAgICAgIGNvbnN0IGQgPSBkeCpkeCArIGR5KmR5OwogICAgICAgICAgICBpZiAoZCA8IGJlc3REKXsgYmVzdEQgPSBkOyBjaSA9IGk7IH0KICAgICAgICAgIH0KICAgICAgICAgIGNob3NlbkkgPSBjaTsKICAgICAgICAgIGNob3NlblNjb3JlID0gMDsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGNob3NlbiA9IG9yZGVyW2Nob3NlbkldOwogICAgICAgIGRyYWcubGFzdFRhcmdldEVsID0gY2hvc2VuLmVsOwoKICAgICAgICBjb25zdCByZWYgPSBjb21wdXRlSW5zZXJ0UmVmSW5PcmRlcihvcmRlciwgcm93QmFuZCwgY2hvc2VuSSwgZHJhZ0N4LCBkcmFnQ3kpOwogICAgICAgIHJldHVybiB7IHJlZiwgdGFyZ2V0RWw6IGNob3Nlbi5lbCwgdGFyZ2V0U2NvcmU6IGNob3NlblNjb3JlIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNvbXB1dGVJbnNlcnRSZWZGb3JUYXJnZXQodGFyZ2V0RWwsIGRyYWdDeCwgZHJhZ0N5KXsKICAgICAgICBjb25zdCB7IG9yZGVyLCByb3dCYW5kIH0gPSBjb21wdXRlUm93TWFqb3JPcmRlcigpOwogICAgICAgIGlmICghb3JkZXIubGVuZ3RoKSByZXR1cm4gbnVsbDsKCiAgICAgICAgY29uc3QgaSA9IG9yZGVyLmZpbmRJbmRleChpdCA9PiBpdC5lbCA9PT0gdGFyZ2V0RWwpOwogICAgICAgIGlmIChpID09PSAtMSl7CiAgICAgICAgICByZXR1cm4gbmV4dENhcmRBZnRlcihkcmFnLnBsYWNlaG9sZGVyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbXB1dGVJbnNlcnRSZWZJbk9yZGVyKG9yZGVyLCByb3dCYW5kLCBpLCBkcmFnQ3gsIGRyYWdDeSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYW5Gcm9tQ2FuZGlkYXRlKGNhbmQsIGRyYWdSZWN0LCBub3cpewogICAgICAgIGNvbnN0IGVsID0gY2FuZC50YXJnZXRFbDsKICAgICAgICBjb25zdCBzY29yZSA9IGNhbmQudGFyZ2V0U2NvcmU7CgogICAgICAgIC8vIE5vdCBlbm91Z2ggb3ZlcmxhcCA9PiBjYW5kaWRhdGUgcmVzZXRzOyBwbGFuIG1heSBkcm9wIGlmIHdlIG1vdmVkIGF3YXkuCiAgICAgICAgaWYgKCFlbCB8fCBzY29yZSA8IFBMQU5fVFJJR0dFUil7CiAgICAgICAgICBkcmFnLnBsYW5DYW5kRWwgPSBudWxsOwogICAgICAgICAgZHJhZy5wbGFuQ2FuZFN0YXJ0ID0gMDsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTY29yZSA9IDA7CgogICAgICAgICAgaWYgKGRyYWcucGxhbkVsKXsKICAgICAgICAgICAgY29uc3QgY3VyID0gb3ZlcmxhcFNjb3JlKGRyYWdSZWN0LCBkcmFnLnBsYW5FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7CiAgICAgICAgICAgIGlmIChjdXIgPCBQTEFOX0RST1ApewogICAgICAgICAgICAgIGRyYWcucGxhbkVsID0gbnVsbDsKICAgICAgICAgICAgICBkcmFnLnBsYW5TZXRBdCA9IDA7CiAgICAgICAgICAgICAgZHJhZy5wbGFuU2NvcmUgPSAwOwogICAgICAgICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBTYW1lIHBsYW4gdGFyZ2V0OiBqdXN0IHJlZnJlc2ggc2NvcmUuCiAgICAgICAgaWYgKGRyYWcucGxhbkVsID09PSBlbCl7CiAgICAgICAgICBkcmFnLnBsYW5TY29yZSA9IHNjb3JlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gVHJhY2sgYSBzdGFibGUgY2FuZGlkYXRlIGJlZm9yZSBzd2l0Y2hpbmcgcGxhbi4KICAgICAgICBpZiAoZHJhZy5wbGFuQ2FuZEVsICE9PSBlbCl7CiAgICAgICAgICBkcmFnLnBsYW5DYW5kRWwgPSBlbDsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTdGFydCA9IG5vdzsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTY29yZSA9IHNjb3JlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdyAtIChkcmFnLnBsYW5DYW5kU3RhcnQgfHwgbm93KSA8IFBMQU5fU1RBQkxFX01TKSByZXR1cm47CgogICAgICAgIGNvbnN0IGN1ciA9IGRyYWcucGxhbkVsID8gb3ZlcmxhcFNjb3JlKGRyYWdSZWN0LCBkcmFnLnBsYW5FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkgOiAwOwogICAgICAgIGlmICghZHJhZy5wbGFuRWwgfHwgc2NvcmUgPiBjdXIgKyBQTEFOX1NXSVRDSF9IWVNUKXsKICAgICAgICAgIGRyYWcucGxhbkVsID0gZWw7CiAgICAgICAgICBkcmFnLnBsYW5TZXRBdCA9IG5vdzsKICAgICAgICAgIGRyYWcucGxhblNjb3JlID0gc2NvcmU7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG1heWJlTW92ZUhvbGUocHJlZEN4LCBwcmVkQ3ksIHByZWRSZWN0LCBjdXJDeCwgY3VyQ3ksIGN1clJlY3QpewogICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwoKICAgICAgICAvLyBDYW5kaWRhdGUgc2VsZWN0aW9uIHVzZXMgdGhlICpwcmVkaWN0ZWQqIHJlY3QgKGhlbHBzICJwbGFuIGFoZWFkIikKICAgICAgICBjb25zdCBjYW5kID0gY29tcHV0ZUNhbmRpZGF0ZShwcmVkQ3gsIHByZWRDeSwgcHJlZFJlY3QpOwoKICAgICAgICAvLyBVcGRhdGUgcGxhbm5lZCB0YXJnZXQgKHVubGVzcyB3ZSdyZSBpbiBhIHNob3J0IHBvc3QtbW92ZSBsb2NrKQogICAgICAgIGlmIChub3cgPj0gKGRyYWcubG9ja1VudGlsID8/IDApKXsKICAgICAgICAgIHVwZGF0ZVBsYW5Gcm9tQ2FuZGlkYXRlKGNhbmQsIHByZWRSZWN0LCBub3cpOwogICAgICAgIH0KCiAgICAgICAgLy8gRm9yIGNvbW1pdHRpbmcgdGhlIG1vdmUsIHVzZSB0aGUgKmN1cnJlbnQgdmlzdWFsKiByZWN0LgogICAgICAgIC8vIFBpY2sgdGhlIGVsZW1lbnQgd2l0aCB0aGUgc3Ryb25nZXN0IENVUlJFTlQgb3ZlcmxhcC4KICAgICAgICAvLyAoUGxhbm5pbmcgY2FuIGJlIHByZWRpY3RpdmU7IGNvbW1pdHRpbmcgc2hvdWxkIGZvbGxvdyB3aGF0IHRoZSB1c2VyIGFjdHVhbGx5IHNlZXMuKQogICAgICAgIGNvbnN0IHsgb3JkZXI6IGNvbW1pdE9yZGVyIH0gPSBjb21wdXRlUm93TWFqb3JPcmRlcigpOwogICAgICAgIGxldCBjb21taXRUYXJnZXQgPSBudWxsOwogICAgICAgIGxldCBiZXN0T3YgPSAwOwoKICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIGNvbW1pdE9yZGVyKXsKICAgICAgICAgIGNvbnN0IG92ID0gb3ZlcmxhcFNjb3JlKGN1clJlY3QsIGl0LnJlY3QpOwogICAgICAgICAgaWYgKG92ID4gYmVzdE92KXsKICAgICAgICAgICAgYmVzdE92ID0gb3Y7CiAgICAgICAgICAgIGNvbW1pdFRhcmdldCA9IGl0LmVsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gS2VlcCB0aGUgcHJldmlvdXMgY29tbWl0IHRhcmdldCB1bmxlc3MgdGhlIG5ldyBvbmUgaXMgY2xlYXJseSBiZXR0ZXIgKGFudGktZmxpcCkuCiAgICAgICAgaWYgKGRyYWcuY29tbWl0VGFyZ2V0RWwgJiYgY29tbWl0VGFyZ2V0ICYmIGRyYWcuY29tbWl0VGFyZ2V0RWwgIT09IGNvbW1pdFRhcmdldCl7CiAgICAgICAgICBjb25zdCBwcmV2ID0gY29tbWl0T3JkZXIuZmluZChpdCA9PiBpdC5lbCA9PT0gZHJhZy5jb21taXRUYXJnZXRFbCk7CiAgICAgICAgICBpZiAocHJldil7CiAgICAgICAgICAgIGNvbnN0IHByZXZPdiA9IG92ZXJsYXBTY29yZShjdXJSZWN0LCBwcmV2LnJlY3QpOwogICAgICAgICAgICBpZiAocHJldk92ID49IGJlc3RPdiAtIE9WRVJMQVBfSFlTVCl7CiAgICAgICAgICAgICAgY29tbWl0VGFyZ2V0ID0gZHJhZy5jb21taXRUYXJnZXRFbDsKICAgICAgICAgICAgICBiZXN0T3YgPSBwcmV2T3Y7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghY29tbWl0VGFyZ2V0KSByZXR1cm47CgoKICAgICAgICAvLyBTdGFibGUgY29tbWl0IHRpbWVyIGlzIHBlci10YXJnZXQKICAgICAgICBpZiAoZHJhZy5jb21taXRUYXJnZXRFbCAhPT0gY29tbWl0VGFyZ2V0KXsKICAgICAgICAgIGRyYWcuY29tbWl0VGFyZ2V0RWwgPSBjb21taXRUYXJnZXQ7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICB9CgogICAgICAgIC8vIE9ubHkgY29tbWl0IGEgbW92ZSB3aGVuIG92ZXJsYXAgaXMgc3Ryb25nICg+PSA4MCUpIEFORCBzdGFibGUgZm9yIGEgc2hvcnQgdGltZS4KICAgICAgICBpZiAoYmVzdE92ID49IENPTU1JVF9UUklHR0VSKXsKICAgICAgICAgIGlmICghZHJhZy5jb21taXRTaW5jZSkgZHJhZy5jb21taXRTaW5jZSA9IG5vdzsKICAgICAgICAgIGlmIChub3cgLSBkcmFnLmNvbW1pdFNpbmNlIDwgQ09NTUlUX1NUQUJMRV9NUykgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vICJUYWtlIHRoZSB0YXJnZXQncyBzbG90IjoKICAgICAgICAvLyAtIGlmIHRhcmdldCBpcyBBRlRFUiB0aGUgaG9sZSA9PiBtb3ZlIGhvbGUgQUZURVIgdGFyZ2V0IChkcmFnZ2VkIGNhcmQgbGFuZHMgaW50byB0YXJnZXQncyBpbmRleCkKICAgICAgICAvLyAtIGlmIHRhcmdldCBpcyBCRUZPUkUgdGhlIGhvbGUgPT4gbW92ZSBob2xlIEJFRk9SRSB0YXJnZXQKICAgICAgICBjb25zdCBob2xlUG9zID0gZHJhZy5wbGFjZWhvbGRlcjsKICAgICAgICBjb25zdCB0YXJnZXRBZnRlckhvbGUgPSAhIShob2xlUG9zLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGNvbW1pdFRhcmdldCkgJiBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORyk7CiAgICAgICAgY29uc3QgY29tbWl0UmVmID0gdGFyZ2V0QWZ0ZXJIb2xlID8gbmV4dENhcmRBZnRlcihjb21taXRUYXJnZXQpIDogY29tbWl0VGFyZ2V0CgoKICAgICAgICBjb25zdCBjdXJyZW50UmVmID0gbmV4dENhcmRBZnRlcihkcmFnLnBsYWNlaG9sZGVyKTsKICAgICAgICBpZiAoY29tbWl0UmVmID09PSBjdXJyZW50UmVmKSByZXR1cm47CgogICAgICAgIC8vIEV4dHJhIGFudGktY2hhdHRlciBndWFyZHMgKHVzZSBjdXJyZW50IGNlbnRlcikKICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChjdXJDeCAtIChkcmFnLmxhc3RNb3ZlQ3ggPz8gY3VyQ3gpLCBjdXJDeSAtIChkcmFnLmxhc3RNb3ZlQ3kgPz8gY3VyQ3kpKTsKICAgICAgICBpZiAobm93IC0gZHJhZy5sYXN0TW92ZUF0IDwgTU9WRV9DT09MRE9XTl9NUykgcmV0dXJuOwogICAgICAgIGlmIChkaXN0IDwgTU9WRV9IWVNUX1BYKSByZXR1cm47CgogICAgICAgIGZsaXBBbmltYXRlQWZ0ZXJET01DaGFuZ2UoKCk9PnsKICAgICAgICAgIGdyaWQuaW5zZXJ0QmVmb3JlKGRyYWcucGxhY2Vob2xkZXIsIGNvbW1pdFJlZik7CiAgICAgICAgfSk7CgogICAgICAgIGRyYWcubGFzdE1vdmVBdCA9IG5vdzsKICAgICAgICBkcmFnLmxhc3RNb3ZlQ3ggPSBjdXJDeDsKICAgICAgICBkcmFnLmxhc3RNb3ZlQ3kgPSBjdXJDeTsKCiAgICAgICAgLy8gYnJpZWYgbG9jayBwcmV2ZW50cyBpbW1lZGlhdGUgInVuZG8iIHdoZW4gbGF5b3V0IHNoaWZ0cwogICAgICAgIGRyYWcubG9ja1VudGlsID0gbm93ICsgTE9DS19BRlRFUl9NT1ZFX01TOwogICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKGUpewogICAgICAgIGlmICghZHJhZyB8fCBlLnBvaW50ZXJJZCAhPT0gZHJhZy5wb2ludGVySWQpIHJldHVybjsKICAgICAgICBkcmFnLmxhc3RDbGllbnRYID0gZS5jbGllbnRYOwogICAgICAgIGRyYWcubGFzdENsaWVudFkgPSBlLmNsaWVudFk7CiAgICAgICAgaWYgKCFyYWZJZCkgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGJlZ2luRHJhZyhoYW5kbGVFbCwgZSl7CiAgICAgICAgY29uc3QgY2FyZCA9IGhhbmRsZUVsLmNsb3Nlc3QoJy5raXQtY2FyZCcpOwogICAgICAgIGlmICghY2FyZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGtpdElkID0gY2FyZC5kYXRhc2V0LmtpdElkOwogICAgICAgIGlmICgha2l0SWQpIHJldHVybjsKCiAgICAgICAgLy8gSWdub3JlIGlmIGRyYWcgc3RhcnRlZCBvbiBpbnRlcmFjdGl2ZSBhY3Rpb25zCiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtYWN0aW9ucycpKSByZXR1cm47CgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgICBjb25zdCByZWN0ID0gY2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBjb25zdCBzdGFydEN4ID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aC8yOwogICAgICAgIGNvbnN0IHN0YXJ0Q3kgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0LzI7CgogICAgICAgIGRyYWcgPSB7CiAgICAgICAgICBwb2ludGVySWQ6IGUucG9pbnRlcklkLAogICAgICAgICAgY2FyZCwKICAgICAgICAgIGtpdElkLAogICAgICAgICAgZ3JhYkR4OiBlLmNsaWVudFggLSByZWN0LmxlZnQsCiAgICAgICAgICBncmFiRHk6IGUuY2xpZW50WSAtIHJlY3QudG9wLAogICAgICAgICAgdzogcmVjdC53aWR0aCwKICAgICAgICAgIGg6IHJlY3QuaGVpZ2h0LAogICAgICAgICAgbGFzdENsaWVudFg6IGUuY2xpZW50WCwKICAgICAgICAgIGxhc3RDbGllbnRZOiBlLmNsaWVudFksCiAgICAgICAgICBzdGFydENsaWVudFk6IGUuY2xpZW50WSwKICAgICAgICAgIHN0YXJ0SW5kZXg6IFsuLi5ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCcpXS5maW5kSW5kZXgoZWwgPT4gZWwuZGF0YXNldC5raXRJZCA9PT0ga2l0SWQpLAogICAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgICAgcGxhY2Vob2xkZXI6IG1ha2VQbGFjZWhvbGRlcihjYXJkKSwKICAgICAgICAgIGxhc3RNb3ZlQXQ6IDAsCiAgICAgICAgICBsYXN0TW92ZUN4OiBzdGFydEN4LAogICAgICAgICAgbGFzdE1vdmVDeTogc3RhcnRDeSwKICAgICAgICAgIC8vIHBsYW5uaW5nIC8gY29tbWl0IHN0YXRlIChhbnRpLWppdHRlcikKICAgICAgICAgIHBsYW5FbDogbnVsbCwKICAgICAgICAgIHBsYW5TZXRBdDogMCwKICAgICAgICAgIHBsYW5TY29yZTogMCwKICAgICAgICAgIHBsYW5DYW5kRWw6IG51bGwsCiAgICAgICAgICBwbGFuQ2FuZFN0YXJ0OiAwLAogICAgICAgICAgcGxhbkNhbmRTY29yZTogMCwKICAgICAgICAgIGNvbW1pdFNpbmNlOiAwLAogICAgICAgICAgbG9ja1VudGlsOiAwLAoKICAgICAgICAgIGNvbW1pdFRhcmdldEVsOiBudWxsLAoKICAgICAgICAgIC8vIHNtb290aGVkIHBvc2l0aW9uIGZvciBvdmVybGF5IGNhcmQKICAgICAgICAgIF9zbW9vdGhUb3A6IHJlY3QudG9wLAogICAgICAgICAgX3Ntb290aExlZnQ6IHJlY3QubGVmdCwKCiAgICAgICAgICBfcHJldlVzZXJTZWxlY3Q6IGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdAogICAgICAgIH07CgogICAgICAgIC8vIEluc2VydCBwbGFjZWhvbGRlciB3aGVyZSB0aGUgY2FyZCB3YXMKICAgICAgICBncmlkLmluc2VydEJlZm9yZShkcmFnLnBsYWNlaG9sZGVyLCBjYXJkKTsKCiAgICAgICAgLy8gTGlmdCBjYXJkIGludG8gb3ZlcmxheQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FyZCk7CiAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdpcy1kcmFnZ2luZycpOwogICAgICAgIGNhcmQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgIGNhcmQuc3R5bGUudG9wID0gcHgocmVjdC50b3ApOwogICAgICAgIGNhcmQuc3R5bGUubGVmdCA9IHB4KHJlY3QubGVmdCk7CiAgICAgICAgY2FyZC5zdHlsZS53aWR0aCA9IHB4KHJlY3Qud2lkdGgpOwogICAgICAgIGNhcmQuc3R5bGUuaGVpZ2h0ID0gcHgocmVjdC5oZWlnaHQpOwogICAgICAgIGNhcmQuc3R5bGUuekluZGV4ID0gJzk5OTknOwogICAgICAgIGNhcmQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgICAgICBjYXJkLnN0eWxlLm1hcmdpbiA9ICcwJzsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnOwoKICAgICAgICAvLyBNb3ZlIGxvb3AKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUsIHRydWUpOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGVuZERyYWcsIHRydWUpOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCBlbmREcmFnLCB0cnVlKTsKCiAgICAgICAgaWYgKCFyYWZJZCkgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNsZWFudXBEcmFnKCl7CiAgICAgICAgaWYgKCFkcmFnKSByZXR1cm47CgogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSwgdHJ1ZSk7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgZW5kRHJhZywgdHJ1ZSk7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIGVuZERyYWcsIHRydWUpOwoKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnOwogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9IGRyYWcuX3ByZXZVc2VyU2VsZWN0ID8/ICcnOwoKICAgICAgICBkcmFnLmNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ2dpbmcnKTsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUucG9zaXRpb24gPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUudG9wID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLmxlZnQgPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUud2lkdGggPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLnpJbmRleCA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLm1hcmdpbiA9ICcnOwogICAgICB9CgogICAgICBmdW5jdGlvbiBlbmREcmFnKGUpewogICAgICAgIGlmICghZHJhZyB8fCAoZSAmJiBlLnBvaW50ZXJJZCAhPT0gZHJhZy5wb2ludGVySWQpKSByZXR1cm47CgogICAgICAgIGRyYWcuYWN0aXZlID0gZmFsc2U7CgogICAgICAgIC8vIFB1dCBjYXJkIGJhY2sgaW50byBmbG93IGF0IHBsYWNlaG9sZGVyIHBvc2l0aW9uCiAgICAgICAgaWYgKGRyYWcucGxhY2Vob2xkZXIgJiYgZHJhZy5wbGFjZWhvbGRlci5wYXJlbnROb2RlKXsKICAgICAgICAgIGdyaWQuaW5zZXJ0QmVmb3JlKGRyYWcuY2FyZCwgZHJhZy5wbGFjZWhvbGRlcik7CiAgICAgICAgICBkcmFnLnBsYWNlaG9sZGVyLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgY2xlYW51cERyYWcoKTsKCiAgICAgICAgLy8gU3luYyBtb2RlbCBvcmRlcgogICAgICAgIHRyeXsKICAgICAgICAgIGNvbnN0IHByZXZpb3VzT3JkZXIgPSBraXRzLm1hcChrID0+IFN0cmluZyhrLmlkKSk7CiAgICAgICAgICBjb25zdCBpZHMgPSBbLi4uZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcua2l0LWNhcmQnKV0ubWFwKGVsID0+IGVsLmRhdGFzZXQua2l0SWQpOwogICAgICAgICAgY29uc3QgYnlJZCA9IG5ldyBNYXAoa2l0cy5tYXAoayA9PiBbU3RyaW5nKGsuaWQpLCBrXSkpOwogICAgICAgICAga2l0cyA9IGlkcy5tYXAoaWQgPT4gYnlJZC5nZXQoU3RyaW5nKGlkKSkpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgIGxldCBpc09yZGVyQ2hhbmdlZCA9IHByZXZpb3VzT3JkZXIubGVuZ3RoID09PSBpZHMubGVuZ3RoICYmIHByZXZpb3VzT3JkZXIuc29tZSgoaWQsIGlkeCkgPT4gaWQgIT09IGlkc1tpZHhdKTsKCiAgICAgICAgICAvLyBGYWxsYmFjayByZW9yZGVyOiBpZiBwbGFjZWhvbGRlciBkaWQgbm90IG1vdmUgYnV0IGRyYWcgaGFkIGNsZWFyIHZlcnRpY2FsIGludGVudCwKICAgICAgICAgIC8vIG1vdmUgZHJhZ2dlZCBraXQgdG8gc3RhcnQvZW5kIHRvIGtlZXAgcmVvcmRlciBiZWhhdmlvciBkZXRlcm1pbmlzdGljLgogICAgICAgICAgaWYgKCFpc09yZGVyQ2hhbmdlZCAmJiBkcmFnICYmIE1hdGguYWJzKChkcmFnLmxhc3RDbGllbnRZIHx8IDApIC0gKGRyYWcuc3RhcnRDbGllbnRZIHx8IDApKSA+IDQwICYmIGlkcy5sZW5ndGggPiAxKXsKICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tJZHMgPSBpZHMuc2xpY2UoKTsKICAgICAgICAgICAgY29uc3QgZHJhZ2dlZElkID0gU3RyaW5nKGRyYWcua2l0SWQpOwogICAgICAgICAgICBjb25zdCBmcm9tSW5kZXggPSBmYWxsYmFja0lkcy5pbmRleE9mKGRyYWdnZWRJZCk7CiAgICAgICAgICAgIGlmIChmcm9tSW5kZXggIT09IC0xKXsKICAgICAgICAgICAgICBmYWxsYmFja0lkcy5zcGxpY2UoZnJvbUluZGV4LCAxKTsKICAgICAgICAgICAgICBpZiAoKGRyYWcubGFzdENsaWVudFkgfHwgMCkgPCAoZHJhZy5zdGFydENsaWVudFkgfHwgMCkpIHsKICAgICAgICAgICAgICAgIGZhbGxiYWNrSWRzLnVuc2hpZnQoZHJhZ2dlZElkKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZmFsbGJhY2tJZHMucHVzaChkcmFnZ2VkSWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBraXRzID0gZmFsbGJhY2tJZHMubWFwKGlkID0+IGJ5SWQuZ2V0KFN0cmluZyhpZCkpKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICAgICAgaXNPcmRlckNoYW5nZWQgPSBwcmV2aW91c09yZGVyLmxlbmd0aCA9PT0gZmFsbGJhY2tJZHMubGVuZ3RoICYmIHByZXZpb3VzT3JkZXIuc29tZSgoaWQsIGlkeCkgPT4gaWQgIT09IGZhbGxiYWNrSWRzW2lkeF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgc2F2ZVN0YXRlKCk7CiAgICAgICAgICBpZiAoaXNPcmRlckNoYW5nZWQpewogICAgICAgICAgICBub3RpZnlDYXJQaG90b3NVcGRhdGVkKCk7CiAgICAgICAgICB9CiAgICAgICAgfWNhdGNoKF8pe30KCiAgICAgICAgZHJhZyA9IG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHRpY2soKXsKICAgICAgICByYWZJZCA9IDA7CiAgICAgICAgaWYgKCFkcmFnIHx8ICFkcmFnLmFjdGl2ZSkgcmV0dXJuOwoKICAgICAgICB2aWV3cG9ydEF1dG9TY3JvbGwoZHJhZy5sYXN0Q2xpZW50WCwgZHJhZy5sYXN0Q2xpZW50WSk7CgogICAgICAgIGNvbnN0IHsgdG9wLCBsZWZ0IH0gPSBnZXREcmFnVG9wTGVmdCgpOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS50b3AgPSBweCh0b3ApOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5sZWZ0ID0gcHgobGVmdCk7CgogICAgICAgIC8vIGRlY2lzaW9uIHVzZXMgdGhlIENBUkQgY2VudGVyLCBub3QgdGhlIGN1cnNvcgogICAgICAgIGNvbnN0IGRyYWdDeCA9IGxlZnQgKyBkcmFnLncvMjsKICAgICAgICBjb25zdCBkcmFnQ3kgPSB0b3AgKyBkcmFnLmgvMjsKCiAgICAgICAgLy8gdmVsb2NpdHktYmFzZWQgbG9vay1haGVhZCAoc3RpbGwgZGVyaXZlZCBmcm9tIHRoZSBjYXJkJ3MgbW90aW9uKQogICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGNvbnN0IGR0ID0gTWF0aC5tYXgoOCwgbm93IC0gKGRyYWcuX3ByZXZUID8/IG5vdykpOwogICAgICAgIGNvbnN0IHZ4ID0gKGRyYWdDeCAtIChkcmFnLl9wcmV2Q3ggPz8gZHJhZ0N4KSkgLyBkdDsgLy8gcHggcGVyIG1zCiAgICAgICAgY29uc3QgdnkgPSAoZHJhZ0N5IC0gKGRyYWcuX3ByZXZDeSA/PyBkcmFnQ3kpKSAvIGR0OwoKICAgICAgICAvLyBjbGFtcCB0byBhdm9pZCB3aWxkIGp1bXBzIG9uIGZpcnN0IGZyYW1lcwogICAgICAgIGNvbnN0IGN2eCA9IGNsYW1wKHZ4LCAtMS4yLCAxLjIpOwogICAgICAgIGNvbnN0IGN2eSA9IGNsYW1wKHZ5LCAtMS4yLCAxLjIpOwoKICAgICAgICBjb25zdCBwcmVkQ3ggPSBkcmFnQ3ggKyBjdnggKiBQUkVESUNUX01TOwogICAgICAgIGNvbnN0IHByZWRDeSA9IGRyYWdDeSArIGN2eSAqIFBSRURJQ1RfTVM7CgogICAgICAgIGRyYWcuX3ByZXZUID0gbm93OwogICAgICAgIGRyYWcuX3ByZXZDeCA9IGRyYWdDeDsKICAgICAgICBkcmFnLl9wcmV2Q3kgPSBkcmFnQ3k7CgogICAgICAgIGNvbnN0IGRlY2lzaW9uUmVjdCA9IHJlY3RGcm9tQ2VudGVyKHByZWRDeCwgcHJlZEN5LCBkcmFnLncsIGRyYWcuaCk7CgogICAgICAgIGNvbnN0IGN1cnJlbnRSZWN0ID0gcmVjdEZyb21DZW50ZXIoZHJhZ0N4LCBkcmFnQ3ksIGRyYWcudywgZHJhZy5oKTsKCiAgICAgICAgbWF5YmVNb3ZlSG9sZShwcmVkQ3gsIHByZWRDeSwgZGVjaXNpb25SZWN0LCBkcmFnQ3gsIGRyYWdDeSwgY3VycmVudFJlY3QpOwoKICAgICAgICByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTsKICAgICAgfQoKICAgICAgLy8gRGVsZWdhdGUgcG9pbnRlcmRvd24gdG8gaGFuZGxlcwogICAgICBncmlkLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpPT57CiAgICAgICAgY29uc3QgaGFuZGxlID0gZS50YXJnZXQuY2xvc2VzdCgnLmtpdC1kcmFnLWhhbmRsZScpOwogICAgICAgIGlmICghaGFuZGxlKSByZXR1cm47CiAgICAgICAgYmVnaW5EcmFnKGhhbmRsZSwgZSk7CiAgICAgIH0sIHRydWUpOwogICAgfSkoKTs7CgoKICAgIC8qID09PT09IEluaXRpYWwgcmVuZGVyID09PT09ICovCiAgICByZW5kZXIoKTsKICA8L3NjcmlwdD4KICA8c2NyaXB0PgogICAgICAgIAogICAgICAgIC8vINCQ0LLRgtC+LdGI0LjRgNC40L3QsCDQtNC70Y8g0L/QvtC70Y8gItCi0LjQvyDRgdGB0YvQu9C60LgiICjRgNCw0YHRgtGP0LPQuNCy0LDQtdGC0YHRjyDQv9C+INCy0LLQtdC00ZHQvdC90L7QvNGDINGC0LXQutGB0YLRgywKICAgICAgICAvLyDQvdC+INC40YHRhdC+0LTQvdC+0LUg0L/Rg9GB0YLQvtC1INGB0L7RgdGC0L7Rj9C90LjQtSDQvtGB0YLQsNGR0YLRgdGPINGE0LjQutGB0LjRgNC+0LLQsNC90L3Ri9C8KQogICAgICAgIGNvbnN0IF9fbWVhc3VyZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgIGNvbnN0IF9fbWVhc3VyZUN0eCA9IF9fbWVhc3VyZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVMaW5rVHlwZVdpZHRoKHR5cGVJbnB1dCkgewogICAgICAgICAgICBpZiAoIXR5cGVJbnB1dCkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgdmFsID0gKHR5cGVJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpOwoKICAgICAgICAgICAgLy8g0LjRgdGF0L7QtNC90L7QtSDQv9GD0YHRgtC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1IOKAlCDQutCw0Log0YHQtdC50YfQsNGBCiAgICAgICAgICAgIGlmICghdmFsKSB7CiAgICAgICAgICAgICAgICB0eXBlSW5wdXQuc3R5bGUud2lkdGggPSAnMTIwcHgnOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDQmNC30LzQtdGA0Y/QtdC8INGC0LXQutGB0YIg0YEg0YLQtdC8INC20LUg0YjRgNC40YTRgtC+0LwKICAgICAgICAgICAgY29uc3QgY3MgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0eXBlSW5wdXQpOwogICAgICAgICAgICBfX21lYXN1cmVDdHguZm9udCA9IGAke2NzLmZvbnRXZWlnaHR9ICR7Y3MuZm9udFNpemV9ICR7Y3MuZm9udEZhbWlseX1gOwoKICAgICAgICAgICAgY29uc3QgdGV4dFcgPSBfX21lYXN1cmVDdHgubWVhc3VyZVRleHQodmFsKS53aWR0aDsKICAgICAgICAgICAgY29uc3QgcGFkZGluZ0xlZnQgPSBwYXJzZUZsb2F0KGNzLnBhZGRpbmdMZWZ0KSB8fCAwOwogICAgICAgICAgICBjb25zdCBwYWRkaW5nUmlnaHQgPSBwYXJzZUZsb2F0KGNzLnBhZGRpbmdSaWdodCkgfHwgMDsKICAgICAgICAgICAgY29uc3QgYm9yZGVyTGVmdCA9IHBhcnNlRmxvYXQoY3MuYm9yZGVyTGVmdFdpZHRoKSB8fCAwOwogICAgICAgICAgICBjb25zdCBib3JkZXJSaWdodCA9IHBhcnNlRmxvYXQoY3MuYm9yZGVyUmlnaHRXaWR0aCkgfHwgMDsKCiAgICAgICAgICAgIC8vICsg0L3QtdCx0L7Qu9GM0YjQsNGPINGB0YLRgNCw0YXQvtCy0LrQsAogICAgICAgICAgICBsZXQgZGVzaXJlZCA9IE1hdGguY2VpbCh0ZXh0VyArIHBhZGRpbmdMZWZ0ICsgcGFkZGluZ1JpZ2h0ICsgYm9yZGVyTGVmdCArIGJvcmRlclJpZ2h0ICsgMTIpOwoKICAgICAgICAgICAgLy8g0J7Qs9GA0LDQvdC40YfQuNCy0LDQtdC8INC/0L4g0LTQvtGB0YLRg9C/0L3QvtC80YMg0LzQtdGB0YLRgzog0YLQuNC/INGC0Y/QvdC10YLRgdGPLCDRgdC00LLQuNCz0LDRjyBVUkwg0LLQv9GA0LDQstC+LAogICAgICAgICAgICAvLyDQvdC+INC+0YHRgtCw0LLQu9GP0LXQvCDQvNC40L3QuNC80LDQu9GM0L3QvtC1INC80LXRgdGC0L4g0L/QvtC0IFVSTCDQuCDQutC90L7Qv9C60LgKICAgICAgICAgICAgY29uc3QgaXRlbSA9IHR5cGVJbnB1dC5jbG9zZXN0KCcubGluay1pdGVtJyk7CiAgICAgICAgICAgIGNvbnN0IGVkaXRSb3cgPSB0eXBlSW5wdXQuY2xvc2VzdCgnLmxpbmstZWRpdCcpOwogICAgICAgICAgICBjb25zdCBhY3Rpb25zID0gaXRlbSA/IGl0ZW0ucXVlcnlTZWxlY3RvcignLmxpbmstYWN0aW9ucycpIDogbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IHVybE1pbiA9IDE0MDsgLy8g0LzQuNC90LjQvNCw0LvRjNC90L4g0L/QvtC0IFVSTAogICAgICAgICAgICBsZXQgYXZhaWxhYmxlID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChpdGVtICYmIGVkaXRSb3cgJiYgYWN0aW9ucykgewogICAgICAgICAgICAgICAgY29uc3QgaXRlbVcgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoOwogICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uc1cgPSBhY3Rpb25zLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoOwoKICAgICAgICAgICAgICAgIC8vIGdhcCDQvNC10LbQtNGDIC5saW5rLWVkaXQg0LggLmxpbmstYWN0aW9ucyDigJQg0L7QvSDQt9Cw0LTQsNC9INGDIC5saW5rLWl0ZW0KICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1DUyA9IGdldENvbXB1dGVkU3R5bGUoaXRlbSk7CiAgICAgICAgICAgICAgICBjb25zdCBwYWRMID0gcGFyc2VGbG9hdChpdGVtQ1MucGFkZGluZ0xlZnQpIHx8IDA7CiAgICAgICAgICAgICAgICBjb25zdCBwYWRSID0gcGFyc2VGbG9hdChpdGVtQ1MucGFkZGluZ1JpZ2h0KSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3Qgb3V0ZXJHYXAgPSBwYXJzZUZsb2F0KGl0ZW1DUy5nYXApIHx8IDA7CgogICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gaXRlbVcgLSBwYWRMIC0gcGFkUiAtIGFjdGlvbnNXIC0gb3V0ZXJHYXA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChhdmFpbGFibGUpIHsKICAgICAgICAgICAgICAgIC8vIGdhcCDQstC90YPRgtGA0LggZWRpdFJvdyDQvNC10LbQtNGDINC/0L7Qu9GP0LzQuAogICAgICAgICAgICAgICAgY29uc3QgZ2FwID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKGVkaXRSb3cpLmdhcCkgfHwgMDsKICAgICAgICAgICAgICAgIGNvbnN0IG1heFR5cGUgPSBNYXRoLm1heCgxMjAsIGF2YWlsYWJsZSAtIHVybE1pbiAtIGdhcCk7CiAgICAgICAgICAgICAgICBkZXNpcmVkID0gTWF0aC5taW4oZGVzaXJlZCwgbWF4VHlwZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRlc2lyZWQgPSBNYXRoLm1heChkZXNpcmVkLCAxMjApOwogICAgICAgICAgICB0eXBlSW5wdXQuc3R5bGUud2lkdGggPSBkZXNpcmVkICsgJ3B4JzsKICAgICAgICB9CgogICAgICAgIC8vINCw0LLRgtC+LdGA0L7RgdGCIHRleHRhcmVhINC/0L4g0LLRi9GB0L7RgtC1CiAgICAgICAgZnVuY3Rpb24gYXV0b3NpemVUZXh0YXJlYShlbCkgewogICAgICAgICAgICBpZiAoIWVsKSByZXR1cm47CiAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICdhdXRvJzsKICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gKGVsLnNjcm9sbEhlaWdodCkgKyAncHgnOwogICAgICAgIH0KCiAgICAgICAgLy8g0J/QvtC00YHRgtGA0LDQuNCy0LDQtdC8INGI0LjRgNC40L3RgyDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INGA0LDQt9C80LXRgNCwINC+0LrQvdCwCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXR5cGUtaW5wdXQnKS5mb3JFYWNoKGlucCA9PiB1cGRhdGVMaW5rVHlwZVdpZHRoKGlucCkpOwogICAgICAgIH0pOwoKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRW1wdHlTdGF0ZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50c0xpc3QnKTsKICAgICAgICAgICAgY29uc3QgbGlua3NMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtzTGlzdCcpOwogICAgICAgICAgICBjb25zdCBjb21tZW50c1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHNTZWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGxpbmtzU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rc1NlY3Rpb24nKTsKCiAgICAgICAgICAgIGlmIChjb21tZW50c1NlY3Rpb24gJiYgY29tbWVudHNMaXN0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBoYXNDb21tZW50cyA9IGNvbW1lbnRzTGlzdC5xdWVyeVNlbGVjdG9yKCcuY29tbWVudC1ibG9jaycpICE9PSBudWxsOwogICAgICAgICAgICAgICAgY29tbWVudHNTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWVtcHR5JywgIWhhc0NvbW1lbnRzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobGlua3NTZWN0aW9uICYmIGxpbmtzTGlzdCkgewogICAgICAgICAgICAgICAgY29uc3QgaGFzTGlua3MgPSBsaW5rc0xpc3QucXVlcnlTZWxlY3RvcignLmxpbmstaXRlbScpICE9PSBudWxsOwogICAgICAgICAgICAgICAgbGlua3NTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWVtcHR5JywgIWhhc0xpbmtzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCi8vINCk0YPQvdC60YbQuNGPINC00LvRjyDRgdCy0L7RgNCw0YfQuNCy0LDQvdC40Y8v0YDQsNC30LLQvtGA0LDRh9C40LLQsNC90LjRjyDQsdC70L7QutC+0LIKICAgICAgICBmdW5jdGlvbiBzZXR1cENvbGxhcHNlKGhlYWRlcklkLCBjb250ZW50SWQsIGljb25JZCwgZGVmYXVsdEV4cGFuZGVkID0gZmFsc2UpIHsKICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGVhZGVySWQpOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGVudElkKTsKICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGljb25JZCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWhlYWRlciB8fCAhY29udGVudCB8fCAhaWNvbikgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGRlZmF1bHRFeHBhbmRlZCkgewogICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTsKICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdjb2xsYXBzZWQnKTsKICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnRvZ2dsZSgnZXhwYW5kZWQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyDQo9C/0YDQsNCy0LvQtdC90LjQtSDQutC+0LzQvNC10L3RgtCw0YDQuNGP0LzQuCDQuCDRgdGB0YvQu9C60LDQvNC4CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRgdCy0L7RgNCw0YfQuNCy0LDQvdC40Y8KICAgICAgICAgICAgc2V0dXBDb2xsYXBzZSgnbWFpblNwZWNzSGVhZGVyJywgJ21haW5TcGVjc0NvbnRlbnQnLCAnbWFpblNwZWNzSWNvbicsIGZhbHNlKTsKICAgICAgICAgICAgc2V0dXBDb2xsYXBzZSgnZG9jc0hlYWRlcicsICdkb2NzQ29udGVudCcsICdkb2NzSWNvbicsIGZhbHNlKTsKICAgICAgICAgICAgc2V0dXBDb2xsYXBzZSgnZmluYW5jZUhlYWRlcicsICdmaW5hbmNlQ29udGVudCcsICdmaW5hbmNlSWNvbicsIGZhbHNlKTsKICAgICAgICAgICAgc2V0dXBDb2xsYXBzZSgnYWRkaXRpb25hbEhlYWRlcicsICdhZGRpdGlvbmFsQ29udGVudCcsICdhZGRpdGlvbmFsSWNvbicsIGZhbHNlKTsKCiAgICAgICAgICAgIC8vINCa0L3QvtC/0LrQsCDQvdCw0LfQsNC0CiAgICAgICAgICAgIGNvbnN0IGJhY2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja0J1dHRvbicpOwogICAgICAgICAgICBpZiAoYmFja0J0bikgewogICAgICAgICAgICAgICAgYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfQktC+0LfQstGA0LDRgiDQuiDRgdC/0LjRgdC60YMg0LDQstGC0L7QvNC+0LHQuNC70LXQuScpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCi8vINCT0LvQvtCx0LDQu9GM0L3Ri9C5INC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60L7QsiDQtNC70Y8g0LLRi9GF0L7QtNCwINC40Lcg0YDQtdC20LjQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDQutC70LjQuiDQvdC1INC/0L4g0YDQtdC00LDQutGC0LjRgNGD0LXQvNC+0LzRgyDQsdC70L7QutGDINC4INC90LUg0L/QviDQtdCz0L4g0LrQvdC+0L/QutCw0LwKICAgICAgICAgICAgICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnLmNvbW1lbnQtYmxvY2suZWRpdGluZycpICYmIAogICAgICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbG9zZXN0KCcubGluay1pdGVtLmVkaXRpbmcnKSAmJgogICAgICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbG9zZXN0KCcuZWRpdC1idXR0b24nKSAmJgogICAgICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbG9zZXN0KCcuZGVsZXRlLWJ1dHRvbicpKSB7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8g0JLRi9GF0L7QtNC40Lwg0LjQtyDRgNC10LbQuNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQstGB0LXRhSDQsdC70L7QutC+0LIKICAgICAgICAgICAgICAgICAgICBleGl0QWxsRWRpdE1vZGVzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINC00LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC40YUg0Y3Qu9C10LzQtdC90YLQvtCyCiAgICAgICAgICAgIGluaXRFeGlzdGluZ0l0ZW1zKCk7CiAgICAgICAgICAgIC8vINCh0L7RgdGC0L7Rj9C90LjRjyDQv9GD0YHRgtGL0YUg0YHQv9C40YHQutC+0LIgKNGB0LrRgNGL0LLQsNC10Lwg0L/Rg9GB0YLRi9C1INC60L7QvdGC0LXQudC90LXRgNGLINC4INC90LUg0YPQtNCy0LDQuNCy0LDQtdC8INC+0YLRgdGC0YPQv9GLKQogICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwoKICAgICAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC60L7QvNC80LXQvdGC0LDRgNC40Y8KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZENvbW1lbnRCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBhZGROZXdDb21tZW50KCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINGB0YHRi9C70LrQuAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkTGlua0J0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGFkZE5ld0xpbmsoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDQtNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNGFINGN0LvQtdC80LXQvdGC0L7QsgogICAgICAgIGZ1bmN0aW9uIGluaXRFeGlzdGluZ0l0ZW1zKCkgewogICAgICAgICAgICAvLyDQmtC+0LzQvNC10L3RgtCw0YDQuNC4CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21tZW50LWJsb2NrOm5vdCguZWRpdGluZyknKS5mb3JFYWNoKGJsb2NrID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTsKICAgICAgICAgICAgICAgIGlmIChlZGl0QnRuKSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJDb21tZW50RWRpdE1vZGUoYmxvY2spOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vINCh0YHRi9C70LrQuAogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGluay1pdGVtOm5vdCguZWRpdGluZyknKS5mb3JFYWNoKGJsb2NrID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTsKICAgICAgICAgICAgICAgIGlmIChlZGl0QnRuKSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJMaW5rRWRpdE1vZGUoYmxvY2spOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vINCS0YvRhdC+0LQg0LjQtyDQstGB0LXRhSDRgNC10LbQuNC80L7QsiDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgZnVuY3Rpb24gZXhpdEFsbEVkaXRNb2RlcygpIHsKICAgICAgICAgICAgLy8g0JrQvtC80LzQtdC90YLQsNGA0LjQuAogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tbWVudC1ibG9jay5lZGl0aW5nJykuZm9yRWFjaChibG9jayA9PiB7CiAgICAgICAgICAgICAgICBleGl0Q29tbWVudEVkaXRNb2RlKGJsb2NrLCB0cnVlKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDQodGB0YvQu9C60LgKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpbmstaXRlbS5lZGl0aW5nJykuZm9yRWFjaChibG9jayA9PiB7CiAgICAgICAgICAgICAgICBleGl0TGlua0VkaXRNb2RlKGJsb2NrLCB0cnVlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyDQoNC10LbQuNC8INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LrQvtC80LzQtdC90YLQsNGA0LjRjwogICAgICAgIGZ1bmN0aW9uIGVudGVyQ29tbWVudEVkaXRNb2RlKGJsb2NrKSB7CiAgICAgICAgICAgIC8vINCS0YvRhdC+0LTQuNC8INC40Lcg0LTRgNGD0LPQuNGFINGA0LXQttC40LzQvtCyCiAgICAgICAgICAgIGV4aXRBbGxFZGl0TW9kZXMoKTsKCiAgICAgICAgICAgIGNvbnN0IHRleHRFbGVtZW50ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmNvbW1lbnQtdGV4dCcpOwogICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRleHRFbGVtZW50ID8gKHRleHRFbGVtZW50LnRleHRDb250ZW50IHx8ICcnKSA6ICcnOwogICAgICAgICAgICBjb25zdCBpc05ldyA9IGJsb2NrLmRhdGFzZXQuaXNOZXdDb21tZW50ID09PSAnMSc7CgogICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YLQtdC60YPRidC40Lkg0LrQvtC90YLQtdC90YIKICAgICAgICAgICAgYmxvY2suZGF0YXNldC5vcmlnaW5hbFRleHQgPSBjdXJyZW50VGV4dDsKCiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2VkaXRpbmcnKTsKICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPSJjb21tZW50LWlucHV0IiBwbGFjZWhvbGRlcj0i0JLQstC10LTQuNGC0LUg0LrQvtC80LzQtdC90YLQsNGA0LjQuSIgcm93cz0iMSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYW5nZXIgZGVsZXRlLWJ1dHRvbiIgdGl0bGU9ItCj0LTQsNC70LjRgtGMIj4KICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01IDIwYTIgMiAwIDAgMCAyIDJoMTBhMiAyIDAgMCAwIDItMlY4aDJWNmgtNFY0YTIgMiAwIDAgMC0yLTJIOWEyIDIgMCAwIDAtMiAydjJIM3YyaDJ6TTkgNGg2djJIOXpNOCA4aDl2MTJIN1Y4eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTkgMTBoMnY4SDl6bTQgMGgydjhoLTJ6Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5jb21tZW50LWlucHV0Jyk7CgogICAgICAgICAgICAvLyDQt9Cw0L/QvtC70L3Rj9C10Lwg0Lgg0YDQsNGB0YLRj9Cz0LjQstCw0LXQvCDQv9C+INGC0LXQutGB0YLRgwogICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IGN1cnJlbnRUZXh0OwogICAgICAgICAgICBhdXRvc2l6ZVRleHRhcmVhKHRleHRhcmVhKTsKICAgICAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBhdXRvc2l6ZVRleHRhcmVhKHRleHRhcmVhKSk7CgogICAgICAgICAgICAvLyDQutGD0YDRgdC+0YAg0LIg0LrQvtC90LXRhiDQuCDQsdC10Lcg0YHQutGA0L7Qu9C7LdGB0LzQtdGJ0LXQvdC40Y8KICAgICAgICAgICAgdHJ5IHsgdGV4dGFyZWEuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pOyB9IGNhdGNoIChlKSB7IHRleHRhcmVhLmZvY3VzKCk7IH0KICAgICAgICAgICAgY29uc3QgZW5kID0gdGV4dGFyZWEudmFsdWUubGVuZ3RoOwogICAgICAgICAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShlbmQsIGVuZCk7CiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gY3VycmVudFRleHQ7CiAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7CiAgICAgICAgICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHRleHRhcmVhLnZhbHVlLmxlbmd0aCwgdGV4dGFyZWEudmFsdWUubGVuZ3RoKTsKCiAgICAgICAgICAgIC8vIEVudGVyL0VzY2FwZSDRg9C/0YDQsNCy0LvRj9GO0YIg0LfQsNCy0LXRgNGI0LXQvdC40LXQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIC8vIC0gRW50ZXI6INGB0L7RhdGA0LDQvdC40YLRjCDQuCDQstGL0LnRgtC4CiAgICAgICAgICAgIC8vIC0gU2hpZnQrRW50ZXI6INC/0LXRgNC10L3QvtGBINGB0YLRgNC+0LrQuAogICAgICAgICAgICAvLyAtIEVzY2FwZTog0L7RgtC80LXQvdCwINC4INCy0YvRhdC+0LQKICAgICAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRXNjYXBlJykgewogICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZXhpdENvbW1lbnRFZGl0TW9kZShibG9jaywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFbnRlcicgJiYgIWV2LnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgLy8g0L3QtSDQtNC+0LHQsNCy0LvRj9C10Lwg0L/QtdGA0LXQstC+0LQg0YHRgtGA0L7QutC4CiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZXhpdENvbW1lbnRFZGl0TW9kZShibG9jaywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRg9C00LDQu9C10L3QuNGPCiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtYnV0dG9uJyk7CiAgICAgICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5jb25maXJtKCfQo9C00LDQu9C40YLRjCDQutC+0LzQvNC10L3RgtCw0YDQuNC5PycpKSByZXR1cm47CiAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgIH0pO30KCiAgICAgICAgLy8g0JLRi9GF0L7QtCDQuNC3INGA0LXQttC40LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC60L7QvNC80LXQvdGC0LDRgNC40Y8KICAgICAgICBmdW5jdGlvbiBleGl0Q29tbWVudEVkaXRNb2RlKGJsb2NrLCBzYXZlID0gdHJ1ZSkgewogICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7CiAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gYmxvY2suZGF0YXNldC5pc05ld0NvbW1lbnQgPT09ICcxJzsKCiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUZXh0IHx8ICcnOwoKICAgICAgICAgICAgaWYgKHNhdmUgJiYgdGV4dGFyZWEpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7CgogICAgICAgICAgICAgICAgaWYgKG5ld1RleHQpIHsKICAgICAgICAgICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0LjQt9C80LXQvdC10L3QuNGPCiAgICAgICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21tZW50LXRleHQiPiR7bmV3VGV4dH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vINCf0YPRgdGC0L7QuSDRgtC10LrRgdGCINC30LDQv9GA0LXRidGR0L06CiAgICAgICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0L3QvtCy0L7Qs9C+INC60L7QvNC80LXQvdGC0LDRgNC40Y86INGD0LTQsNC70Y/QtdC8INCx0LvQvtC6CiAgICAgICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQtdCz0L46INC+0YLQutCw0YLRi9Cy0LDQtdC8INC60LDQuiDQsdGL0LvQvgogICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykgewogICAgICAgICAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1lbnQtdGV4dCI+JHtvcmlnaW5hbFRleHR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8g0J7RgtC80LXQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y86CiAgICAgICAgICAgICAgICAvLyAtINC90L7QstGL0Lkg0L/Rg9GB0YLQvtC5INCx0LvQvtC6INC90LUg0YHQvtGF0YDQsNC90Y/QtdC8CiAgICAgICAgICAgICAgICAvLyAtINGB0YPRidC10YHRgtCy0YPRjtGJ0LjQuSDQvtGC0LrQsNGC0YvQstCw0LXQvAogICAgICAgICAgICAgICAgaWYgKGlzTmV3ICYmICFvcmlnaW5hbFRleHQudHJpbSgpKSB7CiAgICAgICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudC10ZXh0Ij4ke29yaWdpbmFsVGV4dH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICB9CgogICAgICAgICAgICBibG9jay5jbGFzc0xpc3QucmVtb3ZlKCdlZGl0aW5nJyk7CiAgICAgICAgICAgIGRlbGV0ZSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgZGVsZXRlIGJsb2NrLmRhdGFzZXQuaXNOZXdDb21tZW50OwoKICAgICAgICAgICAgY29uc3QgbmV3RWRpdEJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbicpOwogICAgICAgICAgICBpZiAobmV3RWRpdEJ0bikgewogICAgICAgICAgICAgICAgbmV3RWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGVudGVyQ29tbWVudEVkaXRNb2RlKGJsb2NrKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDQoNC10LbQuNC8INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YHRgdGL0LvQutC4CiAgICAgICAgZnVuY3Rpb24gZW50ZXJMaW5rRWRpdE1vZGUoYmxvY2spIHsKICAgICAgICAgICAgLy8g0JLRi9GF0L7QtNC40Lwg0LjQtyDQtNGA0YPQs9C40YUg0YDQtdC20LjQvNC+0LIKICAgICAgICAgICAgZXhpdEFsbEVkaXRNb2RlcygpOwoKICAgICAgICAgICAgY29uc3QgdHlwZUVsZW1lbnQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay10eXBlJyk7CiAgICAgICAgICAgIGNvbnN0IHVybEVsZW1lbnQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay11cmwnKTsKICAgICAgICAgICAgY29uc3QgaXNOZXcgPSBibG9jay5kYXRhc2V0LmlzTmV3TGluayA9PT0gJzEnOwoKICAgICAgICAgICAgY29uc3QgcmF3VHlwZSA9IHR5cGVFbGVtZW50ID8gKHR5cGVFbGVtZW50LnRleHRDb250ZW50IHx8ICcnKS50cmltKCkgOiAnJzsKICAgICAgICAgICAgY29uc3QgcmF3VXJsID0gdXJsRWxlbWVudCA/ICgodXJsRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCB1cmxFbGVtZW50LnRleHRDb250ZW50IHx8ICcnKS50cmltKCkpIDogJyc7CgogICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L7RgNC40LPQuNC90LDQu9GM0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8gKNC00LvRjyDQvtGC0LrQsNGC0LApCiAgICAgICAgICAgIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUeXBlID0gcmF3VHlwZTsKICAgICAgICAgICAgYmxvY2suZGF0YXNldC5vcmlnaW5hbFVybCAgPSByYXdVcmw7CgogICAgICAgICAgICBibG9jay5jbGFzc0xpc3QuYWRkKCdlZGl0aW5nJyk7CiAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstZWRpdCI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJsaW5rLXR5cGUtaW5wdXQiIHBsYWNlaG9sZGVyPSLQotC40L8g0YHRgdGL0LvQutC4Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idXJsIiBjbGFzcz0ibGluay11cmwtaW5wdXQiIHBsYWNlaG9sZGVyPSJodHRwczovLy4uLiI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciBkZWxldGUtYnV0dG9uIiB0aXRsZT0i0KPQtNCw0LvQuNGC0YwiIGFyaWEtbGFiZWw9ItCj0LTQsNC70LjRgtGMIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNSAyMGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWOGgyVjZoLTRWNGEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYySDN2Mmgyek05IDRoNnYySDl6TTggOGg5djEySDdWOHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDEwaDJ2OEg5em00IDBoMnY4aC0yeiIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICBjb25zdCB0eXBlSW5wdXQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay10eXBlLWlucHV0Jyk7CiAgICAgICAgICAgIGNvbnN0IHVybElucHV0ICA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXVybC1pbnB1dCcpOwoKICAgICAgICAgICAgLy8g0JTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LXQuSDRgdGB0YvQu9C60Lgg0LzQvtC20L3QviDQv9C+0LTRgdC60LDQt9Cw0YLRjCDQtNC10YTQvtC70YIsINC90L4g0LTQu9GPINC90L7QstC+0Lkg4oCUINGC0L7Qu9GM0LrQviBwbGFjZWhvbGRlcgogICAgICAgICAgICBpZiAoIWlzTmV3KSB7CiAgICAgICAgICAgICAgICB0eXBlSW5wdXQudmFsdWUgPSByYXdUeXBlIHx8ICfQotC40L8g0YHRgdGL0LvQutC4JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHR5cGVJbnB1dC52YWx1ZSA9IHJhd1R5cGU7CiAgICAgICAgICAgICAgICB0eXBlSW5wdXQucGxhY2Vob2xkZXIgPSAn0KLQuNC/INGB0YHRi9C70LrQuCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXJsSW5wdXQudmFsdWUgID0gcmF3VXJsOwoKICAgICAgICAgICAgLy8g0LDQstGC0L4t0YjQuNGA0LjQvdCwINGC0LjQv9CwCiAgICAgICAgICAgIHVwZGF0ZUxpbmtUeXBlV2lkdGgodHlwZUlucHV0KTsKCiAgICAgICAgICAgIC8vIEVudGVyL0VzY2FwZSDQt9Cw0LLQtdGA0YjQsNGO0YIg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtQogICAgICAgICAgICBjb25zdCBvbktleSA9IChldikgPT4gewogICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0VzY2FwZScpIHsKICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGV4aXRMaW5rRWRpdE1vZGUoYmxvY2ssIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7CiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBleGl0TGlua0VkaXRNb2RlKGJsb2NrLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHR5cGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpOwogICAgICAgICAgICB1cmxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpOwoKICAgICAgICAgICAgLy8g0J/QtdGA0LXRgNCw0YHRh9GR0YIg0YjQuNGA0LjQvdGLINC/0YDQuCDQstCy0L7QtNC1CiAgICAgICAgICAgIHR5cGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHVwZGF0ZUxpbmtUeXBlV2lkdGgodHlwZUlucHV0KSk7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB1cGRhdGVMaW5rVHlwZVdpZHRoKHR5cGVJbnB1dCkpOwoKICAgICAgICAgICAgLy8g0KPQtNCw0LvQtdC90LjQtQogICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlLWJ1dHRvbicpOwogICAgICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuY29uZmlybSgn0KPQtNCw0LvQuNGC0Ywg0YHRgdGL0LvQutGDPycpKSByZXR1cm47CiAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgIH0pOy8vINCk0L7QutGD0YEg0LIgVVJMLCDQtdGB0LvQuCDRgtC40L8g0YPQttC1INC30LDQv9C+0LvQvdC10L0sINC40L3QsNGH0LUg0LIg0YLQuNC/CiAgICAgICAgICAgICh0eXBlSW5wdXQudmFsdWUgPyB1cmxJbnB1dCA6IHR5cGVJbnB1dCkuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIC8vINCS0YvRhdC+0LQg0LjQtyDRgNC10LbQuNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDRgdGB0YvQu9C60LgKICAgICAgICBmdW5jdGlvbiBleGl0TGlua0VkaXRNb2RlKGJsb2NrLCBzYXZlID0gdHJ1ZSkgewogICAgICAgICAgICBjb25zdCB0eXBlSW5wdXQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay10eXBlLWlucHV0Jyk7CiAgICAgICAgICAgIGNvbnN0IHVybElucHV0ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdXJsLWlucHV0Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoc2F2ZSAmJiB0eXBlSW5wdXQgJiYgdXJsSW5wdXQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1R5cGUgPSB0eXBlSW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgY29uc3QgbmV3VXJsID0gdXJsSW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1R5cGUgJiYgbmV3VXJsKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LfQvNC10L3QtdC90LjRjwogICAgICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsaW5rLXR5cGUiPiR7bmV3VHlwZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25ld1VybCA/IGA8YSBocmVmPSIke25ld1VybH0iIGNsYXNzPSJsaW5rLXVybCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgdGl0bGU9IiR7bmV3VXJsfSI+JHtuZXdVcmx9PC9hPmAgOiBgPHNwYW4gY2xhc3M9ImxpbmstdXJsIGxpbmstdXJsLS1lbXB0eSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9zcGFuPmB9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDRh9GC0L4t0YLQviDRg9C00LDQu9C40LvQuCDQuCDQvdC1INCy0LLQtdC70Lgg0LfQsNC80LXQvdGDOgogICAgICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINC90L7QstC+0Lkg0YHRgdGL0LvQutC4INGD0LTQsNC70Y/QtdC8INC/0YPRgdGC0L7QuSDQsdC70L7QugogICAgICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LXQuSDQstC+0LfQstGA0LDRidCw0LXQvCDQutCw0Log0LHRi9C70L4KICAgICAgICAgICAgICAgICAgICBjb25zdCBpc05ldyA9IGJsb2NrLmRhdGFzZXQuaXNOZXdMaW5rID09PSAnMSc7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFR5cGUgPSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVHlwZSB8fCAn0KLQuNC/INGB0YHRi9C70LrQuCc7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxVcmwgPSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVXJsIHx8ICcnOwogICAgICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsaW5rLXR5cGUiPiR7b3JpZ2luYWxUeXBlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7b3JpZ2luYWxVcmwgPyBgPGEgaHJlZj0iJHtvcmlnaW5hbFVybH0iIGNsYXNzPSJsaW5rLXVybCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgdGl0bGU9IiR7b3JpZ2luYWxVcmx9Ij4ke29yaWdpbmFsVXJsfTwvYT5gIDogYDxzcGFuIGNsYXNzPSJsaW5rLXVybCBsaW5rLXVybC0tZW1wdHkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvc3Bhbj5gfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vINCe0YLQvNC10L3QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPOgogICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0L3QvtCy0L7Qs9C+INCx0LvQvtC60LAg0LHQtdC3INC30LDQv9C+0LvQvdC10L3QuNGPOiDRg9C00LDQu9GP0LXQvAogICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQtdCz0L46INC+0YLQutCw0YLRi9Cy0LDQtdC8INC60LDQuiDQsdGL0LvQvgogICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSBibG9jay5kYXRhc2V0LmlzTmV3TGluayA9PT0gJzEnOwogICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgICAgICAgICAgICAgLy8g0J3QvtCy0YvQuSDQsdC70L7QuiDQvdC10LvRjNC30Y8gItC+0YLQvNC10L3QuNGC0YwiINC4INC+0YHRgtCw0LLQuNGC0Ywg0L3QsCDRgdGC0YDQsNC90LjRhtC1IOKAlCDRg9C00LDQu9GP0LXQvC4KICAgICAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCi8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQvtGA0LjQs9C40L3QsNC70YzQvdGL0LUg0LfQvdCw0YfQtdC90LjRjwogICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUeXBlID0gYmxvY2suZGF0YXNldC5vcmlnaW5hbFR5cGUgfHwgJ9Ci0LjQvyDRgdGB0YvQu9C60LgnOwogICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxVcmwgPSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVXJsIHx8ICcnOwogICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstaW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsaW5rLXR5cGUiPiR7b3JpZ2luYWxUeXBlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgJHtvcmlnaW5hbFVybCA/IGA8YSBocmVmPSIke29yaWdpbmFsVXJsfSIgY2xhc3M9ImxpbmstdXJsIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiB0aXRsZT0iJHtvcmlnaW5hbFVybH0iPiR7b3JpZ2luYWxVcmx9PC9hPmAgOiBgPHNwYW4gY2xhc3M9ImxpbmstdXJsIGxpbmstdXJsLS1lbXB0eSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9zcGFuPmB9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZWRpdGluZycpOwogICAgICAgICAgICBkZWxldGUgYmxvY2suZGF0YXNldC5vcmlnaW5hbFR5cGU7CiAgICAgICAgICAgIGRlbGV0ZSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVXJsOwogICAgICAgICAgICBkZWxldGUgYmxvY2suZGF0YXNldC5pc05ld0xpbms7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwINC60L3QvtC/0LrRgyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGNvbnN0IG5ld0VkaXRCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTsKICAgICAgICAgICAgaWYgKG5ld0VkaXRCdG4pIHsKICAgICAgICAgICAgICAgIG5ld0VkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBlbnRlckxpbmtFZGl0TW9kZShibG9jayk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+INC60L7QvNC80LXQvdGC0LDRgNC40Y8KICAgICAgICBmdW5jdGlvbiBhZGROZXdDb21tZW50KCkgewogICAgICAgICAgICBjb25zdCBjb21tZW50c0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHNMaXN0Jyk7CiAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG5ld0NvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbmV3Q29tbWVudC5jbGFzc05hbWUgPSAnY29tbWVudC1ibG9jayc7CiAgICAgICAgICAgIG5ld0NvbW1lbnQuZGF0YXNldC5jb21tZW50SWQgPSBuZXdJZDsKICAgICAgICAgICAgCiAgICAgICAgICAgIG5ld0NvbW1lbnQuZGF0YXNldC5pc05ld0NvbW1lbnQgPSAnMSc7bmV3Q29tbWVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21tZW50LXRleHQiPjwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICAKICAgICAgICAgICAgY29tbWVudHNMaXN0LmFwcGVuZENoaWxkKG5ld0NvbW1lbnQpOwogICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g0KHRgNCw0LfRgyDQstGF0L7QtNC40Lwg0LIg0YDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGVudGVyQ29tbWVudEVkaXRNb2RlKG5ld0NvbW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDRgdGB0YvQu9C60LgKICAgICAgICBmdW5jdGlvbiBhZGROZXdMaW5rKCkgewogICAgICAgICAgICBjb25zdCBsaW5rc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua3NMaXN0Jyk7CiAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG5ld0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbmV3TGluay5jbGFzc05hbWUgPSAnbGluay1pdGVtJzsKICAgICAgICAgICAgbmV3TGluay5kYXRhc2V0LmxpbmtJZCA9IG5ld0lkOwogICAgICAgICAgICBuZXdMaW5rLmRhdGFzZXQuaXNOZXdMaW5rID0gJzEnOwogICAgICAgICAgICBuZXdMaW5rLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstaW5mbyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpbmstdHlwZSI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsaW5rLXVybCBsaW5rLXVybC0tZW1wdHkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxpbmtzTGlzdC5hcHBlbmRDaGlsZChuZXdMaW5rKTsKICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vINCh0YDQsNC30YMg0LLRhdC+0LTQuNC8INCyINGA0LXQttC40Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICBlbnRlckxpbmtFZGl0TW9kZShuZXdMaW5rKTsKICAgICAgICB9CgogICAgLy8gPT09PT09PSBDQVIgREFUQSBmcm9tIHBhcmVudCBwYWdlIChwb3N0TWVzc2FnZSkgPT09PT09PQogICAgLy8gUmVjZWl2ZWQgd2hlbiByZW5kZXJSaWdodFBhbmUoY2FyKSAvIG9wZW5EcmF3ZXIodmluKSBpcyBjYWxsZWQgaW4gZHJhd2VyLmpzLgogICAgLy8gUG9wdWxhdGVzIGFsbCBbZGF0YS1maWVsZF0gZWxlbWVudHMgYW5kIHVwZGF0ZXMgdGhlIGNhcmQgdGl0bGUuCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKCFlLmRhdGEgfHwgZS5kYXRhLnR5cGUgIT09ICdjYXJfZGF0YScgfHwgIWUuZGF0YS5jYXIpIHJldHVybjsKICAgICAgdmFyIGNhciA9IGUuZGF0YS5jYXI7CiAgICAgIGN1cnJlbnRVc2VyUm9sZSA9IGUuZGF0YSAmJiB0eXBlb2YgZS5kYXRhLnJvbGUgPT09ICdzdHJpbmcnID8gZS5kYXRhLnJvbGUudG9Mb3dlckNhc2UoKSA6ICcnOwogICAgICBjdXJyZW50Q2FyVmluID0gY2FyICYmIGNhci52aW4gPyBTdHJpbmcoY2FyLnZpbikgOiBudWxsOwogICAgICBraXRzID0gQXJyYXkuaXNBcnJheShjYXIgJiYgY2FyLmtpdHMpCiAgICAgICAgPyBjYXIua2l0cy5tYXAoZnVuY3Rpb24oayl7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgaWQ6IGsuaWQgfHwgdWlkKCksCiAgICAgICAgICAgICAgdGl0bGU6IGsudGl0bGUgfHwgJ9Cd0L7QstGL0Lkg0LrQvtC90YLQtdC90YInLAogICAgICAgICAgICAgIHBob3RvczogKGsucGhvdG9zIHx8IFtdKS5tYXAoZnVuY3Rpb24oc3JjKXsgcmV0dXJuIHsgaWQ6IHVpZCgpLCBzcmM6IHNyYyB9OyB9KSwKICAgICAgICAgICAgICB1c2VkOiAhIWsudXNlZCwKICAgICAgICAgICAgICB1c2VkRGF0ZTogay51c2VkRGF0ZSB8fCBudWxsLAogICAgICAgICAgICAgIGNyZWF0ZWRBdDogay5jcmVhdGVkQXQgfHwgbnVsbAogICAgICAgICAgICB9OwogICAgICAgICAgfSkKICAgICAgICA6IFtdOwogICAgICBpZiAoIWtpdHMubGVuZ3RoKSBraXRzID0gW2NyZWF0ZUtpdCgpXTsKICAgICAgYXJjaGl2ZWRLaXRzID0gW107CiAgICAgIGFjdGl2ZUVkaXRLaXRJZCA9IG51bGw7CiAgICAgIHJlbmRlcigpOwoKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZmllbGRdJykuZm9yRWFjaChmdW5jdGlvbihlbCkgewogICAgICAgIHZhciBmaWVsZCA9IGVsLmRhdGFzZXQuZmllbGQ7CiAgICAgICAgdmFyIHZhbDsKICAgICAgICBpZiAoZmllbGQgPT09ICdjb25kaXRpb25MYWJlbCcpIHsKICAgICAgICAgIHZhbCA9IGNhci5jb25kaXRpb24gPT09ICd1c2VkJyA/ICfQoSDQv9GA0L7QsdC10LPQvtC8JwogICAgICAgICAgICAgIDogKGNhci5jb25kaXRpb24gPT09ICduZXcnICA/ICfQndC+0LLRi9C5JyA6IGNhci5jb25kaXRpb24pOwogICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT09ICdzdGF0dXNMYWJlbCcpIHsKICAgICAgICAgIHZhbCA9IGNhci5zdGF0dXMgfHwgbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsID0gY2FyW2ZpZWxkXTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09ICcnKSB7CiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9ICfigJQnOwogICAgICAgIH0gZWxzZSBpZiAoZWwuZGF0YXNldC5mb3JtYXQgPT09ICdjdXJyZW5jeScpIHsKICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gTnVtYmVyKHZhbCkudG9Mb2NhbGVTdHJpbmcoJ3J1LVJVJykgKyAnwqDigr0nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IFN0cmluZyh2YWwpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBLZWVwIGNhcmQgdGl0bGUgc3RhdGljOyBWSU4gaXMgc2hvd24gaW4gdGhlIG91dGVyIHJpZ2h0LXBhbmUgaGVhZGVyLgogICAgICB2YXIgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkVGl0bGUnKTsKICAgICAgaWYgKHRpdGxlRWwpIHsKICAgICAgICB0aXRsZUVsLnRleHRDb250ZW50ID0gJ9Ca0LDRgNGC0L7Rh9C60LAg0LDQstGC0L7QvNC+0LHQuNC70Y8nOwogICAgICB9CiAgICB9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=';
// ======= SPLIT VIEW: right pane state machine (open / collapsed) =======
const splitRoot = document.getElementById('splitRoot');
const splitHandle = document.getElementById('splitHandle');
const rightPane = document.getElementById('rightPane');

const SNAP_HANDLE_PX = 0;    // kept for app.js compatibility
const CARD_MIN_WIDTH = 280;  // minmax(280px, 1fr) in CSS
const LEFT_PANE_MIN = CARD_MIN_WIDTH + 2 * 24 + 16; // 1 col + side pads + gap
const RIGHT_PANE_MIN = 280;   // kept for compatibility
const MIN_OPEN_WIDTH = 600;   // minimum open width (default state)
const MAX_OPEN_WIDTH = 900;   // maximum open width (fixed cap)
const HANDLE_WIDTH = 12;      // split handle width = collapsed tail

// rightPaneState: 'open' | 'collapsed'
let rightPaneState = 'collapsed';
let isDragging = false;
let dragStartX = 0;
let dragStartRightWidth = 0;
let dragMaxWidth = 0;
let currentRightPaneWidth = MIN_OPEN_WIDTH;
let rafId = null;
let pendingWidth = 0;

function isNarrowScreen() {
  return window.matchMedia('(max-width: 600px)').matches;
}

function getRightPaneMaxWidth() {
  const totalWidth = splitRoot ? splitRoot.offsetWidth : window.innerWidth;
  const handleWidth = splitHandle ? splitHandle.offsetWidth : HANDLE_WIDTH;
  const dynamicMax = totalWidth - handleWidth - LEFT_PANE_MIN;
  return Math.max(MIN_OPEN_WIDTH, dynamicMax);
}

function setRightPaneWidth(width) {
  if (!rightPane) return;
  const max = getRightPaneMaxWidth();
  const clamped = Math.min(max, Math.max(MIN_OPEN_WIDTH, width));
  rightPane.style.width = clamped + 'px';
  rightPane.style.flex = '0 0 ' + clamped + 'px';
  rightPane.style.transform = '';
  currentRightPaneWidth = clamped;
}

function collapseRightPane() {
  if (!rightPane) return;
  rightPaneState = 'collapsed';
  // Shrink physical width to 0 so leftPane expands; splitHandle stays as the visible tail
  rightPane.style.width = '0px';
  rightPane.style.flex = '0 0 0px';
  rightPane.style.transform = '';
  currentRightPaneWidth = MIN_OPEN_WIDTH;
}

function expandRightPane() {
  if (!rightPane) return;
  rightPaneState = 'open';
  setRightPaneWidth(MIN_OPEN_WIDTH);
}

function onSplitPointerMove(e) {
  if (!isDragging) return;
  if (rightPaneState === 'collapsed') return;
  const rawDelta = e.clientX - dragStartX;
  pendingWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
  if (rafId === null) {
    rafId = requestAnimationFrame(function() {
      rafId = null;
      setRightPaneWidth(pendingWidth);
    });
  }
}

function stopSplitDrag(e) {
  if (!isDragging) return;
  isDragging = false;
  if (rafId !== null) {
    cancelAnimationFrame(rafId);
    rafId = null;
  }
  document.body.classList.remove('split-dragging');
  document.body.style.userSelect = '';
  document.body.style.cursor = '';
  if (splitHandle) {
    splitHandle.releasePointerCapture(e.pointerId);
    splitHandle.removeEventListener('pointermove', onSplitPointerMove);
    splitHandle.removeEventListener('pointerup', stopSplitDrag);
    splitHandle.removeEventListener('pointercancel', stopSplitDrag);
    const rawDelta = e.clientX - dragStartX;
    const finalWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
    setRightPaneWidth(finalWidth);
  }
}

if (splitHandle) {
  splitHandle.addEventListener('pointerdown', function(e) {
    e.preventDefault();
    if (rightPaneState === 'collapsed') {
      // Any interaction with the handle expands back to MIN_OPEN_WIDTH
      expandRightPane();
      return;
    }
    isDragging = true;
    dragStartX = e.clientX;
    dragStartRightWidth = currentRightPaneWidth;
    dragMaxWidth = getRightPaneMaxWidth();
    document.body.classList.add('split-dragging');
    document.body.style.userSelect = 'none';
    document.body.style.cursor = 'col-resize';
    rightPane.style.transform = '';
    splitHandle.style.transform = '';
    splitHandle.setPointerCapture(e.pointerId);
    splitHandle.addEventListener('pointermove', onSplitPointerMove);
    splitHandle.addEventListener('pointerup', stopSplitDrag);
    splitHandle.addEventListener('pointercancel', stopSplitDrag);
  });
}

window.addEventListener('resize', function() {
  if (!rightPane) return;
  if (rightPaneState === 'open') {
    setRightPaneWidth(currentRightPaneWidth);
  } else {
    // Maintain collapsed state
    collapseRightPane();
  }
});

// Initialize right pane width
collapseRightPane();

// Wire up the collapse button in the drawer header
const rightPaneCollapseBtn = document.getElementById('rightPaneCollapseBtn');
if (rightPaneCollapseBtn) {
  rightPaneCollapseBtn.addEventListener('click', collapseRightPane);
}

// ======= IFRAME LOADING =======

// Posts the full car object (looked up by vin) to the already-loaded iframe.
// The iframe listens via window.addEventListener('message', ...) and populates
// all [data-field] elements and the card title.
function postCarDataToIframe(vin) {
  const iframe = document.getElementById('drawerIframe');
  if (!iframe || !iframe.contentWindow) return;
  const car = getCarByVin(vin);
  if (!car) return;
  iframe.contentWindow.postMessage({ type: 'car_data', car: car, role: (typeof getRole === 'function' ? getRole() : '') }, '*');
}

function getCarByVin(vin) {
  if (!vin || !window.CARS_DATA || !Array.isArray(window.CARS_DATA)) return null;
  return window.CARS_DATA.find(c => c.vin === vin) || null;
}

function formatHeaderText(value) {
  const raw = value ? String(value).trim() : '';
  if (!raw) return '';
  return raw
    .split(/\s+/)
    .map(word => word
      .split('-')
      .map(part => part ? (part.charAt(0).toLocaleUpperCase('ru-RU') + part.slice(1).toLocaleLowerCase('ru-RU')) : part)
      .join('-'))
    .join(' ');
}

function updateRightPaneHeaderMeta(vin) {
  const metaTextEl = document.getElementById('rightPaneCarMetaText');
  const vinTextEl = document.getElementById('rightPaneVinText');
  if (!metaTextEl || !vinTextEl) return;
  const normalizedVin = vin ? String(vin).trim() : '';

  const car = getCarByVin(normalizedVin);
  const brand = formatHeaderText(car && car.brand ? car.brand : '');
  const model = formatHeaderText(car && car.model ? car.model : '');
  const year = car && car.year ? String(car.year).trim() : '';

  const metaParts = [brand, model, year].filter(Boolean);
  metaTextEl.textContent = metaParts.join(' ');
  vinTextEl.textContent = normalizedVin ? ('VIN:' + normalizedVin) : '';
}

// renderRightPane(car) -- public API.
// Call this to populate the right pane with the full profile of a car.
// Sections populated:
//   data-role="right-section-specs"   -- brand/model/trim/year/color/...
//   data-role="right-section-docs"    -- vin/ptsType/keyNumber/comments
//   data-role="right-section-finance" -- price
//   data-role="right-section-extra"   -- showroom/condition/status/sourceFile
function renderRightPane(car) {
  if (!car) return;
  openDrawer(car.vin);
}

function setDrawerEmptyStateVisible(visible) {
  const emptyState = document.getElementById('drawerEmptyState');
  const drawerIframe = document.getElementById('drawerIframe');
  if (emptyState) {
    emptyState.style.display = visible ? 'flex' : 'none';
  }
  if (drawerIframe) {
    drawerIframe.style.display = visible ? 'none' : 'block';
  }
}

let themedDrawerDataUrl = null;

function getThemedDrawerDataUrl() {
  if (themedDrawerDataUrl) return themedDrawerDataUrl;

  const prefix = 'data:text/html;base64,';
  if (!DRAWER_DATA_URL || !DRAWER_DATA_URL.startsWith(prefix)) {
    themedDrawerDataUrl = DRAWER_DATA_URL;
    return themedDrawerDataUrl;
  }

  try {
    const encoded = DRAWER_DATA_URL.slice(prefix.length);
    const binary = atob(encoded);
    const bytes = Uint8Array.from(binary, ch => ch.charCodeAt(0));
    let html = new TextDecoder('utf-8').decode(bytes);

    html = html
      .replace(
        /(\.add-btn, \.add-comment-btn, \.add-link-btn, #addCommentBtn, #addLinkBtn\{[\s\S]*?background:\s*)#DADADA(\s*!important;)/,
        '$1#EAEAEA$2'
      )
      .replace(
        /(\.add-btn:hover, \.add-comment-btn:hover, \.add-link-btn:hover, #addCommentBtn:hover, #addLinkBtn:hover\{[\s\S]*?background:\s*)#D2D2D2(\s*!important;)/,
        '$1#DEDEDE$2'
      )
      .replace(
        /(#additionalSection \.icon-btn\.icon-btn--upload\s*\{\s*background:\s*)#DADADA(;)/,
        '$1#EAEAEA$2'
      )
      .replace(
        /(#additionalSection \.icon-btn\.icon-btn--upload:hover\s*\{\s*background:\s*)#D2D2D2(;)/,
        '$1#DEDEDE$2'
      )
      .replace(
        /(\.tile\.is-add\{[\s\S]*?background:\s*)#E5E5E5(;)/,
        '$1#EAEAEA$2'
      );

    const outBytes = new TextEncoder().encode(html);
    let outBinary = '';
    for (let index = 0; index < outBytes.length; index++) {
      outBinary += String.fromCharCode(outBytes[index]);
    }

    themedDrawerDataUrl = prefix + btoa(outBinary);
    return themedDrawerDataUrl;
  } catch (error) {
    themedDrawerDataUrl = DRAWER_DATA_URL;
    return themedDrawerDataUrl;
  }
}

// openDrawer(vin) -- load the iframe if needed, then push car data into it.
// vin is optional; if provided the matching car from window.CARS_DATA is shown.
function openDrawer(vin) {
  const drawerIframe = document.getElementById('drawerIframe');
  if (!drawerIframe) return;
  const normalizedVin = vin ? String(vin).trim() : '';
  if (!normalizedVin) {
    updateRightPaneHeaderMeta('');
    setDrawerEmptyStateVisible(true);
    return;
  }

  setDrawerEmptyStateVisible(false);
  updateRightPaneHeaderMeta(vin);
  if (!drawerIframe.src || drawerIframe.src === window.location.href) {
    // First open: load the iframe, then post car data once it is ready.
    if (normalizedVin) {
      drawerIframe.addEventListener('load', function() {
        postCarDataToIframe(normalizedVin);
      }, { once: true });
    }
    drawerIframe.src = getThemedDrawerDataUrl();
  } else {
    // Iframe already loaded -- just refresh the displayed car.
    postCarDataToIframe(normalizedVin);
  }
}

setDrawerEmptyStateVisible(true);

function closeDrawer() {
  // In split view the right pane is always visible; no-op
}
