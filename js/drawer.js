// ======= DRAWER: state machine (S0–S3), drag, snap =======
//
// ================================================================
// ПРАВАЯ ПАНЕЛЬ -- полная карта блоков, данных и правила редактирования
// ================================================================
//
// 1. БЛОКИ ПРАВОГО ЭКРАНА (index.html -- внешняя оболочка)
// ---------------------------------------------------------
// data-role                    id                   Назначение
// right-pane                   rightPane            Корневой контейнер
// right-pane-inner             --                   Внутренняя обёртка
// right-pane-header            --                   Шапка панели
// right-pane-collapse-btn      rightPaneCollapseBtn Кнопка «Свернуть»
// right-pane-header-actions    drawerHeaderActions  Правый блок шапки
// right-pane-user-block        adminWrapper         Профиль/выход
// right-pane-user-label        adminText            Логин / «ADMIN»
// right-pane-avatar            avatar               Иконка пользователя
// right-pane-content           drawerContent        Область контента
// right-pane-iframe            drawerIframe         iframe карточки авто
//
// 2. БЛОКИ ВНУТРИ IFRAME (DRAWER_DATA_URL -- закодированный HTML)
// ---------------------------------------------------------
// data-role                        id                  Назначение
// right-inner-wrap                 --                  Корень iframe
// right-card-title                 --                  «Карточка авто»
// right-section-specs              mainSpecsSection    Осн. хар-ки
// right-section-specs-content      mainSpecsContent    Контент секции
// right-section-docs               docsSection         Документы
// right-section-docs-content       docsContent         Контент секции
// right-section-finance            financeSection      Финансы
// right-section-finance-content    financeContent      Контент секции
// right-section-additional         additionalSection   Доп. информация
// right-section-additional-content additionalContent   Контент секции
// right-comments                   commentsSection     Комментарии
// right-comments-list              commentsList        Список комм.
// right-links                      linksSection        Ссылки
// right-links-list                 linksList           Список ссылок
// right-content-header             --                  Заголовок «Контент»
// right-content-kits               kits                Блоки контента
// right-content-add-btn            addKitBtn           Кнопка добавления
// right-archive-header             --                  Заголовок «Архив»
// right-archive-kits               archiveKits         Архивные блоки
// right-viewer                     viewerBackdrop      Просмотр фото
//
// 3. СХЕМА ДАННЫХ АВТО (из window.CARS_DATA / cars-data.js)
// ---------------------------------------------------------
// Блок                         Поля
// right-section-specs          brand, model, year, color, fuelType,
//                               engineVolume, horsepower, gearbox, drive,
//                               mileage, bodyType, interiorType, owners,
//                               showroom, manager
// right-section-docs           vin, govNumber, cts, ptsType, legalEntity,
//                               registered, arrivalDate, forSale, serviceBook
// right-section-finance        entryPrice, entryWithExpenses, repairCost,
//                               salePrice, carrierCost, deregistrationCost
// right-comments               comments[] {text, createdAt}
// right-links                  links[] {type, url}
// right-content-kits           kits[] {id, title, photos[], used, usedDate}
// right-archive-kits           archivedKits[] (то же, что kits, флаг used=true)
// right-card-title             vin (отображается в заголовке)
//
// 4. ФУНКЦИИ И СОБЫТИЯ
// ---------------------------------------------------------
// expandRightPane()    -- открыть панель (устанавливает ширину >= MIN)
// collapseRightPane()  -- свернуть панель (ширина -> 0 / скрыть)
// openDrawer()         -- загрузить DRAWER_DATA_URL в drawerIframe
// closeDrawer()        -- no-op в split-режиме
// setRightPaneWidth(w) -- задать ширину; вызывается при drag
//
// Событие «открыть»: клик по .car-card -> handleCarClick() (app.js)
//   -> expandRightPane() + openDrawer()
// Событие «свернуть»: клик #rightPaneCollapseBtn / drag к левому краю
//
// Зависимость от роли (auth.js):
//   admin        -- доступны все фильтры, полный контент iframe
//   photographer -- заблокированы чужие фильтры; right-pane-user-label
//                   показывает логин фотографа
//
// 5. ПРАВИЛА БЕЗОПАСНОГО РЕДАКТИРОВАНИЯ
// ---------------------------------------------------------
// МОЖНО менять:
//   - CSS-стили (цвета, отступы, шрифты) секций
//   - Текст заголовков секций (.section-header-title)
//   - Порядок .spec-item внутри .specs-grid
//   - Добавлять новые секции-аккордеоны (копируя шаблон collapse-section
//     и регистрируя через setupCollapse())
//   - HTML-комментарии и data-* атрибуты, не ломающие логику
//
// НЕЛЬЗЯ трогать без анализа последствий:
//   - id элементов (на них завязаны getElementById в JS)
//   - data-action атрибуты тайлов (.tile, .collage-cell)
//   - data-kit-id атрибуты (ключ хранилища)
//   - Структуру viewer-backdrop / viewer-stage (обрабатывается openViewer)
//   - Обработчики событий на window (drag, keydown, message)
//   - DRAWER_DATA_URL -- менять только через декод -> правка -> энкод, не вручную
//   - Функции expandRightPane / collapseRightPane / openDrawer в app.js
// ================================================================
const DRAWER_DATA_URL = 'data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InJ1Ij4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIi8+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+CjxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8c3R5bGU+CiAgICA6cm9vdHsKICAgICAgLS1pbnRlci1yZWd1bGFyOiA0MDA7CiAgICAgIC0taW50ZXItbWVkaXVtOiA1MDA7CiAgICAgIC0taW50ZXItc2VtaWJvbGQ6IDYwMDsKCiAgICAgIC0tcGFnZS1iZzogI0YxRjFGMTsKCiAgICAgIC0td2hpdGU6ICNGRkZGRkY7CiAgICAgIC0tdGV4dC1wcmltYXJ5OiAjMUExQTFBOwogICAgICAtLXRleHQtc2Vjb25kYXJ5OiAjNEI1NTYzOwogICAgICAtLXRleHQtdGVydGlhcnk6ICM4MDgwODA7CgogICAgICAtLWJvcmRlcjogI0Q5RDlEOTsKICAgICAgLS1kaXZpZGVyOiAjRDlEOUQ5OwoKICAgICAgLS1hZGQtcGhvdG8tY29sb3I6IHZhcigtLWJvcmRlcik7CiAgICAgIC0tYWRkLXBob3RvLWNvbG9yLXVzZWQ6IHZhcigtLXVzZWQtYm9yZGVyKTsKCiAgICAgIC0tYnRuLWRhcms6ICMxQTFBMUE7CiAgICAgIC0tYnRuLWRhcmstaG92ZXI6ICMyQTJCMkU7CgogICAgICAtLWJ0bi1kYW5nZXI6ICNGRjRENTc7CiAgICAgIC0tYnRuLWRhbmdlci1ob3ZlcjogI0U2M0I0NTsKCiAgICAgIC0tdXNlZC1iZzogI0VBRjBFRDsKICAgICAgLS11c2VkLWJvcmRlcjogIzAyRDE1QzsKICAgICAgLS11c2VkLWRpdmlkZXI6ICNFN0YwRUI7CiAgICAgIC0tdXNlZC1wYWdlLWJnOiAjRUNGMEVFOwoKICAgICAgLS10aWxlLWVtcHR5OiB2YXIoLS1wYWdlLWJnKTsKICAgICAgLS10aWxlLWFkZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1hZGQtdXNlZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1lbXB0eS11c2VkOiAjRDFFREREOwoKICAgICAgLS1zaGFkb3ctZmxvYXQ6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjEyKTsKCiAgICAgIC0tcmFkaXVzLWNhcmQ6IDIwcHg7CiAgICAgIC0tcmFkaXVzLWJ0bjogMTBweDsKICAvKiBEZWZpbmUgbGFyZ2VyIHJhZGl1cyB2YWx1ZXMgdG8gbWF0Y2ggY2FyZCBzdHlsaW5nIGZyb20gcGFnZTEgKi8KICAtLXJhZGl1cy1sZzogMjRweDsKICAtLXJhZGl1cy1tZDogMTJweDsKCiAgICAgIC0tZ2FwLXRpbGVzOiA0cHg7CiAgICAgIC0tdGlsZS1yYXRpbzogMTYvOTsKCiAgICAgIC0tYnRuLXNpemU6IDQycHg7CiAgICAgIC0tY2FyZC1wYWQ6IDIwcHg7CgogICAgICAvKiB2aWV3ZXIgY29sb3JzICjQv9C+0LQg0YDQtdGE0LXRgNC10L3RgSkgKi8KICAgICAgLS12aWV3ZXItb3ZlcmxheTogcmdiYSgyMzMsIDIzNiwgMjM5LCAwLjk1KTsgLyog0YHQtdGA0YvQuSDRgdC70L7QuSAqLwogICAgICAtLXZpZXdlci1wYW5lbDogcmdiYSgxNywgMjQsIDM5LCAwLjkyKTsgICAgICAvKiDRgtGR0LzQvdGL0Lkg0LHQu9C+0LogKi8KICAgICAgLS12aWV3ZXItcGFuZWwtMjogcmdiYSgxNywgMjQsIDM5LCAwLjgyKTsKICAgICAgLS12aWV3ZXItc3Ryb2tlOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICAtLXZpZXdlci1zdHJva2UtMjogcmdiYSgyNTUsMjU1LDI1NSwwLjE2KTsKICAgIH0KCiAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveDsgbWFyZ2luOjA7IHBhZGRpbmc6MDt9CiAgICBodG1sLGJvZHl7aGVpZ2h0OmF1dG87bWluLWhlaWdodDowO3dpZHRoOjEwMCU7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTp2aXNpYmxlO30KICAgIGh0bWwsIGJvZHkgewogICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7CiAgICAgIHNjcm9sbGJhci13aWR0aDogbm9uZTsKICAgIH0KICAgIGh0bWw6Oi13ZWJraXQtc2Nyb2xsYmFyLAogICAgYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgICB3aWR0aDogMDsKICAgICAgaGVpZ2h0OiAwOwogICAgfQogICAgYm9keXsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtYmcpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgICB9CgogICAgLndyYXB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWFyZ2luOiAwOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgZ2FwOiAyMHB4OwogICAgfQoKICAgIC8qIFNlY3Rpb24gaGVhZGVyICovCiAgICAuc2VjdGlvbi1oZWFkZXJ7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgZ2FwOiAxMnB4OwogICAgfQogICAgLnNlY3Rpb24tdGl0bGV7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CiAgICAuc2VjdGlvbi1hY3Rpb25zewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgZ2FwOiA4cHg7CiAgICB9CgogICAgLyogQnV0dG9ucyAqLwogICAgLmljb24tYnRuewogICAgICB3aWR0aDogdmFyKC0tYnRuLXNpemUpOwogICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2UsIHRyYW5zZm9ybSAwLjFzIGVhc2U7CiAgICAgIGZsZXgtc2hyaW5rOjA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGxpbmUtaGVpZ2h0OiAwOwogICAgfQogICAgLmljb24tYnRuOmFjdGl2ZXt0cmFuc2Zvcm06IG5vbmU7fQogICAgLmljb24tYnRuLS1kYXJre2JhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrKTsgY29sb3I6ICNmZmY7fQogICAgLmljb24tYnRuLS1kYXJrOmhvdmVye2JhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyKTt9CiAgICAuaWNvbi1idG4tLWRhbmdlcntiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyKTsgY29sb3I6ICNmZmY7fQogICAgLmljb24tYnRuLS1kYW5nZXI6aG92ZXJ7YmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlci1ob3Zlcik7fQogICAgLmljb24tYnRuLS1naG9zdHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsKICAgICAgY29sb3I6I2ZmZjsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQogICAgLmljb24tYnRuLS1naG9zdDpob3ZlcnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE2KTsgfQoKICAgIC5pY29uewogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgIH0KICAgIC5pY29uIHN2Z3sKICAgICAgd2lkdGg6IDE4cHg7ICAgICAgICAgICAgICAgLyog0LLQuNC30YPQsNC70YzQvdC+ICLRgtC+0L3RjNGI0LUiICovCiAgICAgIGhlaWdodDogMThweDsKICAgICAgZGlzcGxheTpibG9jazsKICAgICAgb3BhY2l0eTogMC45MjsKICAgIH0KCiAgICAucm90YXRlLTQ1eyB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7IH0KCiAgICAvKiA9PT09PSDQodCy0L7RgNCw0YfQuNCy0LDQtdC80YvQtSDRgdC10LrRhtC40Lgg0LrQsNGA0YLQvtGH0LrQuCDQsNCy0YLQvtC80L7QsdC40LvRjyA9PT09PSAqLwogICAgLmNvbGxhcHNlLXNlY3Rpb24gewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIC8qIFVzZSBsYXJnZXIgYm9yZGVyLXJhZGl1cyBmb3IgY29sbGFwc2libGUgc2VjdGlvbnMgdG8gbWF0Y2ggcGFnZTEgZGVzaWduICovCiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICB9CiAgICAuc2VjdGlvbi1oZWFkZXIgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIHBhZGRpbmc6IDE2cHggMjBweDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgfQogICAgLnNlY3Rpb24taGVhZGVyOmhvdmVyIHsKICAgICAgLyogVXNlIGxpZ2h0IGdyZXkgaG92ZXIgY29sb3VyIHNpbWlsYXIgdG8gcGFnZTEgKCNFREVERUQpICovCiAgICAgIGJhY2tncm91bmQ6ICNFREVERUQ7CiAgICB9CiAgICAuc2VjdGlvbi1oZWFkZXItbGVmdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogMTJweDsKICAgIH0KICAgIC5zZWN0aW9uLWhlYWRlci10aXRsZSB7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgfQogICAgLmNvbGxhcHNlLWljb24gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgd2lkdGg6IDI0cHg7CiAgICAgIGhlaWdodDogMjRweDsKICAgICAgY29sb3I6ICNEQURBREE7CiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7CiAgICB9CiAgICAuY29sbGFwc2UtaWNvbiBzdmcgewogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgfQogICAgLmNvbGxhcHNlLWljb24uZXhwYW5kZWQgewogICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7CiAgICB9CiAgICAuc2VjdGlvbi1jb250ZW50IHsKICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIHBhZGRpbmc6IHZhcigtLWNhcmQtcGFkKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgfQogICAgLnNlY3Rpb24tY29udGVudC5jb2xsYXBzZWQgewogICAgICBkaXNwbGF5OiBub25lOwogICAgfQogICAgLnNwZWNzLWdyaWQgewogICAgICBkaXNwbGF5OiBncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIyMHB4LCAxZnIpKTsKICAgICAgZ2FwOiAyMHB4IDI0cHg7CiAgICB9CiAgICAuc3BlYy1pdGVtIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiA2cHg7CiAgICB9CiAgICAuc3BlYy1sYWJlbCB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLW1lZGl1bSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgfQogICAgLnNwZWMtdmFsdWUgewogICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkOwogICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsKICAgIH0KCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAg0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjyAo0YHQutC+0L/QuNGA0L7QstCw0L3QviDQuCDQsNC00LDQv9GC0LjRgNC+0LLQsNC90L4g0LjQtyBwYWdlMSkKICAgICAgINCt0YLQuCDRgdGC0LjQu9C4INC/0YDQuNC80LXQvdGP0Y7RgtGB0Y8g0YLQvtC70YzQutC+INCy0L3Rg9GC0YDQuCDRgdC10LrRhtC40LggI2FkZGl0aW9uYWxTZWN0aW9uCiAgICAgICDRh9GC0L7QsdGLINCy0L3QtdGI0L3QuNC1INGN0LvQtdC80LXQvdGC0Ysg0YHRgtGA0LDQvdC40YbRiyDQvtGB0YLQsNC70LjRgdGMINC90LXQuNC30LzQtdC90L3Ri9C80LguCiAgICAqLwoKICAgIC8qINCX0LDQs9C+0LvQvtCy0L7QuiDQutCw0YDRgtC+0YfQutC4INCw0LLRgtC+0LzQvtCx0LjQu9GPICovCiAgICAuY2FyLWNhcmQtdGl0bGV7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CgogICAgLyog0JHQu9C+0Log0Lgg0L/QvtC00L/Rg9C90LrRgtGLINC00L7Qvy4g0LjQvdGE0L7RgNC80LDRhtC40LggKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1ibG9jayB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGdhcDogMjBweDsKICAgICAgcGFkZGluZzogMDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1pdGVtIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAyMHB4OwogICAgfQogICAgLyog0YPRgdGC0YDQsNC90Y/QtdC8INC00LLQvtC50L3QvtC5INC+0YLRgdGC0YPQvyDQv9GA0Lgg0L/Rg9GB0YLRi9GFINGB0L/QuNGB0LrQsNGFICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSB7CiAgICAgIGdhcDogMDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1pdGVtLmlzLWVtcHR5IC5jb21tZW50cy1saXN0LAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWl0ZW0uaXMtZW1wdHkgLmxpbmtzLWxpc3QgewogICAgICBkaXNwbGF5OiBub25lOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWhlYWRlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLXRpdGxlIHsKICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItc2VtaWJvbGQpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICB9CiAgICAvKiDQodC/0LjRgdC+0Log0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnRzLWxpc3QgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDRweDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuY29tbWVudC1ibG9jayB7CiAgICAgIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgIGdhcDogMTJweDsKICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgKyA0MHB4KTsKICAgICAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtdGV4dCB7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgIGZsZXg6IDE7CiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7CiAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtaW5wdXQgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICAvKiBJbmhlcml0IHRoZSBsaWdodCBncmV5IGJhY2tncm91bmQgZnJvbSB0aGUgY29udGFpbmVyICovCiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgIC8qIFNob3cgYSBzdWJ0bGUgYm9yZGVyIGxpa2UgaW4gcGFnZTEgKi8KICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsKICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwOwogICAgICBtYXJnaW46IDA7CiAgICAgIHJlc2l6ZTogbm9uZTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgbWluLWhlaWdodDogMS42ZW07CiAgICAgIGhlaWdodDogYXV0bzsKICAgICAgZmxleDogMTsKICAgICAgcGFkZGluZy1yaWdodDogMjBweDsKICAgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICB0ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgfQoKICAgIC8qIENoYW5nZSBib3JkZXIgY29sb3Igb2YgdGhlIGNvbW1lbnQgdGV4dGFyZWEgb24gZm9jdXMgc2ltaWxhciB0byBwYWdlMSAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5jb21tZW50LWlucHV0OmZvY3VzIHsKICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KICAgIC8qINCh0L/QuNGB0L7QuiDRgdGB0YvQu9C+0LogKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGlua3MtbGlzdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGdhcDogNHB4OwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICAgIGdhcDogMTJweDsKICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJ0bi1zaXplKSArIDQwcHgpOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWluZm8gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleDogMTsKICAgICAgbWluLXdpZHRoOiAwOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXR5cGUgewogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgZmxleDogMCAwIGF1dG87CiAgICB9CiAgICAvKiDQtNC+0LHQsNCy0LvRj9C10Lwg0LTQstC+0LXRgtC+0YfQuNC1INC/0L7RgdC70LUg0L3QsNC30LLQsNC90LjRjyDRgtC40L/QsCAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW06bm90KC5lZGl0aW5nKSAubGluay10eXBlOjphZnRlciB7CiAgICAgIGNvbnRlbnQ6ICI6IjsKICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybCB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIC8qIHVuZGVybGluZSBvbmx5IHVuZGVyIHRoZSB0ZXh0IChub3QgdGhlIHdob2xlIGZsZXggd2lkdGgpICovCiAgICAgIHRleHQtZGVjb3JhdGlvbi1saW5lOiB1bmRlcmxpbmU7CiAgICAgIHRleHQtZGVjb3JhdGlvbi1zdHlsZTogZGFzaGVkOwogICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6ICNDQkQ1RTE7CiAgICAgIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMnB4OwoKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgIGZsZXg6IDEgMSBhdXRvOwogICAgICBtaW4td2lkdGg6IDA7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmhvdmVyIHsKICAgICAgdGV4dC1kZWNvcmF0aW9uLXN0eWxlOiBzb2xpZDsKICAgICAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjNjQ3NDhCOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWVkaXQgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleDogMTsKICAgICAgbWluLXdpZHRoOiAwOwogICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBsaW5lLWhlaWdodDogbm9ybWFsOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXR5cGUtaW5wdXQgewogICAgICB3aWR0aDogMTIwcHg7CiAgICAgIG1pbi13aWR0aDogMTIwcHg7CiAgICAgIHBhZGRpbmc6IDZweCAxMHB4OwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgIGZsZXg6IDAgMCBhdXRvOwogICAgICBvdmVyZmxvdzogdmlzaWJsZTsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXQgewogICAgICBmbGV4OiAxOwogICAgICBtaW4td2lkdGg6IDE0MHB4OwogICAgICBwYWRkaW5nOiA2cHggMTBweDsKICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXQ6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItY29sb3I6ICNEOUQ5RDk7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstYWN0aW9ucyB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBmbGV4LXNocmluazogMDsKICAgIH0KICAgIC8qINCh0YLQuNC70Lgg0LrQvdC+0L/QvtC6INCy0L3Rg9GC0YDQuCDQsdC70L7QutCwINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdC+0Lkg0LjQvdGE0L7RgNC80LDRhtC40LggKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uZWRpdC1idXR0b24gewogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5lZGl0LWJ1dHRvbjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMyQTJBMkE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkIHsKICAgICAgYmFja2dyb3VuZDogI0RBREFEQTsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZDpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b24gewogICAgICAvKiBNYXRjaCBwYWdlMTogcmVkIGZpbGxlZCBidXR0b24gd2l0aCB3aGl0ZSBpY29uICovCiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICB9CgogICAgLyogRW5zdXJlIHRoZSB0cmFzaCBpY29uIGluc2lkZSB0aGUgZGVsZXRlIGJ1dHRvbiB1c2VzIHRoZSBidXR0b24ncyB3aGl0ZSBjb2xvdXIgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uIHN2ZywKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uOmhvdmVyIHN2ZyB7CiAgICAgIGZpbGw6ICNGRkZGRkY7CiAgICB9CgogICAgLyogRm9yY2UgcGF0aHMgaW5zaWRlIHRoZSB0cmFzaCBpY29uIHRvIHVzZSB3aGl0ZSBmaWxsIGZvciBwcm9wZXIgY29udHJhc3QgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uIHN2ZyBwYXRoLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b246aG92ZXIgc3ZnIHBhdGggewogICAgICBmaWxsOiAjRkZGRkZGICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogUmVtb3ZlIHJvdW5kZWQgY29ybmVycyBmcm9tIHRoZSB0ZXh0YXJlYSBvbmx5IHdoZW4gZWRpdGluZyB0byBtYXRjaCBwYWdlMSAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5jb21tZW50LWJsb2NrLmVkaXRpbmcgLmNvbW1lbnQtaW5wdXR7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBVc2UgYnV0dG9uLXNpemVkIHJhZGl1cyBmb3IgbGluayBpbnB1dHMgdG8gYmV0dGVyIG1hdGNoIHBhZ2UxICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZS1pbnB1dCwKICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmwtaW5wdXR7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1idG4pOwogICAgfQoKICAgIC8qIE9uIGZvY3VzLCB1c2UgdGVydGlhcnkgdGV4dCBjb2xvdXIgZm9yIGxpbmsgaW5wdXQgYm9yZGVycyAoc2ltaWxhciB0byBwYWdlMSkgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay10eXBlLWlucHV0OmZvY3VzLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybC1pbnB1dDpmb2N1c3sKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KCiAgICAvKiBLaXRzIGdyaWQgKNC60LDQuiDQsiDQnNC10L3Rji5odG06IGF1dG8tZmlsbCArIG1pbm1heCkgKi8KICAgIC5raXRzewogICAgICBkaXNwbGF5OmdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDUyMHB4LCAxZnIpKTsKICAgICAgZ2FwOiAyMHB4OwogICAgICBhbGlnbi1pdGVtczpzdGFydDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC13aWR0aDogMTEwMHB4KXsKICAgICAgLmtpdHN7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDQ2MHB4LCAxZnIpKTsgfQogICAgfQogICAgQG1lZGlhIChtYXgtd2lkdGg6IDc4MHB4KXsKICAgICAgYm9keXsgcGFkZGluZzogMjBweDsgfQoua2l0c3sgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IH0KICAgIH0KCiAgICAvKiBLaXQgY2FyZCAqLwogICAgLmtpdC1jYXJkewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgICAgcGFkZGluZzogdmFyKC0tY2FyZC1wYWQpOwogICAgICBtaW4td2lkdGg6IDA7CiAgICAgIAogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB9CgogICAgLyogRHJhZyBoYW5kbGUgKNCy0LXRgNGF0L3QuNC5INC60L7QvdGC0YPRgCkgKi8KICAgIC5raXQtZHJhZy1oYW5kbGV7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICB0b3A6MDsKICAgICAgbGVmdDowOwogICAgICByaWdodDowOwogICAgICBoZWlnaHQ6IDE0cHg7CiAgICAgIGN1cnNvcjogZ3JhYjsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IHZhcigtLXJhZGl1cy1jYXJkKTsKICAgIH0KICAgIC5raXQtZHJhZy1oYW5kbGU6aG92ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMjYsMjYsMjYsMC4wMyk7IH0KICAgIC5raXQtY2FyZC5pcy1kcmFnZ2luZyAua2l0LWRyYWctaGFuZGxleyBjdXJzb3I6IGdyYWJiaW5nOyB9CgogICAgLmtpdC1jYXJkLmlzLWRyYWdnaW5newogICAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctZmxvYXQpOwogICAgfQoKICAgIC5raXQtcGxhY2Vob2xkZXJ7CiAgICAgIC8qIHBsYWNlaG9sZGVyIG9jY3VwaWVzIHNwYWNlIGJ1dCBpcyBpbnZpc2libGUgKG5vICdsYW5kaW5nIHNsb3QnIFVJKSAqLwogICAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgIH0KICAgIC5raXQtY2FyZC5pcy11c2VkICsgLmtpdC1wbGFjZWhvbGRlcnsgYm9yZGVyLWNvbG9yOiB2YXIoLS11c2VkLWJvcmRlcik7IH0KCiAgICAua2l0LWNhcmQuaXMtdXNlZHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdXNlZC1iZyk7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdXNlZC1ib3JkZXIpOwogICAgfQoKICAgIC5raXQtdG9wewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47CiAgICAgIGdhcDogMTJweDsKICAgIH0KCiAgICAua2l0LXRpdGxlewogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBtaW4td2lkdGg6IDA7CiAgICAgIGZsZXg6IDE7CiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgfQogICAgLmtpdC10aXRsZVtjb250ZW50ZWRpdGFibGU9InRydWUiXXsgb3V0bGluZTpub25lOyB9CiAgICAua2l0LWFjdGlvbnN7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgZmxleC1zaHJpbms6MDsKICAgIH0KCiAgICAvKiBkaXZpZGVyIG11c3Qgc3BhbiBmdWxsIHdpZHRoICovCiAgICAua2l0LWRpdmlkZXJ7CiAgICAgIGhlaWdodDogMXB4OwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kaXZpZGVyKTsKICAgICAgbWFyZ2luOiAyMHB4IDA7IC8qIDE2cHgg0L7RgiDRiNCw0L/QutC4INC00L4g0LvQuNC90LjQuCDQuCAxNnB4INC+0YIg0LvQuNC90LjQuCDQtNC+ICfQmNGB0L/QvtC70YzQt9C+0LLQsNC90L4nICovCiAgICAgIC8qIGZ1bGwtYmxlZWQg0LLQvdGD0YLRgNC4INC60LDRgNGC0L7Rh9C60Lgg0L/RgNC4IHBhZGRpbmcgNDBweCAqLwogICAgICBtYXJnaW4tbGVmdDogY2FsYyh2YXIoLS1jYXJkLXBhZCkgKiAtMSk7CiAgICAgIG1hcmdpbi1yaWdodDogY2FsYyh2YXIoLS1jYXJkLXBhZCkgKiAtMSk7CiAgICB9CgogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmtpdC1kaXZpZGVyeyBiYWNrZ3JvdW5kOiB2YXIoLS11c2VkLWJvcmRlcik7IH0KCiAgICAvKiBVc2VkIHJvdyAqLwogICAgLmtpdC11c2VkLXJvd3sKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogMTBweDsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKCiAgICAgIC8qIHNhbWUgdHlwb2dyYXBoeSBhcyBmb290ZXIgKCLQktGB0LXQs9C+INGE0L7RgtC+IiwgItCX0LDQs9GA0YPQttC10L3QviIpICovCiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXJlZ3VsYXIpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CgogICAgICAvKiByb3cgaXRzZWxmIGlzIG5vdCBjbGlja2FibGU7IG9ubHkgdGhlIGNoZWNrYm94IGlzICovCiAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIH0KCiAgICAua2l0LWNoZWNreyBjdXJzb3I6IGRlZmF1bHQ7IH0KICAgIC5raXQtY2FyZC5pcy1lZGl0IC5raXQtY2hlY2t7IGN1cnNvcjogcG9pbnRlcjsgfQoKLmtpdC1jaGVja3sKICAgICAgd2lkdGg6IDIwcHg7CiAgICAgIGhlaWdodDogMjBweDsKICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLWJnKTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGZsZXgtc2hyaW5rOjA7CiAgICB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAua2l0LWNoZWNreyBiYWNrZ3JvdW5kOiAjMDJEMTVDOyB9CiAgICAua2l0LWNoZWNrIHN2Z3t3aWR0aDogMTRweDsgaGVpZ2h0OiAxNHB4OyBjb2xvcjogI2ZmZjsgZGlzcGxheTpub25lOyBvcGFjaXR5OiAxO30KICAgIC5raXQtY2FyZC5pcy11c2VkIC5raXQtY2hlY2sgc3Zne2Rpc3BsYXk6YmxvY2s7fQoKICAgIC8qIFBob3RvIGdyaWQgKi8KICAgIC5raXQtZ3JpZHsKICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSk7CiAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDIsIGF1dG8pOwogICAgICBnYXA6IHZhcigtLWdhcC10aWxlcyk7CiAgICB9CgogICAgLnRpbGV7CiAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgYXNwZWN0LXJhdGlvOiB2YXIoLS10aWxlLXJhdGlvKTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eSk7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgYm9yZGVyLXJhZGl1czogMDsgLyog0LrQstCw0LTRgNCw0YLQvdGL0LUgKi8KICAgICAgY3Vyc29yOiBkZWZhdWx0OwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLnRpbGUuaXMtZW1wdHl7IGJhY2tncm91bmQ6IHZhcigtLXRpbGUtZW1wdHktdXNlZCk7IH0KICAgIC50aWxlLmlzLWVtcHR5LAogICAgLmNvbGxhZ2UtY2VsbC5pcy1lbXB0eXsKICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIH0KCiAgICAudGlsZS5pcy1hZGR7CiAgICAgIC8qINGG0LLQtdGCINC60LDQuiDRhNC+0L0g0LvQtdCy0L7Qs9C+INGN0LrRgNCw0L3QsCAqLwogICAgICBiYWNrZ3JvdW5kOiAjRTVFNUU1OwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMTQwbXMgZWFzZTsKICAgIH0KICAgIC50aWxlLmlzLWFkZDpob3ZlciwKICAgIC50aWxlLmlzLWFkZC5pcy1kcmFnb3ZlcnsKICAgICAgYmFja2dyb3VuZDogI0RFREVERTsKICAgIH0KCiAgICAvKiBQbHVzIHNpemUgaW4gImFkZCBwaG90byIgdGlsZSAqLwogICAgLnRpbGUuaXMtYWRkIC5pY29ueyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyB9CiAgICAudGlsZS5pcy1hZGQgLmljb24gc3ZneyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyBvcGFjaXR5OiAxOyB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAudGlsZS5pcy1hZGR7CiAgICAgIGJhY2tncm91bmQ6ICNEMUVEREQ7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgfQoKICAgIC50aWxlIGltZ3sKICAgICAgd2lkdGg6MTAwJTsKICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgICBkaXNwbGF5OmJsb2NrOwogICAgfQoKICAgIC8qIEhvdmVyOiBvbmx5IGRhcmtlbiwgbm8gaWNvbnMgKi8KICAgIC50aWxlLmlzLXBob3RvOjphZnRlciwKICAgIC5jb2xsYWdlLWNlbGwuaXMtcGhvdG86OmFmdGVyewogICAgICBjb250ZW50OiIiOwogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwKTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQogICAgLnRpbGUuaXMtcGhvdG86aG92ZXI6OmFmdGVyLAogICAgLmNvbGxhZ2UtY2VsbC5pcy1waG90bzpob3Zlcjo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4xMik7IH0KCiAgICAvKiBjb2xsYWdlICh0aWxlIDYpICovCiAgICAudGlsZS5pcy1jb2xsYWdleyBwYWRkaW5nOjA7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyB9CiAgICAuY29sbGFnZS1ncmlkewogICAgICB3aWR0aDoxMDAlOwogICAgICBoZWlnaHQ6MTAwJTsKICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgyLCAxZnIpOwogICAgICBnYXA6IHZhcigtLWdhcC10aWxlcyk7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgfQogICAgLmNvbGxhZ2UtY2VsbHsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eSk7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmNvbGxhZ2UtY2VsbC5pcy1lbXB0eXsgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eS11c2VkKTsgfQogICAgLmNvbGxhZ2UtY2VsbCBpbWd7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBvYmplY3QtZml0OiBjb3ZlcjsgZGlzcGxheTpibG9jazsgfQogICAgLmNvbGxhZ2UtY2VsbC5pcy1waG90bzpob3Zlcjo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4yNSk7IH0KCiAgICAubW9yZS1vdmVybGF5ewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC42KTsKICAgICAgY29sb3I6I2ZmZjsKICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KCiAgICAua2l0LWZvb3RlcnsKICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgZ2FwOiAxMnB4OwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXJlZ3VsYXIpOwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmtpdC1mb290ZXJ7IGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IH0KCiAgICAKICAgIC8qID09PT09IFZpZXdlciAo0L/QtdGA0LXRgNCw0LHQvtGC0LDQvTogZnVsbC1zY3JlZW4gKyBibHVyIGJhY2tncm91bmQgKyDQu9C10L3RgtCwINGB0L/RgNCw0LLQsCkgPT09PT0gKi8KICAgIC52aWV3ZXItYmFja2Ryb3B7CiAgICAgIHBvc2l0aW9uOmZpeGVkOwogICAgICBpbnNldDowOwogICAgICBkaXNwbGF5Om5vbmU7CiAgICAgIHotaW5kZXg6IDk5OTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KICAgIC52aWV3ZXItYmFja2Ryb3Aub3BlbnsKICAgICAgZGlzcGxheTpibG9jazsKICAgICAgcG9pbnRlci1ldmVudHM6YXV0bzsKICAgIH0KCiAgICAvKiBCbHVyIGV2ZXJ5dGhpbmcgYmVoaW5kIHZpZXdlciAqLwogICAgYm9keS52aWV3ZXItb3BlbiA+ICo6bm90KC52aWV3ZXItYmFja2Ryb3ApewogICAgICBmaWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKICAgIH0KCiAgICAudmlld2VyewogICAgICBwb3NpdGlvbjpmaXhlZDsKICAgICAgaW5zZXQ6IDA7CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIGRpc3BsYXk6Z3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMzJweCAxZnI7CiAgICAgIGdhcDogMTZweDsKICAgICAgei1pbmRleDogMTAwMDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC13aWR0aDogOTAwcHgpewogICAgICAudmlld2VyeyBwYWRkaW5nOiAxNnB4OyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDExMHB4IDFmcjsgfQogICAgfQoKICAgIC52aWV3ZXItcmFpbHsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgcGFkZGluZzogMTBweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogOHB4OwogICAgICBtaW4taGVpZ2h0OiAwOwogICAgfQoKICAgIC5yYWlsLWJ0bnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMzZweDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiNmZmY7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZTsKICAgICAgZmxleC1zaHJpbms6MDsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE0KTsgfQogICAgLnJhaWwtYnRuOmRpc2FibGVkeyBvcGFjaXR5OiAwLjU7IGN1cnNvcjogZGVmYXVsdDsgfQoKICAgIC52aWV3ZXItdGh1bWJzewogICAgICBvdmVyZmxvdzphdXRvOwogICAgICBzY3JvbGwtYmVoYXZpb3I6IHNtb290aDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogOHB4OwogICAgICBwYWRkaW5nLXJpZ2h0OiAycHg7CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIGZsZXg6IDE7CiAgICB9CiAgICAudmlld2VyLXRodW1iczo6LXdlYmtpdC1zY3JvbGxiYXJ7IHdpZHRoOiA2cHg7IH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhci10aHVtYnsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE4KTsgYm9yZGVyLXJhZGl1czogNnB4OyB9CiAgICAudmlld2VyLXRodW1iczo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2t7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wNik7IH0KCiAgICAudGh1bWJ7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpOwogICAgICBhc3BlY3QtcmF0aW86IDEvMTsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA4KTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgICBjdXJzb3I6cG9pbnRlcjsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgZmxleC1zaHJpbms6IDA7CiAgICB9CiAgICAudGh1bWIgaW1neyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgb2JqZWN0LWZpdDogY292ZXI7IGRpc3BsYXk6YmxvY2s7IH0KICAgIC50aHVtYjo6YWZ0ZXJ7CiAgICAgIGNvbnRlbnQ6IiI7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICBpbnNldDowOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKSwgb3BhY2l0eSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIHBvaW50ZXItZXZlbnRzOm5vbmU7CiAgICB9CiAgICAudGh1bWI6aG92ZXI6OmFmdGVyeyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOyB9CiAgICAudGh1bWIuYWN0aXZlewogICAgICBib3JkZXItY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC4zNSk7CiAgICB9CiAgICAudGh1bWIuYWN0aXZlOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjApOyB9CiAgICAudGh1bWIgaW1neyB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKTsgfQogICAgLnRodW1iLmFjdGl2ZSBpbWd7IG9wYWNpdHk6IDE7IH0KCiAgICAvKiBSaWdodDogdmVydGljYWwgZmlsbXN0cmlwIChwcmV2L2N1cnJlbnQvbmV4dCkgKi8KICAgIC52aWV3ZXItc3RhZ2V7CiAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBvdmVyZmxvdzpoaWRkZW47CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgfQoKICAgIC5zdGFnZS1zdGFja3sKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgZ2FwOiAxMnB4OwogICAgICBwYWRkaW5nOiAxOHB4IDE2cHg7CiAgICB9CgogICAgLnN0YWdlLWl0ZW17CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgLXdlYmtpdC11c2VyLWRyYWc6bm9uZTsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3ewogICAgICBoZWlnaHQ6IDE4dmg7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAKICAgICAgCiAgICAgIAogICAgfQoKICAgIC5zdGFnZS1pdGVtLnByZXZpZXc6aG92ZXJ7IG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsgfQoKICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIGhlaWdodDogNTh2aDsKICAgIH0KCiAgICBAbWVkaWEgKG1heC1oZWlnaHQ6IDc0MHB4KXsKICAgICAgLnN0YWdlLWl0ZW0ucHJldmlld3sgaGVpZ2h0OiAxNnZoOyB9CiAgICAgIC5zdGFnZS1pdGVtLm1haW57IGhlaWdodDogNTJ2aDsgfQogICAgfQoKICAgIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgICAgdXNlci1zZWxlY3Q6bm9uZTsKICAgICAgLXdlYmtpdC11c2VyLWRyYWc6bm9uZTsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogOTYlOwogICAgICBtYXgtaGVpZ2h0OiA5NiU7CiAgICB9CgogICAgLyogc3VidGxlIGhvdmVyIG9uIHByZXZpZXdzICovCiAgICAvKiBUb3AgY29udHJvbHMgKi8KICAgIC52aWV3ZXItdG9wYmFyewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgdG9wOiAxNHB4OwogICAgICByaWdodDogMTRweDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogMTBweDsKICAgICAgei1pbmRleDogNTsKICAgIH0KICAgIC52aWV3ZXItY291bnRlcnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIGxlZnQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDI1OwogICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIH0KCiAgICAvKiBSaWdodCBzaWRlIHZlcnRpY2FsIG5hdiBidXR0b25zIChvcHRpb25hbCkgKi8KICAgIC52bmF2ewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgcmlnaHQ6IDE2cHg7CiAgICAgIHRvcDogNTAlOwogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246Y29sdW1uOwogICAgICBnYXA6IDEwcHg7CiAgICAgIHotaW5kZXg6IDU7CiAgICB9CiAgICAudm5hdiAubmF2LWJ0bnsKICAgICAgd2lkdGg6IDQ2cHg7CiAgICAgIGhlaWdodDogNDZweDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICBjb2xvcjojZmZmOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZTsKICAgIH0KICAgIC52bmF2IC5uYXYtYnRuOmhvdmVyeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTYpOyB9CiAgICAudm5hdiAubmF2LWJ0biBzdmd7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IGRpc3BsYXk6YmxvY2s7IH0KCiAgICAvKiBwcmV2ZW50IGJhY2tkcm9wIGNsaWNrIHNlbGVjdGluZyAqLwogICAgLnZpZXdlciwgLnZpZXdlciAqeyAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50OyB9CiAgCiAgICAuaWNvbi1idG4tLXVwbG9hZHsKICAgICAgLyogc2FtZSBzdHlsZSBhcyAiYWRkIHBob3RvIiB0aWxlICovCiAgICAgIGJhY2tncm91bmQ6ICNEQURBREE7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMTQwbXMgZWFzZSwgdHJhbnNmb3JtIDAuMXMgZWFzZTsKICAgIH0KICAgIC5pY29uLWJ0bi0tdXBsb2FkOmhvdmVyewogICAgICBiYWNrZ3JvdW5kOiAjRDJEMkQyOwogICAgfQoKICAKICAgIC8qID09PT09IFZpZXdlciBvdmVycmlkZXMgdG8gbWF0Y2ggbGF0ZXN0IHNwZWMgPT09PT0gKi8KICAgIC8qIEJhY2tncm91bmQ6IGJsdXIgb25seSwgbm8gdGludCAqLwogICAgYm9keS52aWV3ZXItb3BlbiA+ICo6bm90KC52aWV3ZXItYmFja2Ryb3ApewogICAgICBmaWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKICAgIH0KCiAgICAudmlld2VyeyBwYWRkaW5nOiAwOyBnYXA6IDA7IH0gLyogZnVsbC1zY3JlZW4sIG5vIGV4dHJhIG1hcmdpbnMgKi8KCiAgICAvKiBMZWZ0IHJhaWwgdXNlcyBibHVyIChnbGFzcykgKi8KICAgIC52aWV3ZXItcmFpbHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBwYWRkaW5nOiAxMHB4OwogICAgICB3aWR0aDogMTMycHg7CiAgICB9CgogICAgLyogUmFpbCBidXR0b25zOiBibGFjayB3aXRoIHdoaXRlIGFycm93ICovCiAgICAucmFpbC1idG57CiAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIGhlaWdodDogNTJweDsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDogIzJBMkIyRTsgfQoKICAgIC8qIHRodW1icyBnYXAgNHB4ICovCiAgICAudmlld2VyLXRodW1ic3sgZ2FwOiA0cHg7IH0KICAgIC50aHVtYnsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTgpOwogICAgfQoKICAgIC8qIFN0YWdlOiBhbHNvIGdsYXNzIGJsdXIgKi8KICAgIC52aWV3ZXItc3RhZ2V7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wOCk7CiAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgIH0KCiAgICAvKiBWZXJ0aWNhbCBzdGFjazogc2hvdyBwcmV2L25leHQgc2xpZ2h0bHkgKi8KICAgIC5zdGFnZS1zdGFja3sKICAgICAgZ2FwOiA0cHg7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgfQogICAgLnN0YWdlLWl0ZW0ucHJldmlld3sKICAgICAgaGVpZ2h0OiAxOHZoOwogICAgICBvcGFjaXR5OiAwLjMyICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluewogICAgICBoZWlnaHQ6IDY0dmg7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgIH0KICAgIC5zdGFnZS1pbWd7IG1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwJTsgfQoKICAgIC8qIENsb3NlIGJ1dHRvbjogc3RhbmRhcmQgYmxhY2sgc3F1YXJlIHdpdGggcmFkaXVzICh1c2VzIG91ciBpY29uLWJ0biBkYXJrKSAqLwogICAgI3ZpZXdlckNsb3NlewogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KCiAgICAvKiBUb3BiYXIgcG9zaXRpb25pbmcgKi8KICAgIC52aWV3ZXItdG9wYmFyeyB0b3A6IDIwcHg7IHJpZ2h0OiAyMHB4OyBnYXA6IDEwcHg7IH0KCiAgICAvKiBEZWxldGUgYnV0dG9uOiBvbmx5IGluIGVkaXQsIG9uIG1haW4gcGhvdG8gdG9wLXJpZ2h0IHdpdGggMjBweCBpbnNldCAqLwogICAgI3ZpZXdlckRlbGV0ZUJ0bnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiA2OwogICAgfQogICAgLyogV2hlbiBkZWxldGUgc2hvd24sIGtlZXAgY2xvc2UgYXQgdGhlIHZlcnkgdG9wLXJpZ2h0IChzdGFjaykgKi8KICAgICN2aWV3ZXJDbG9zZXsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiA3OwogICAgfQoKICAgIC8qIENvdW50ZXIgc3VidGxlICovCiAgICAudmlld2VyLWNvdW50ZXJ7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAyMHB4OwogICAgICBsZWZ0OiAyMHB4OwogICAgICB6LWluZGV4OiAyNTsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB9CgogICAgLyogUmVtb3ZlIGFueSByZW1haW5pbmcgbmF2IGJsb2NrcyAqLwogICAgLnZuYXZ7IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9CgogIAogICAgLyogPT09PT0gVmlld2VyIHR1bmU6IGNlbnRlciBpbWFnZSBiaWdnZXIsIHByZXZpZXdzIDIwJSB2aXNpYmxlIGFuZCAyMCUgc21hbGxlciA9PT09PSAqLwogICAgLnZpZXdlcnsgcGFkZGluZzogMDsgfQogICAgLnZpZXdlcnsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMzJweCAxZnI7IH0KICAgIC52aWV3ZXItcmFpbHsgd2lkdGg6IDEzMnB4OyB9CiAgICAudmlld2VyeyBnYXA6IDRweDsgfSAvKiA0cHggYmV0d2VlbiBsZWZ0IHJhaWwgYW5kIHN0YWdlICovCgogICAgLnZpZXdlci1zdGFnZXsgcGFkZGluZy1yaWdodDogNHB4OyB9IC8qIDRweCBmcm9tIHJpZ2h0IGVkZ2UgKi8KICAgIC5zdGFnZS1zdGFja3sKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgcGFkZGluZzogMDsKICAgICAgZ2FwOiA0cHg7IC8qIGdhcHMgYmV0d2VlbiBwaG90b3MgNHB4ICovCiAgICAgIGRpc3BsYXk6Z3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyMHZoIDFmciAyMHZoOyAvKiB2aXNpYmxlIGFyZWEgZm9yIHByZXYvbmV4dCB+MjAlICovCiAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoOwogICAgICBqdXN0aWZ5LWl0ZW1zOiBzdHJldGNoOwogICAgfQogICAgLnN0YWdlLWl0ZW17CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBvdmVyZmxvdzpoaWRkZW47CiAgICB9CiAgICAvKiBtYWluIHRha2VzIG1vc3Qgc3BhY2UgKi8KICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5tYWluIC5zdGFnZS1pbWd7CiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA4cHgpOyAgLyogNHB4IGZyb20gbGVmdCAoZ2FwKSArIDRweCBmcm9tIHJpZ2h0IChzdGFnZSBwYWRkaW5nKSBhcHByb3hpbWF0aW9uICovCiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgbWF4LXdpZHRoOiBub25lOwogICAgICBtYXgtaGVpZ2h0OiBub25lOwogICAgICBvYmplY3QtZml0OiBjb250YWluOwogICAgfQogICAgLyogcHJldmlld3MgYXJlIDIwJSBzbWFsbGVyIHRoYW4gbWFpbiB2aXN1YWxseSB2aWEgc2NhbGUgKi8KICAgIC5zdGFnZS1pdGVtLnByZXZpZXd7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsKICAgIH0KICAgIC5zdGFnZS1pdGVtLnByZXZpZXcgLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAKICAgIC8qID09PT09IFBBVENIIHYyNzogZm9yY2Ugb3ZlcnJpZGUgKG1haW4g0LzQsNC60YHQuNC80LDQu9GM0L3QviDQsdC+0LvRjNGI0L7QuSwgcHJldi9uZXh0ID0g0YLQvtGCINC20LUg0LrQsNC00YAsINCy0LjQtNC90LAg0YLQvtC70YzQutC+INC/0L7Qu9C+0YHQutCwKSA9PT09PSAqLwogICAgLnZpZXdlcnsKICAgICAgaW5zZXQ6MDsKICAgICAgcGFkZGluZzowICFpbXBvcnRhbnQ7CiAgICAgIGdhcDo0cHggIWltcG9ydGFudDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxNTZweCAxZnIgIWltcG9ydGFudDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA4KTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgIH0KCiAgICAvKiBSYWlsIGFuZCBzdGFnZSB0cmFuc3BhcmVudCBzbyBubyBzZWFtcyAqLwogICAgLnZpZXdlci1yYWlsLAogICAgLnZpZXdlci1zdGFnZXsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogTEVGVCBSQUlMOiBzcGFjaW5nIDRweCBldmVyeXdoZXJlICovCiAgICAudmlld2VyLXJhaWx7CiAgICAgIHdpZHRoOiAxNTZweCAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbiAhaW1wb3J0YW50OwogICAgICBnYXA6IDRweCAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgfQoKICAgIC5yYWlsLWJ0bnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogNTZweDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBiYWNrZ3JvdW5kOiAjMUExQTFBICFpbXBvcnRhbnQ7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBkaXNwbGF5OmZsZXggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXIgIWltcG9ydGFudDsKICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50OwogICAgICBmbGV4OiAwIDAgYXV0bzsKICAgIH0KICAgIC5yYWlsLWJ0bjpob3ZlcnsgYmFja2dyb3VuZDojMkEyQjJFICFpbXBvcnRhbnQ7IH0KICAgIC5yYWlsLWJ0bjpkaXNhYmxlZHsgYmFja2dyb3VuZDojMUExQTFBICFpbXBvcnRhbnQ7IGN1cnNvcjogZGVmYXVsdDsgfQogICAgLnJhaWwtYnRuOmRpc2FibGVkIHN2Z3sgb3BhY2l0eTogMC4zNTsgfQoKICAgIC5yYWlsLWJ0biBzdmd7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IG9wYWNpdHk6IDAuOTI7IH0KCiAgICAudmlld2VyLXRodW1ic3sKICAgICAgZmxleDogMSAxIGF1dG87CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6ZmxleCAhaW1wb3J0YW50OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW4gIWltcG9ydGFudDsKICAgICAgZ2FwOiA0cHggIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGF1dG87CiAgICAgIHNjcm9sbGJhci13aWR0aDogbm9uZTsKICAgIH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhcnsgd2lkdGg6IDA7IGhlaWdodDogMDsgfQoKICAgIC50aHVtYnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIGZsZXg6IDAgMCBhdXRvOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTgpOwogICAgfQoKICAgIC8qIFRodW1icyBkYXJrZXIgd2hlbiBub3QgYWN0aXZlICovCiAgICAudGh1bWI6OmFmdGVyewogICAgICBjb250ZW50OiIiOwogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgaW5zZXQ6MDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjU4KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSksIG9wYWNpdHkgMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpOwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQogICAgLnRodW1iOmhvdmVyOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjU4KTsgfQogICAgLnRodW1iLmFjdGl2ZTo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4wKTsgfQogICAgLnRodW1iIGltZ3sgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7IH0KICAgIC50aHVtYi5hY3RpdmUgaW1neyBvcGFjaXR5OiAxOyB9CgogICAgLyogU1RBR0U6IGZvcmNlIGZ1bGwgaGVpZ2h0LCBubyBpbm5lciBwYWRkaW5nICovCiAgICAudmlld2VyLXN0YWdlewogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwogICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgIH0KCiAgICAvKiBDb3JlOiBhYnNvbHV0ZSBzdGFja2luZywgMToxIGZyYW1pbmcgZm9yIGFsbCB0aHJlZSAqLwogICAgLnN0YWdlLXN0YWNrewogICAgICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKCiAgICAgIC8qIFZpc2libGUgc2xpdmVyOyBzbWFsbGVyID0+IG1haW4gYmlnZ2VyICovCiAgICAgIC0tcGVlazogY2xhbXAoNDRweCwgN3ZoLCA4MHB4KTsKICAgICAgLS1nYXA6IDRweDsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbXsKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IDAgIWltcG9ydGFudDsKICAgICAgcmlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgdG9wOiBjYWxjKHZhcigtLXBlZWspICsgdmFyKC0tZ2FwKSkgIWltcG9ydGFudDsKICAgICAgYm90dG9tOiBjYWxjKHZhcigtLXBlZWspICsgdmFyKC0tZ2FwKSkgIWltcG9ydGFudDsKCiAgICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50OwoKICAgICAgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlciAhaW1wb3J0YW50OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbS5tYWluewogICAgICB6LWluZGV4OiAyOwogICAgICBvcGFjaXR5OiAxOwogICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgIHRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAgIC5zdGFnZS1pdGVtLnByZXZpZXd7CiAgICAgIHotaW5kZXg6IDE7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsgICAgICAgICAgICAgICAgLyog0YLQtdC80L3QtdC1ICovCiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7ICAgICAgIC8qINGD0LHQuNGC0Ywg0YHRgtCw0YDRi9C1IDE4dmggKi8KICAgIH0KCiAgICAvKiBTaGlmdCBieSBpdHMgb3duIGZyYW1lIGhlaWdodCArIDRweCBnYXAgc28gb25seSBwZWVrIGlzIHZpc2libGUgKi8KICAgICNzdGFnZVByZXZ7IHRyYW5zZm9ybTogdHJhbnNsYXRlWShjYWxjKC0xMDAlIC0gdmFyKC0tZ2FwKSkpICFpbXBvcnRhbnQ7IH0KICAgICNzdGFnZU5leHR7IHRyYW5zZm9ybTogdHJhbnNsYXRlWShjYWxjKCAxMDAlICsgdmFyKC0tZ2FwKSkpICFpbXBvcnRhbnQ7IH0KCiAgICAvKiBQcmV2L05leHQgYXJlIDIwJSBuYXJyb3dlciB0aGFuIG1haW4gKDEwJSBpbnNldCBmcm9tIGVhY2ggc2lkZSkgKi8KICAgICNzdGFnZVByZXYsICNzdGFnZU5leHR7CiAgICAgIGxlZnQ6IDEwJSAhaW1wb3J0YW50OwogICAgICByaWdodDogMTAlICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50OwogICAgICBtYXgtaGVpZ2h0OiBub25lICFpbXBvcnRhbnQ7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3IC5zdGFnZS1pbWd7CiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgICBvYmplY3QtZml0OiBjb250YWluOwogICAgICBmaWx0ZXI6IG5vbmUgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBEZWxldGUgaW5zaWRlIG1haW4sIDIwcHggaW5zZXQgKi8KICAgICNzdGFnZU1haW57IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgI3ZpZXdlckRlbGV0ZUJ0bnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiAxMDsKICAgIH0KCiAgICAjdmlld2VyQ2xvc2V7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAyMHB4OwogICAgICByaWdodDogMjBweDsKICAgICAgei1pbmRleDogMjA7CiAgICB9CgogIAogICAgLyogQ09VTlRFUiBPVkVSUklERSAqLwogICAgLnZpZXdlci1zdGFnZSAudmlld2VyLWNvdW50ZXJ7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OwogICAgICB0b3A6IDIwcHggIWltcG9ydGFudDsKICAgICAgbGVmdDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogYXV0byAhaW1wb3J0YW50OwogICAgICBib3R0b206IGF1dG8gIWltcG9ydGFudDsKICAgIAogIAogICAgfQogICAgLyogPT09PT0gUEFUQ0ggdjM2OiBzaW5nbGUgY2VudGVyZWQgcGhvdG8sIG1heCBmaWxsIHdpdGggZml4ZWQgaW5zZXRzID09PT09ICovCiAgICAvKiBSaWdodCBzdGFnZSBzaG91bGQgYmUgYSBjbGVhbiB2aWV3cG9ydCAqLwogICAgLnZpZXdlci1zdGFnZXsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBTdGFnZSBzdGFjayBqdXN0IGZpbGxzIHN0YWdlICovCiAgICAjc3RhZ2VTdGFja3sKICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogTWFpbiBwaG90byBmcmFtZTogdG9wL2JvdHRvbSA0cHgsIGxlZnQvcmlnaHQgMjBweCAqLwogICAgI3N0YWdlTWFpbnsKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogNHB4ICFpbXBvcnRhbnQ7CiAgICAgIGJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IHZhcigtLW1haW4tbGVmdCwgMjBweCkgIWltcG9ydGFudDsKICAgICAgcmlnaHQ6IHZhcigtLW1haW4tcmlnaHQsIDIwcHgpICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogUGhvdG86IG1heGltaXplIGFyZWEgd2l0aG91dCBjcm9wcGluZyAoZGVjaXNpb246IGNvbnRhaW4pICovCiAgICAjdmlld2VySW1newogICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIG1heC1oZWlnaHQ6IG5vbmUgIWltcG9ydGFudDsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbiAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIERlbGV0ZSBidXR0b24gc3RheXMgaW5zaWRlIHBob3RvLCAyMHB4IGluc2V0ICovCiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHotaW5kZXg6IDEwICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogQ291bnRlcjogdG9wLWxlZnQgMjBweCAoYWxyZWFkeSksIGtlZXAgYmxhY2sgKi8KICAgIC52aWV3ZXItY291bnRlcnsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IDIwcHggIWltcG9ydGFudDsKICAgICAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICAgICAgei1pbmRleDogMjUgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBDbG9zZSBidXR0b246IHRvcC1yaWdodCAyMHB4ICovCiAgICAjdmlld2VyQ2xvc2V7CiAgICAgIHRvcDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogMjBweCAhaW1wb3J0YW50OwogICAgICB6LWluZGV4OiAzMCAhaW1wb3J0YW50OwogICAgfQoKICAKICAgIC8qID09PT09IFZpZXdlciBhY3Rpb25zIHN0YWNrIChjbG9zZSArIGRlbGV0ZSkgPT09PT0gKi8KICAgIC52aWV3ZXItYWN0aW9uc3sKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogMjBweCAhaW1wb3J0YW50OwogICAgICByaWdodDogMjBweCAhaW1wb3J0YW50OwogICAgICB6LWluZGV4OiA1MCAhaW1wb3J0YW50OwogICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4gIWltcG9ydGFudDsKICAgICAgZ2FwOiA4cHggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kICFpbXBvcnRhbnQ7CiAgICB9CiAgICAjdmlld2VyQ2xvc2UsCiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogYXV0byAhaW1wb3J0YW50OwogICAgICByaWdodDogYXV0byAhaW1wb3J0YW50OwogICAgICBsZWZ0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGJvdHRvbTogYXV0byAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgIH0KCiAgCgovKiDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPICovCiAgICAgICAgLmFkZGl0aW9uYWwtYmxvY2sgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBnYXA6IDIwcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAuYWRkaXRpb25hbC1pdGVtIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLyogLS0tIHNwYWNpbmcgd2hlbiBjb21tZW50cy9saW5rcyBsaXN0cyBhcmUgZW1wdHkgLS0tCiAgICAgICAgICAg0KLRgNC10LHQvtCy0LDQvdC40LU6INC80LXQttC00YMg0LrQvdC+0L/QutCw0LzQuCAoKykgItCa0L7QvNC80LXQvdGC0LDRgNC40LkiINC4ICLQn9GA0LjQutGA0LXQv9C70ZHQvdC90YvQtSDRgdGB0YvQu9C60LgiINC00L7Qu9C20L3QviDQsdGL0YLRjCAyMHB4LAogICAgICAgICAgINCx0LXQtyDRg9C00LLQvtC10L3QuNGPIDIwKzIwLiDQn9C+0Y3RgtC+0LzRgyDRg9Cx0LjRgNCw0LXQvCDQstC90YPRgtGA0LXQvdC90LjQuSBnYXAg0YMg0YHQtdC60YbQuNC4LCDQutC+0LPQtNCwINGB0L/QuNGB0L7QuiDQv9GD0YHRgtC+0LkuICovCiAgICAgICAgLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSB7IGdhcDogMDsgfQogICAgICAgIC5hZGRpdGlvbmFsLWl0ZW0uaXMtZW1wdHkgLmNvbW1lbnRzLWxpc3QsCiAgICAgICAgLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSAubGlua3MtbGlzdCB7IGRpc3BsYXk6IG5vbmU7IH0KCgogICAgICAgIC5hZGRpdGlvbmFsLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgIH0KCiAgICAgICAgLmFkZGl0aW9uYWwtdGl0bGUgewogICAgICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgICAgICBmb250LWZhbWlseTogIkludGVyIiwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwOwogICAgICAgIH0KCiAgICAgICAgLyog0JXQtNC40L3Ri9C5INGB0YLQuNC70Ywg0LTQu9GPINCy0YHQtdGFINC60L3QvtC/0L7QuiAqLwogICAgICAgIC5hY3Rpb24tYnV0dG9uIHsKICAgICAgICAgICAgd2lkdGg6IHZhcigtLWJ1dHRvbi1zaXplKTsKICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1idXR0b24tc2l6ZSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1yZWd1bGFyKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXNtKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlOwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC5hY3Rpb24tYnV0dG9uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tZ3JheS0xMDApOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWdyYXktNDAwKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgfQoKICAgICAgICAvKiBJY29uIGJ1dHRvbnMgKG5ldyBzcGVjKSAqLwogICAgICAgIC5pY29uLWJ0bnsKICAgICAgICAgICAgd2lkdGg6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtc20pOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1yZWd1bGFyKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC5pY29uLWJ0bjpob3ZlcnsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tZ3JheS0xMDApOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWdyYXktNDAwKTsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgfQoKICAgICAgICAuaWNvbi1idG4gLmljb257CiAgICAgICAgICAgIHdpZHRoOiAyNHB4OwogICAgICAgICAgICBoZWlnaHQ6IDI0cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC8qIERlZmF1bHQgU1ZHIHNpemUgZm9yIGVkaXQgaWNvbiAqLwogICAgICAgIC5pY29uLWJ0biAuaWNvbiBzdmd7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLyogRWRpdCAocGVuY2lsKSBidXR0b24gKi8KICAgICAgICAuaWNvbi1idG4uZWRpdC1idXR0b257CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgICAgfQoKICAgICAgICAuaWNvbi1idG4uZWRpdC1idXR0b246aG92ZXJ7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyQTJBMkE7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgICAgfQoKICAgICAgICAvKiBVcGxvYWQgKCspIGJ1dHRvbiAqLwogICAgICAgIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjREFEQURBOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgIH0KCiAgICAgICAgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgfQoKICAgICAgICAvKiBQbHVzIFNWRyBzaXplIChzYW1lIGFzIGVkaXQpICovCiAgICAgICAgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQgLmljb24gc3ZnewogICAgICAgICAgICB3aWR0aDogMThweDsKICAgICAgICAgICAgaGVpZ2h0OiAxOHB4OwogICAgICAgIH0KCgogICAgICAgIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG4gewogICAgICAgICAgICBjb2xvcjogdmFyKC0tcmVkLWVycm9yKTsKICAgICAgICB9CgogICAgICAgIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG46aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1yZWQtZXJyb3IpOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXJlZC1lcnJvcik7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC5kZWxldGUtYnV0dG9uOjpiZWZvcmUgeyBjb250ZW50OiBub25lOyB9CiAgICAgICAgLmRlbGV0ZS1idXR0b24gc3Zne3dpZHRoOjE4cHg7aGVpZ2h0OjE4cHg7ZGlzcGxheTpibG9jazt9CgogICAgICAgIC5kb3dubG9hZC1idXR0b24gc3ZnIHsKICAgICAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICB9CgogICAgICAgIC8qINCa0L7QvNC80LXQvdGC0LDRgNC40LkgKi8KICAgICAgICAuY29tbWVudHMtbGlzdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGdhcDogNHB4OyAvKiDQntGC0YHRgtGD0L8g0LzQtdC20LTRgyDQsdC70L7QutCw0LzQuCAqLwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtYmxvY2sgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRjFGMUYxOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgICAgICBnYXA6IDEycHg7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNDBweCk7IC8qINCc0LjQvdC40LzQsNC70YzQvdCw0Y8g0LLRi9GB0L7RgtCwINC60LDQuiDRgyDRgdGB0YvQu9C+0LogKi8KICAgICAgICAKICAgICAgICAgICAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICAgICAgfQoKICAgICAgICAuY29tbWVudC10ZXh0IHsKICAgICAgICAgICAgZm9udDogaW5oZXJpdDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsKCiAgICAgICAgICAgIC8qINC+0YHRgtCw0LLQu9GP0LXQvCDigJzQstC+0LfQtNGD0YXigJ0g0LTQviDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyAqLwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtaW5wdXQgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgZm9udDogaW5oZXJpdDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwoKICAgICAgICAgICAgLyog0LLQstC+0LQg0L/RgNGP0LzQviDigJzQsiDRgdC10YDQvtC8INC60YPQsdC40LrQteKAnSAqLwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgICAgICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICByZXNpemU6IG5vbmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IC8qINGD0LHQuNGA0LDQtdC8INGB0LrRgNC+0LvQuyAqLwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxLjZlbTsKICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwoKICAgICAgICAgICAgLyog0KfRgtC+0LHRiyDQr9C90LTQtdC60YEvQ2hyb21lINC90LUg4oCc0L/QvtC00YLQsNGB0LrQuNCy0LDQu+KAnSDRgNCw0LfQvNC10YDRiyDRgtC10LrRgdGC0LAgKi8KICAgICAgICAgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICAgICAgICB0ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtaW5wdXQ6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICB9CgogICAgICAgIC5jb21tZW50LWlucHV0OmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ncmF5LTUwMCk7CiAgICAgICAgfQoKICAgICAgICAvKiDQodGB0YvQu9C60LggKi8KICAgICAgICAubGlua3MtbGlzdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGdhcDogNHB4OyAvKiDQntGC0YHRgtGD0L8g0LzQtdC20LTRgyDQsdC70L7QutCw0LzQuCAqLwogICAgICAgIH0KCiAgICAgICAgLmxpbmstaXRlbSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI0YxRjFGMTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNDBweCk7CiAgICAgICAgfQoKICAgICAgICAubGluay1pdGVtLmVkaXRpbmd7CiAgICAgICAgICAgIC8qINGE0LjQutGB0LjRgNGD0LXQvCDQstGL0YHQvtGC0YMg0Lgg0LLRi9GA0LDQstC90LjQstCw0L3QuNC1INC40L3Qv9GD0YLQvtCyINC/0L4g0YbQtdC90YLRgNGDICovCiAgICAgICAgfQoKICAgICAgICAKICAgICAgICAubGluay1pbmZvIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIG1pbi13aWR0aDogMDsgLyog0JLQsNC20L3QviDQtNC70Y8g0L7QsdGA0LXQt9C60Lgg0YLQtdC60YHRgtCwICovCiAgICAgICAgfQoKICAgICAgICAubGluay10eXBlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgIGZsZXg6IDAgMCBhdXRvOyAvKiDQv9C+0LrQsNC30YvQstCw0LXQvCDRgtC10LrRgdGCINGC0LjQv9CwINC/0L7Qu9C90L7RgdGC0YzRjiAqLwogICAgICAgIH0KCi8qINCU0LLQvtC10YLQvtGH0LjQtSDQv9C+0YHQu9C1INC90LDQt9Cy0LDQvdC40Y8gKNGC0L7Qu9GM0LrQviDQsiAi0YHQv9C+0LrQvtC50L3QvtC8IiDRgNC10LbQuNC80LUpICovCi5saW5rLWl0ZW06bm90KC5lZGl0aW5nKSAubGluay10eXBlOjphZnRlcnsKICAgICAgICAgICAgY29udGVudDogIjoiOwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDZweDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgfQoKICAgICAgICAubGluay11cmwgewogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgdmFyKC0tZ3JheS00MDApOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgZmxleDogMSAxIGF1dG87ICAgLyog0YHRgdGL0LvQutCwINC30LDQvdC40LzQsNC10YIg0L7RgdGC0LDRgtC+0LogKi8KICAgICAgICAgICAgbWluLXdpZHRoOiAwOyAgICAgIC8qINC/0L7Qt9Cy0L7Qu9GP0LXRgiDRgNC10LDQu9GM0L3QviDRgdC20LjQvNCw0YLRjNGB0Y8gKi8KICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lOyAgIC8qINC90LUg0L7Qs9GA0LDQvdC40YfQuNCy0LDQtdC8IDMwMHB4ICovCiAgICAgICAgfQoKICAgICAgICAubGluay11cmw6aG92ZXIgewogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZ3JheS02MDApOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstZWRpdCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBtaW4td2lkdGg6IDA7CiAgICAgICAgCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgfQoKICAgICAgICAubGluay10eXBlLWlucHV0IHsKICAgICAgICAgICAgd2lkdGg6IDEyMHB4OyAvKiDQuNGB0YXQvtC00L3QvtC1INC/0YPRgdGC0L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUgKi8KICAgICAgICAgICAgbWluLXdpZHRoOiAxMjBweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtc20pOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgICAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKCiAgICAgICAgICAgIC8qINGH0YLQvtCx0Ysg0L3QtSDRgNCw0YHRgtGP0LPQuNCy0LDQu9C+INC60LDRgNGC0L7Rh9C60YMg0LHQtdGB0LrQvtC90LXRh9C90L4gKi8KICAgICAgICAKICAgICAgICAgICAgZmxleDogMCAwIGF1dG87CiAgICAgICAgICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO30KCiAgICAgICAgLmxpbmstdXJsLWlucHV0IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgbWluLXdpZHRoOiAxNDBweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zbSk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIGhlaWdodDogdmFyKC0tYnRuLXNpemUpOwoKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsKICAgICAgICB9CgogICAgICAgIC5saW5rLXR5cGUtaW5wdXQ6Zm9jdXMsIC5saW5rLXVybC1pbnB1dDpmb2N1cyB7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZ3JheS01MDApOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICB9CgogICAgICAgIC8qINCQ0LTQsNC/0YLQuNCy0L3QvtGB0YLRjCAqLwogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkgewogICAgICAgICAgICAuc3BlY3MtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzAwcHgpIHsKICAgICAgICAgICAgLnNwZWNzLWdyaWQgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdXJsIHsKICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgewogICAgICAgICAgICAubGluay1pdGVtIHsKICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstaW5mbyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdXJsIHsKICAgICAgICAgICAgICAgIG1heC13aWR0aDogbm9uZTsKICAgICAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLWVkaXQgewogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLXR5cGUtaW5wdXQgewogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLXVybC1pbnB1dCB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstYWN0aW9ucyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgewogICAgICAgICAgICAuc3BlY3MtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnNlY3Rpb24tY29udGVudCB7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay11cmwgewogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxNTBweDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAovKiA9PT09PSBBVVRPQ09OVEVOVDogYXBwbGllZCBzdHlsZXMgZnJvbSAi0JrQsNGA0YLQvtGH0LrQuCDQutC+0L3RgtC10L3RgiIgPT09PT0gKi8KOnJvb3R7CiAgLS1pbnRlci1yZWd1bGFyOiA0MDA7CiAgLS1pbnRlci1tZWRpdW06IDUwMDsKICAtLWludGVyLXNlbWlib2xkOiA2MDA7CiAgLS1pbnRlci1ib2xkOiA3MDA7CgogIC0tcGFnZS1iZzogI0YxRjFGMTsKCiAgLS13aGl0ZTogI0ZGRkZGRjsKICAtLXRleHQtcHJpbWFyeTogIzFBMUExQTsKICAtLXRleHQtc2Vjb25kYXJ5OiAjNEI1NTYzOwogIC0tdGV4dC10ZXJ0aWFyeTogIzgwODA4MDsKCiAgLS1ib3JkZXI6ICNEOUQ5RDk7CiAgLS1kaXZpZGVyOiAjRDlEOUQ5OwoKICAtLWJ0bi1kYXJrOiAjMUExQTFBOwogIC0tYnRuLWRhcmstaG92ZXI6ICMyQTJCMkU7CgogIC0tYnRuLWRhbmdlcjogI0ZGNEQ1NzsKICAtLWJ0bi1kYW5nZXItaG92ZXI6ICNFNjNCNDU7CgogIC0tc2hhZG93LWNhcmQ6IDAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMDQpLCAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAyKTsKICAtLXNoYWRvdy1mbG9hdDogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMTIpOwoKICAtLXJhZGl1cy1jYXJkOiAyMHB4OwogIC0tcmFkaXVzLWJ0bjogMTBweDsKICAtLXJhZGl1cy1tZDogMTJweDsKCiAgLS1idG4tc2l6ZTogNDJweDsKICAtLWNhcmQtcGFkOiAyMHB4OwoKICAvKiBhbGlhc2VzIHRvIGtlZXAgZXhpc3RpbmcgcnVsZXMgd29ya2luZyAqLwogIC0tZ3JheS0xMDA6IHZhcigtLXBhZ2UtYmcpOwogIC0tZ3JheS0yMDA6IHZhcigtLWJvcmRlcik7CiAgLS1ncmF5LTMwMDogdmFyKC0tYm9yZGVyKTsKICAtLWdyYXktNDAwOiAjRDlEOUQ5OwogIC0tZ3JheS01MDA6IHZhcigtLXRleHQtdGVydGlhcnkpOwogIC0tZ3JheS02MDA6ICM0QjU1NjM7CgogIC0tYm9yZGVyLWxpZ2h0OiB2YXIoLS1ib3JkZXIpOwogIC0tYm9yZGVyLXJlZ3VsYXI6IHZhcigtLWJvcmRlcik7CgogIC0tcmFkaXVzLXNtOiB2YXIoLS1yYWRpdXMtYnRuKTsKICAtLXJhZGl1cy1sZzogdmFyKC0tcmFkaXVzLWNhcmQpOwogIC0tc3BhY2UtdW5pdDogMjBweDsKICAtLWJ1dHRvbi1zaXplOiB2YXIoLS1idG4tc2l6ZSk7CiAgLS1yZWQtZXJyb3I6IHZhcigtLWJ0bi1kYW5nZXIpOwp9Cgpib2R5ewogIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtYmcpOwogIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogIHBhZGRpbmc6IDIwcHg7Cn0KCi5jb2xsYXBzZS1zZWN0aW9uewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5zZWN0aW9uLWhlYWRlcjpob3ZlcnsgYmFja2dyb3VuZDogI0VERURFRDsgfQoKLnNlY3Rpb24taGVhZGVyLXRpdGxlewogIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7Cn0KCi5zZWN0aW9uLWNvbnRlbnR7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXIpOwogIHBhZGRpbmc6IHZhcigtLWNhcmQtcGFkKTsKICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7Cn0KCi8qIEJ1dHRvbnMgKHVuaWZ5IHdpdGggaWNvbi1idG4gbG9vaykgKi8KLmFjdGlvbi1idXR0b257CiAgd2lkdGg6IHZhcigtLWJ0bi1zaXplKTsKICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKICBib3JkZXI6IG5vbmU7CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmspOwogIGNvbG9yOiAjZmZmOwogIGN1cnNvcjogcG9pbnRlcjsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2UsIHRyYW5zZm9ybSAwLjFzIGVhc2U7CiAgcGFkZGluZzogMDsKICBsaW5lLWhlaWdodDogMDsKfQouYWN0aW9uLWJ1dHRvbjpob3ZlcnsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIpOyBjb2xvcjojZmZmOyB9Ci5hY3Rpb24tYnV0dG9uOmFjdGl2ZXsgdHJhbnNmb3JtOiBub25lOyB9CgovKiBJY29ucyBpbnNpZGUgYWN0aW9uIGJ1dHRvbnMgKi8KLmFjdGlvbi1idXR0b24gc3ZnewogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKICBkaXNwbGF5OiBibG9jazsKfQoKLyogUGx1cyBidXR0b25zIGluICLQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPIiAqLwouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWR7CiAgYmFja2dyb3VuZDogI0RBREFEQTsKICBjb2xvcjogIzFBMUExQTsKfQouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgYmFja2dyb3VuZDogI0QyRDJEMjsKICBjb2xvcjogIzFBMUExQTsKfQoKCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG4sCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b257CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlcik7CiAgY29sb3I6ICNmZmY7Cn0KLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ0bjpob3ZlciwKLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTsKICBjb2xvcjogI2ZmZjsKfQoKLyogSW5uZXIgYmxvY2tzICovCi5jb21tZW50LWJsb2NrLAoubGluay1pdGVtewogIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlICovCi5jb21tZW50LWlucHV0LAoubGluay10eXBlLWlucHV0LAoubGluay11cmwtaW5wdXR7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKfQouY29tbWVudC1pbnB1dDpmb2N1cywKLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstdXJsLWlucHV0OmZvY3VzewogIG91dGxpbmU6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKLyogTGluayB1bmRlcmxpbmUgc3R5bGUgY2xvc2VyIHRvIHJlZiAqLwoubGluay11cmx7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoubGluay11cmw6aG92ZXJ7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKfQoKLmtpdC1jYXJkewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogMjBweDsKfQoKCi5raXQtZGl2aWRlcnsKICBoZWlnaHQ6IDFweDsKICBiYWNrZ3JvdW5kOiB2YXIoLS1kaXZpZGVyKTsKfQoKCiAgICAgICAgLyog0YPQvdC40YTQuNC60LDRhtC40Y8g0YLQtdC60YHRgtCwINC60L7QvNC80LXQvdGC0LDRgNC40LXQsiDQuCDRgdGB0YvQu9C+0Log0L/QvtC0INGB0YLQuNC70Ywg0LvQtdC50LHQu9C+0LIgKEludGVyIDE0LzQwMCkgKi8KICAgICAgICAuY29tbWVudC10ZXh0LAogICAgICAgIC5saW5rLXR5cGUgewogICAgICAgICAgICBmb250LWZhbWlseTogSW50ZXIsIHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstdXJsLAogICAgICAgIC5saW5rLXVybDp2aXNpdGVkLAogICAgICAgIC5saW5rLXVybDpob3ZlciwKICAgICAgICAubGluay11cmw6YWN0aXZlLAogICAgICAgIC5saW5rLXVybDpmb2N1cyB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBJbnRlciwgc3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7CiAgICAgICAgfQoKCi8qID09PSBMaW5rIGVkaXQgbW9kZTogc2FtZSB0eXBvZ3JhcGh5L2NvbG9ycyBhcyB2aWV3IG1vZGUsIG5vIHVuZGVybGluZSA9PT0gKi8KLmxpbmstaW5mb3ttaW4td2lkdGg6MDt9Ci5saW5rLXR5cGV7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7ICAgICAvKiDQv9C+0LrQsNC30YvQstCw0LXQvCDQsiDQvtC00L3RgyDRgdGC0YDQvtC60YMgKi8KICBvdmVyZmxvdzogdmlzaWJsZTsgICAgICAgLyog0J3QlSDQvtCx0YDQtdC30LDQtdC8ICovCiAgdGV4dC1vdmVyZmxvdzogY2xpcDsgICAgIC8qINCx0LXQtyDRgtGA0L7QtdGC0L7Rh9C40Y8gKi8KICBtYXgtd2lkdGg6IG5vbmU7ICAgICAgICAgLyog0LHQtdC3INC70LjQvNC40YLQsCDRiNC40YDQuNC90YsgKi8KICBtaW4td2lkdGg6IDA7CiAgZmxleDogMCAwIGF1dG87ICAgICAgICAgIC8qINGI0LjRgNC40L3QsCA9INGB0L7QtNC10YDQttC40LzQvtC1ICovCn0KCi5saW5rLXVybHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7CiAgbWF4LXdpZHRoOiBub25lOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLyogRWRpdGluZyBsYXlvdXQgc3RheXMgYWxpZ25lZCB3aXRoIGJ1dHRvbnMgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLWVkaXR7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogOHB4OwogIGZsZXg6IDE7CiAgbWluLXdpZHRoOiAwOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlOiB3aGl0ZSBibG9ja3MgbGlrZSBpbiBpbmFjdGl2ZSBtb2RlLCBrZWVwIGJ1dHRvbi1oZWlnaHQgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXR5cGUtaW5wdXQsCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwoKICBiYWNrZ3JvdW5kOiAjRkZGRkZGOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgcGFkZGluZzogMCAxMnB4OwoKICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICBsaW5lLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgLSAycHgpOyAvKiBjb21wZW5zYXRlIGJvcmRlciAqLwoKICBvdmVyZmxvdzogaGlkZGVuOwogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay10eXBlLWlucHV0ewogIC8qINGI0LjRgNC40L3RgyDQt9Cw0LTQsNGR0YIgSlMsINC/0L7Qu9C1INGA0LDRgdGC0ZHRgiDQv9C+INC80LXRgNC1INCy0LLQvtC00LAgKi8KICBmbGV4OiAwIDAgYXV0bzsKICB3aWR0aDogMTIwcHg7CiAgbWF4LXdpZHRoOiA2MCU7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZmxleDogMSAxIGF1dG87CiAgbWluLXdpZHRoOiAwOwp9CgoubGluay1pdGVtLmVkaXRpbmcgLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXVybC1pbnB1dDpmb2N1c3sKICBvdXRsaW5lOiBub25lOwogIGJveC1zaGFkb3c6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKCi8qIC0tLSBGSVg6IHJlbW92ZSByb3VuZGVkICJjYXBzdWxlIiBhcm91bmQgY29tbWVudCB0ZXh0YXJlYSBPTkxZIGluIGVkaXQgbW9kZSAtLS0gKi8KLmNvbW1lbnQtYmxvY2suZWRpdGluZyAuY29tbWVudC1pbnB1dHsKICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7Cn0KCjwvc3R5bGU+CjxzdHlsZT4KLyogRm9yY2UgbGluayB1bmRlcmxpbmUgdG8gYmUgYmxhY2sgYW5kIG9ubHkgdW5kZXIgdGhlIHRleHQgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybCwKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybDp2aXNpdGVkLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmhvdmVyLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmFjdGl2ZSB7CiAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICB0ZXh0LWRlY29yYXRpb24tbGluZTogdW5kZXJsaW5lICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjMUExQTFBICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLXRoaWNrbmVzczogZnJvbS1mb250OwogIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMnB4Owp9Cgo8L3N0eWxlPgo8c3R5bGU+Ci8qIFJlc3RvcmUgYnV0dG9uIGNvbG9ycyAob3ZlcnJpZGUgYW55IGdlbmVyaWMgbGluayBjb2xvciBydWxlcykgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi0tdXBsb2FkIHsgYmFja2dyb3VuZDogI0RBREFEQSAhaW1wb3J0YW50OyBjb2xvcjogIzFBMUExQSAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmVkaXQtYnV0dG9uIHsgYmFja2dyb3VuZDogIzFBMUExQSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmRlbGV0ZS1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyKSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSkgIWltcG9ydGFudDsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLXJlZ3VsYXIpICFpbXBvcnRhbnQ7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpICFpbXBvcnRhbnQ7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmctaG92ZXIpICFpbXBvcnRhbnQ7IH0KPC9zdHlsZT4KPHN0eWxlPgovKiA9PT0gQnV0dG9uIGNvbG9yIHN0YW5kYXJkaXphdGlvbiAobWF0Y2ggcGFnZTJfZml4ZWQuaHRtKSA9PT0gKi8KLmljb24tYnRuewogIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlLCAjZmZmKTsKICBib3JkZXI6IG5vbmU7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSwgIzFBMUExQSk7Cn0KLmljb24tYnRuLS1kYXJrewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKSAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7Cn0KLmljb24tYnRuLS1kYXJrOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyLCAjMkEyQjJFKSAhaW1wb3J0YW50Owp9Ci5pY29uLWJ0bi0tZGFuZ2VyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQouaWNvbi1idG4tLWRhbmdlcjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyLCAjRTYzQjQ1KSAhaW1wb3J0YW50Owp9CgovKiBBZGRpdGlvbmFsLWluZm8gaW50ZXJuYWwgYnV0dG9ucyAqLwouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXItaG92ZXIsICNFNjNCNDUpICFpbXBvcnRhbnQ7Cn0KCi8qICJBZGQiIGJ1dHRvbnMgKHBsdXMpIGluIHNlY3Rpb24gaGVhZGVycyDigJQgc2FtZSBhcyAi0JTQvtCx0LDQstC40YLRjCDQutC+0L3RgtC10L3RgiIgKi8KLmFkZC1idG4sIC5hZGQtY29tbWVudC1idG4sIC5hZGQtbGluay1idG4sICNhZGRDb21tZW50QnRuLCAjYWRkTGlua0J0bnsKICBiYWNrZ3JvdW5kOiAjREFEQURBICFpbXBvcnRhbnQ7CiAgY29sb3I6ICMxQTFBMUEgIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQouYWRkLWJ0bjpob3ZlciwgLmFkZC1jb21tZW50LWJ0bjpob3ZlciwgLmFkZC1saW5rLWJ0bjpob3ZlciwgI2FkZENvbW1lbnRCdG46aG92ZXIsICNhZGRMaW5rQnRuOmhvdmVyewogIGJhY2tncm91bmQ6ICNEMkQyRDIgIWltcG9ydGFudDsKfQoKLyogRWRpdCBidXR0b25zIGluc2lkZSBjb250ZW50ICovCi5lZGl0LWJ1dHRvbi5pY29uLWJ0biwgLmVkaXQtYnV0dG9uewogIC8qIGlmIGl0J3MgYSBwbGFpbiBidXR0b24gd2l0aG91dCBtb2RpZmllciBjbGFzcyAqLwogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKTsKICBjb2xvcjogI2ZmZjsKfQouZWRpdC1idXR0b246aG92ZXJ7CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIsICMyQTJCMkUpOwp9Cjwvc3R5bGU+CjxzdHlsZT4KLyogRW5zdXJlIGFkZGl0aW9uYWwtc2VjdGlvbiBidXR0b25zIGZvbGxvdyBwYWdlMl9maXhlZC5odG0gcGFsZXR0ZSAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmljb24tYnRuLS1kYXJrIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmssICMxQTFBMUEpOyBjb2xvcjojZmZmOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLWRhcms6aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyay1ob3ZlciwgIzJBMkIyRSk7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tZGFuZ2VyIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlciwgI0ZGNEQ1Nyk7IGNvbG9yOiNmZmY7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tZGFuZ2VyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlci1ob3ZlciwgI0U2M0I0NSk7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkIHsgYmFja2dyb3VuZDojREFEQURBOyBjb2xvcjojMUExQTFBOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZDpob3ZlciB7IGJhY2tncm91bmQ6I0QyRDJEMjsgfQoKLyogRm9yY2Ugc2VjdGlvbiB0aXRsZXMgYW5kIGNvcm5lcnMgdG8gbWF0Y2ggItCa0L7QvdGC0LXQvdGCIiArIGNvbnRlbnQgY2FyZHMgKi8KI21haW5TcGVjc1NlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojZG9jc1NlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojZmluYW5jZVNlY3Rpb24gLnNlY3Rpb24taGVhZGVyLXRpdGxlLAojYWRkaXRpb25hbEhlYWRlciAuc2VjdGlvbi1oZWFkZXItdGl0bGUgewogIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKSAhaW1wb3J0YW50Owp9CgojbWFpblNwZWNzU2VjdGlvbiwKI2RvY3NTZWN0aW9uLAojZmluYW5jZVNlY3Rpb24sCiNhZGRpdGlvbmFsU2VjdGlvbiB7CiAgYm9yZGVyLXJhZGl1czogMjBweCAhaW1wb3J0YW50OwogIG1hcmdpbjogMCAhaW1wb3J0YW50Owp9CgovKiBBbGlnbiBzZWN0aW9uIGFycm93cyB3aXRoIHRoZSBjb2xsYXBzZSBidXR0b24gcm93ICovCiNtYWluU3BlY3NTZWN0aW9uID4gLnNlY3Rpb24taGVhZGVyLAojZG9jc1NlY3Rpb24gPiAuc2VjdGlvbi1oZWFkZXIsCiNmaW5hbmNlU2VjdGlvbiA+IC5zZWN0aW9uLWhlYWRlciwKI2FkZGl0aW9uYWxIZWFkZXIgewogIHBhZGRpbmctbGVmdDogOXB4ICFpbXBvcnRhbnQ7Cn0KCiNtYWluU3BlY3NTZWN0aW9uID4gLnNlY3Rpb24taGVhZGVyIC5zZWN0aW9uLWhlYWRlci1sZWZ0LAojZG9jc1NlY3Rpb24gPiAuc2VjdGlvbi1oZWFkZXIgLnNlY3Rpb24taGVhZGVyLWxlZnQsCiNmaW5hbmNlU2VjdGlvbiA+IC5zZWN0aW9uLWhlYWRlciAuc2VjdGlvbi1oZWFkZXItbGVmdCwKI2FkZGl0aW9uYWxIZWFkZXIgLnNlY3Rpb24taGVhZGVyLWxlZnQgewogIGdhcDogOXB4ICFpbXBvcnRhbnQ7Cn0KCgovKiBLZWVwIGV4YWN0IDIwcHggc3BhY2luZyBiZXR3ZWVuIHRoZSBmb3VyIHRvcCBzZWN0aW9ucyAqLwoud3JhcCB7CiAgcm93LWdhcDogMjBweCAhaW1wb3J0YW50Owp9CgovKiBNYXRjaCBtdXRlZCBoZWFkZXIgdGV4dCBzdHlsZSAo0JDQtNC80LjQvS/QpNC+0YLQvtCz0YDQsNGEKSBmb3IgcmVxdWVzdGVkIHJpZ2h0LXBhbmVsIHRleHRzICovCi5raXQtdXNlZC1yb3csCi5raXQtZm9vdGVyLAoua2l0LWNhcmQuaXMtdXNlZCAua2l0LWZvb3RlciwKLmFyY2hpdmUtZW1wdHktdGV4dCB7CiAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKICBmb250LXdlaWdodDogNDAwICFpbXBvcnRhbnQ7CiAgY29sb3I6ICM4MDgwODAgIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7CiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbCAhaW1wb3J0YW50OwogIHRleHQtdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KCi8qIEFwcGx5IHNhbWUgbXV0ZWQgc3R5bGUgdG8gY2FyZCBmaWVsZCBsYWJlbHMgKNCc0LDRgNC60LAsINCf0YDQuNCy0L7QtCwg0JPQvtGBLiDQvdC+0LzQtdGALCBldGMuKSAqLwouc3BlYy1sYWJlbCB7CiAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKICBmb250LXdlaWdodDogNDAwICFpbXBvcnRhbnQ7CiAgY29sb3I6ICM4MDgwODAgIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7CiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbCAhaW1wb3J0YW50OwogIHRleHQtdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KCgouYXJjaGl2ZS1lbXB0eS10ZXh0IHsKICBwYWRkaW5nOiA2cHggMnB4Owp9CgovKiBLZWVwIGFjdGlvbiBidXR0b25zIGluc2lkZSBjb21tZW50L2xpbmsgY2FyZHMgZm9yIGFueSB0ZXh0IGxlbmd0aC9zdGF0ZSAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtYmxvY2ssCiNhZGRpdGlvbmFsU2VjdGlvbiAubGluay1pdGVtLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbS5lZGl0aW5nIHsKICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsKICBtaW4taGVpZ2h0OiBjYWxjKHZhcigtLWJ0bi1zaXplKSArIDQwcHgpICFpbXBvcnRhbnQ7Cn0KCi8qIEtlZXAgbGluayBhY3Rpb24gYXQgdG9wLXJpZ2h0IHdoaWxlIHRleHQgc3RheXMgdmVydGljYWxseSBjZW50ZXJlZCAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50OwogIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNTJweCkgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0gLmxpbmstYWN0aW9ucyB7CiAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgdG9wOiAyMHB4OwogIHJpZ2h0OiAyMHB4OwogIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgYWxpZ24tc2VsZjogYXV0byAhaW1wb3J0YW50Owp9CgojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbSAubGluay1pbmZvIHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7CiAgbWluLWhlaWdodDogdmFyKC0tYnRuLXNpemUpOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLyogRWRpdCBtb2RlIGtlZXBzIHJvdyBsYXlvdXQgYW5kIGFjdGlvbiBpbiB0aGUgdG9wLXJpZ2h0IGNvcm5lciAqLwojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbS5lZGl0aW5nIHsKICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydCAhaW1wb3J0YW50OwogIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNTJweCkgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0uZWRpdGluZyAubGluay1hY3Rpb25zIHsKICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICB0b3A6IDIwcHg7CiAgcmlnaHQ6IDIwcHg7CiAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICBtYXJnaW46IDAgIWltcG9ydGFudDsKfQoKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLWl0ZW0uZWRpdGluZyAubGluay1lZGl0IHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7Cn0KCjwvc3R5bGU+CjxzdHlsZT4KLyogVW5pZmllZCBTVkcgc2l6ZSBmb3IgYWxsIGJ1dHRvbnMgaW4gcmlnaHQtcGFuZWwgaWZyYW1lICovCmJ1dHRvbiBzdmcsCmJ1dHRvbiAuaWNvbiBzdmcgewogIHdpZHRoOiAxOHB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi8qIEVkaXQgYnV0dG9uczogaWNvbiAxcHggc21hbGxlciAqLwpidXR0b25bZGF0YS1hY3Rpb249ImVkaXQiXSBzdmcsCmJ1dHRvbltkYXRhLWFjdGlvbj0iZWRpdCJdIC5pY29uIHN2ZywKYnV0dG9uLmVkaXQtYnV0dG9uIHN2ZywKYnV0dG9uLmVkaXQtYnV0dG9uIC5pY29uIHN2ZywKLmVkaXQtYnV0dG9uIHN2ZywKLmVkaXQtYnV0dG9uIC5pY29uIHN2ZyB7CiAgd2lkdGg6IDE3cHggIWltcG9ydGFudDsKICBoZWlnaHQ6IDE3cHggIWltcG9ydGFudDsKfQo8L3N0eWxlPgo8c3R5bGU+Ci8qIFJlbW92ZSAiYWN0aXZlIiAvIHRhcCBoaWdobGlnaHQgYmFja2dyb3VuZCBvbiBjYXJkcyAo0JrQvtC90YLQtdC90YIgKyDQkNGA0YXQuNCyKSAqLwoua2l0LWNhcmQsCi50aWxlLAouY29sbGFnZS1jZWxsLAoua2l0LWRyYWctaGFuZGxlLAoua2l0LWFjdGlvbnMgYnV0dG9uewogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5raXQtY2FyZDpmb2N1cywKLmtpdC1jYXJkOmZvY3VzLXdpdGhpbiwKLmtpdC1jYXJkOmFjdGl2ZXsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7CiAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9CgovKiBLZWVwIGNhcmQgYmFja2dyb3VuZHMgc3RhYmxlIHdoZW4gaW50ZXJhY3RlZCB3aXRoICovCi5raXQtY2FyZDphY3RpdmV7IGJhY2tncm91bmQ6IHZhcigtLXdoaXRlLCAjZmZmKSAhaW1wb3J0YW50OyB9Ci5raXQtY2FyZC5pcy11c2VkOmFjdGl2ZXsgYmFja2dyb3VuZDogdmFyKC0tdXNlZC1iZywgI0QxRURERCkgIWltcG9ydGFudDsgfQoKLyogQWxzbyBraWxsIGFueSBmb2N1cyByaW5nIGNhdXNlZCBieSBjbGlja2FibGUgY2hpbGRyZW4gKi8KLmtpdC1jYXJkICo6Zm9jdXN7IG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsgfQo8L3N0eWxlPgo8c3R5bGU+Ci8qID09PSBLaWxsIG1vYmlsZSB0YXAvYWN0aXZlIGhpZ2hsaWdodCBvbiBBTEwgY2xpY2thYmxlIGNlbGxzIGluc2lkZSDQmtC+0L3RgtC10L3Rgi/QkNGA0YXQuNCyID09PSAqLwoua2l0cywgLmtpdHMgKnsKICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi50aWxlLCAuY29sbGFnZS1jZWxsLCAua2l0LXRpdGxlLCAua2l0LWNoZWNrLCAua2l0LWRyYWctaGFuZGxlewogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7Cn0KCi8qIFByZXZlbnQgYW55IFVBIGFjdGl2ZSBiYWNrZ3JvdW5kIGZsYXNoICovCi50aWxlOmFjdGl2ZSwKLmNvbGxhZ2UtY2VsbDphY3RpdmUsCi5raXQtdGl0bGU6YWN0aXZlLAoua2l0LWNoZWNrOmFjdGl2ZXsKICBiYWNrZ3JvdW5kOiBpbmhlcml0ICFpbXBvcnRhbnQ7Cn0KCi8qIElmIHNvbWV0aGluZyBhcHBsaWVzIGEgdHJhbnNsdWNlbnQgb3ZlcmxheSB2aWEgYmFja2dyb3VuZC1jb2xvciwgbmV1dHJhbGl6ZSBpdCAqLwoudGlsZS5pcy1waG90bzphY3RpdmU6OmFmdGVyLAouY29sbGFnZS1jZWxsLmlzLXBob3RvOmFjdGl2ZTo6YWZ0ZXJ7CiAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjI1KTsgLyogc2FtZSBhcyBob3Zlciwgbm8gZXh0cmEgZmxhc2ggKi8KfQo8L3N0eWxlPgo8c3R5bGU+Ci8qINCa0L7QvdGC0LXQvdGCICsg0JDRgNGF0LjQsjogdGhlc2UgYXJlIHBsYWluIGhlYWRlcnMsIHNob3VsZCBOT1QgaW5oZXJpdCBjb2xsYXBzZS1zZWN0aW9uIGhlYWRlciBob3Zlci9iYWNrZ3JvdW5kL3BhZGRpbmcgKi8KLndyYXAgPiAuc2VjdGlvbi1oZWFkZXJ7CiAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50OwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KLndyYXAgPiAuc2VjdGlvbi1oZWFkZXI6aG92ZXIsCi53cmFwID4gLnNlY3Rpb24taGVhZGVyOmFjdGl2ZSwKLndyYXAgPiAuc2VjdGlvbi1oZWFkZXI6Zm9jdXMsCi53cmFwID4gLnNlY3Rpb24taGVhZGVyOmZvY3VzLXdpdGhpbnsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7Cn0KPC9zdHlsZT4KPHN0eWxlPgogIGh0bWwsYm9keXtoZWlnaHQ6MTAwJTt9CiAgYm9keXttYXJnaW46MDsgcGFkZGluZzoyMHB4OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDt9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxkaXYgY2xhc3M9IndyYXAiIGRhdGEtcm9sZT0icmlnaHQtaW5uZXItd3JhcCI+CiAgICA8IS0tINCa0LDRgNGC0L7Rh9C60LAg0LDQstGC0L7QvNC+0LHQuNC70Y8g0Lgg0YHQstC+0YDQsNGH0LjQstCw0LXQvNGL0LUg0YHQtdC60YbQuNC4IC0tPgogICAgPGRpdiBjbGFzcz0iY2FyLWNhcmQtdGl0bGUiIGlkPSJjYXJkVGl0bGUiIGRhdGEtcm9sZT0icmlnaHQtY2FyZC10aXRsZSI+0JrQsNGA0YLQvtGH0LrQsCDQsNCy0YLQvtC80L7QsdC40LvRjzwvZGl2PgoKICAgIDwhLS0g0JHQm9Ce0JogMTog0J7RgdC90L7QstC90YvQtSDRhdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutC4IC0tPgogICAgPGRpdiBjbGFzcz0iY29sbGFwc2Utc2VjdGlvbiIgaWQ9Im1haW5TcGVjc1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1zcGVjcyI+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIiBpZD0ibWFpblNwZWNzSGVhZGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlci1sZWZ0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb2xsYXBzZS1pY29uIiBpZD0ibWFpblNwZWNzSWNvbiI+CiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItdGl0bGUiPtCe0YHQvdC+0LLQvdGL0LUg0YXQsNGA0LDQutGC0LXRgNC40YHRgtC40LrQuDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tY29udGVudCBjb2xsYXBzZWQiIGlkPSJtYWluU3BlY3NDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tc3BlY3MtY29udGVudCI+CiAgICAgICAgPGRpdiBjbGFzcz0ic3BlY3MtZ3JpZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JzQsNGA0LrQsDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImJyYW5kIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QnNC+0LTQtdC70Yw8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJtb2RlbCI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JPQvtC0INCy0YvQv9GD0YHQutCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ieWVhciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KbQstC10YI8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJjb2xvciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JTQstC40LPQsNGC0LXQu9GMPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iZnVlbFR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCe0LHRitC10Lw8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJlbmdpbmVWb2x1bWUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCbLtChLjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImhvcnNlcG93ZXIiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCa0J/Qnzwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImdlYXJib3giPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCf0YDQuNCy0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImRyaXZlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9GA0L7QsdC10LM8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJtaWxlYWdlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QmtGD0LfQvtCyPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iYm9keVR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCi0LjQvyDRgdCw0LvQvtC90LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJpbnRlcmlvclR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCh0L7QsdGB0YLQstC10L3QvdC40Lo8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJvd25lcnMiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCo0L7Rg9GA0YPQvDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InNob3dyb29tIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QnNC10L3QtdC00LbQtdGAPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ibWFuYWdlciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSDQkdCb0J7QmiAyOiDQlNC+0LrRg9C80LXQvdGC0Ysg0Lgg0YDQtdCz0LjRgdGC0YDQsNGG0LjRjyAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbGxhcHNlLXNlY3Rpb24iIGlkPSJkb2NzU2VjdGlvbiIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLWRvY3MiPgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9ImRvY3NIZWFkZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyLWxlZnQiPgogICAgICAgICAgPHNwYW4gY2xhc3M9ImNvbGxhcHNlLWljb24iIGlkPSJkb2NzSWNvbiI+CiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItdGl0bGUiPtCU0L7QutGD0LzQtdC90YLRiyDQuCDRgNC10LPQuNGB0YLRgNCw0YbQuNGPPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1jb250ZW50IGNvbGxhcHNlZCIgaWQ9ImRvY3NDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tZG9jcy1jb250ZW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjcy1ncmlkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj5WSU48L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJ2aW4iPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCT0L7RgS4g0L3QvtC80LXRgDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9Imdvdk51bWJlciI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KHQotChPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iY3RzIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9Ci0KE8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJwdHNUeXBlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QrtGALiDQu9C40YbQvjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImxlZ2FsRW50aXR5Ij7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QndCwINGD0YfQtdGC0LU8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJyZWdpc3RlcmVkIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7Qn9GA0LjRhdC+0LQ8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJhcnJpdmFsRGF0ZSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JIg0L/RgNC+0LTQsNC20LU8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJmb3JTYWxlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QodC10YDQstC40YHQvdCw0Y8g0LrQvdC40LbQutCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ic2VydmljZUJvb2siPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0g0JHQm9Ce0JogMzog0KTQuNC90LDQvdGB0Ysg0Lgg0YDQsNGB0YXQvtC00YsgLS0+CiAgICA8ZGl2IGNsYXNzPSJjb2xsYXBzZS1zZWN0aW9uIiBpZD0iZmluYW5jZVNlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1maW5hbmNlIj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiIGlkPSJmaW5hbmNlSGVhZGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlci1sZWZ0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb2xsYXBzZS1pY29uIiBpZD0iZmluYW5jZUljb24iPgogICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC4wNjEgMTkuMDYxTDE3LjEyMSAxMmwtNy4wNi03LjA2MWwtMi4xMjIgMi4xMjJMMTIuODc5IDEybC00Ljk0IDQuOTM5eiIgZmlsbD0iY3VycmVudENvbG9yIi8+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9InNlY3Rpb24taGVhZGVyLXRpdGxlIj7QpNC40L3QsNC90YHRiyDQuCDRgNCw0YHRhdC+0LTRizwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tY29udGVudCBjb2xsYXBzZWQiIGlkPSJmaW5hbmNlQ29udGVudCIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLWZpbmFuY2UtY29udGVudCI+CiAgICAgICAgPGRpdiBjbGFzcz0ic3BlY3MtZ3JpZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JfQsNGF0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImVudHJ5UHJpY2UiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JfQsNGF0L7QtCDRgSDRgNCw0YHRhdC+0LTQsNC80Lg8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJlbnRyeVdpdGhFeHBlbnNlcyIgZGF0YS1mb3JtYXQ9ImN1cnJlbmN5Ij7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QoNC10LzQvtC90YI8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJyZXBhaXJDb3N0IiBkYXRhLWZvcm1hdD0iY3VycmVuY3kiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCf0YDQvtC00LDQttCwPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ic2FsZVByaWNlIiBkYXRhLWZvcm1hdD0iY3VycmVuY3kiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCQ0LLRgtC+0LLQvtC3PC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iY2FycmllckNvc3QiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KHQvdGP0YLQuNC1INGBINGD0YfQtdGC0LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJkZXJlZ2lzdHJhdGlvbkNvc3QiIGRhdGEtZm9ybWF0PSJjdXJyZW5jeSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSDQkdCb0J7QmiA0OiDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPIC0tPgogICAgPGRpdiBjbGFzcz0iY29sbGFwc2Utc2VjdGlvbiIgaWQ9ImFkZGl0aW9uYWxTZWN0aW9uIiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tYWRkaXRpb25hbCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9ImFkZGl0aW9uYWxIZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyLWxlZnQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iY29sbGFwc2UtaWNvbiIgaWQ9ImFkZGl0aW9uYWxJY29uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWN0aW9uLWhlYWRlci10aXRsZSI+0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1jb250ZW50IiBjb2xsYXBzZWQgaWQ9ImFkZGl0aW9uYWxDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tYWRkaXRpb25hbC1jb250ZW50Ij4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWJsb2NrIj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDQmtC+0LzQvNC10L3RgtCw0YDQuNC4IC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWl0ZW0iIGlkPSJjb21tZW50c1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtY29tbWVudHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWRkaXRpb25hbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZGRpdGlvbmFsLXRpdGxlIj7QmtC+0LzQvNC10L3RgtCw0YDQuNC5PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS11cGxvYWQgYWRkLWJ1dHRvbiIgaWQ9ImFkZENvbW1lbnRCdG4iIHRpdGxlPSLQlNC+0LHQsNCy0LjRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40LkiIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuSI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTFoLTZWNWgtMnY2SDV2Mmg2djZoMnYtNmg2eiIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudHMtbGlzdCIgaWQ9ImNvbW1lbnRzTGlzdCIgZGF0YS1yb2xlPSJyaWdodC1jb21tZW50cy1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0g0J/RgNC40LrRgNC10L/Qu9GR0L3QvdGL0LUg0YHRgdGL0LvQutC4IC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWl0ZW0iIGlkPSJsaW5rc1NlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtbGlua3MiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWRkaXRpb25hbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZGRpdGlvbmFsLXRpdGxlIj7Qn9GA0LjQutGA0LXQv9C70ZHQvdC90YvQtSDRgdGB0YvQu9C60Lg8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLXVwbG9hZCBhZGQtYnV0dG9uIiBpZD0iYWRkTGlua0J0biIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0YHRgdGL0LvQutGDIiBhcmlhLWxhYmVsPSLQlNC+0LHQsNCy0LjRgtGMINGB0YHRi9C70LrRgyI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTFoLTZWNWgtMnY2SDV2Mmg2djZoMnYtNmg2eiIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGlua3MtbGlzdCIgaWQ9ImxpbmtzTGlzdCIgZGF0YS1yb2xlPSJyaWdodC1saW5rcy1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiIGRhdGEtcm9sZT0icmlnaHQtY29udGVudC1oZWFkZXIiIHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4OyI+0JrQvtC90YLQtdC90YI8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tdXBsb2FkIiBpZD0iYWRkS2l0QnRuIiBkYXRhLXJvbGU9InJpZ2h0LWNvbnRlbnQtYWRkLWJ0biIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC90YLQtdC90YIiIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC90YLQtdC90YIiPjxzcGFuIGNsYXNzPSJpY29uIiBpZD0ic3ZnUGx1c0J0biI+PC9zcGFuPjwvYnV0dG9uPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWFjdGlvbnMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImtpdHMiIGlkPSJraXRzIiBkYXRhLXJvbGU9InJpZ2h0LWNvbnRlbnQta2l0cyI+PC9kaXY+CgogICAgPCEtLSDQkNGA0YXQuNCyIC0tPgogICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiIGRhdGEtcm9sZT0icmlnaHQtYXJjaGl2ZS1oZWFkZXIiIHN0eWxlPSJtYXJnaW4tdG9wOiA0cHg7Ij4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+0JDRgNGF0LjQsjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWFjdGlvbnMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImtpdHMiIGlkPSJhcmNoaXZlS2l0cyIgZGF0YS1yb2xlPSJyaWdodC1hcmNoaXZlLWtpdHMiPjwvZGl2PgoKICA8L2Rpdj4KCiAgPCEtLSBWaWV3ZXIgLS0+CiAgPGRpdiBjbGFzcz0idmlld2VyLWJhY2tkcm9wIiBpZD0idmlld2VyQmFja2Ryb3AiIGRhdGEtcm9sZT0icmlnaHQtdmlld2VyIiBhcmlhLWhpZGRlbj0idHJ1ZSIgdGFiaW5kZXg9Ii0xIj4KICAgIDxkaXYgY2xhc3M9InZpZXdlciIgcm9sZT0iZGlhbG9nIiBhcmlhLW1vZGFsPSJ0cnVlIiBhcmlhLWxhYmVsPSLQn9GA0L7RgdC80L7RgtGAINGE0L7RgtC+Ij4KICAgICAgPGRpdiBjbGFzcz0idmlld2VyLXJhaWwiPgogICAgICAgIDxidXR0b24gY2xhc3M9InJhaWwtYnRuIiBpZD0icmFpbFVwIiBhcmlhLWxhYmVsPSLQn9GA0L7QutGA0YPRgtC40YLRjCDQstCy0LXRgNGFIj4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTcuNDEgMTUuNDEgMTIgMTAuODNsNC41OSA0LjU4TDE4IDE0bC02LTYtNiA2eiIvPjwvc3ZnPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9InZpZXdlci10aHVtYnMiIGlkPSJ2aWV3ZXJUaHVtYnMiPjwvZGl2PgogICAgICAgIDxidXR0b24gY2xhc3M9InJhaWwtYnRuIiBpZD0icmFpbERvd24iIGFyaWEtbGFiZWw9ItCf0YDQvtC60YDRg9GC0LjRgtGMINCy0L3QuNC3Ij4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0ibTcuNDEgOC41OSA0LjU5IDQuNTggNC41OS00LjU4TDE4IDEwbC02IDYtNi02eiIvPjwvc3ZnPgogICAgICAgIDwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIAogICAgICA8ZGl2IGNsYXNzPSJ2aWV3ZXItc3RhZ2UiIGlkPSJ2aWV3ZXJTdGFnZSI+CiAgICAgICAgPGRpdiBjbGFzcz0idmlld2VyLWNvdW50ZXIiIGlkPSJ2aWV3ZXJDb3VudGVyIj4wLzA8L2Rpdj4KPGRpdiBjbGFzcz0idmlld2VyLWFjdGlvbnMiIGlkPSJ2aWV3ZXJBY3Rpb25zIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgaWQ9InZpZXdlckNsb3NlIiBhcmlhLWxhYmVsPSLQl9Cw0LrRgNGL0YLRjCI+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiByb3RhdGUtNDUiIGlkPSJzdmdDbG9zZSI+PC9zcGFuPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYW5nZXIiIGlkPSJ2aWV3ZXJEZWxldGVCdG4iIHRpdGxlPSLQo9C00LDQu9C40YLRjCDRhNC+0YLQviIgYXJpYS1sYWJlbD0i0KPQtNCw0LvQuNGC0Ywg0YTQvtGC0L4iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiIgaWQ9InN2Z1RyYXNoVmlld2VyIj48L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAKICAgICAgPC9kaXY+Cgo8ZGl2IGNsYXNzPSJzdGFnZS1zdGFjayIgaWQ9InN0YWdlU3RhY2siPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhZ2UtaXRlbSBtYWluIiBpZD0ic3RhZ2VNYWluIj4KPGltZyBjbGFzcz0ic3RhZ2UtaW1nIiBpZD0idmlld2VySW1nIiBhbHQ9ItCk0L7RgtC+INCw0LLRgtC+0LzQvtCx0LjQu9GPIj4KICAgICAgICAgIDwvZGl2Pgo8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJmaWxlSW5wdXQiIGFjY2VwdD0iaW1hZ2UvKiIgbXVsdGlwbGUgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIC8+CgogIDxzY3JpcHQ+CiAgICAvKiA9PT09PSBTVkcgSUNPTlMgKHByb3ZpZGVkKSA9PT09PSAqLwogICAgY29uc3QgU1ZHX0RPV05MT0FEID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNiAxOGgxMnYySDZ6bTUtMTR2OC41ODZMNi43MDcgOC4yOTNMNS4yOTMgOS43MDdMMTIgMTYuNDE0bDYuNzA3LTYuNzA3bC0xLjQxNC0xLjQxNEwxMyAxMi41ODZWNHoiLz48L3N2Zz5gOwogICAgY29uc3QgU1ZHX1RSQVNIID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNSAyMGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWOGgyVjZoLTRWNGEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYySDN2Mmgyek05IDRoNnYySDl6TTggOGg5djEySDdWOHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDEwaDJ2OEg5em00IDBoMnY4aC0yeiIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfUExVUyA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE5IDExaC02VjVoLTJ2Nkg1djJoNnY2aDJ2LTZoNnoiLz48L3N2Zz5gOwogICAgY29uc3QgU1ZHX0lNQUdFX0FERCA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjx0aXRsZT5JbWFnZS1hZGQgU1ZHIEljb248L3RpdGxlPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTQgNWgxM3Y3aDJWNWMwLTEuMTAzLS44OTctMi0yLTJINGMtMS4xMDMgMC0yIC44OTctMiAydjEyYzAgMS4xMDMuODk3IDIgMiAyaDh2LTJINHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Im04IDExbC0zIDRoMTFsLTQtNmwtMyA0eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE5IDE0aC0ydjNoLTN2MmgzdjNoMnYtM2gzdi0yaC0zeiIvPjwvc3ZnPmA7CiAgICAvLyB1c2VyJ3MgbmV3IGVkaXQgaWNvbgogICAgY29uc3QgU1ZHX0VESVQgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfQ0hFQ0sgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNOSAxNi4yIDQuOCAxMmwtMS40IDEuNEw5IDE5IDIxIDdsLTEuNC0xLjR6Ii8+PC9zdmc+YDsKICAgIGNvbnN0IFNWR19SRVNUT1JFID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTAgMTFoNnY3aDJ2LThhMSAxIDAgMCAwLTEtMWgtN1Y2bC01IDRsNSA0eiIvPjwvc3ZnPmA7CgogICAgLy8gbW91bnQgaWNvbnMKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdmdQbHVzQnRuJykuaW5uZXJIVE1MID0gU1ZHX1BMVVM7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnVHJhc2hWaWV3ZXInKS5pbm5lckhUTUwgPSBTVkdfVFJBU0g7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnQ2xvc2UnKS5pbm5lckhUTUwgPSBTVkdfUExVUzsKCgogICAgLyogPT09PT0gSEVMUEVSUyA9PT09PSAqLwogICAgZnVuY3Rpb24gdWlkKCl7CiAgICAgIGlmICh3aW5kb3cuY3J5cHRvICYmIGNyeXB0by5yYW5kb21VVUlEKSByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTsKICAgICAgcmV0dXJuICdpZF8nICsgRGF0ZS5ub3coKS50b1N0cmluZygzNikgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYWQyKG4peyByZXR1cm4gU3RyaW5nKG4pLnBhZFN0YXJ0KDIsJzAnKTsgfQogICAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkKXsKICAgICAgLy8gZGQubW0ueXl5eQogICAgICBjb25zdCBkYXkgPSBwYWQyKGQuZ2V0RGF0ZSgpKTsKICAgICAgY29uc3QgbW9uID0gcGFkMihkLmdldE1vbnRoKCkrMSk7CiAgICAgIGNvbnN0IHlyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICByZXR1cm4gYCR7ZGF5fS4ke21vbn0uJHt5cn1gOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGQpewogICAgICAvLyBkZC5tbS55eXl5IEhIOk1NICjQsdC10Lcg0YHQtdC60YPQvdC0KQogICAgICBjb25zdCBkYXkgPSBwYWQyKGQuZ2V0RGF0ZSgpKTsKICAgICAgY29uc3QgbW9uID0gcGFkMihkLmdldE1vbnRoKCkrMSk7CiAgICAgIGNvbnN0IHlyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBoaCA9IHBhZDIoZC5nZXRIb3VycygpKTsKICAgICAgY29uc3QgbW0gPSBwYWQyKGQuZ2V0TWludXRlcygpKTsKICAgICAgcmV0dXJuIGAke2RheX0uJHttb259LiR7eXJ9ICR7aGh9OiR7bW19YDsKICAgIH0KCgogICAgZnVuY3Rpb24gY3JlYXRlS2l0KCl7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgIHRpdGxlOiAn0J3QvtCy0YvQuSDQutC+0L3RgtC10L3RgicsCiAgICAgICAgcGhvdG9zOiBbXSwKICAgICAgICB1c2VkOiBmYWxzZSwKICAgICAgICB1c2VkRGF0ZTogbnVsbCwKICAgICAgICBjcmVhdGVkQXQ6IG51bGwKICAgICAgfTsKICAgIH0KCgogICAgLyogPT09PT0gU1RBVEUgPT09PT0gKi8KICAgIGNvbnN0IGtpdHNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdraXRzJyk7CiAgICBjb25zdCBhcmNoaXZlS2l0c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hpdmVLaXRzJyk7CiAgICBjb25zdCBhZGRLaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkS2l0QnRuJyk7CiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7CgogICAgLy8gVmlld2VyCiAgICBjb25zdCB2aWV3ZXJCYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJCYWNrZHJvcCcpOwogICAgY29uc3Qgdmlld2VyVGh1bWJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlclRodW1icycpOwogICAgY29uc3Qgdmlld2VySW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckltZycpOwpjb25zdCBzdGFnZVN0YWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YWdlU3RhY2snKTsKICAgIGNvbnN0IHZpZXdlckNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckNsb3NlJyk7CmNvbnN0IHZpZXdlckNvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyQ291bnRlcicpOwogICAgY29uc3Qgdmlld2VyRGVsZXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckRlbGV0ZUJ0bicpOwogICAgY29uc3QgcmFpbFVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhaWxVcCcpOwogICAgY29uc3QgcmFpbERvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFpbERvd24nKTsKCiAgICBsZXQga2l0cyA9IFtjcmVhdGVLaXQoKV07CiAgICBsZXQgYXJjaGl2ZWRLaXRzID0gW107CgogICAgLy8gbWlzc2luZyBzdGF0ZSB2YXJzCiAgICBsZXQgYWN0aXZlRWRpdEtpdElkID0gbnVsbDsKICAgIGxldCB2aWV3ZXJLaXRJZCA9IG51bGw7CiAgICBsZXQgdmlld2VySW5kZXggPSAwOwogICAgbGV0IHZpZXdlckNhbkRlbGV0ZSA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIGdldEtpdEJ5SWQoa2l0SWQpewogICAgICByZXR1cm4ga2l0cy5maW5kKGs9PmsuaWQ9PT1raXRJZCkgfHwgYXJjaGl2ZWRLaXRzLmZpbmQoaz0+ay5pZD09PWtpdElkKSB8fCBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzS2l0SW5NYWluKGtpdElkKXsKICAgICAgcmV0dXJuIGtpdHMuc29tZShrPT5rLmlkPT09a2l0SWQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRPbmx5T25lRWRpdChraXRJZCl7CiAgICAgIGFjdGl2ZUVkaXRLaXRJZCA9IGtpdElkOwogICAgICByZW5kZXIoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBleGl0RWRpdCgpewogICAgICBhY3RpdmVFZGl0S2l0SWQgPSBudWxsOwogICAgICByZW5kZXIoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0VkaXQoa2l0SWQpeyByZXR1cm4gYWN0aXZlRWRpdEtpdElkID09PSBraXRJZDsgfQoKICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyKXsKICAgICAgcmV0dXJuIFN0cmluZyhzdHIpCiAgICAgICAgLnJlcGxhY2VBbGwoJyYnLCcmYW1wOycpCiAgICAgICAgLnJlcGxhY2VBbGwoJzwnLCcmbHQ7JykKICAgICAgICAucmVwbGFjZUFsbCgnPicsJyZndDsnKQogICAgICAgIC5yZXBsYWNlQWxsKCciJywnJnF1b3Q7JykKICAgICAgICAucmVwbGFjZUFsbCgiJyIsJyYjMDM5OycpOwogICAgfQoKICAgIAogICAgLy8gLS0tIFpJUCBkb3dubG9hZCAobm8gZXh0ZXJuYWwgbGlicykuIFN0b3JlZCBtZXRob2QgKG5vIGNvbXByZXNzaW9uKSAtLS0KICAgIGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUobmFtZSl7CiAgICAgIHJldHVybiAobmFtZSB8fCAnY29udGVudCcpCiAgICAgICAgLnRvU3RyaW5nKCkKICAgICAgICAudHJpbSgpCiAgICAgICAgLnJlcGxhY2UoL1tcL1xcOio/Ijw+fF0rL2csICdfJykKICAgICAgICAucmVwbGFjZSgvXHMrL2csICcgJykKICAgICAgICAuc2xpY2UoMCwgODApIHx8ICdjb250ZW50JzsKICAgIH0KCiAgICBmdW5jdGlvbiBkYXRhVXJsVG9CbG9iKHVybCl7CiAgICAgIC8vIGZldGNoIHdvcmtzIGZvciBkYXRhOiBVUkxzIGFuZCBibG9iOiBVUkxzCiAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4ociA9PiByLmJsb2IoKSk7CiAgICB9CgogICAgLy8gQ1JDMzIgZm9yIFpJUAogICAgY29uc3QgX2NyY1RhYmxlID0gKCgpID0+IHsKICAgICAgY29uc3QgdGFibGUgPSBuZXcgVWludDMyQXJyYXkoMjU2KTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKyl7CiAgICAgICAgbGV0IGMgPSBpOwogICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgODsgaysrKXsKICAgICAgICAgIGMgPSAoYyAmIDEpID8gKDB4RURCODgzMjAgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpOwogICAgICAgIH0KICAgICAgICB0YWJsZVtpXSA9IGMgPj4+IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRhYmxlOwogICAgfSkoKTsKCiAgICBmdW5jdGlvbiBjcmMzMihidWYpewogICAgICBsZXQgYyA9IDB4RkZGRkZGRkY7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSsrKXsKICAgICAgICBjID0gX2NyY1RhYmxlWyhjIF4gYnVmW2ldKSAmIDB4RkZdIF4gKGMgPj4+IDgpOwogICAgICB9CiAgICAgIHJldHVybiAoYyBeIDB4RkZGRkZGRkYpID4+PiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHUxNihuKXsgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtuICYgMjU1LCAobiA+Pj4gOCkgJiAyNTVdKTsgfQogICAgZnVuY3Rpb24gdTMyKG4peyByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW24gJiAyNTUsIChuID4+PiA4KSAmIDI1NSwgKG4gPj4+IDE2KSAmIDI1NSwgKG4gPj4+IDI0KSAmIDI1NV0pOyB9CgogICAgZnVuY3Rpb24gY29uY2F0VWludDgoYXJyYXlzKXsKICAgICAgY29uc3QgdG90YWwgPSBhcnJheXMucmVkdWNlKChzLGEpPT5zK2EubGVuZ3RoLDApOwogICAgICBjb25zdCBvdXQgPSBuZXcgVWludDhBcnJheSh0b3RhbCk7CiAgICAgIGxldCBvZmYgPSAwOwogICAgICBmb3IgKGNvbnN0IGEgb2YgYXJyYXlzKXsgb3V0LnNldChhLCBvZmYpOyBvZmYgKz0gYS5sZW5ndGg7IH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3NEYXRlVGltZShkYXRlKXsKICAgICAgY29uc3QgZCA9IGRhdGUgaW5zdGFuY2VvZiBEYXRlID8gZGF0ZSA6IG5ldyBEYXRlKCk7CiAgICAgIGNvbnN0IHRpbWUgPQogICAgICAgICgoZC5nZXRIb3VycygpICYgMHgxRikgPDwgMTEpIHwKICAgICAgICAoKGQuZ2V0TWludXRlcygpICYgMHgzRikgPDwgNSkgfAogICAgICAgICgoTWF0aC5mbG9vcihkLmdldFNlY29uZHMoKS8yKSkgJiAweDFGKTsKICAgICAgY29uc3QgZGF5ID0gZC5nZXREYXRlKCk7CiAgICAgIGNvbnN0IG1vbnRoID0gZC5nZXRNb250aCgpICsgMTsKICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKSAtIDE5ODA7CiAgICAgIGNvbnN0IGRvc0RhdGUgPQogICAgICAgICgoeWVhciAmIDB4N0YpIDw8IDkpIHwKICAgICAgICAoKG1vbnRoICYgMHgwRikgPDwgNSkgfAogICAgICAgIChkYXkgJiAweDFGKTsKICAgICAgcmV0dXJuIHsgdGltZSwgZGF0ZTogZG9zRGF0ZSB9OwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIG1ha2VaaXAoZmlsZXMpewogICAgICAvLyBmaWxlczogW3tuYW1lLCBibG9ifV0KICAgICAgY29uc3QgbG9jYWxQYXJ0cyA9IFtdOwogICAgICBjb25zdCBjZW50cmFsUGFydHMgPSBbXTsKICAgICAgbGV0IG9mZnNldCA9IDA7CgogICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICBjb25zdCBkdCA9IGRvc0RhdGVUaW1lKG5vdyk7CgogICAgICBmb3IgKGNvbnN0IGYgb2YgZmlsZXMpewogICAgICAgIGNvbnN0IG5hbWVCeXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShmLm5hbWUpOwogICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShhd2FpdCBmLmJsb2IuYXJyYXlCdWZmZXIoKSk7CiAgICAgICAgY29uc3QgY3JjID0gY3JjMzIoZGF0YSk7CiAgICAgICAgY29uc3QgY29tcFNpemUgPSBkYXRhLmxlbmd0aDsKICAgICAgICBjb25zdCB1bmNvbXBTaXplID0gZGF0YS5sZW5ndGg7CgogICAgICAgIC8vIExvY2FsIGZpbGUgaGVhZGVyCiAgICAgICAgY29uc3QgbG9jYWxIZWFkZXIgPSBjb25jYXRVaW50OChbCiAgICAgICAgICB1MzIoMHgwNDAzNGI1MCksICAgICAgICAvLyBzaWduYXR1cmUKICAgICAgICAgIHUxNigyMCksICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gbmVlZGVkCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBmbGFncwogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gY29tcHJlc3Npb24gMCA9IHN0b3JlZAogICAgICAgICAgdTE2KGR0LnRpbWUpLCAgICAgICAgICAgLy8gbW9kIHRpbWUKICAgICAgICAgIHUxNihkdC5kYXRlKSwgICAgICAgICAgIC8vIG1vZCBkYXRlCiAgICAgICAgICB1MzIoY3JjKSwgICAgICAgICAgICAgICAvLyBjcmMzMgogICAgICAgICAgdTMyKGNvbXBTaXplKSwgICAgICAgICAgLy8gY29tcHJlc3NlZCBzaXplCiAgICAgICAgICB1MzIodW5jb21wU2l6ZSksICAgICAgICAvLyB1bmNvbXByZXNzZWQgc2l6ZQogICAgICAgICAgdTE2KG5hbWVCeXRlcy5sZW5ndGgpLCAgLy8gZmlsZSBuYW1lIGxlbmd0aAogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZXh0cmEgbGVuZ3RoCiAgICAgICAgICBuYW1lQnl0ZXMKICAgICAgICBdKTsKCiAgICAgICAgbG9jYWxQYXJ0cy5wdXNoKGxvY2FsSGVhZGVyLCBkYXRhKTsKCiAgICAgICAgLy8gQ2VudHJhbCBkaXJlY3RvcnkgaGVhZGVyCiAgICAgICAgY29uc3QgY2VudHJhbEhlYWRlciA9IGNvbmNhdFVpbnQ4KFsKICAgICAgICAgIHUzMigweDAyMDE0YjUwKSwgICAgICAgIC8vIHNpZ25hdHVyZQogICAgICAgICAgdTE2KDIwKSwgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBtYWRlIGJ5CiAgICAgICAgICB1MTYoMjApLCAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZAogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZmxhZ3MKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGNvbXByZXNzaW9uCiAgICAgICAgICB1MTYoZHQudGltZSksCiAgICAgICAgICB1MTYoZHQuZGF0ZSksCiAgICAgICAgICB1MzIoY3JjKSwKICAgICAgICAgIHUzMihjb21wU2l6ZSksCiAgICAgICAgICB1MzIodW5jb21wU2l6ZSksCiAgICAgICAgICB1MTYobmFtZUJ5dGVzLmxlbmd0aCksCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBleHRyYQogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gY29tbWVudAogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gZGlzayBudW1iZXIKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGludGVybmFsIGF0dHJzCiAgICAgICAgICB1MzIoMCksICAgICAgICAgICAgICAgICAvLyBleHRlcm5hbCBhdHRycwogICAgICAgICAgdTMyKG9mZnNldCksICAgICAgICAgICAgLy8gbG9jYWwgaGVhZGVyIG9mZnNldAogICAgICAgICAgbmFtZUJ5dGVzCiAgICAgICAgXSk7CgogICAgICAgIGNlbnRyYWxQYXJ0cy5wdXNoKGNlbnRyYWxIZWFkZXIpOwoKICAgICAgICBvZmZzZXQgKz0gbG9jYWxIZWFkZXIubGVuZ3RoICsgZGF0YS5sZW5ndGg7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNlbnRyYWxEaXIgPSBjb25jYXRVaW50OChjZW50cmFsUGFydHMpOwogICAgICBjb25zdCBjZW50cmFsT2Zmc2V0ID0gb2Zmc2V0OwogICAgICBvZmZzZXQgKz0gY2VudHJhbERpci5sZW5ndGg7CgogICAgICAvLyBFbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkKICAgICAgY29uc3QgZW5kID0gY29uY2F0VWludDgoWwogICAgICAgIHUzMigweDA2MDU0YjUwKSwKICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBkaXNrCiAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gc3RhcnQgZGlzawogICAgICAgIHUxNihmaWxlcy5sZW5ndGgpLCAgICAgIC8vIGVudHJpZXMgb24gZGlzawogICAgICAgIHUxNihmaWxlcy5sZW5ndGgpLCAgICAgIC8vIHRvdGFsIGVudHJpZXMKICAgICAgICB1MzIoY2VudHJhbERpci5sZW5ndGgpLCAvLyBjZW50cmFsIGRpciBzaXplCiAgICAgICAgdTMyKGNlbnRyYWxPZmZzZXQpLCAgICAgLy8gY2VudHJhbCBkaXIgb2Zmc2V0CiAgICAgICAgdTE2KDApICAgICAgICAgICAgICAgICAgLy8gY29tbWVudCBsZW5ndGgKICAgICAgXSk7CgogICAgICBjb25zdCB6aXBCeXRlcyA9IGNvbmNhdFVpbnQ4KFsuLi5sb2NhbFBhcnRzLCBjZW50cmFsRGlyLCBlbmRdKTsKICAgICAgcmV0dXJuIG5ldyBCbG9iKFt6aXBCeXRlc10sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3ppcCcgfSk7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRLaXRaaXAoa2l0SWQpewogICAgICBjb25zdCBraXQgPSBnZXRLaXRCeUlkKGtpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKCiAgICAgIGNvbnN0IHBob3RvcyA9IChraXQucGhvdG9zIHx8IFtdKS5zbGljZSgpOwogICAgICBpZiAoIXBob3Rvcy5sZW5ndGgpewogICAgICAgIGFsZXJ0KCfQndC10YIg0YTQvtGC0L7Qs9GA0LDRhNC40Lkg0LTQu9GPINGB0LrQsNGH0LjQstCw0L3QuNGPLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gQnVpbGQgZmlsZSBsaXN0CiAgICAgIGNvbnN0IGZpbGVzID0gW107CiAgICAgIGxldCBpID0gMTsKICAgICAgZm9yIChjb25zdCBwIG9mIHBob3Rvcyl7CiAgICAgICAgdHJ5ewogICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGRhdGFVcmxUb0Jsb2IocC5zcmMpOwogICAgICAgICAgY29uc3QgZXh0ID0gKGJsb2IudHlwZSB8fCAnJykuaW5jbHVkZXMoJ3BuZycpID8gJ3BuZycKICAgICAgICAgICAgICAgICAgIDogKGJsb2IudHlwZSB8fCAnJykuaW5jbHVkZXMoJ3dlYnAnKSA/ICd3ZWJwJwogICAgICAgICAgICAgICAgICAgOiAoYmxvYi50eXBlIHx8ICcnKS5pbmNsdWRlcygnZ2lmJykgPyAnZ2lmJwogICAgICAgICAgICAgICAgICAgOiAnanBnJzsKICAgICAgICAgIGNvbnN0IG51bSA9IFN0cmluZyhpKyspLnBhZFN0YXJ0KDIsJzAnKTsKICAgICAgICAgIGZpbGVzLnB1c2goeyBuYW1lOiBgcGhvdG9fJHtudW19LiR7ZXh0fWAsIGJsb2IgfSk7CiAgICAgICAgfWNhdGNoKGVycil7fQogICAgICB9CgogICAgICBpZiAoIWZpbGVzLmxlbmd0aCl7CiAgICAgICAgYWxlcnQoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0L/QvtC00LPQvtGC0L7QstC40YLRjCDRhNC+0YLQvtCz0YDQsNGE0LjQuCDQtNC70Y8g0YHQutCw0YfQuNCy0LDQvdC40Y8uJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB6aXBCbG9iID0gYXdhaXQgbWFrZVppcChmaWxlcyk7CiAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGNvbnN0IHRpdGxlID0gc2FuaXRpemVGaWxlTmFtZShraXQudGl0bGUgfHwgJ2NvbnRlbnQnKTsKICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh6aXBCbG9iKTsKICAgICAgYS5kb3dubG9hZCA9IGAke3RpdGxlfS56aXBgOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICBhLmNsaWNrKCk7CiAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgfSwgMTAwMCk7CiAgICB9CgoKZnVuY3Rpb24gcmVuZGVyKCl7CiAgICAgIGZ1bmN0aW9uIHJlbmRlckxpc3QobGlzdCwgaG9zdEVsLCBtb2RlKXsKICAgICAgICBjb25zdCBpc0FyY2hpdmUgPSBtb2RlID09PSAnYXJjaGl2ZSc7CiAgICAgICAgaG9zdEVsLmlubmVySFRNTCA9IGxpc3QubWFwKGtpdCA9PiB7CiAgICAgICAgICBjb25zdCBlZGl0ID0gKCFpc0FyY2hpdmUpICYmIGlzRWRpdChraXQuaWQpOwogICAgICAgICAgY29uc3QgdXNlZENsYXNzID0ga2l0LnVzZWQgPyAnaXMtdXNlZCcgOiAnJzsKICAgICAgICAgIGNvbnN0IGVkaXRDbGFzcyA9IGVkaXQgPyAnaXMtZWRpdCcgOiAnJzsKCiAgICAgICAgICBjb25zdCB0aXRsZUF0dHIgPSBlZGl0ID8gJ2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSInIDogJyc7CiAgICAgICAgICBjb25zdCB0aXRsZURhdGEgPSBraXQudGl0bGUgfHwgJ9Cd0L7QstGL0Lkg0LrQvtC90YLQtdC90YInOwoKICAgICAgICAgIGNvbnN0IHRvdGFsID0ga2l0LnBob3Rvcy5sZW5ndGg7CiAgICAgICAgICBjb25zdCB1cGxvYWRlZCA9IGtpdC5jcmVhdGVkQXQgPyBraXQuY3JlYXRlZEF0IDogJ+KAlCc7CgogICAgICAgICAgLy8gSW4gYXJjaGl2ZTogbm8gYWRkLXBob3RvcyB0aWxlCiAgICAgICAgICBjb25zdCBwcmV2aWV3Tm9BZGQgPSBpc0FyY2hpdmUgPyB0cnVlIDogISFraXQudXNlZDsKCiAgICAgICAgICBjb25zdCBwaG90b1RpbGUgPSAocGhvdG8sIGdsb2JhbEluZGV4KSA9PiB7CiAgICAgICAgICAgIGlmICghcGhvdG8pIHJldHVybiBgPGRpdiBjbGFzcz0idGlsZSBpcy1lbXB0eSI+PC9kaXY+YDsKICAgICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aWxlIGlzLXBob3RvIiBkYXRhLWFjdGlvbj0ib3BlbiIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgZGF0YS1pbmRleD0iJHtnbG9iYWxJbmRleH0iPgogICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7cGhvdG8uc3JjfSIgYWx0PSLQpNC+0YLQviI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICB9OwoKICAgICAgICAgIGxldCByZW1haW5pbmcgPSAwOwogICAgICAgICAgbGV0IG1haW5QaG90b3MgPSBbXTsKICAgICAgICAgIGxldCBjb2xsYWdlUGhvdG9zID0gW107CiAgICAgICAgICBsZXQgbWFpbklkeEJhc2UgPSAwOwogICAgICAgICAgbGV0IGNvbGxhZ2VJZHhCYXNlID0gMDsKICAgICAgICAgIGxldCBmaXJzdENlbGxIdG1sID0gJyc7CgogICAgICAgICAgaWYgKHByZXZpZXdOb0FkZCl7CiAgICAgICAgICAgIC8vIFswXSBmaXJzdCBjZWxsIHBob3RvL2VtcHR5OyBbMS4uNF0gbWFpbjsgWzUuLjhdIGNvbGxhZ2UgKDkgdmlzaWJsZSkKICAgICAgICAgICAgZmlyc3RDZWxsSHRtbCA9IHBob3RvVGlsZShraXQucGhvdG9zWzBdIHx8IG51bGwsIDApOwogICAgICAgICAgICBtYWluUGhvdG9zID0ga2l0LnBob3Rvcy5zbGljZSgxLCA1KTsKICAgICAgICAgICAgY29sbGFnZVBob3RvcyA9IGtpdC5waG90b3Muc2xpY2UoNSwgOSk7CiAgICAgICAgICAgIHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGtpdC5waG90b3MubGVuZ3RoIC0gOSk7CiAgICAgICAgICAgIG1haW5JZHhCYXNlID0gMTsKICAgICAgICAgICAgY29sbGFnZUlkeEJhc2UgPSA1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gRGVmYXVsdCBtYWluIGxpc3Q6IGZpcnN0IGNlbGwgaXMgYWRkIHBob3RvcwogICAgICAgICAgICBmaXJzdENlbGxIdG1sID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZSBpcy1hZGQiIGRhdGEtYWN0aW9uPSJhZGQtcGhvdG9zIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0JTQvtCx0LDQstC40YLRjCDRhNC+0YLQviIgYXJpYS1sYWJlbD0i0JTQvtCx0LDQstC40YLRjCDRhNC+0YLQviI+CiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19JTUFHRV9BRER9PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIG1haW5QaG90b3MgPSBraXQucGhvdG9zLnNsaWNlKDAsIDQpOwogICAgICAgICAgICBjb2xsYWdlUGhvdG9zID0ga2l0LnBob3Rvcy5zbGljZSg0LCA4KTsKICAgICAgICAgICAgcmVtYWluaW5nID0gTWF0aC5tYXgoMCwga2l0LnBob3Rvcy5sZW5ndGggLSA4KTsKICAgICAgICAgICAgbWFpbklkeEJhc2UgPSAwOwogICAgICAgICAgICBjb2xsYWdlSWR4QmFzZSA9IDQ7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgY29sbGFnZUNlbGwgPSAocGhvdG8sIGdsb2JhbEluZGV4LCBpc0xhc3RDZWxsKSA9PiB7CiAgICAgICAgICAgIGlmICghcGhvdG8pIHJldHVybiBgPGRpdiBjbGFzcz0iY29sbGFnZS1jZWxsIGlzLWVtcHR5Ij48L2Rpdj5gOwogICAgICAgICAgICBjb25zdCBtb3JlID0gKGlzTGFzdENlbGwgJiYgcmVtYWluaW5nPjApID8gYDxkaXYgY2xhc3M9Im1vcmUtb3ZlcmxheSI+0JXRidC1ICR7cmVtYWluaW5nfTwvZGl2PmAgOiAnJzsKICAgICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xsYWdlLWNlbGwgaXMtcGhvdG8iIGRhdGEtYWN0aW9uPSJvcGVuIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiBkYXRhLWluZGV4PSIke2dsb2JhbEluZGV4fSI+CiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtwaG90by5zcmN9IiBhbHQ9ItCk0L7RgtC+Ij4KICAgICAgICAgICAgICAgICR7bW9yZX0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH07CgogICAgICAgICAgY29uc3QgW0EsQixDLERdID0gW21haW5QaG90b3NbMF18fG51bGwsIG1haW5QaG90b3NbMV18fG51bGwsIG1haW5QaG90b3NbMl18fG51bGwsIG1haW5QaG90b3NbM118fG51bGxdOwoKICAgICAgICAgIGNvbnN0IGNlbGxzID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7CiAgICAgICAgICAgIGNlbGxzLnB1c2goY29sbGFnZUNlbGwoY29sbGFnZVBob3Rvc1tpXSB8fCBudWxsLCBjb2xsYWdlSWR4QmFzZSArIGksIGkgPT09IDMpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgYWN0aW9uc0h0bWwgPSAnJzsKICAgICAgICAgIGlmIChpc0FyY2hpdmUpewogICAgICAgICAgICBhY3Rpb25zSHRtbCA9IGAKICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImFyY2hpdmUtZG93bmxvYWQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQodC60LDRh9Cw0YLRjCIgYXJpYS1sYWJlbD0i0KHQutCw0YfQsNGC0YwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0RPV05MT0FEfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImFyY2hpdmUtcmVzdG9yZSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgdGl0bGU9ItCS0LXRgNC90YPRgtGMIiBhcmlhLWxhYmVsPSLQktC10YDQvdGD0YLRjCDQuNC3INCw0YDRhdC40LLQsCI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+JHtTVkdfUkVTVE9SRX08L3NwYW4+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciIgZGF0YS1hY3Rpb249ImFyY2hpdmUtZGVsZXRlIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0KPQtNCw0LvQuNGC0YwiIGFyaWEtbGFiZWw9ItCj0LTQsNC70LjRgtGMINC90LDQstGB0LXQs9C00LAiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX1RSQVNIfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0gZWxzZSBpZiAoZWRpdCl7CiAgICAgICAgICAgIGFjdGlvbnNIdG1sID0gYAogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYW5nZXIiIGRhdGEtYWN0aW9uPSJkZWxldGUta2l0IiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0JIg0LDRgNGF0LjQsiIgYXJpYS1sYWJlbD0i0J/QtdGA0LXQvNC10YHRgtC40YLRjCDQsiDQsNGA0YXQuNCyIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19UUkFTSH08L3NwYW4+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIGA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhY3Rpb25zSHRtbCA9IGAKICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImRvd25sb2FkIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0KHQutCw0YfQsNGC0YwiIGFyaWEtbGFiZWw9ItCh0LrQsNGH0LDRgtGMIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19ET1dOTE9BRH08L3NwYW4+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsiIGRhdGEtYWN0aW9uPSJlZGl0IiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19FRElUfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCB1c2VkVGV4dCA9IGtpdC51c2VkCiAgICAgICAgICAgID8gYNCY0YHQv9C+0LvRjNC30L7QstCw0L3QvjogJHtraXQudXNlZERhdGUgfHwga2l0LmNyZWF0ZWRBdCB8fCBmb3JtYXREYXRlKG5ldyBEYXRlKCkpfWAKICAgICAgICAgICAgOiAn0JjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC+JzsKCiAgICAgICAgICBjb25zdCB1c2VkQ2hlY2tIdG1sID0gaXNBcmNoaXZlCiAgICAgICAgICAgID8gYDxkaXYgY2xhc3M9ImtpdC1jaGVjayI+JHtTVkdfQ0hFQ0t9PC9kaXY+YAogICAgICAgICAgICA6IGA8ZGl2IGNsYXNzPSJraXQtY2hlY2siIGRhdGEtYWN0aW9uPSJ0b2dnbGUtdXNlZCIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSI+JHtTVkdfQ0hFQ0t9PC9kaXY+YDsKCiAgICAgICAgICBjb25zdCBkcmFnSGFuZGxlSHRtbCA9IGlzQXJjaGl2ZQogICAgICAgICAgICA/ICcnCiAgICAgICAgICAgIDogYDxkaXYgY2xhc3M9ImtpdC1kcmFnLWhhbmRsZSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgdGl0bGU9ItCf0LXRgNC10YLQsNGJ0LjRgtGMIj48L2Rpdj5gOwoKICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC1jYXJkICR7dXNlZENsYXNzfSAke2VkaXRDbGFzc30iIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iPgogICAgICAgICAgICAgICR7ZHJhZ0hhbmRsZUh0bWx9CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LXRvcCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtdGl0bGUiICR7dGl0bGVBdHRyfSBkYXRhLWFjdGlvbj0idGl0bGUiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iPiR7ZXNjYXBlSHRtbCh0aXRsZURhdGEpfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWFjdGlvbnMiPiR7YWN0aW9uc0h0bWx9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC1kaXZpZGVyIj48L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LXVzZWQtcm93Ij4KICAgICAgICAgICAgICAgICR7dXNlZENoZWNrSHRtbH0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC11c2VkLXRleHQiPiR7dXNlZFRleHR9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC1ncmlkIj4KICAgICAgICAgICAgICAgICR7Zmlyc3RDZWxsSHRtbH0KICAgICAgICAgICAgICAgICR7cGhvdG9UaWxlKEEsIG1haW5JZHhCYXNlKzApfQogICAgICAgICAgICAgICAgJHtwaG90b1RpbGUoQiwgbWFpbklkeEJhc2UrMSl9CiAgICAgICAgICAgICAgICAke3Bob3RvVGlsZShDLCBtYWluSWR4QmFzZSsyKX0KICAgICAgICAgICAgICAgICR7cGhvdG9UaWxlKEQsIG1haW5JZHhCYXNlKzMpfQoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpbGUgaXMtY29sbGFnZSI+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbGxhZ2UtZ3JpZCI+JHtjZWxscy5qb2luKCcnKX08L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtZm9vdGVyIj4KICAgICAgICAgICAgICAgIDxkaXY+0JLRgdC10LPQviDRhNC+0YLQvjogJHt0b3RhbH08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+0JfQsNCz0YDRg9C20LXQvdC+OiAke3VwbG9hZGVkfTwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIGA7CiAgICAgICAgfSkuam9pbignJyk7CgogICAgICAgIGlmIChpc0FyY2hpdmUgJiYgbGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgaG9zdEVsLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJhcmNoaXZlLWVtcHR5LXRleHQiPtCSINCw0YDRhdC40LLQtSDQv9C+0LrQsCDQvdC40YfQtdCz0L4g0L3QtdGCPC9kaXY+YDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlbmRlckxpc3Qoa2l0cywga2l0c0VsLCAnbWFpbicpOwogICAgICByZW5kZXJMaXN0KGFyY2hpdmVkS2l0cywgYXJjaGl2ZUtpdHNFbCwgJ2FyY2hpdmUnKTsKICAgIH0KCgogICAgLyogPT09PT0gRVZFTlRTID09PT09ICovCgogICAgYWRkS2l0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGtpdHMucHVzaChjcmVhdGVLaXQoKSk7CiAgICAgIHJlbmRlcigpOwogICAgfSk7CgogICAgLy8gRGVsZWdhdGVkIGNsaWNrIGluc2lkZSBraXRzCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgY29uc3QgYWN0aW9uRWwgPSBlLnRhcmdldC5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJyk7CiAgICAgIGlmICghYWN0aW9uRWwpIHJldHVybjsKICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uRWwuZGF0YXNldC5hY3Rpb247CiAgICAgIGNvbnN0IGtpdElkID0gYWN0aW9uRWwuZGF0YXNldC5raXRJZDsKCiAgICAgIGlmIChhY3Rpb24gPT09ICdlZGl0Jyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBzZXRPbmx5T25lRWRpdChraXRJZCk7CiAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgY29uc3QgdGl0bGVFbCA9IGtpdHNFbC5xdWVyeVNlbGVjdG9yKGAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7a2l0SWR9Il0gLmtpdC10aXRsZWApOwogICAgICAgICAgaWYgKHRpdGxlRWwpewogICAgICAgICAgICB0aXRsZUVsLmZvY3VzKCk7CiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRpdGxlRWwpOwogICAgICAgICAgICByYW5nZS5jb2xsYXBzZShmYWxzZSk7CiAgICAgICAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpOwogICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpOwogICAgICAgICAgfQogICAgICAgIH0sMCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnZGVsZXRlLWtpdCcpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgaWYgKCFjb25maXJtKCfQn9C10YDQtdC80LXRgdGC0LjRgtGMINGN0YLQvtGCINC60L7QvdGC0LXQvdGCINCyINCw0YDRhdC40LI/JykpIHJldHVybjsKICAgICAgICBjb25zdCBpZHggPSBraXRzLmZpbmRJbmRleChrID0+IGsuaWQgPT09IGtpdElkKTsKICAgICAgICBpZiAoaWR4ICE9PSAtMSl7CiAgICAgICAgICBjb25zdCBba2l0XSA9IGtpdHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgICBraXQuYXJjaGl2ZWRBdCA9IGZvcm1hdERhdGUobmV3IERhdGUoKSk7CiAgICAgICAgICBhcmNoaXZlZEtpdHMudW5zaGlmdChraXQpOwogICAgICAgIH0KICAgICAgICBpZiAoa2l0cy5sZW5ndGggPT09IDApIGtpdHMgPSBbY3JlYXRlS2l0KCldOwogICAgICAgIGlmIChhY3RpdmVFZGl0S2l0SWQgPT09IGtpdElkKSBhY3RpdmVFZGl0S2l0SWQgPSBudWxsOwogICAgICAgIHJlbmRlcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2Rvd25sb2FkJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBkb3dubG9hZEtpdFppcChraXRJZCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAndG9nZ2xlLXVzZWQnKXsKICAgICAgICAvLyBUb2dnbGUgInVzZWQiIG9ubHkgaW4gZWRpdCBtb2RlIGZvciB0aGlzIGtpdAogICAgICAgIGlmIChhY3RpdmVFZGl0S2l0SWQgIT09IGtpdElkKSByZXR1cm47CiAgICAgICAgY29uc3Qga2l0ID0ga2l0cy5maW5kKGs9PmsuaWQ9PT1raXRJZCk7CiAgICAgICAgaWYgKCFraXQpIHJldHVybjsKICAgICAgICBraXQudXNlZCA9ICFraXQudXNlZDsKICAgICAgICBpZiAoa2l0LnVzZWQgJiYgIWtpdC51c2VkRGF0ZSl7CiAgICAgICAgICBraXQudXNlZERhdGUgPSBmb3JtYXREYXRlKG5ldyBEYXRlKCkpOwogICAgICAgIH0KICAgICAgICByZW5kZXIoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICdhZGQtcGhvdG9zJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBmaWxlSW5wdXQuZGF0YXNldC5raXRJZCA9IGtpdElkOwogICAgICAgIGZpbGVJbnB1dC5jbGljaygpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ29wZW4nKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoYWN0aW9uRWwuZGF0YXNldC5pbmRleCwxMCk7CiAgICAgICAgb3BlblZpZXdlcihraXRJZCwgaW5kZXgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSk7CgoKICAgIC8vIERlbGVnYXRlZCBjbGljayBpbnNpZGUgYXJjaGl2ZQogICAgYXJjaGl2ZUtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBjb25zdCBhY3Rpb25FbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKTsKICAgICAgaWYgKCFhY3Rpb25FbCkgcmV0dXJuOwogICAgICBjb25zdCBhY3Rpb24gPSBhY3Rpb25FbC5kYXRhc2V0LmFjdGlvbjsKICAgICAgY29uc3Qga2l0SWQgPSBhY3Rpb25FbC5kYXRhc2V0LmtpdElkOwoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FyY2hpdmUtZG93bmxvYWQnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGRvd25sb2FkS2l0WmlwKGtpdElkKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICdhcmNoaXZlLXJlc3RvcmUnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IGlkeCA9IGFyY2hpdmVkS2l0cy5maW5kSW5kZXgoayA9PiBrLmlkID09PSBraXRJZCk7CiAgICAgICAgaWYgKGlkeCAhPT0gLTEpewogICAgICAgICAgY29uc3QgW2tpdF0gPSBhcmNoaXZlZEtpdHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgICBraXRzLnVuc2hpZnQoa2l0KTsKICAgICAgICB9CiAgICAgICAgcmVuZGVyKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnYXJjaGl2ZS1kZWxldGUnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGlmICghY29uZmlybSgn0KPQtNCw0LvQuNGC0Ywg0Y3RgtC+0YIg0LrQvtC90YLQtdC90YIg0L3QsNCy0YHQtdCz0LTQsD8g0K3RgtC+INC00LXQudGB0YLQstC40LUg0L3QtdC70YzQt9GPINC+0YLQvNC10L3QuNGC0YwuJykpIHJldHVybjsKICAgICAgICBhcmNoaXZlZEtpdHMgPSBhcmNoaXZlZEtpdHMuZmlsdGVyKGsgPT4gay5pZCAhPT0ga2l0SWQpOwogICAgICAgIHJlbmRlcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ29wZW4nKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoYWN0aW9uRWwuZGF0YXNldC5pbmRleCwxMCk7CiAgICAgICAgb3BlblZpZXdlcihraXRJZCwgaW5kZXgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSk7CgogICAgLyogPT09PT0gRFJBRyAmIERST1AgVE8gQUREIFBIT1RPUyA9PT09PSAqLwogICAgZnVuY3Rpb24gZ2V0QWRkVGlsZUZyb21FdmVudFRhcmdldCh0YXJnZXQpewogICAgICBjb25zdCB0aWxlID0gdGFyZ2V0Py5jbG9zZXN0Py4oJy50aWxlLmlzLWFkZFtkYXRhLWFjdGlvbj0iYWRkLXBob3RvcyJdJyk7CiAgICAgIHJldHVybiB0aWxlIHx8IG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCBvbil7CiAgICAgIGlmICghdGlsZSkgcmV0dXJuOwogICAgICB0aWxlLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWRyYWdvdmVyJywgISFvbik7CiAgICB9CgogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpPT57CiAgICAgIGNvbnN0IHRpbGUgPSBnZXRBZGRUaWxlRnJvbUV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsKICAgICAgaWYgKCF0aWxlKSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCB0cnVlKTsKICAgIH0pOwoKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoZSk9PnsKICAgICAgY29uc3QgdGlsZSA9IGdldEFkZFRpbGVGcm9tRXZlbnRUYXJnZXQoZS50YXJnZXQpOwogICAgICBpZiAoIXRpbGUpIHJldHVybjsKICAgICAgaWYgKHRpbGUuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkgcmV0dXJuOwogICAgICBzZXRBZGRUaWxlRHJhZ1N0YXRlKHRpbGUsIGZhbHNlKTsKICAgIH0pOwoKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpPT57CiAgICAgIGNvbnN0IHRpbGUgPSBnZXRBZGRUaWxlRnJvbUV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsKICAgICAgaWYgKCF0aWxlKSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCBmYWxzZSk7CiAgICAgIGNvbnN0IGtpdElkID0gdGlsZS5kYXRhc2V0LmtpdElkOwogICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXI/LmZpbGVzIHx8IFtdKTsKICAgICAgaWYgKCFraXRJZCB8fCAhZmlsZXMubGVuZ3RoKSByZXR1cm47CiAgICAgIGF3YWl0IGFkZEZpbGVzVG9LaXQoa2l0SWQsIGZpbGVzKTsKICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKT0+ewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGlsZS5pcy1hZGQuaXMtZHJhZ292ZXInKS5mb3JFYWNoKGVsPT5lbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnb3ZlcicpKTsKICAgIH0pOwoKCiAgICAvLyBUaXRsZSBlZGl0aW5nOiByZW1lbWJlciBsYXN0IGZpdHRpbmcgdmFsdWUKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwogICAgICB0aXRsZUVsLmRhdGFzZXQucHJldlRpdGxlID0gdGl0bGVFbC50ZXh0Q29udGVudCB8fCAnJzsKICAgIH0pOwoKICAgIC8vIFRpdGxlIGVkaXRpbmc6IHN5bmMgb24gaW5wdXQsIHN0b3AgdHlwaW5nIHdoZW4gZWxsaXBzaXMgcmVhY2hlZAogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwoKICAgICAgLy8gTm9ybWFsaXplIGxpbmUgYnJlYWtzIHRvIHNwYWNlcwogICAgICBjb25zdCBub3JtYWxpemVkID0gKHRpdGxlRWwudGV4dENvbnRlbnQgfHwgJycpLnJlcGxhY2UoL1tcclxuXSsvZywgJyAnKTsKICAgICAgaWYgKG5vcm1hbGl6ZWQgIT09IHRpdGxlRWwudGV4dENvbnRlbnQpIHRpdGxlRWwudGV4dENvbnRlbnQgPSBub3JtYWxpemVkOwoKICAgICAgLy8gSWYgb3ZlcmZsb3cgLT4gcmV2ZXJ0IHRvIGxhc3QgZml0dGluZyB2YWx1ZSAoZWZmZWN0aXZlbHkgYmxvY2tzIGZ1cnRoZXIgdHlwaW5nKQogICAgICBjb25zdCBwcmV2ID0gdGl0bGVFbC5kYXRhc2V0LnByZXZUaXRsZSA/PyAnJzsKICAgICAgaWYgKHRpdGxlRWwuc2Nyb2xsV2lkdGggPiB0aXRsZUVsLmNsaWVudFdpZHRoICsgMSl7CiAgICAgICAgdGl0bGVFbC50ZXh0Q29udGVudCA9IHByZXY7CgogICAgICAgIC8vIGNhcmV0IHRvIGVuZAogICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGl0bGVFbCk7CiAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOwogICAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7CiAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRpdGxlRWwuZGF0YXNldC5wcmV2VGl0bGUgPSB0aXRsZUVsLnRleHRDb250ZW50OwoKICAgICAgY29uc3Qga2l0SWQgPSB0aXRsZUVsLmRhdGFzZXQua2l0SWQ7CiAgICAgIGNvbnN0IGtpdCA9IGtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpOwogICAgICBpZiAoIWtpdCkgcmV0dXJuOwogICAgICBraXQudGl0bGUgPSB0aXRsZUVsLnRleHRDb250ZW50LnRyaW0oKSB8fCAn0J3QvtCy0YvQuSDQutC+0L3RgtC10L3Rgic7CiAgICB9KTsKCgogICAgCiAgICAvLyBUaXRsZSBlZGl0aW5nOiBwcmV2ZW50IG5ldyBsaW5lczsgRW50ZXIgZmluaXNoZXMgZWRpdGluZwogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PnsKICAgICAgY29uc3QgdGl0bGVFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtdGl0bGVbY29udGVudGVkaXRhYmxlPSJ0cnVlIl0nKTsKICAgICAgaWYgKCF0aXRsZUVsKSByZXR1cm47CgogICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAvLyBmaW5hbGl6ZSB0aXRsZSB2YWx1ZQogICAgICAgIHRpdGxlRWwuYmx1cigpOwogICAgICAgIGV4aXRFZGl0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBQYXN0ZSBhcyBwbGFpbiB0ZXh0IChubyBsaW5lIGJyZWFrcykgaW50byB0aXRsZQogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCB0ZXh0ID0gKGUuY2xpcGJvYXJkRGF0YSB8fCB3aW5kb3cuY2xpcGJvYXJkRGF0YSkuZ2V0RGF0YSgndGV4dCcpIHx8ICcnOwogICAgICBjb25zdCBjbGVhbiA9IHRleHQucmVwbGFjZSgvW1xyXG5dKy9nLCAnICcpLnRyaW0oKTsKICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY2xlYW4pOwogICAgfSk7CgovLyBDbGljayBvdXRzaWRlOiBleGl0IGVkaXQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IGNsaWNrZWRJbnNpZGVLaXQgPSAhIWUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtY2FyZCcpOwogICAgICBjb25zdCBjbGlja2VkSW5zaWRlVmlld2VyID0gISFlLnRhcmdldC5jbG9zZXN0KCcudmlld2VyJyk7CiAgICAgIGlmICghY2xpY2tlZEluc2lkZUtpdCAmJiAhY2xpY2tlZEluc2lkZVZpZXdlciAmJiBhY3RpdmVFZGl0S2l0SWQpewogICAgICAgIHNldFRpbWVvdXQoKCk9PmV4aXRFZGl0KCksMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEV4aXQgZWRpdCBpbW1lZGlhdGVseSBpZiBjbGljayBhbm90aGVyIGtpdCBhcmVhCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpPT57CiAgICAgIGNvbnN0IGtpdENhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LWNhcmQnKTsKICAgICAgaWYgKCFraXRDYXJkKSByZXR1cm47CiAgICAgIGNvbnN0IGtpdElkID0ga2l0Q2FyZC5kYXRhc2V0LmtpdElkOwogICAgICBpZiAoYWN0aXZlRWRpdEtpdElkICYmIGFjdGl2ZUVkaXRLaXRJZCAhPT0ga2l0SWQpewogICAgICAgIGV4aXRFZGl0KCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEFkZCBpbWFnZSBmaWxlcyB0byBraXQgKHVzZWQgYnkgZmlsZSBpbnB1dCBhbmQgZHJhZyZkcm9wKQogICAgYXN5bmMgZnVuY3Rpb24gYWRkRmlsZXNUb0tpdChraXRJZCwgZmlsZXMpewogICAgICBjb25zdCBraXQgPSBraXRzLmZpbmQoaz0+ay5pZD09PWtpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKICAgICAgY29uc3QgaW1nRmlsZXMgPSAoZmlsZXN8fFtdKS5maWx0ZXIoZj0+ZiAmJiBmLnR5cGUgJiYgZi50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKTsKICAgICAgaWYgKCFpbWdGaWxlcy5sZW5ndGgpIHJldHVybjsKCiAgICAgIGNvbnN0IHRvRGF0YVVybCA9IChmaWxlKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+ewogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyLnJlc3VsdCk7CiAgICAgICAgci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIHIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgfSk7CgogICAgICBmb3IgKGNvbnN0IGYgb2YgaW1nRmlsZXMpewogICAgICAgIHRyeXsKICAgICAgICAgIGNvbnN0IHNyYyA9IGF3YWl0IHRvRGF0YVVybChmKTsKICAgICAgICAgIGtpdC5waG90b3MucHVzaCh7IGlkOiBTdHJpbmcoRGF0ZS5ub3coKSkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKSwgc3JjIH0pOwogICAgICAgIH1jYXRjaChlcnIpe30KICAgICAgfQogICAgICBraXQuY3JlYXRlZEF0ID0gZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoKSk7CiAgICAgIHJlbmRlcigpOwogICAgfQoKICAgIC8vIEZpbGUgaW5wdXQgbG9hZAogICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKT0+ewogICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMgfHwgW10pOwogICAgICBjb25zdCBraXRJZCA9IGZpbGVJbnB1dC5kYXRhc2V0LmtpdElkOwogICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJzsKICAgICAgaWYgKCFmaWxlcy5sZW5ndGggfHwgIWtpdElkKSByZXR1cm47CiAgICAgIGF3YWl0IGFkZEZpbGVzVG9LaXQoa2l0SWQsIGZpbGVzKTsKICAgIH0pOwoKLyogPT09PT0gVklFV0VSID09PT09ICovCiAgICBsZXQgd2hlZWxMb2NrID0gZmFsc2U7CiAgICBmdW5jdGlvbiBvblN0YWdlV2hlZWwoZSl7CiAgICAgIGlmICghdmlld2VyQmFja2Ryb3AuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHJldHVybjsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAod2hlZWxMb2NrKSByZXR1cm47CiAgICAgIHdoZWVsTG9jayA9IHRydWU7CiAgICAgIGNvbnN0IGRpciA9IGUuZGVsdGFZID4gMCA/IDEgOiAtMTsKICAgICAgc3RlcFZpZXdlcihkaXIpOwogICAgICBzZXRUaW1lb3V0KCgpPT57IHdoZWVsTG9jayA9IGZhbHNlOyB9LCA0NTApOwogICAgfQoKICAgIAogICAgZnVuY3Rpb24gbGF5b3V0Vmlld2VyTWFpbkluc2V0cygpewogICAgICAvLyBFbnN1cmUgdGhlIG1haW4gcGhvdG8gZnJhbWUga2VlcHMgMjBweCBnYXAgZnJvbSBjb3VudGVyIChsZWZ0KSBhbmQgY2xvc2UgYnV0dG9uIChyaWdodCkgb24gYW55IHNjcmVlbi4KICAgICAgdHJ5ewogICAgICAgIGNvbnN0IHN0YWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZXdlci1zdGFnZScpOwogICAgICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhZ2VNYWluJyk7CiAgICAgICAgY29uc3QgY291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJDb3VudGVyJyk7CiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyQ2xvc2UnKTsKICAgICAgICBpZighc3RhZ2UgfHwgIW1haW4pIHJldHVybjsKCiAgICAgICAgY29uc3QgcyA9IHN0YWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIGxldCBsZWZ0SW5zZXQgPSAyMDsgICAvLyBtaW5pbWFsIGluc2V0IGZyb20gc3RhZ2UgZWRnZSBpZiBjb3VudGVyIGlzIG1pc3NpbmcKICAgICAgICBsZXQgcmlnaHRJbnNldCA9IDIwOyAgLy8gbWluaW1hbCBpbnNldCBmcm9tIHN0YWdlIGVkZ2UgaWYgY2xvc2UgaXMgbWlzc2luZwoKICAgICAgICBpZihjb3VudGVyKXsKICAgICAgICAgIGNvbnN0IGMgPSBjb3VudGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgLy8gcGhvdG8gbGVmdCBzaG91bGQgYmUgY291bnRlcidzIHJpZ2h0ICsgMjAKICAgICAgICAgIGxlZnRJbnNldCA9IE1hdGgubWF4KGxlZnRJbnNldCwgKGMucmlnaHQgLSBzLmxlZnQpICsgMjApOwogICAgICAgIH0KCiAgICAgICAgaWYoY2xvc2VCdG4pewogICAgICAgICAgY29uc3QgYiA9IGNsb3NlQnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgLy8gcGhvdG8gcmlnaHQgc2hvdWxkIGJlIGNsb3NlJ3MgbGVmdCAtIDIwICA9PiByaWdodEluc2V0ID0gc3RhZ2VSaWdodCAtIChjbG9zZUxlZnQgLSAyMCkKICAgICAgICAgIHJpZ2h0SW5zZXQgPSBNYXRoLm1heChyaWdodEluc2V0LCAocy5yaWdodCAtIGIubGVmdCkgKyAyMCk7CiAgICAgICAgfQoKICAgICAgICBtYWluLnN0eWxlLnNldFByb3BlcnR5KCctLW1haW4tbGVmdCcsIGxlZnRJbnNldCArICdweCcpOwogICAgICAgIG1haW4uc3R5bGUuc2V0UHJvcGVydHkoJy0tbWFpbi1yaWdodCcsIHJpZ2h0SW5zZXQgKyAncHgnKTsKICAgICAgfWNhdGNoKGUpe30KICAgIH0KCmZ1bmN0aW9uIG9wZW5WaWV3ZXIoa2l0SWQsIGluZGV4KXsKICAgICAgY29uc3Qga2l0ID0gZ2V0S2l0QnlJZChraXRJZCk7CiAgICAgIGlmICgha2l0IHx8ICFraXQucGhvdG9zLmxlbmd0aCkgcmV0dXJuOwoKICAgICAgdmlld2VyS2l0SWQgPSBraXRJZDsKICAgICAgdmlld2VySW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCwga2l0LnBob3Rvcy5sZW5ndGgtMSkpOwogICAgICB2aWV3ZXJDYW5EZWxldGUgPSBpc0VkaXQoa2l0SWQpICYmIGlzS2l0SW5NYWluKGtpdElkKTsgLy8g0YTQuNC60YHQuNGA0YPQtdC8INGA0LXQttC40Lwg0LIg0LzQvtC80LXQvdGCINC+0YLQutGA0YvRgtC40Y8KCiAgICAgIHJlbmRlclZpZXdlcigpOwogICAgICB2aWV3ZXJCYWNrZHJvcC5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7CiAgICAgIGxheW91dFZpZXdlck1haW5JbnNldHMoKTsKICAgICAgLy8gY291bnRlciB0ZXh0L21ldHJpY3MgY2FuIGNoYW5nZSBhZnRlciByZW5kZXI7IHJlY2FsYyBvbiBuZXh0IGZyYW1lcwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PmxheW91dFZpZXdlck1haW5JbnNldHMoKSk7CiAgICAgIHNldFRpbWVvdXQoKCk9PmxheW91dFZpZXdlck1haW5JbnNldHMoKSwgNTApOwogICAgICAvLyBtYWtlIEVzYyBoYW5kbGluZyBtb3JlIHJlbGlhYmxlCiAgICAgIHRyeXsgdmlld2VyQmFja2Ryb3AuZm9jdXMoKTsgfWNhdGNoKGUpe30KICAgICAgdmlld2VyQmFja2Ryb3Auc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsJ2ZhbHNlJyk7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd2aWV3ZXItb3BlbicpOwogICAgICBzeW5jUmFpbEJ1dHRvbnMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVZpZXdlcigpewogICAgICB2aWV3ZXJCYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7CiAgICAgIHZpZXdlckJhY2tkcm9wLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCd0cnVlJyk7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJzsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd2aWV3ZXItb3BlbicpOwogICAgICB2aWV3ZXJLaXRJZCA9IG51bGw7CiAgICAgIHZpZXdlckluZGV4ID0gMDsKICAgICAgdmlld2VyQ2FuRGVsZXRlID0gZmFsc2U7CiAgICAgIHZpZXdlclRodW1icy5pbm5lckhUTUwgPSAnJzsKICAgICAgdHJ5eyBkZWxldGUgdmlld2VyVGh1bWJzLmRhdGFzZXQua2l0SWQ7IH1jYXRjaChlKXt9CiAgICAgIGlmICh0eXBlb2YgdGh1bWJzU2Nyb2xsVGltZXIgIT09ICd1bmRlZmluZWQnICYmIHRodW1ic1Njcm9sbFRpbWVyKXsgY2xlYXJUaW1lb3V0KHRodW1ic1Njcm9sbFRpbWVyKTsgdGh1bWJzU2Nyb2xsVGltZXIgPSBudWxsOyB9CiAgICAgIHZpZXdlckltZy5zcmMgPSAnJzsKICAgIH0KCiAgICBsZXQgdGh1bWJzU2Nyb2xsVGltZXIgPSBudWxsOwoKZnVuY3Rpb24gYnVpbGRWaWV3ZXJUaHVtYnMocGhvdG9zKXsKICB2aWV3ZXJUaHVtYnMuaW5uZXJIVE1MID0gcGhvdG9zLm1hcCgocCwgaSk9PmAKICAgIDxkaXYgY2xhc3M9InRodW1iIiBkYXRhLWluZGV4PSIke2l9Ij4KICAgICAgPGltZyBzcmM9IiR7cC5zcmN9IiBhbHQ9ItCc0LjQvdC40LDRgtGO0YDQsCI+CiAgICA8L2Rpdj4KICBgKS5qb2luKCcnKTsKICB2aWV3ZXJUaHVtYnMuZGF0YXNldC5raXRJZCA9IHZpZXdlcktpdElkIHx8ICcnOwp9CgpmdW5jdGlvbiBzZXRBY3RpdmVUaHVtYihpZHgpewogIGNvbnN0IHByZXYgPSB2aWV3ZXJUaHVtYnMucXVlcnlTZWxlY3RvcignLnRodW1iLmFjdGl2ZScpOwogIGlmIChwcmV2KSBwcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwoKICBjb25zdCBuZXh0ID0gdmlld2VyVGh1bWJzLnF1ZXJ5U2VsZWN0b3IoYC50aHVtYltkYXRhLWluZGV4PSIke2lkeH0iXWApOwogIGlmIChuZXh0KSBuZXh0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwoKICBjbGVhclRpbWVvdXQodGh1bWJzU2Nyb2xsVGltZXIpOwogIHRodW1ic1Njcm9sbFRpbWVyID0gc2V0VGltZW91dCgoKT0+ewogICAgY29uc3QgYWN0aXZlID0gdmlld2VyVGh1bWJzLnF1ZXJ5U2VsZWN0b3IoJy50aHVtYi5hY3RpdmUnKTsKICAgIGlmIChhY3RpdmUpIGFjdGl2ZS5zY3JvbGxJbnRvVmlldyh7YmxvY2s6J25lYXJlc3QnLCBiZWhhdmlvcjonc21vb3RoJ30pOwogICAgc3luY1JhaWxCdXR0b25zKCk7CiAgfSwgMTQwKTsKfQoKZnVuY3Rpb24gcmVuZGVyVmlld2VyKCl7CiAgY29uc3Qga2l0ID0gZ2V0S2l0QnlJZCh2aWV3ZXJLaXRJZCk7CiAgaWYgKCFraXQpIHJldHVybjsKICBjb25zdCBwaG90b3MgPSBraXQucGhvdG9zOwogIGlmICghcGhvdG9zLmxlbmd0aCl7IGNsb3NlVmlld2VyKCk7IHJldHVybjsgfQoKICB2aWV3ZXJJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHZpZXdlckluZGV4LCBwaG90b3MubGVuZ3RoLTEpKTsKICB2aWV3ZXJJbWcuc3JjID0gcGhvdG9zW3ZpZXdlckluZGV4XS5zcmM7CiAgdmlld2VyQ291bnRlci50ZXh0Q29udGVudCA9IGAke3ZpZXdlckluZGV4KzF9LyR7cGhvdG9zLmxlbmd0aH1gOwogIGxheW91dFZpZXdlck1haW5JbnNldHMoKTsKICB2aWV3ZXJEZWxldGVCdG4uc3R5bGUuZGlzcGxheSA9IHZpZXdlckNhbkRlbGV0ZSA/ICdmbGV4JyA6ICdub25lJzsKCiAgLy8gQnVpbGQgdGh1bWJzIG9ubHkgd2hlbiBvcGVuaW5nIHZpZXdlciAvIHN3aXRjaGluZyBraXQgLyBwaG90byBjb3VudCBjaGFuZ2VkCiAgaWYgKHZpZXdlclRodW1icy5kYXRhc2V0LmtpdElkICE9PSBTdHJpbmcodmlld2VyS2l0SWQpIHx8IHZpZXdlclRodW1icy5jaGlsZHJlbi5sZW5ndGggIT09IHBob3Rvcy5sZW5ndGgpewogICAgYnVpbGRWaWV3ZXJUaHVtYnMocGhvdG9zKTsKICB9CgogIHNldEFjdGl2ZVRodW1iKHZpZXdlckluZGV4KTsKfQoKZnVuY3Rpb24gc3RlcFZpZXdlcihkZWx0YSl7CiAgICAgIGNvbnN0IGtpdCA9IGdldEtpdEJ5SWQodmlld2VyS2l0SWQpOwogICAgICBpZiAoIWtpdCkgcmV0dXJuOwoKICAgICAgY29uc3QgbGVuID0ga2l0LnBob3Rvcy5sZW5ndGg7CiAgICAgIGlmIChsZW4gPD0gMSkgcmV0dXJuOwoKICAgICAgdmlld2VySW5kZXggPSAodmlld2VySW5kZXggKyBkZWx0YSArIGxlbikgJSBsZW47CiAgICAgIHJlbmRlclZpZXdlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bmNSYWlsQnV0dG9ucygpewogICAgICBjb25zdCBlbCA9IHZpZXdlclRodW1iczsKICAgICAgLy8gc21hbGwgdG9sZXJhbmNlCiAgICAgIGNvbnN0IGF0VG9wID0gZWwuc2Nyb2xsVG9wIDw9IDI7CiAgICAgIGNvbnN0IGF0Qm90dG9tID0gKGVsLnNjcm9sbFRvcCArIGVsLmNsaWVudEhlaWdodCkgPj0gKGVsLnNjcm9sbEhlaWdodCAtIDIpOwogICAgICByYWlsVXAuZGlzYWJsZWQgPSBhdFRvcDsKICAgICAgcmFpbERvd24uZGlzYWJsZWQgPSBhdEJvdHRvbTsKICAgIH0KCiAgICB2aWV3ZXJUaHVtYnMuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc3luY1JhaWxCdXR0b25zKTsKCiAgICByYWlsVXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgdmlld2VyVGh1bWJzLnNjcm9sbEJ5KHt0b3A6IC0yMjAsIGJlaGF2aW9yOiAnc21vb3RoJ30pOwogICAgfSk7CiAgICByYWlsRG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB2aWV3ZXJUaHVtYnMuc2Nyb2xsQnkoe3RvcDogMjIwLCBiZWhhdmlvcjogJ3Ntb290aCd9KTsKICAgIH0pOwoKICAgIHZpZXdlckNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGNsb3NlVmlld2VyKCk7IH0pOwoKICAgIHZpZXdlckJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIC8vINC60LvQuNC6INC/0L4g0YHQtdGA0L7QvNGDINGE0L7QvdGDINC30LDQutGA0YvQstCw0LXRggogICAgICBpZiAoZS50YXJnZXQgPT09IHZpZXdlckJhY2tkcm9wKSBjbG9zZVZpZXdlcigpOwogICAgfSk7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PnsKICAgICAgaWYgKCF2aWV3ZXJCYWNrZHJvcC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuOwogICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBjbG9zZVZpZXdlcigpOyB9CiAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcpeyBlLnByZXZlbnREZWZhdWx0KCk7IHN0ZXBWaWV3ZXIoLTEpOyB9CiAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93UmlnaHQnKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzdGVwVmlld2VyKDEpOyB9CiAgICAKICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcpeyBlLnByZXZlbnREZWZhdWx0KCk7IHN0ZXBWaWV3ZXIoLTEpOyB9CiAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpeyBlLnByZXZlbnREZWZhdWx0KCk7IHN0ZXBWaWV3ZXIoMSk7IH0KfSk7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpPT57CiAgICAgIGlmICghdmlld2VyQmFja2Ryb3AuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHJldHVybjsKICAgICAgbGF5b3V0Vmlld2VyTWFpbkluc2V0cygpOwogICAgICAvLyBjb3VudGVyIHRleHQvbWV0cmljcyBjYW4gY2hhbmdlIGFmdGVyIHJlbmRlcjsgcmVjYWxjIG9uIG5leHQgZnJhbWVzCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+bGF5b3V0Vmlld2VyTWFpbkluc2V0cygpKTsKICAgICAgc2V0VGltZW91dCgoKT0+bGF5b3V0Vmlld2VyTWFpbkluc2V0cygpLCA1MCk7CiAgICB9KTsKCgogICAgc3RhZ2VTdGFjay5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uU3RhZ2VXaGVlbCwge3Bhc3NpdmU6ZmFsc2V9KTsKCiAgICB2aWV3ZXJUaHVtYnMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgY29uc3QgdGh1bWIgPSBlLnRhcmdldC5jbG9zZXN0KCcudGh1bWInKTsKICAgICAgaWYgKCF0aHVtYikgcmV0dXJuOwogICAgICBjb25zdCBpZHggPSBwYXJzZUludCh0aHVtYi5kYXRhc2V0LmluZGV4LDEwKTsKICAgICAgdmlld2VySW5kZXggPSBpZHg7CiAgICAgIHJlbmRlclZpZXdlcigpOwogICAgfSk7CgogICAgLy8gRGVsZXRlIGN1cnJlbnQgcGhvdG8gKHZpZXdlciBvbmx5LCBvbmx5IGlmIG9wZW5lZCBmcm9tIGVkaXQtbW9kZSkKICAgIHZpZXdlckRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBpZiAoIXZpZXdlckNhbkRlbGV0ZSkgcmV0dXJuOwoKICAgICAgY29uc3Qga2l0ID0gZ2V0S2l0QnlJZCh2aWV3ZXJLaXRJZCk7CiAgICAgIGlmICgha2l0KSByZXR1cm47CgogICAgICAKCiAgICAgIGlmICghY29uZmlybSgn0KPQtNCw0LvQuNGC0Ywg0YTQvtGC0L4/INCt0YLQviDQtNC10LnRgdGC0LLQuNC1INC90LXQu9GM0LfRjyDQvtGC0LzQtdC90LjRgtGMLicpKSByZXR1cm47CgogICAgICBraXQucGhvdG9zLnNwbGljZSh2aWV3ZXJJbmRleCwxKTsKICAgICAgaWYgKGtpdC5waG90b3MubGVuZ3RoID09PSAwKXsKICAgICAgICBraXQuY3JlYXRlZEF0ID0gbnVsbDsKICAgICAgICBjbG9zZVZpZXdlcigpOwogICAgICB9ZWxzZXsKICAgICAgICB2aWV3ZXJJbmRleCA9IE1hdGgubWluKHZpZXdlckluZGV4LCBraXQucGhvdG9zLmxlbmd0aC0xKTsKICAgICAgICBraXQuY3JlYXRlZEF0ID0gZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoKSk7CiAgICAgICAgcmVuZGVyVmlld2VyKCk7CiAgICAgIH0KICAgICAgcmVuZGVyKCk7IC8vIHVwZGF0ZSBjb3VudHMvZ3JpZAogICAgfSk7CgoKICAgIC8qID09PT09IEVESVQgTU9ERSBFWElUIFVYID09PT09ICovCiAgICAvLyBFeGl0IGVkaXQgb24gRXNjCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpPT57CiAgICAgIGlmIChlLmtleSAhPT0gJ0VzY2FwZScpIHJldHVybjsKICAgICAgaWYgKCFhY3RpdmVFZGl0S2l0SWQpIHJldHVybjsKICAgICAgLy8gZG9uJ3QgaW50ZXJmZXJlIHdpdGggdmlld2VyIGNvbnRyb2xzIGlmIG5lZWRlZAogICAgICBleGl0RWRpdCgpOwogICAgfSk7CgogICAgLy8gRXhpdCBlZGl0IHdoZW4gY2xpY2tpbmcgb3V0c2lkZSBhbGxvd2VkIGFyZWFzIG9mIHRoZSBhY3RpdmUgY2FyZAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAoZSk9PnsKICAgICAgaWYgKCFhY3RpdmVFZGl0S2l0SWQpIHJldHVybjsKCiAgICAgIC8vIEFsbG93IGNsaWNraW5nIGFjdGlvbiBidXR0b25zIGluc2lkZSB0aGUgYWN0aXZlIGNhcmQgKGVkaXQvZGVsZXRlL2Rvd25sb2FkIGV0Yy4pCiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KGAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdIC5raXQtYWN0aW9uc2ApKSByZXR1cm47CgogICAgICAvLyBJZiB2aWV3ZXIgaXMgb3BlbiwgaWdub3JlIG91dHNpZGUgY2xpY2tzICh2aWV3ZXIgb3ZlcmxheSBoYW5kbGVzIGl0c2VsZikKICAgICAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckJhY2tkcm9wJyk7CiAgICAgIGlmICh2aWV3ZXIgJiYgdmlld2VyLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSByZXR1cm47CgogICAgICBjb25zdCBjYXJkID0ga2l0c0VsLnF1ZXJ5U2VsZWN0b3IoYC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il1gKTsKICAgICAgaWYgKCFjYXJkKSByZXR1cm47CgogICAgICBjb25zdCBhbGxvd2VkID0gZS50YXJnZXQuY2xvc2VzdCgKICAgICAgICBgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWdyaWQsCiAgICAgICAgIC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il0gLmtpdC10aXRsZSwKICAgICAgICAgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWNoZWNrLAogICAgICAgICAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdIC5raXQtZHJhZy1oYW5kbGVgCiAgICAgICk7CgogICAgICBpZiAoIWFsbG93ZWQpewogICAgICAgIGV4aXRFZGl0KCk7CiAgICAgIH0KICAgIH0sIHRydWUpOwoKCgoKICAgIC8qID09PT09IERyYWcgcmVvcmRlciAoc3RhYmxlIGlQaG9uZS1saWtlKSA9PT09PSAqLwogICAgKGZ1bmN0aW9uIHNldHVwRHJhZ1Jlb3JkZXIoKXsKICAgICAgLyoqCiAgICAgICAqIENlbnRlci1iYXNlZCBzdGFibGUgZ3JpZCByZW9yZGVyaW5nIChTcHJpbmdCb2FyZC1pc2gg4oCcY2VudGVycyBkZWNpZGXigJ0pLgogICAgICAgKgogICAgICAgKiBHb2FsczoKICAgICAgICogLSBUYXJnZXQgcG9zaXRpb24gaXMgZGVyaXZlZCBmcm9tIHRoZSBkcmFnZ2VkIENBUkQgKGl0cyBjZW50ZXIpLCBub3QgdGhlIGN1cnNvci4KICAgICAgICogLSBPdGhlciBjYXJkcyDigJxkZWNpZGXigJ0gc2hpZnRzIGJ5IGNvbXBhcmluZyBjZW50ZXJzIChyb3ctbWFqb3Igb3JkZXIpLgogICAgICAgKiAtIFNpbmdsZSBwbGFjZWhvbGRlciAo4oCcaG9sZeKAnSkgcmVwcmVzZW50cyB0aGUgaW5zZXJ0aW9uIHNsb3QuCiAgICAgICAqIC0gQW50aS1qaXR0ZXI6IHJBRiBiYXRjaGluZyArIGNvb2xkb3duICsgaHlzdGVyZXNpcyArIHNtYWxsIGRlYWQtem9uZSBhcm91bmQgY2VudGVycy4KICAgICAgICoKICAgICAgICogTW9kZWw6CiAgICAgICAqIDEpIExpZnQgZHJhZ2dlZCBjYXJkIGludG8gb3ZlcmxheSAocG9zaXRpb246Zml4ZWQgaW4gPGJvZHk+KQogICAgICAgKiAyKSBMZWF2ZSBwbGFjZWhvbGRlciBpbiBncmlkIGF0IG9yaWdpbmFsIHBvc2l0aW9uCiAgICAgICAqIDMpIFdoaWxlIGRyYWdnaW5nLCBjb21wdXRlIGRyYWdnZWQgY2VudGVyOyBjb21wdXRlIGNsb3Nlc3QgY2FyZCBjZW50ZXI7IGRlY2lkZQogICAgICAgKiAgICB3aGV0aGVyIGhvbGUgc2hvdWxkIGJlIGJlZm9yZSBvciBhZnRlciB0aGF0IGNhcmQgKGJ5IGNlbnRlcnMpLCB0aGVuIG1vdmUgcGxhY2Vob2xkZXIuCiAgICAgICAqIDQpIE9uIGRyb3AsIGluc2VydCBjYXJkIGF0IHBsYWNlaG9sZGVyLgogICAgICAgKi8KICAgICAgY29uc3QgZ3JpZCA9IGtpdHNFbDsgLy8gI2tpdHMKICAgICAgaWYgKCFncmlkKSByZXR1cm47CgogICAgICAvLyAtLS0tIFR1bmluZyBrbm9icyAtLS0tCiAgICAgIGNvbnN0IEFVVE9TQ1JPTExfTUFSR0lOID0gNjA7IC8vIHB4IGZyb20gdmlld3BvcnQgZWRnZQogICAgICBjb25zdCBBVVRPU0NST0xMX01BWCA9IDIyOyAgICAvLyBweCBwZXIgZnJhbWUKCiAgICAgIC8vIE1vdmUgcG9saWN5IChhbnRpLWppdHRlcik6IGFsbG93IG1vdmVzLCBidXQgbmV2ZXIgImNoYXR0ZXIiCiAgICAgIGNvbnN0IE1PVkVfQ09PTERPV05fTVMgPSA5MDsgIC8vIG1pbiB0aW1lIGJldHdlZW4gaG9sZSBtb3ZlcwogICAgICBjb25zdCBNT1ZFX0hZU1RfUFggPSAxMjsgICAgICAvLyBtaW4gY2VudGVyIHRyYXZlbCBiZXR3ZWVuIG1vdmVzCgogICAgICAvLyBNaWxkIHNtb290aGluZyBvZiB0aGUgZHJhZ2dlZCBjYXJkIChhZGRzIGEgc21hbGwgZGVsYXkgc28gdGhlIGZpbmdlci9jdXJzb3IgZG9lc24ndCAidGVsZXBvcnQiIHRoZSBjYXJkKQogICAgICBjb25zdCBEUkFHX0VBU0UgPSAwLjM1OyAgICAgICAvLyAwLi4xIChoaWdoZXIgPSBzbmFwcGllcikKCiAgICAgIC8vIFBsYW5uaW5nICsgY29tbWl0IHBvbGljeSAocHJlLXBsYW4gdGFyZ2V0LCBjb21taXQgb25seSB3aGVuIG92ZXJsYXAgaXMgc3Ryb25nKQogICAgICBjb25zdCBQTEFOX1RSSUdHRVIgPSAwLjIwOyAgICAgICAvLyBzdGFydCAicGxhbm5pbmciIG9uY2Ugb3ZlcmxhcCBpcyBub3RpY2VhYmxlCiAgICAgIGNvbnN0IFBMQU5fU1RBQkxFX01TID0gOTA7ICAgICAgIC8vIGNhbmRpZGF0ZSBtdXN0IGJlIHN0YWJsZSB0aGlzIGxvbmcgdG8gYmVjb21lIHRoZSBwbGFuCiAgICAgIGNvbnN0IFBMQU5fU1dJVENIX0hZU1QgPSAwLjEyOyAgIC8vIHN3aXRjaCBwbGFuIG9ubHkgaWYgbmV3IGlzIGJldHRlciBieSB0aGlzIG1hcmdpbgogICAgICBjb25zdCBQTEFOX0RST1AgPSAwLjA4OyAgICAgICAgICAvLyBkcm9wIHBsYW4gaWYgb3ZlcmxhcCBmYWxscyBiZWxvdyB0aGlzCgogICAgICBjb25zdCBDT01NSVRfVFJJR0dFUiA9IDAuODA7ICAgICAvLyA4MCUgb3ZlcmxhcCA9PiBtb3ZlIHBsYWNlaG9sZGVyICh5b3VyICJkZWNpc2lvbiBwb2ludCIpCiAgICAgIGNvbnN0IENPTU1JVF9TVEFCTEVfTVMgPSA4MDsgICAgIC8vIGtlZXAgPj0gODAlIG92ZXJsYXAgZm9yIHRoaXMgbG9uZyBiZWZvcmUgbW92aW5nCiAgICAgIGNvbnN0IExPQ0tfQUZURVJfTU9WRV9NUyA9IDE2MDsgIC8vIGFmdGVyIGEgbW92ZSwgZnJlZXplIHJlLXBsYW5uaW5nIGJyaWVmbHkgKHByZXZlbnRzIHBpbmctcG9uZykKCiAgICAgIC8vIENhbmRpZGF0ZSBzdGlja2luZXNzOiBrZWVwIHByZXZpb3VzIGJlc3QgdW5sZXNzIHRoZSBuZXcgb25lIGlzIGNsZWFybHkgYmV0dGVyCiAgICAgIGNvbnN0IE9WRVJMQVBfSFlTVCA9IDAuMTA7CgogICAgICAvLyBTbWFsbCBsb29rLWFoZWFkIHVzaW5nIGNhcmQgdmVsb2NpdHkgKHN0aWxsICJmcm9tIHRoZSBjYXJkIiwgbm90IGZyb20gY3Vyc29yKQogICAgICBjb25zdCBQUkVESUNUX01TID0gOTA7ICAgICAgICAvLyBtcyBhaGVhZAoKICAgICAgY29uc3QgUk9XX0JBTkRfRlJBQyA9IDAuNDg7ICAgIC8vIHNhbWUgcm93IGlmIHxkeXwgPCBtZWRpYW5IICogZnJhYwogICAgICBjb25zdCBDRU5URVJfREVBRF9GUkFDID0gMC4wODsgLy8gZGVhZC16b25lIGFyb3VuZCB0YXJnZXQgY2VudGVyIChmcmFjdGlvbiBvZiB3L2gpCgogICAgICBsZXQgZHJhZyA9IG51bGw7CiAgICAgIGxldCByYWZJZCA9IDA7CgogICAgICBmdW5jdGlvbiBweChuKXsgcmV0dXJuIE1hdGgucm91bmQobikgKyAncHgnOyB9CgogICAgICBmdW5jdGlvbiB2aWV3cG9ydEF1dG9TY3JvbGwoY2xpZW50WCwgY2xpZW50WSl7CiAgICAgICAgY29uc3QgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgICBsZXQgdnkgPSAwLCB2eCA9IDA7CgogICAgICAgIGlmIChjbGllbnRZIDwgQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnkgPSAtQVVUT1NDUk9MTF9NQVggKiAoMSAtIGNsaWVudFkgLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfSBlbHNlIGlmIChjbGllbnRZID4gdmggLSBBVVRPU0NST0xMX01BUkdJTil7CiAgICAgICAgICB2eSA9IEFVVE9TQ1JPTExfTUFYICogKDEgLSAodmggLSBjbGllbnRZKSAvIEFVVE9TQ1JPTExfTUFSR0lOKTsKICAgICAgICB9CgogICAgICAgIGlmIChjbGllbnRYIDwgQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnggPSAtQVVUT1NDUk9MTF9NQVggKiAoMSAtIGNsaWVudFggLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfSBlbHNlIGlmIChjbGllbnRYID4gdncgLSBBVVRPU0NST0xMX01BUkdJTil7CiAgICAgICAgICB2eCA9IEFVVE9TQ1JPTExfTUFYICogKDEgLSAodncgLSBjbGllbnRYKSAvIEFVVE9TQ1JPTExfTUFSR0lOKTsKICAgICAgICB9CgogICAgICAgIGlmICh2eCB8fCB2eSkgd2luZG93LnNjcm9sbEJ5KHZ4LCB2eSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG1ha2VQbGFjZWhvbGRlcihmcm9tQ2FyZCl7CiAgICAgICAgY29uc3QgcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwaC5jbGFzc05hbWUgPSAna2l0LXBsYWNlaG9sZGVyJzsKICAgICAgICBjb25zdCByID0gZnJvbUNhcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgcGguc3R5bGUuaGVpZ2h0ID0gcHgoci5oZWlnaHQpOwogICAgICAgIHBoLnN0eWxlLm1pbkhlaWdodCA9IHB4KHIuaGVpZ2h0KTsKICAgICAgICBwaC5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICBwaC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgIHJldHVybiBwaDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbmV4dENhcmRBZnRlcihub2RlKXsKICAgICAgICBsZXQgbiA9IG5vZGUgPyBub2RlLm5leHRFbGVtZW50U2libGluZyA6IG51bGw7CiAgICAgICAgd2hpbGUgKG4gJiYgIW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdraXQtY2FyZCcpKSBuID0gbi5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGlzUGxhY2Vob2xkZXJBdEVuZCgpewogICAgICAgIGNvbnN0IHJlZiA9IG5leHRDYXJkQWZ0ZXIoZHJhZz8ucGxhY2Vob2xkZXIpOwogICAgICAgIHJldHVybiAhcmVmOwogICAgICB9CgogICAgICBmdW5jdGlvbiBmbGlwQW5pbWF0ZUFmdGVyRE9NQ2hhbmdlKGRvQ2hhbmdlKXsKICAgICAgICBjb25zdCBmaXJzdCA9IG5ldyBNYXAoKTsKICAgICAgICBncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCwgLmtpdC1wbGFjZWhvbGRlcicpLmZvckVhY2gobiA9PiBmaXJzdC5zZXQobiwgbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkpOwoKICAgICAgICBkb0NoYW5nZSgpOwoKICAgICAgICBjb25zdCBsYXN0ID0gbmV3IE1hcCgpOwogICAgICAgIGdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmtpdC1jYXJkLCAua2l0LXBsYWNlaG9sZGVyJykuZm9yRWFjaChuID0+IGxhc3Quc2V0KG4sIG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpKTsKCiAgICAgICAgbGFzdC5mb3JFYWNoKChsciwgbm9kZSk9PnsKICAgICAgICAgIGNvbnN0IGZyID0gZmlyc3QuZ2V0KG5vZGUpOwogICAgICAgICAgaWYgKCFmcikgcmV0dXJuOwogICAgICAgICAgY29uc3QgZHggPSBmci5sZWZ0IC0gbHIubGVmdDsKICAgICAgICAgIGNvbnN0IGR5ID0gZnIudG9wIC0gbHIudG9wOwogICAgICAgICAgaWYgKGR4IHx8IGR5KXsKICAgICAgICAgICAgbm9kZS5hbmltYXRlKFsKICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2R4fXB4LCAke2R5fXB4KWAgfSwKICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLDApJyB9CiAgICAgICAgICAgIF0sIHsgZHVyYXRpb246IDIyMCwgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKC4yLC44NSwuMiwxKScgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGdldERyYWdUb3BMZWZ0KCl7CiAgICAgICAgLy8gS2VlcCBvdmVybGF5IGNhcmQgdW5kZXIgcG9pbnRlciB3aXRoIGZpeGVkIGdyYWIgb2Zmc2V0LCBidXQgc21vb3RoIGEgYml0IHRvIHJlZHVjZSBqaXR0ZXIuCiAgICAgICAgY29uc3QgdGFyZ2V0VG9wID0gZHJhZy5sYXN0Q2xpZW50WSAtIGRyYWcuZ3JhYkR5OwogICAgICAgIGNvbnN0IHRhcmdldExlZnQgPSBkcmFnLmxhc3RDbGllbnRYIC0gZHJhZy5ncmFiRHg7CgogICAgICAgIGlmIChkcmFnLl9zbW9vdGhUb3AgPT0gbnVsbCl7CiAgICAgICAgICBkcmFnLl9zbW9vdGhUb3AgPSB0YXJnZXRUb3A7CiAgICAgICAgICBkcmFnLl9zbW9vdGhMZWZ0ID0gdGFyZ2V0TGVmdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZHJhZy5fc21vb3RoVG9wICs9ICh0YXJnZXRUb3AgLSBkcmFnLl9zbW9vdGhUb3ApICogRFJBR19FQVNFOwogICAgICAgICAgZHJhZy5fc21vb3RoTGVmdCArPSAodGFyZ2V0TGVmdCAtIGRyYWcuX3Ntb290aExlZnQpICogRFJBR19FQVNFOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsgdG9wOiBkcmFnLl9zbW9vdGhUb3AsIGxlZnQ6IGRyYWcuX3Ntb290aExlZnQgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY2xhbXAobiwgYSwgYil7IHJldHVybiBNYXRoLm1heChhLCBNYXRoLm1pbihiLCBuKSk7IH0KCiAgICAgIGZ1bmN0aW9uIHJlY3RGcm9tQ2VudGVyKGN4LCBjeSwgdywgaCl7CiAgICAgICAgY29uc3QgbGVmdCA9IGN4IC0gdy8yOwogICAgICAgIGNvbnN0IHRvcCA9IGN5IC0gaC8yOwogICAgICAgIHJldHVybiB7IGxlZnQsIHRvcCwgcmlnaHQ6IGxlZnQgKyB3LCBib3R0b206IHRvcCArIGgsIHdpZHRoOiB3LCBoZWlnaHQ6IGggfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaW50ZXJzZWN0aW9uQXJlYShhLCBiKXsKICAgICAgICBjb25zdCBpeCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGEucmlnaHQsIGIucmlnaHQpIC0gTWF0aC5tYXgoYS5sZWZ0LCBiLmxlZnQpKTsKICAgICAgICBjb25zdCBpeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKGEuYm90dG9tLCBiLmJvdHRvbSkgLSBNYXRoLm1heChhLnRvcCwgYi50b3ApKTsKICAgICAgICByZXR1cm4gaXggKiBpeTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gb3ZlcmxhcFNjb3JlKGRyYWdSZWN0LCB0YXJnZXRSZWN0KXsKICAgICAgICBjb25zdCBhcmVhID0gaW50ZXJzZWN0aW9uQXJlYShkcmFnUmVjdCwgdGFyZ2V0UmVjdCk7CiAgICAgICAgaWYgKCFhcmVhKSByZXR1cm4gMDsKICAgICAgICBjb25zdCBhMSA9IGRyYWdSZWN0LndpZHRoICogZHJhZ1JlY3QuaGVpZ2h0OwogICAgICAgIGNvbnN0IGEyID0gdGFyZ2V0UmVjdC53aWR0aCAqIHRhcmdldFJlY3QuaGVpZ2h0OwogICAgICAgIHJldHVybiBhcmVhIC8gTWF0aC5taW4oYTEsIGEyKTsgLy8gMC4uMQogICAgICB9CgogICAgICBmdW5jdGlvbiBjb21wdXRlUm93TWFqb3JPcmRlcigpewogICAgICAgIGNvbnN0IGNhcmRzID0gWy4uLmdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmtpdC1jYXJkJyldOwogICAgICAgIGNvbnN0IGl0ZW1zID0gW107CiAgICAgICAgZm9yIChjb25zdCBlbCBvZiBjYXJkcyl7CiAgICAgICAgICBjb25zdCByID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICBpdGVtcy5wdXNoKHsKICAgICAgICAgICAgZWwsCiAgICAgICAgICAgIHJlY3Q6IHIsCiAgICAgICAgICAgIGN4OiByLmxlZnQgKyByLndpZHRoLzIsCiAgICAgICAgICAgIGN5OiByLnRvcCArIHIuaGVpZ2h0LzIsCiAgICAgICAgICAgIHc6IHIud2lkdGgsCiAgICAgICAgICAgIGg6IHIuaGVpZ2h0CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiB7IG9yZGVyOiBbXSwgcm93QmFuZDogMCB9OwoKICAgICAgICBjb25zdCBocyA9IGl0ZW1zLm1hcChpPT5pLmgpLnNvcnQoKGEsYik9PmEtYik7CiAgICAgICAgY29uc3QgbWVkSCA9IGhzW01hdGguZmxvb3IoaHMubGVuZ3RoLzIpXSB8fCAwOwogICAgICAgIGNvbnN0IHJvd0JhbmQgPSBNYXRoLm1heCgxMiwgbWVkSCAqIFJPV19CQU5EX0ZSQUMpOwoKICAgICAgICAvLyBncm91cCBpbnRvIHJvd3MgYnkgY2VudGVyWQogICAgICAgIGl0ZW1zLnNvcnQoKGEsYik9PmEuY3kgLSBiLmN5KTsKICAgICAgICBjb25zdCByb3dzID0gW107CiAgICAgICAgZm9yIChjb25zdCBpdCBvZiBpdGVtcyl7CiAgICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd3MubGVuZ3RoLTFdOwogICAgICAgICAgaWYgKCFyb3cpewogICAgICAgICAgICByb3dzLnB1c2goeyBjeTogaXQuY3ksIGl0ZW1zOiBbaXRdIH0pOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChNYXRoLmFicyhpdC5jeSAtIHJvdy5jeSkgPD0gcm93QmFuZCl7CiAgICAgICAgICAgIHJvdy5pdGVtcy5wdXNoKGl0KTsKICAgICAgICAgICAgcm93LmN5ID0gcm93LmN5ICsgKGl0LmN5IC0gcm93LmN5KS9yb3cuaXRlbXMubGVuZ3RoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93cy5wdXNoKHsgY3k6IGl0LmN5LCBpdGVtczogW2l0XSB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gc29ydCB3aXRoaW4gcm93cyBieSBjZW50ZXJYIGFuZCBmbGF0dGVuCiAgICAgICAgY29uc3Qgb3JkZXIgPSBbXTsKICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKXsKICAgICAgICAgIHJvdy5pdGVtcy5zb3J0KChhLGIpPT5hLmN4IC0gYi5jeCk7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIHJvdy5pdGVtcykgb3JkZXIucHVzaChpdCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB7IG9yZGVyLCByb3dCYW5kIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNvbXB1dGVJbnNlcnRSZWZJbk9yZGVyKG9yZGVyLCByb3dCYW5kLCBjaG9zZW5JLCBkcmFnQ3gsIGRyYWdDeSl7CiAgICAgICAgY29uc3QgY2hvc2VuID0gb3JkZXJbY2hvc2VuSV07CiAgICAgICAgY29uc3Qgc2FtZVJvdyA9IE1hdGguYWJzKGRyYWdDeSAtIGNob3Nlbi5jeSkgPD0gcm93QmFuZC8yOwoKICAgICAgICBpZiAoc2FtZVJvdyl7CiAgICAgICAgICBjb25zdCBkZWFkWCA9IE1hdGgubWF4KDYsIGNob3Nlbi53ICogQ0VOVEVSX0RFQURfRlJBQyk7CiAgICAgICAgICBpZiAoZHJhZ0N4IDwgY2hvc2VuLmN4IC0gZGVhZFgpIHJldHVybiBjaG9zZW4uZWw7IC8vIGJlZm9yZQogICAgICAgICAgaWYgKGRyYWdDeCA+IGNob3Nlbi5jeCArIGRlYWRYKSByZXR1cm4gKGNob3NlbkkgKyAxIDwgb3JkZXIubGVuZ3RoKSA/IG9yZGVyW2Nob3NlbkkgKyAxXS5lbCA6IG51bGw7IC8vIGFmdGVyCiAgICAgICAgICByZXR1cm4gbmV4dENhcmRBZnRlcihkcmFnLnBsYWNlaG9sZGVyKTsgLy8gZGVhZC16b25lCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGRlYWRZID0gTWF0aC5tYXgoNiwgY2hvc2VuLmggKiBDRU5URVJfREVBRF9GUkFDKTsKICAgICAgICAgIGlmIChkcmFnQ3kgPCBjaG9zZW4uY3kgLSBkZWFkWSkgcmV0dXJuIGNob3Nlbi5lbDsKICAgICAgICAgIGlmIChkcmFnQ3kgPiBjaG9zZW4uY3kgKyBkZWFkWSkgcmV0dXJuIChjaG9zZW5JICsgMSA8IG9yZGVyLmxlbmd0aCkgPyBvcmRlcltjaG9zZW5JICsgMV0uZWwgOiBudWxsOwogICAgICAgICAgcmV0dXJuIG5leHRDYXJkQWZ0ZXIoZHJhZy5wbGFjZWhvbGRlcik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBjb21wdXRlQ2FuZGlkYXRlKGRyYWdDeCwgZHJhZ0N5LCBkcmFnUmVjdCl7CiAgICAgICAgY29uc3QgeyBvcmRlciwgcm93QmFuZCB9ID0gY29tcHV0ZVJvd01ham9yT3JkZXIoKTsKICAgICAgICBpZiAoIW9yZGVyLmxlbmd0aCkgcmV0dXJuIHsgcmVmOiBudWxsLCB0YXJnZXRFbDogbnVsbCwgdGFyZ2V0U2NvcmU6IDAgfTsKCiAgICAgICAgY29uc3QgZHIgPSBkcmFnUmVjdDsKCiAgICAgICAgLy8gMSkgQmVzdCBvdmVybGFwICh3aG8gaXMgbW9zdCBjb3ZlcmVkIGJ5IHRoZSBkcmFnZ2VkIGNhcmQpCiAgICAgICAgbGV0IGJlc3RJID0gLTE7CiAgICAgICAgbGV0IGJlc3RTY29yZSA9IDA7CiAgICAgICAgZm9yIChsZXQgaT0wO2k8b3JkZXIubGVuZ3RoO2krKyl7CiAgICAgICAgICBjb25zdCBpdCA9IG9yZGVyW2ldOwogICAgICAgICAgY29uc3QgcyA9IG92ZXJsYXBTY29yZShkciwgaXQucmVjdCk7CiAgICAgICAgICBpZiAocyA+IGJlc3RTY29yZSl7CiAgICAgICAgICAgIGJlc3RTY29yZSA9IHM7CiAgICAgICAgICAgIGJlc3RJID0gaTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIDIpIENob29zZSB3aXRoIHN0aWNraW5lc3MgKHByZXZlbnRzIHJhcGlkIGZsaXBzIHdoaWxlIGhvdmVyaW5nKQogICAgICAgIGxldCBjaG9zZW5JID0gLTE7CiAgICAgICAgbGV0IGNob3NlblNjb3JlID0gMDsKCiAgICAgICAgaWYgKGJlc3RJICE9PSAtMSAmJiBiZXN0U2NvcmUgPiAwKXsKICAgICAgICAgIGNob3NlbkkgPSBiZXN0STsKICAgICAgICAgIGNob3NlblNjb3JlID0gYmVzdFNjb3JlOwoKICAgICAgICAgIGlmIChkcmFnLmxhc3RUYXJnZXRFbCl7CiAgICAgICAgICAgIGNvbnN0IHByZXZJID0gb3JkZXIuZmluZEluZGV4KGl0ID0+IGl0LmVsID09PSBkcmFnLmxhc3RUYXJnZXRFbCk7CiAgICAgICAgICAgIGlmIChwcmV2SSAhPT0gLTEpewogICAgICAgICAgICAgIGNvbnN0IHByZXZTY29yZSA9IG92ZXJsYXBTY29yZShkciwgb3JkZXJbcHJldkldLnJlY3QpOwogICAgICAgICAgICAgIGlmIChwcmV2U2NvcmUgPj0gY2hvc2VuU2NvcmUgLSBPVkVSTEFQX0hZU1QpewogICAgICAgICAgICAgICAgY2hvc2VuSSA9IHByZXZJOwogICAgICAgICAgICAgICAgY2hvc2VuU2NvcmUgPSBwcmV2U2NvcmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEZhbGxiYWNrOiBjbG9zZXN0IGNlbnRlciAoYmV0d2VlbiBjYXJkcyAvIGluIGdhcHMpCiAgICAgICAgICBsZXQgY2kgPSAwOwogICAgICAgICAgbGV0IGJlc3REID0gSW5maW5pdHk7CiAgICAgICAgICBmb3IgKGxldCBpPTA7aTxvcmRlci5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgY29uc3QgaXQgPSBvcmRlcltpXTsKICAgICAgICAgICAgY29uc3QgZHggPSBkcmFnQ3ggLSBpdC5jeDsKICAgICAgICAgICAgY29uc3QgZHkgPSBkcmFnQ3kgLSBpdC5jeTsKICAgICAgICAgICAgY29uc3QgZCA9IGR4KmR4ICsgZHkqZHk7CiAgICAgICAgICAgIGlmIChkIDwgYmVzdEQpeyBiZXN0RCA9IGQ7IGNpID0gaTsgfQogICAgICAgICAgfQogICAgICAgICAgY2hvc2VuSSA9IGNpOwogICAgICAgICAgY2hvc2VuU2NvcmUgPSAwOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgY2hvc2VuID0gb3JkZXJbY2hvc2VuSV07CiAgICAgICAgZHJhZy5sYXN0VGFyZ2V0RWwgPSBjaG9zZW4uZWw7CgogICAgICAgIGNvbnN0IHJlZiA9IGNvbXB1dGVJbnNlcnRSZWZJbk9yZGVyKG9yZGVyLCByb3dCYW5kLCBjaG9zZW5JLCBkcmFnQ3gsIGRyYWdDeSk7CiAgICAgICAgcmV0dXJuIHsgcmVmLCB0YXJnZXRFbDogY2hvc2VuLmVsLCB0YXJnZXRTY29yZTogY2hvc2VuU2NvcmUgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY29tcHV0ZUluc2VydFJlZkZvclRhcmdldCh0YXJnZXRFbCwgZHJhZ0N4LCBkcmFnQ3kpewogICAgICAgIGNvbnN0IHsgb3JkZXIsIHJvd0JhbmQgfSA9IGNvbXB1dGVSb3dNYWpvck9yZGVyKCk7CiAgICAgICAgaWYgKCFvcmRlci5sZW5ndGgpIHJldHVybiBudWxsOwoKICAgICAgICBjb25zdCBpID0gb3JkZXIuZmluZEluZGV4KGl0ID0+IGl0LmVsID09PSB0YXJnZXRFbCk7CiAgICAgICAgaWYgKGkgPT09IC0xKXsKICAgICAgICAgIHJldHVybiBuZXh0Q2FyZEFmdGVyKGRyYWcucGxhY2Vob2xkZXIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY29tcHV0ZUluc2VydFJlZkluT3JkZXIob3JkZXIsIHJvd0JhbmQsIGksIGRyYWdDeCwgZHJhZ0N5KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdXBkYXRlUGxhbkZyb21DYW5kaWRhdGUoY2FuZCwgZHJhZ1JlY3QsIG5vdyl7CiAgICAgICAgY29uc3QgZWwgPSBjYW5kLnRhcmdldEVsOwogICAgICAgIGNvbnN0IHNjb3JlID0gY2FuZC50YXJnZXRTY29yZTsKCiAgICAgICAgLy8gTm90IGVub3VnaCBvdmVybGFwID0+IGNhbmRpZGF0ZSByZXNldHM7IHBsYW4gbWF5IGRyb3AgaWYgd2UgbW92ZWQgYXdheS4KICAgICAgICBpZiAoIWVsIHx8IHNjb3JlIDwgUExBTl9UUklHR0VSKXsKICAgICAgICAgIGRyYWcucGxhbkNhbmRFbCA9IG51bGw7CiAgICAgICAgICBkcmFnLnBsYW5DYW5kU3RhcnQgPSAwOwogICAgICAgICAgZHJhZy5wbGFuQ2FuZFNjb3JlID0gMDsKCiAgICAgICAgICBpZiAoZHJhZy5wbGFuRWwpewogICAgICAgICAgICBjb25zdCBjdXIgPSBvdmVybGFwU2NvcmUoZHJhZ1JlY3QsIGRyYWcucGxhbkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTsKICAgICAgICAgICAgaWYgKGN1ciA8IFBMQU5fRFJPUCl7CiAgICAgICAgICAgICAgZHJhZy5wbGFuRWwgPSBudWxsOwogICAgICAgICAgICAgIGRyYWcucGxhblNldEF0ID0gMDsKICAgICAgICAgICAgICBkcmFnLnBsYW5TY29yZSA9IDA7CiAgICAgICAgICAgICAgZHJhZy5jb21taXRTaW5jZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIFNhbWUgcGxhbiB0YXJnZXQ6IGp1c3QgcmVmcmVzaCBzY29yZS4KICAgICAgICBpZiAoZHJhZy5wbGFuRWwgPT09IGVsKXsKICAgICAgICAgIGRyYWcucGxhblNjb3JlID0gc2NvcmU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBUcmFjayBhIHN0YWJsZSBjYW5kaWRhdGUgYmVmb3JlIHN3aXRjaGluZyBwbGFuLgogICAgICAgIGlmIChkcmFnLnBsYW5DYW5kRWwgIT09IGVsKXsKICAgICAgICAgIGRyYWcucGxhbkNhbmRFbCA9IGVsOwogICAgICAgICAgZHJhZy5wbGFuQ2FuZFN0YXJ0ID0gbm93OwogICAgICAgICAgZHJhZy5wbGFuQ2FuZFNjb3JlID0gc2NvcmU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAobm93IC0gKGRyYWcucGxhbkNhbmRTdGFydCB8fCBub3cpIDwgUExBTl9TVEFCTEVfTVMpIHJldHVybjsKCiAgICAgICAgY29uc3QgY3VyID0gZHJhZy5wbGFuRWwgPyBvdmVybGFwU2NvcmUoZHJhZ1JlY3QsIGRyYWcucGxhbkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSA6IDA7CiAgICAgICAgaWYgKCFkcmFnLnBsYW5FbCB8fCBzY29yZSA+IGN1ciArIFBMQU5fU1dJVENIX0hZU1QpewogICAgICAgICAgZHJhZy5wbGFuRWwgPSBlbDsKICAgICAgICAgIGRyYWcucGxhblNldEF0ID0gbm93OwogICAgICAgICAgZHJhZy5wbGFuU2NvcmUgPSBzY29yZTsKICAgICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gbWF5YmVNb3ZlSG9sZShwcmVkQ3gsIHByZWRDeSwgcHJlZFJlY3QsIGN1ckN4LCBjdXJDeSwgY3VyUmVjdCl7CiAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7CgogICAgICAgIC8vIENhbmRpZGF0ZSBzZWxlY3Rpb24gdXNlcyB0aGUgKnByZWRpY3RlZCogcmVjdCAoaGVscHMgInBsYW4gYWhlYWQiKQogICAgICAgIGNvbnN0IGNhbmQgPSBjb21wdXRlQ2FuZGlkYXRlKHByZWRDeCwgcHJlZEN5LCBwcmVkUmVjdCk7CgogICAgICAgIC8vIFVwZGF0ZSBwbGFubmVkIHRhcmdldCAodW5sZXNzIHdlJ3JlIGluIGEgc2hvcnQgcG9zdC1tb3ZlIGxvY2spCiAgICAgICAgaWYgKG5vdyA+PSAoZHJhZy5sb2NrVW50aWwgPz8gMCkpewogICAgICAgICAgdXBkYXRlUGxhbkZyb21DYW5kaWRhdGUoY2FuZCwgcHJlZFJlY3QsIG5vdyk7CiAgICAgICAgfQoKICAgICAgICAvLyBGb3IgY29tbWl0dGluZyB0aGUgbW92ZSwgdXNlIHRoZSAqY3VycmVudCB2aXN1YWwqIHJlY3QuCiAgICAgICAgLy8gUGljayB0aGUgZWxlbWVudCB3aXRoIHRoZSBzdHJvbmdlc3QgQ1VSUkVOVCBvdmVybGFwLgogICAgICAgIC8vIChQbGFubmluZyBjYW4gYmUgcHJlZGljdGl2ZTsgY29tbWl0dGluZyBzaG91bGQgZm9sbG93IHdoYXQgdGhlIHVzZXIgYWN0dWFsbHkgc2Vlcy4pCiAgICAgICAgY29uc3QgeyBvcmRlcjogY29tbWl0T3JkZXIgfSA9IGNvbXB1dGVSb3dNYWpvck9yZGVyKCk7CiAgICAgICAgbGV0IGNvbW1pdFRhcmdldCA9IG51bGw7CiAgICAgICAgbGV0IGJlc3RPdiA9IDA7CgogICAgICAgIGZvciAoY29uc3QgaXQgb2YgY29tbWl0T3JkZXIpewogICAgICAgICAgY29uc3Qgb3YgPSBvdmVybGFwU2NvcmUoY3VyUmVjdCwgaXQucmVjdCk7CiAgICAgICAgICBpZiAob3YgPiBiZXN0T3YpewogICAgICAgICAgICBiZXN0T3YgPSBvdjsKICAgICAgICAgICAgY29tbWl0VGFyZ2V0ID0gaXQuZWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBLZWVwIHRoZSBwcmV2aW91cyBjb21taXQgdGFyZ2V0IHVubGVzcyB0aGUgbmV3IG9uZSBpcyBjbGVhcmx5IGJldHRlciAoYW50aS1mbGlwKS4KICAgICAgICBpZiAoZHJhZy5jb21taXRUYXJnZXRFbCAmJiBjb21taXRUYXJnZXQgJiYgZHJhZy5jb21taXRUYXJnZXRFbCAhPT0gY29tbWl0VGFyZ2V0KXsKICAgICAgICAgIGNvbnN0IHByZXYgPSBjb21taXRPcmRlci5maW5kKGl0ID0+IGl0LmVsID09PSBkcmFnLmNvbW1pdFRhcmdldEVsKTsKICAgICAgICAgIGlmIChwcmV2KXsKICAgICAgICAgICAgY29uc3QgcHJldk92ID0gb3ZlcmxhcFNjb3JlKGN1clJlY3QsIHByZXYucmVjdCk7CiAgICAgICAgICAgIGlmIChwcmV2T3YgPj0gYmVzdE92IC0gT1ZFUkxBUF9IWVNUKXsKICAgICAgICAgICAgICBjb21taXRUYXJnZXQgPSBkcmFnLmNvbW1pdFRhcmdldEVsOwogICAgICAgICAgICAgIGJlc3RPdiA9IHByZXZPdjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFjb21taXRUYXJnZXQpIHJldHVybjsKCgogICAgICAgIC8vIFN0YWJsZSBjb21taXQgdGltZXIgaXMgcGVyLXRhcmdldAogICAgICAgIGlmIChkcmFnLmNvbW1pdFRhcmdldEVsICE9PSBjb21taXRUYXJnZXQpewogICAgICAgICAgZHJhZy5jb21taXRUYXJnZXRFbCA9IGNvbW1pdFRhcmdldDsKICAgICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICAgIH0KCiAgICAgICAgLy8gT25seSBjb21taXQgYSBtb3ZlIHdoZW4gb3ZlcmxhcCBpcyBzdHJvbmcgKD49IDgwJSkgQU5EIHN0YWJsZSBmb3IgYSBzaG9ydCB0aW1lLgogICAgICAgIGlmIChiZXN0T3YgPj0gQ09NTUlUX1RSSUdHRVIpewogICAgICAgICAgaWYgKCFkcmFnLmNvbW1pdFNpbmNlKSBkcmFnLmNvbW1pdFNpbmNlID0gbm93OwogICAgICAgICAgaWYgKG5vdyAtIGRyYWcuY29tbWl0U2luY2UgPCBDT01NSVRfU1RBQkxFX01TKSByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gIlRha2UgdGhlIHRhcmdldCdzIHNsb3QiOgogICAgICAgIC8vIC0gaWYgdGFyZ2V0IGlzIEFGVEVSIHRoZSBob2xlID0+IG1vdmUgaG9sZSBBRlRFUiB0YXJnZXQgKGRyYWdnZWQgY2FyZCBsYW5kcyBpbnRvIHRhcmdldCdzIGluZGV4KQogICAgICAgIC8vIC0gaWYgdGFyZ2V0IGlzIEJFRk9SRSB0aGUgaG9sZSA9PiBtb3ZlIGhvbGUgQkVGT1JFIHRhcmdldAogICAgICAgIGNvbnN0IGhvbGVQb3MgPSBkcmFnLnBsYWNlaG9sZGVyOwogICAgICAgIGNvbnN0IHRhcmdldEFmdGVySG9sZSA9ICEhKGhvbGVQb3MuY29tcGFyZURvY3VtZW50UG9zaXRpb24oY29tbWl0VGFyZ2V0KSAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HKTsKICAgICAgICBjb25zdCBjb21taXRSZWYgPSB0YXJnZXRBZnRlckhvbGUgPyBuZXh0Q2FyZEFmdGVyKGNvbW1pdFRhcmdldCkgOiBjb21taXRUYXJnZXQKCgogICAgICAgIGNvbnN0IGN1cnJlbnRSZWYgPSBuZXh0Q2FyZEFmdGVyKGRyYWcucGxhY2Vob2xkZXIpOwogICAgICAgIGlmIChjb21taXRSZWYgPT09IGN1cnJlbnRSZWYpIHJldHVybjsKCiAgICAgICAgLy8gRXh0cmEgYW50aS1jaGF0dGVyIGd1YXJkcyAodXNlIGN1cnJlbnQgY2VudGVyKQogICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmh5cG90KGN1ckN4IC0gKGRyYWcubGFzdE1vdmVDeCA/PyBjdXJDeCksIGN1ckN5IC0gKGRyYWcubGFzdE1vdmVDeSA/PyBjdXJDeSkpOwogICAgICAgIGlmIChub3cgLSBkcmFnLmxhc3RNb3ZlQXQgPCBNT1ZFX0NPT0xET1dOX01TKSByZXR1cm47CiAgICAgICAgaWYgKGRpc3QgPCBNT1ZFX0hZU1RfUFgpIHJldHVybjsKCiAgICAgICAgZmxpcEFuaW1hdGVBZnRlckRPTUNoYW5nZSgoKT0+ewogICAgICAgICAgZ3JpZC5pbnNlcnRCZWZvcmUoZHJhZy5wbGFjZWhvbGRlciwgY29tbWl0UmVmKTsKICAgICAgICB9KTsKCiAgICAgICAgZHJhZy5sYXN0TW92ZUF0ID0gbm93OwogICAgICAgIGRyYWcubGFzdE1vdmVDeCA9IGN1ckN4OwogICAgICAgIGRyYWcubGFzdE1vdmVDeSA9IGN1ckN5OwoKICAgICAgICAvLyBicmllZiBsb2NrIHByZXZlbnRzIGltbWVkaWF0ZSAidW5kbyIgd2hlbiBsYXlvdXQgc2hpZnRzCiAgICAgICAgZHJhZy5sb2NrVW50aWwgPSBub3cgKyBMT0NLX0FGVEVSX01PVkVfTVM7CiAgICAgICAgZHJhZy5jb21taXRTaW5jZSA9IDA7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZSl7CiAgICAgICAgaWYgKCFkcmFnIHx8IGUucG9pbnRlcklkICE9PSBkcmFnLnBvaW50ZXJJZCkgcmV0dXJuOwogICAgICAgIGRyYWcubGFzdENsaWVudFggPSBlLmNsaWVudFg7CiAgICAgICAgZHJhZy5sYXN0Q2xpZW50WSA9IGUuY2xpZW50WTsKICAgICAgICBpZiAoIXJhZklkKSByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYmVnaW5EcmFnKGhhbmRsZUVsLCBlKXsKICAgICAgICBjb25zdCBjYXJkID0gaGFuZGxlRWwuY2xvc2VzdCgnLmtpdC1jYXJkJyk7CiAgICAgICAgaWYgKCFjYXJkKSByZXR1cm47CiAgICAgICAgY29uc3Qga2l0SWQgPSBjYXJkLmRhdGFzZXQua2l0SWQ7CiAgICAgICAgaWYgKCFraXRJZCkgcmV0dXJuOwoKICAgICAgICAvLyBJZ25vcmUgaWYgZHJhZyBzdGFydGVkIG9uIGludGVyYWN0aXZlIGFjdGlvbnMKICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmtpdC1hY3Rpb25zJykpIHJldHVybjsKCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgIGNvbnN0IHJlY3QgPSBjYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIGNvbnN0IHN0YXJ0Q3ggPSByZWN0LmxlZnQgKyByZWN0LndpZHRoLzI7CiAgICAgICAgY29uc3Qgc3RhcnRDeSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQvMjsKCiAgICAgICAgZHJhZyA9IHsKICAgICAgICAgIHBvaW50ZXJJZDogZS5wb2ludGVySWQsCiAgICAgICAgICBjYXJkLAogICAgICAgICAga2l0SWQsCiAgICAgICAgICBncmFiRHg6IGUuY2xpZW50WCAtIHJlY3QubGVmdCwKICAgICAgICAgIGdyYWJEeTogZS5jbGllbnRZIC0gcmVjdC50b3AsCiAgICAgICAgICB3OiByZWN0LndpZHRoLAogICAgICAgICAgaDogcmVjdC5oZWlnaHQsCiAgICAgICAgICBsYXN0Q2xpZW50WDogZS5jbGllbnRYLAogICAgICAgICAgbGFzdENsaWVudFk6IGUuY2xpZW50WSwKICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiBtYWtlUGxhY2Vob2xkZXIoY2FyZCksCiAgICAgICAgICBsYXN0TW92ZUF0OiAwLAogICAgICAgICAgbGFzdE1vdmVDeDogc3RhcnRDeCwKICAgICAgICAgIGxhc3RNb3ZlQ3k6IHN0YXJ0Q3ksCiAgICAgICAgICAvLyBwbGFubmluZyAvIGNvbW1pdCBzdGF0ZSAoYW50aS1qaXR0ZXIpCiAgICAgICAgICBwbGFuRWw6IG51bGwsCiAgICAgICAgICBwbGFuU2V0QXQ6IDAsCiAgICAgICAgICBwbGFuU2NvcmU6IDAsCiAgICAgICAgICBwbGFuQ2FuZEVsOiBudWxsLAogICAgICAgICAgcGxhbkNhbmRTdGFydDogMCwKICAgICAgICAgIHBsYW5DYW5kU2NvcmU6IDAsCiAgICAgICAgICBjb21taXRTaW5jZTogMCwKICAgICAgICAgIGxvY2tVbnRpbDogMCwKCiAgICAgICAgICBjb21taXRUYXJnZXRFbDogbnVsbCwKCiAgICAgICAgICAvLyBzbW9vdGhlZCBwb3NpdGlvbiBmb3Igb3ZlcmxheSBjYXJkCiAgICAgICAgICBfc21vb3RoVG9wOiByZWN0LnRvcCwKICAgICAgICAgIF9zbW9vdGhMZWZ0OiByZWN0LmxlZnQsCgogICAgICAgICAgX3ByZXZVc2VyU2VsZWN0OiBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QKICAgICAgICB9OwoKICAgICAgICAvLyBJbnNlcnQgcGxhY2Vob2xkZXIgd2hlcmUgdGhlIGNhcmQgd2FzCiAgICAgICAgZ3JpZC5pbnNlcnRCZWZvcmUoZHJhZy5wbGFjZWhvbGRlciwgY2FyZCk7CgogICAgICAgIC8vIExpZnQgY2FyZCBpbnRvIG92ZXJsYXkKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhcmQpOwogICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnaXMtZHJhZ2dpbmcnKTsKICAgICAgICBjYXJkLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBjYXJkLnN0eWxlLnRvcCA9IHB4KHJlY3QudG9wKTsKICAgICAgICBjYXJkLnN0eWxlLmxlZnQgPSBweChyZWN0LmxlZnQpOwogICAgICAgIGNhcmQuc3R5bGUud2lkdGggPSBweChyZWN0LndpZHRoKTsKICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9IHB4KHJlY3QuaGVpZ2h0KTsKICAgICAgICBjYXJkLnN0eWxlLnpJbmRleCA9ICc5OTk5JzsKICAgICAgICBjYXJkLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7CiAgICAgICAgY2FyZC5zdHlsZS5tYXJnaW4gPSAnMCc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZ3JhYmJpbmcnOwogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJzsKCiAgICAgICAgLy8gTW92ZSBsb29wCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlLCB0cnVlKTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBlbmREcmFnLCB0cnVlKTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyY2FuY2VsJywgZW5kRHJhZywgdHJ1ZSk7CgogICAgICAgIGlmICghcmFmSWQpIHJhZklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjbGVhbnVwRHJhZygpewogICAgICAgIGlmICghZHJhZykgcmV0dXJuOwoKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUsIHRydWUpOwogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGVuZERyYWcsIHRydWUpOwogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCBlbmREcmFnLCB0cnVlKTsKCiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJzsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSBkcmFnLl9wcmV2VXNlclNlbGVjdCA/PyAnJzsKCiAgICAgICAgZHJhZy5jYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdnaW5nJyk7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLnBvc2l0aW9uID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLnRvcCA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5sZWZ0ID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLndpZHRoID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLmhlaWdodCA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS56SW5kZXggPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5tYXJnaW4gPSAnJzsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZW5kRHJhZyhlKXsKICAgICAgICBpZiAoIWRyYWcgfHwgKGUgJiYgZS5wb2ludGVySWQgIT09IGRyYWcucG9pbnRlcklkKSkgcmV0dXJuOwoKICAgICAgICBkcmFnLmFjdGl2ZSA9IGZhbHNlOwoKICAgICAgICAvLyBQdXQgY2FyZCBiYWNrIGludG8gZmxvdyBhdCBwbGFjZWhvbGRlciBwb3NpdGlvbgogICAgICAgIGlmIChkcmFnLnBsYWNlaG9sZGVyICYmIGRyYWcucGxhY2Vob2xkZXIucGFyZW50Tm9kZSl7CiAgICAgICAgICBncmlkLmluc2VydEJlZm9yZShkcmFnLmNhcmQsIGRyYWcucGxhY2Vob2xkZXIpOwogICAgICAgICAgZHJhZy5wbGFjZWhvbGRlci5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIGNsZWFudXBEcmFnKCk7CgogICAgICAgIC8vIFN5bmMgbW9kZWwgb3JkZXIKICAgICAgICB0cnl7CiAgICAgICAgICBjb25zdCBpZHMgPSBbLi4uZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcua2l0LWNhcmQnKV0ubWFwKGVsID0+IGVsLmRhdGFzZXQua2l0SWQpOwogICAgICAgICAgY29uc3QgYnlJZCA9IG5ldyBNYXAoa2l0cy5tYXAoayA9PiBbU3RyaW5nKGsuaWQpLCBrXSkpOwogICAgICAgICAga2l0cyA9IGlkcy5tYXAoaWQgPT4gYnlJZC5nZXQoU3RyaW5nKGlkKSkpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgIHNhdmVTdGF0ZSgpOwogICAgICAgIH1jYXRjaChfKXt9CgogICAgICAgIGRyYWcgPSBudWxsOwogICAgICB9CgogICAgICBmdW5jdGlvbiB0aWNrKCl7CiAgICAgICAgcmFmSWQgPSAwOwogICAgICAgIGlmICghZHJhZyB8fCAhZHJhZy5hY3RpdmUpIHJldHVybjsKCiAgICAgICAgdmlld3BvcnRBdXRvU2Nyb2xsKGRyYWcubGFzdENsaWVudFgsIGRyYWcubGFzdENsaWVudFkpOwoKICAgICAgICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gZ2V0RHJhZ1RvcExlZnQoKTsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUudG9wID0gcHgodG9wKTsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUubGVmdCA9IHB4KGxlZnQpOwoKICAgICAgICAvLyBkZWNpc2lvbiB1c2VzIHRoZSBDQVJEIGNlbnRlciwgbm90IHRoZSBjdXJzb3IKICAgICAgICBjb25zdCBkcmFnQ3ggPSBsZWZ0ICsgZHJhZy53LzI7CiAgICAgICAgY29uc3QgZHJhZ0N5ID0gdG9wICsgZHJhZy5oLzI7CgogICAgICAgIC8vIHZlbG9jaXR5LWJhc2VkIGxvb2stYWhlYWQgKHN0aWxsIGRlcml2ZWQgZnJvbSB0aGUgY2FyZCdzIG1vdGlvbikKICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBjb25zdCBkdCA9IE1hdGgubWF4KDgsIG5vdyAtIChkcmFnLl9wcmV2VCA/PyBub3cpKTsKICAgICAgICBjb25zdCB2eCA9IChkcmFnQ3ggLSAoZHJhZy5fcHJldkN4ID8/IGRyYWdDeCkpIC8gZHQ7IC8vIHB4IHBlciBtcwogICAgICAgIGNvbnN0IHZ5ID0gKGRyYWdDeSAtIChkcmFnLl9wcmV2Q3kgPz8gZHJhZ0N5KSkgLyBkdDsKCiAgICAgICAgLy8gY2xhbXAgdG8gYXZvaWQgd2lsZCBqdW1wcyBvbiBmaXJzdCBmcmFtZXMKICAgICAgICBjb25zdCBjdnggPSBjbGFtcCh2eCwgLTEuMiwgMS4yKTsKICAgICAgICBjb25zdCBjdnkgPSBjbGFtcCh2eSwgLTEuMiwgMS4yKTsKCiAgICAgICAgY29uc3QgcHJlZEN4ID0gZHJhZ0N4ICsgY3Z4ICogUFJFRElDVF9NUzsKICAgICAgICBjb25zdCBwcmVkQ3kgPSBkcmFnQ3kgKyBjdnkgKiBQUkVESUNUX01TOwoKICAgICAgICBkcmFnLl9wcmV2VCA9IG5vdzsKICAgICAgICBkcmFnLl9wcmV2Q3ggPSBkcmFnQ3g7CiAgICAgICAgZHJhZy5fcHJldkN5ID0gZHJhZ0N5OwoKICAgICAgICBjb25zdCBkZWNpc2lvblJlY3QgPSByZWN0RnJvbUNlbnRlcihwcmVkQ3gsIHByZWRDeSwgZHJhZy53LCBkcmFnLmgpOwoKICAgICAgICBjb25zdCBjdXJyZW50UmVjdCA9IHJlY3RGcm9tQ2VudGVyKGRyYWdDeCwgZHJhZ0N5LCBkcmFnLncsIGRyYWcuaCk7CgogICAgICAgIG1heWJlTW92ZUhvbGUocHJlZEN4LCBwcmVkQ3ksIGRlY2lzaW9uUmVjdCwgZHJhZ0N4LCBkcmFnQ3ksIGN1cnJlbnRSZWN0KTsKCiAgICAgICAgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7CiAgICAgIH0KCiAgICAgIC8vIERlbGVnYXRlIHBvaW50ZXJkb3duIHRvIGhhbmRsZXMKICAgICAgZ3JpZC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIChlKT0+ewogICAgICAgIGNvbnN0IGhhbmRsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtZHJhZy1oYW5kbGUnKTsKICAgICAgICBpZiAoIWhhbmRsZSkgcmV0dXJuOwogICAgICAgIGJlZ2luRHJhZyhoYW5kbGUsIGUpOwogICAgICB9LCB0cnVlKTsKICAgIH0pKCk7OwoKCiAgICAvKiA9PT09PSBJbml0aWFsIHJlbmRlciA9PT09PSAqLwogICAgcmVuZGVyKCk7CiAgPC9zY3JpcHQ+CiAgPHNjcmlwdD4KICAgICAgICAKICAgICAgICAvLyDQkNCy0YLQvi3RiNC40YDQuNC90LAg0LTQu9GPINC/0L7Qu9GPICLQotC40L8g0YHRgdGL0LvQutC4IiAo0YDQsNGB0YLRj9Cz0LjQstCw0LXRgtGB0Y8g0L/QviDQstCy0LXQtNGR0L3QvdC+0LzRgyDRgtC10LrRgdGC0YMsCiAgICAgICAgLy8g0L3QviDQuNGB0YXQvtC00L3QvtC1INC/0YPRgdGC0L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUg0L7RgdGC0LDRkdGC0YHRjyDRhNC40LrRgdC40YDQvtCy0LDQvdC90YvQvCkKICAgICAgICBjb25zdCBfX21lYXN1cmVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICBjb25zdCBfX21lYXN1cmVDdHggPSBfX21lYXN1cmVDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTGlua1R5cGVXaWR0aCh0eXBlSW5wdXQpIHsKICAgICAgICAgICAgaWYgKCF0eXBlSW5wdXQpIHJldHVybjsKCiAgICAgICAgICAgIGNvbnN0IHZhbCA9ICh0eXBlSW5wdXQudmFsdWUgfHwgJycpLnRyaW0oKTsKCiAgICAgICAgICAgIC8vINC40YHRhdC+0LTQvdC+0LUg0L/Rg9GB0YLQvtC1INGB0L7RgdGC0L7Rj9C90LjQtSDigJQg0LrQsNC6INGB0LXQudGH0LDRgQogICAgICAgICAgICBpZiAoIXZhbCkgewogICAgICAgICAgICAgICAgdHlwZUlucHV0LnN0eWxlLndpZHRoID0gJzEyMHB4JzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g0JjQt9C80LXRgNGP0LXQvCDRgtC10LrRgdGCINGBINGC0LXQvCDQttC1INGI0YDQuNGE0YLQvtC8CiAgICAgICAgICAgIGNvbnN0IGNzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodHlwZUlucHV0KTsKICAgICAgICAgICAgX19tZWFzdXJlQ3R4LmZvbnQgPSBgJHtjcy5mb250V2VpZ2h0fSAke2NzLmZvbnRTaXplfSAke2NzLmZvbnRGYW1pbHl9YDsKCiAgICAgICAgICAgIGNvbnN0IHRleHRXID0gX19tZWFzdXJlQ3R4Lm1lYXN1cmVUZXh0KHZhbCkud2lkdGg7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdMZWZ0ID0gcGFyc2VGbG9hdChjcy5wYWRkaW5nTGVmdCkgfHwgMDsKICAgICAgICAgICAgY29uc3QgcGFkZGluZ1JpZ2h0ID0gcGFyc2VGbG9hdChjcy5wYWRkaW5nUmlnaHQpIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IGJvcmRlckxlZnQgPSBwYXJzZUZsb2F0KGNzLmJvcmRlckxlZnRXaWR0aCkgfHwgMDsKICAgICAgICAgICAgY29uc3QgYm9yZGVyUmlnaHQgPSBwYXJzZUZsb2F0KGNzLmJvcmRlclJpZ2h0V2lkdGgpIHx8IDA7CgogICAgICAgICAgICAvLyArINC90LXQsdC+0LvRjNGI0LDRjyDRgdGC0YDQsNGF0L7QstC60LAKICAgICAgICAgICAgbGV0IGRlc2lyZWQgPSBNYXRoLmNlaWwodGV4dFcgKyBwYWRkaW5nTGVmdCArIHBhZGRpbmdSaWdodCArIGJvcmRlckxlZnQgKyBib3JkZXJSaWdodCArIDEyKTsKCiAgICAgICAgICAgIC8vINCe0LPRgNCw0L3QuNGH0LjQstCw0LXQvCDQv9C+INC00L7RgdGC0YPQv9C90L7QvNGDINC80LXRgdGC0YM6INGC0LjQvyDRgtGP0L3QtdGC0YHRjywg0YHQtNCy0LjQs9Cw0Y8gVVJMINCy0L/RgNCw0LLQviwKICAgICAgICAgICAgLy8g0L3QviDQvtGB0YLQsNCy0LvRj9C10Lwg0LzQuNC90LjQvNCw0LvRjNC90L7QtSDQvNC10YHRgtC+INC/0L7QtCBVUkwg0Lgg0LrQvdC+0L/QutC4CiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0eXBlSW5wdXQuY2xvc2VzdCgnLmxpbmstaXRlbScpOwogICAgICAgICAgICBjb25zdCBlZGl0Um93ID0gdHlwZUlucHV0LmNsb3Nlc3QoJy5saW5rLWVkaXQnKTsKICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGl0ZW0gPyBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLWFjdGlvbnMnKSA6IG51bGw7CgogICAgICAgICAgICBjb25zdCB1cmxNaW4gPSAxNDA7IC8vINC80LjQvdC40LzQsNC70YzQvdC+INC/0L7QtCBVUkwKICAgICAgICAgICAgbGV0IGF2YWlsYWJsZSA9IG51bGw7CgogICAgICAgICAgICBpZiAoaXRlbSAmJiBlZGl0Um93ICYmIGFjdGlvbnMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1XID0gaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsKICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbnNXID0gYWN0aW9ucy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsKCiAgICAgICAgICAgICAgICAvLyBnYXAg0LzQtdC20LTRgyAubGluay1lZGl0INC4IC5saW5rLWFjdGlvbnMg4oCUINC+0L0g0LfQsNC00LDQvSDRgyAubGluay1pdGVtCiAgICAgICAgICAgICAgICBjb25zdCBpdGVtQ1MgPSBnZXRDb21wdXRlZFN0eWxlKGl0ZW0pOwogICAgICAgICAgICAgICAgY29uc3QgcGFkTCA9IHBhcnNlRmxvYXQoaXRlbUNTLnBhZGRpbmdMZWZ0KSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3QgcGFkUiA9IHBhcnNlRmxvYXQoaXRlbUNTLnBhZGRpbmdSaWdodCkgfHwgMDsKICAgICAgICAgICAgICAgIGNvbnN0IG91dGVyR2FwID0gcGFyc2VGbG9hdChpdGVtQ1MuZ2FwKSB8fCAwOwoKICAgICAgICAgICAgICAgIGF2YWlsYWJsZSA9IGl0ZW1XIC0gcGFkTCAtIHBhZFIgLSBhY3Rpb25zVyAtIG91dGVyR2FwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYXZhaWxhYmxlKSB7CiAgICAgICAgICAgICAgICAvLyBnYXAg0LLQvdGD0YLRgNC4IGVkaXRSb3cg0LzQtdC20LTRgyDQv9C+0LvRj9C80LgKICAgICAgICAgICAgICAgIGNvbnN0IGdhcCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShlZGl0Um93KS5nYXApIHx8IDA7CiAgICAgICAgICAgICAgICBjb25zdCBtYXhUeXBlID0gTWF0aC5tYXgoMTIwLCBhdmFpbGFibGUgLSB1cmxNaW4gLSBnYXApOwogICAgICAgICAgICAgICAgZGVzaXJlZCA9IE1hdGgubWluKGRlc2lyZWQsIG1heFR5cGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkZXNpcmVkID0gTWF0aC5tYXgoZGVzaXJlZCwgMTIwKTsKICAgICAgICAgICAgdHlwZUlucHV0LnN0eWxlLndpZHRoID0gZGVzaXJlZCArICdweCc7CiAgICAgICAgfQoKICAgICAgICAvLyDQsNCy0YLQvi3RgNC+0YHRgiB0ZXh0YXJlYSDQv9C+INCy0YvRgdC+0YLQtQogICAgICAgIGZ1bmN0aW9uIGF1dG9zaXplVGV4dGFyZWEoZWwpIHsKICAgICAgICAgICAgaWYgKCFlbCkgcmV0dXJuOwogICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7CiAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IChlbC5zY3JvbGxIZWlnaHQpICsgJ3B4JzsKICAgICAgICB9CgogICAgICAgIC8vINCf0L7QtNGB0YLRgNCw0LjQstCw0LXQvCDRiNC40YDQuNC90YMg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDRgNCw0LfQvNC10YDQsCDQvtC60L3QsAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5rLWl0ZW0uZWRpdGluZyAubGluay10eXBlLWlucHV0JykuZm9yRWFjaChpbnAgPT4gdXBkYXRlTGlua1R5cGVXaWR0aChpbnApKTsKICAgICAgICB9KTsKCgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUVtcHR5U3RhdGVzKCkgewogICAgICAgICAgICBjb25zdCBjb21tZW50c0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHNMaXN0Jyk7CiAgICAgICAgICAgIGNvbnN0IGxpbmtzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rc0xpc3QnKTsKICAgICAgICAgICAgY29uc3QgY29tbWVudHNTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzU2VjdGlvbicpOwogICAgICAgICAgICBjb25zdCBsaW5rc1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua3NTZWN0aW9uJyk7CgogICAgICAgICAgICBpZiAoY29tbWVudHNTZWN0aW9uICYmIGNvbW1lbnRzTGlzdCkgewogICAgICAgICAgICAgICAgY29uc3QgaGFzQ29tbWVudHMgPSBjb21tZW50c0xpc3QucXVlcnlTZWxlY3RvcignLmNvbW1lbnQtYmxvY2snKSAhPT0gbnVsbDsKICAgICAgICAgICAgICAgIGNvbW1lbnRzU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1lbXB0eScsICFoYXNDb21tZW50cyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxpbmtzU2VjdGlvbiAmJiBsaW5rc0xpc3QpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGhhc0xpbmtzID0gbGlua3NMaXN0LnF1ZXJ5U2VsZWN0b3IoJy5saW5rLWl0ZW0nKSAhPT0gbnVsbDsKICAgICAgICAgICAgICAgIGxpbmtzU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1lbXB0eScsICFoYXNMaW5rcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgovLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0YHQstC+0YDQsNGH0LjQstCw0L3QuNGPL9GA0LDQt9Cy0L7RgNCw0YfQuNCy0LDQvdC40Y8g0LHQu9C+0LrQvtCyCiAgICAgICAgZnVuY3Rpb24gc2V0dXBDb2xsYXBzZShoZWFkZXJJZCwgY29udGVudElkLCBpY29uSWQsIGRlZmF1bHRFeHBhbmRlZCA9IGZhbHNlKSB7CiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhlYWRlcklkKTsKICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRlbnRJZCk7CiAgICAgICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpY29uSWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCFoZWFkZXIgfHwgIWNvbnRlbnQgfHwgIWljb24pIHJldHVybjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChkZWZhdWx0RXhwYW5kZWQpIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC50b2dnbGUoJ2V4cGFuZGVkJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8g0KPQv9GA0LDQstC70LXQvdC40LUg0LrQvtC80LzQtdC90YLQsNGA0LjRj9C80Lgg0Lgg0YHRgdGL0LvQutCw0LzQuAogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0YHQstC+0YDQsNGH0LjQstCw0L3QuNGPCiAgICAgICAgICAgIHNldHVwQ29sbGFwc2UoJ21haW5TcGVjc0hlYWRlcicsICdtYWluU3BlY3NDb250ZW50JywgJ21haW5TcGVjc0ljb24nLCBmYWxzZSk7CiAgICAgICAgICAgIHNldHVwQ29sbGFwc2UoJ2RvY3NIZWFkZXInLCAnZG9jc0NvbnRlbnQnLCAnZG9jc0ljb24nLCBmYWxzZSk7CiAgICAgICAgICAgIHNldHVwQ29sbGFwc2UoJ2ZpbmFuY2VIZWFkZXInLCAnZmluYW5jZUNvbnRlbnQnLCAnZmluYW5jZUljb24nLCBmYWxzZSk7CiAgICAgICAgICAgIHNldHVwQ29sbGFwc2UoJ2FkZGl0aW9uYWxIZWFkZXInLCAnYWRkaXRpb25hbENvbnRlbnQnLCAnYWRkaXRpb25hbEljb24nLCBmYWxzZSk7CgogICAgICAgICAgICAvLyDQmtC90L7Qv9C60LAg0L3QsNC30LDQtAogICAgICAgICAgICBjb25zdCBiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tCdXR0b24nKTsKICAgICAgICAgICAgaWYgKGJhY2tCdG4pIHsKICAgICAgICAgICAgICAgIGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn0JLQvtC30LLRgNCw0YIg0Log0YHQv9C40YHQutGDINCw0LLRgtC+0LzQvtCx0LjQu9C10LknKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgovLyDQk9C70L7QsdCw0LvRjNC90YvQuSDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutC+0LIg0LTQu9GPINCy0YvRhdC+0LTQsCDQuNC3INGA0LXQttC40LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0LrQu9C40Log0L3QtSDQv9C+INGA0LXQtNCw0LrRgtC40YDRg9C10LzQvtC80YMg0LHQu9C+0LrRgyDQuCDQvdC1INC/0L4g0LXQs9C+INC60L3QvtC/0LrQsNC8CiAgICAgICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5jb21tZW50LWJsb2NrLmVkaXRpbmcnKSAmJiAKICAgICAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xvc2VzdCgnLmxpbmstaXRlbS5lZGl0aW5nJykgJiYKICAgICAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xvc2VzdCgnLmVkaXQtYnV0dG9uJykgJiYKICAgICAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xvc2VzdCgnLmRlbGV0ZS1idXR0b24nKSkgewogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vINCS0YvRhdC+0LTQuNC8INC40Lcg0YDQtdC20LjQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LLRgdC10YUg0LHQu9C+0LrQvtCyCiAgICAgICAgICAgICAgICAgICAgZXhpdEFsbEVkaXRNb2RlcygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDQtNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNGFINGN0LvQtdC80LXQvdGC0L7QsgogICAgICAgICAgICBpbml0RXhpc3RpbmdJdGVtcygpOwogICAgICAgICAgICAvLyDQodC+0YHRgtC+0Y/QvdC40Y8g0L/Rg9GB0YLRi9GFINGB0L/QuNGB0LrQvtCyICjRgdC60YDRi9Cy0LDQtdC8INC/0YPRgdGC0YvQtSDQutC+0L3RgtC10LnQvdC10YDRiyDQuCDQvdC1INGD0LTQstCw0LjQstCw0LXQvCDQvtGC0YHRgtGD0L/RiykKICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKCiAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutC+0LzQvNC10L3RgtCw0YDQuNGPCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRDb21tZW50QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgYWRkTmV3Q29tbWVudCgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgdGB0YvQu9C60LgKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZExpbmtCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBhZGROZXdMaW5rKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0LTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LjRhSDRjdC70LXQvNC10L3RgtC+0LIKICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdJdGVtcygpIHsKICAgICAgICAgICAgLy8g0JrQvtC80LzQtdC90YLQsNGA0LjQuAogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tbWVudC1ibG9jazpub3QoLmVkaXRpbmcpJykuZm9yRWFjaChibG9jayA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBlZGl0QnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBpZiAoZWRpdEJ0bikgewogICAgICAgICAgICAgICAgICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyQ29tbWVudEVkaXRNb2RlKGJsb2NrKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDQodGB0YvQu9C60LgKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpbmstaXRlbTpub3QoLmVkaXRpbmcpJykuZm9yRWFjaChibG9jayA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBlZGl0QnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBpZiAoZWRpdEJ0bikgewogICAgICAgICAgICAgICAgICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyTGlua0VkaXRNb2RlKGJsb2NrKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyDQktGL0YXQvtC0INC40Lcg0LLRgdC10YUg0YDQtdC20LjQvNC+0LIg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgIGZ1bmN0aW9uIGV4aXRBbGxFZGl0TW9kZXMoKSB7CiAgICAgICAgICAgIC8vINCa0L7QvNC80LXQvdGC0LDRgNC40LgKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbW1lbnQtYmxvY2suZWRpdGluZycpLmZvckVhY2goYmxvY2sgPT4gewogICAgICAgICAgICAgICAgZXhpdENvbW1lbnRFZGl0TW9kZShibG9jaywgdHJ1ZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0KHRgdGL0LvQutC4CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5rLWl0ZW0uZWRpdGluZycpLmZvckVhY2goYmxvY2sgPT4gewogICAgICAgICAgICAgICAgZXhpdExpbmtFZGl0TW9kZShibG9jaywgdHJ1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8g0KDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC60L7QvNC80LXQvdGC0LDRgNC40Y8KICAgICAgICBmdW5jdGlvbiBlbnRlckNvbW1lbnRFZGl0TW9kZShibG9jaykgewogICAgICAgICAgICAvLyDQktGL0YXQvtC00LjQvCDQuNC3INC00YDRg9Cz0LjRhSDRgNC10LbQuNC80L7QsgogICAgICAgICAgICBleGl0QWxsRWRpdE1vZGVzKCk7CgogICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5jb21tZW50LXRleHQnKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0ZXh0RWxlbWVudCA/ICh0ZXh0RWxlbWVudC50ZXh0Q29udGVudCB8fCAnJykgOiAnJzsKICAgICAgICAgICAgY29uc3QgaXNOZXcgPSBibG9jay5kYXRhc2V0LmlzTmV3Q29tbWVudCA9PT0gJzEnOwoKICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INGC0LXQutGD0YnQuNC5INC60L7QvdGC0LXQvdGCCiAgICAgICAgICAgIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUZXh0ID0gY3VycmVudFRleHQ7CgogICAgICAgICAgICBibG9jay5jbGFzc0xpc3QuYWRkKCdlZGl0aW5nJyk7CiAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz0iY29tbWVudC1pbnB1dCIgcGxhY2Vob2xkZXI9ItCS0LLQtdC00LjRgtC1INC60L7QvNC80LXQvdGC0LDRgNC40LkiIHJvd3M9IjEiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFuZ2VyIGRlbGV0ZS1idXR0b24iIHRpdGxlPSLQo9C00LDQu9C40YLRjCI+CiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNSAyMGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWOGgyVjZoLTRWNGEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYySDN2Mmgyek05IDRoNnYySDl6TTggOGg5djEySDdWOHoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDEwaDJ2OEg5em00IDBoMnY4aC0yeiIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuY29tbWVudC1pbnB1dCcpOwoKICAgICAgICAgICAgLy8g0LfQsNC/0L7Qu9C90Y/QtdC8INC4INGA0LDRgdGC0Y/Qs9C40LLQsNC10Lwg0L/QviDRgtC10LrRgdGC0YMKICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjdXJyZW50VGV4dDsKICAgICAgICAgICAgYXV0b3NpemVUZXh0YXJlYSh0ZXh0YXJlYSk7CiAgICAgICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gYXV0b3NpemVUZXh0YXJlYSh0ZXh0YXJlYSkpOwoKICAgICAgICAgICAgLy8g0LrRg9GA0YHQvtGAINCyINC60L7QvdC10YYg0Lgg0LHQtdC3INGB0LrRgNC+0LvQuy3RgdC80LXRidC10L3QuNGPCiAgICAgICAgICAgIHRyeSB7IHRleHRhcmVhLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTsgfSBjYXRjaCAoZSkgeyB0ZXh0YXJlYS5mb2N1cygpOyB9CiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRleHRhcmVhLnZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UoZW5kLCBlbmQpOwogICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IGN1cnJlbnRUZXh0OwogICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpOwogICAgICAgICAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSh0ZXh0YXJlYS52YWx1ZS5sZW5ndGgsIHRleHRhcmVhLnZhbHVlLmxlbmd0aCk7CgogICAgICAgICAgICAvLyBFbnRlci9Fc2NhcGUg0YPQv9GA0LDQstC70Y/RjtGCINC30LDQstC10YDRiNC10L3QuNC10Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICAvLyAtIEVudGVyOiDRgdC+0YXRgNCw0L3QuNGC0Ywg0Lgg0LLRi9C50YLQuAogICAgICAgICAgICAvLyAtIFNoaWZ0K0VudGVyOiDQv9C10YDQtdC90L7RgSDRgdGC0YDQvtC60LgKICAgICAgICAgICAgLy8gLSBFc2NhcGU6INC+0YLQvNC10L3QsCDQuCDQstGL0YXQvtC0CiAgICAgICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikgewogICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0VzY2FwZScpIHsKICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGV4aXRDb21tZW50RWRpdE1vZGUoYmxvY2ssIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInICYmICFldi5zaGlmdEtleSkgewogICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IC8vINC90LUg0LTQvtCx0LDQstC70Y/QtdC8INC/0LXRgNC10LLQvtC0INGB0YLRgNC+0LrQuAogICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGV4aXRDb21tZW50RWRpdE1vZGUoYmxvY2ssIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0YPQtNCw0LvQtdC90LjRjwogICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlLWJ1dHRvbicpOwogICAgICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuY29uZmlybSgn0KPQtNCw0LvQuNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuT8nKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICB9KTt9CgogICAgICAgIC8vINCS0YvRhdC+0LQg0LjQtyDRgNC10LbQuNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQutC+0LzQvNC10L3RgtCw0YDQuNGPCiAgICAgICAgZnVuY3Rpb24gZXhpdENvbW1lbnRFZGl0TW9kZShibG9jaywgc2F2ZSA9IHRydWUpIHsKICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBibG9jay5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpOwogICAgICAgICAgICBjb25zdCBpc05ldyA9IGJsb2NrLmRhdGFzZXQuaXNOZXdDb21tZW50ID09PSAnMSc7CgogICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVGV4dCB8fCAnJzsKCiAgICAgICAgICAgIGlmIChzYXZlICYmIHRleHRhcmVhKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgICAgIGlmIChuZXdUZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LfQvNC10L3QtdC90LjRjwogICAgICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudC10ZXh0Ij4ke25ld1RleHR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyDQn9GD0YHRgtC+0Lkg0YLQtdC60YHRgiDQt9Cw0L/RgNC10YnRkdC9OgogICAgICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINC90L7QstC+0LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPOiDRg9C00LDQu9GP0LXQvCDQsdC70L7QugogICAgICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LXQs9C+OiDQvtGC0LrQsNGC0YvQstCw0LXQvCDQutCw0Log0LHRi9C70L4KICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21tZW50LXRleHQiPiR7b3JpZ2luYWxUZXh0fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vINCe0YLQvNC10L3QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPOgogICAgICAgICAgICAgICAgLy8gLSDQvdC+0LLRi9C5INC/0YPRgdGC0L7QuSDQsdC70L7QuiDQvdC1INGB0L7RhdGA0LDQvdGP0LXQvAogICAgICAgICAgICAgICAgLy8gLSDRgdGD0YnQtdGB0YLQstGD0Y7RidC40Lkg0L7RgtC60LDRgtGL0LLQsNC10LwKICAgICAgICAgICAgICAgIGlmIChpc05ldyAmJiAhb3JpZ2luYWxUZXh0LnRyaW0oKSkgewogICAgICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1lbnQtdGV4dCI+JHtvcmlnaW5hbFRleHR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZWRpdGluZycpOwogICAgICAgICAgICBkZWxldGUgYmxvY2suZGF0YXNldC5vcmlnaW5hbFRleHQ7CiAgICAgICAgICAgIGRlbGV0ZSBibG9jay5kYXRhc2V0LmlzTmV3Q29tbWVudDsKCiAgICAgICAgICAgIGNvbnN0IG5ld0VkaXRCdG4gPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTsKICAgICAgICAgICAgaWYgKG5ld0VkaXRCdG4pIHsKICAgICAgICAgICAgICAgIG5ld0VkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBlbnRlckNvbW1lbnRFZGl0TW9kZShibG9jayk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g0KDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINGB0YHRi9C70LrQuAogICAgICAgIGZ1bmN0aW9uIGVudGVyTGlua0VkaXRNb2RlKGJsb2NrKSB7CiAgICAgICAgICAgIC8vINCS0YvRhdC+0LTQuNC8INC40Lcg0LTRgNGD0LPQuNGFINGA0LXQttC40LzQvtCyCiAgICAgICAgICAgIGV4aXRBbGxFZGl0TW9kZXMoKTsKCiAgICAgICAgICAgIGNvbnN0IHR5cGVFbGVtZW50ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdHlwZScpOwogICAgICAgICAgICBjb25zdCB1cmxFbGVtZW50ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdXJsJyk7CiAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gYmxvY2suZGF0YXNldC5pc05ld0xpbmsgPT09ICcxJzsKCiAgICAgICAgICAgIGNvbnN0IHJhd1R5cGUgPSB0eXBlRWxlbWVudCA/ICh0eXBlRWxlbWVudC50ZXh0Q29udGVudCB8fCAnJykudHJpbSgpIDogJyc7CiAgICAgICAgICAgIGNvbnN0IHJhd1VybCA9IHVybEVsZW1lbnQgPyAoKHVybEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJykgfHwgdXJsRWxlbWVudC50ZXh0Q29udGVudCB8fCAnJykudHJpbSgpKSA6ICcnOwoKICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC+0YDQuNCz0LjQvdCw0LvRjNC90YvQtSDQt9C90LDRh9C10L3QuNGPICjQtNC70Y8g0L7RgtC60LDRgtCwKQogICAgICAgICAgICBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVHlwZSA9IHJhd1R5cGU7CiAgICAgICAgICAgIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxVcmwgID0gcmF3VXJsOwoKICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgnZWRpdGluZycpOwogICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWVkaXQiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0ibGluay10eXBlLWlucHV0IiBwbGFjZWhvbGRlcj0i0KLQuNC/INGB0YHRi9C70LrQuCI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InVybCIgY2xhc3M9ImxpbmstdXJsLWlucHV0IiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly8uLi4iPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYW5nZXIgZGVsZXRlLWJ1dHRvbiIgdGl0bGU9ItCj0LTQsNC70LjRgtGMIiBhcmlhLWxhYmVsPSLQo9C00LDQu9C40YLRjCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgYXJpYS1oaWRkZW49InRydWUiIGZvY3VzYWJsZT0iZmFsc2UiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTUgMjBhMiAyIDAgMCAwIDIgMmgxMGEyIDIgMCAwIDAgMi0yVjhoMlY2aC00VjRhMiAyIDAgMCAwLTItMkg5YTIgMiAwIDAgMC0yIDJ2MkgzdjJoMnpNOSA0aDZ2Mkg5ek04IDhoOXYxMkg3Vjh6Ii8+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNOSAxMGgydjhIOXptNCAwaDJ2OGgtMnoiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgY29uc3QgdHlwZUlucHV0ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdHlwZS1pbnB1dCcpOwogICAgICAgICAgICBjb25zdCB1cmxJbnB1dCAgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay11cmwtaW5wdXQnKTsKCiAgICAgICAgICAgIC8vINCU0LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC10Lkg0YHRgdGL0LvQutC4INC80L7QttC90L4g0L/QvtC00YHQutCw0LfQsNGC0Ywg0LTQtdGE0L7Qu9GCLCDQvdC+INC00LvRjyDQvdC+0LLQvtC5IOKAlCDRgtC+0LvRjNC60L4gcGxhY2Vob2xkZXIKICAgICAgICAgICAgaWYgKCFpc05ldykgewogICAgICAgICAgICAgICAgdHlwZUlucHV0LnZhbHVlID0gcmF3VHlwZSB8fCAn0KLQuNC/INGB0YHRi9C70LrQuCc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0eXBlSW5wdXQudmFsdWUgPSByYXdUeXBlOwogICAgICAgICAgICAgICAgdHlwZUlucHV0LnBsYWNlaG9sZGVyID0gJ9Ci0LjQvyDRgdGB0YvQu9C60LgnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHVybElucHV0LnZhbHVlICA9IHJhd1VybDsKCiAgICAgICAgICAgIC8vINCw0LLRgtC+LdGI0LjRgNC40L3QsCDRgtC40L/QsAogICAgICAgICAgICB1cGRhdGVMaW5rVHlwZVdpZHRoKHR5cGVJbnB1dCk7CgogICAgICAgICAgICAvLyBFbnRlci9Fc2NhcGUg0LfQsNCy0LXRgNGI0LDRjtGCINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUKICAgICAgICAgICAgY29uc3Qgb25LZXkgPSAoZXYpID0+IHsKICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBleGl0TGlua0VkaXRNb2RlKGJsb2NrLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0VudGVyJykgewogICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZXhpdExpbmtFZGl0TW9kZShibG9jaywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB0eXBlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KTsKICAgICAgICAgICAgdXJsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KTsKCiAgICAgICAgICAgIC8vINCf0LXRgNC10YDQsNGB0YfRkdGCINGI0LjRgNC40L3RiyDQv9GA0Lgg0LLQstC+0LTQtQogICAgICAgICAgICB0eXBlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB1cGRhdGVMaW5rVHlwZVdpZHRoKHR5cGVJbnB1dCkpOwogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gdXBkYXRlTGlua1R5cGVXaWR0aCh0eXBlSW5wdXQpKTsKCiAgICAgICAgICAgIC8vINCj0LTQsNC70LXQvdC40LUKICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmRlbGV0ZS1idXR0b24nKTsKICAgICAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGlmICghd2luZG93LmNvbmZpcm0oJ9Cj0LTQsNC70LjRgtGMINGB0YHRi9C70LrRgz8nKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICB9KTsvLyDQpNC+0LrRg9GBINCyIFVSTCwg0LXRgdC70Lgg0YLQuNC/INGD0LbQtSDQt9Cw0L/QvtC70L3QtdC9LCDQuNC90LDRh9C1INCyINGC0LjQvwogICAgICAgICAgICAodHlwZUlucHV0LnZhbHVlID8gdXJsSW5wdXQgOiB0eXBlSW5wdXQpLmZvY3VzKCk7CiAgICAgICAgfQoKICAgICAgICAvLyDQktGL0YXQvtC0INC40Lcg0YDQtdC20LjQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YHRgdGL0LvQutC4CiAgICAgICAgZnVuY3Rpb24gZXhpdExpbmtFZGl0TW9kZShibG9jaywgc2F2ZSA9IHRydWUpIHsKICAgICAgICAgICAgY29uc3QgdHlwZUlucHV0ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdHlwZS1pbnB1dCcpOwogICAgICAgICAgICBjb25zdCB1cmxJbnB1dCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXVybC1pbnB1dCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHNhdmUgJiYgdHlwZUlucHV0ICYmIHVybElucHV0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdUeXBlID0gdHlwZUlucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VybCA9IHVybElucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdUeXBlICYmIG5ld1VybCkgewogICAgICAgICAgICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQuNC30LzQtdC90LXQvdC40Y8KICAgICAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstaW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGluay10eXBlIj4ke25ld1R5cGV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXdVcmwgPyBgPGEgaHJlZj0iJHtuZXdVcmx9IiBjbGFzcz0ibGluay11cmwiIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiIHRpdGxlPSIke25ld1VybH0iPiR7bmV3VXJsfTwvYT5gIDogYDxzcGFuIGNsYXNzPSJsaW5rLXVybCBsaW5rLXVybC0tZW1wdHkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvc3Bhbj5gfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0YfRgtC+LdGC0L4g0YPQtNCw0LvQuNC70Lgg0Lgg0L3QtSDQstCy0LXQu9C4INC30LDQvNC10L3RgzoKICAgICAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDQvdC+0LLQvtC5INGB0YHRi9C70LrQuCDRg9C00LDQu9GP0LXQvCDQv9GD0YHRgtC+0Lkg0LHQu9C+0LoKICAgICAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC10Lkg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LrQsNC6INCx0YvQu9C+CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSBibG9jay5kYXRhc2V0LmlzTmV3TGluayA9PT0gJzEnOwogICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykgewogICAgICAgICAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUeXBlID0gYmxvY2suZGF0YXNldC5vcmlnaW5hbFR5cGUgfHwgJ9Ci0LjQvyDRgdGB0YvQu9C60LgnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVXJsID0gYmxvY2suZGF0YXNldC5vcmlnaW5hbFVybCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstaW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGluay10eXBlIj4ke29yaWdpbmFsVHlwZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke29yaWdpbmFsVXJsID8gYDxhIGhyZWY9IiR7b3JpZ2luYWxVcmx9IiBjbGFzcz0ibGluay11cmwiIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiIHRpdGxlPSIke29yaWdpbmFsVXJsfSI+JHtvcmlnaW5hbFVybH08L2E+YCA6IGA8c3BhbiBjbGFzcz0ibGluay11cmwgbGluay11cmwtLWVtcHR5IiBzdHlsZT0iZGlzcGxheTpub25lIj48L3NwYW4+YH0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDQntGC0LzQtdC90LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjzoKICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINC90L7QstC+0LPQviDQsdC70L7QutCwINCx0LXQtyDQt9Cw0L/QvtC70L3QtdC90LjRjzog0YPQtNCw0LvRj9C10LwKICAgICAgICAgICAgICAgIC8vIC0g0LTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LXQs9C+OiDQvtGC0LrQsNGC0YvQstCw0LXQvCDQutCw0Log0LHRi9C70L4KICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gYmxvY2suZGF0YXNldC5pc05ld0xpbmsgPT09ICcxJzsKICAgICAgICAgICAgICAgIGlmIChpc05ldykgewogICAgICAgICAgICAgICAgICAgIC8vINCd0L7QstGL0Lkg0LHQu9C+0Log0L3QtdC70YzQt9GPICLQvtGC0LzQtdC90LjRgtGMIiDQuCDQvtGB0YLQsNCy0LjRgtGMINC90LAg0YHRgtGA0LDQvdC40YbQtSDigJQg0YPQtNCw0LvRj9C10LwuCiAgICAgICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgovLyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L7RgNC40LPQuNC90LDQu9GM0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8KICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVHlwZSA9IGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUeXBlIHx8ICfQotC40L8g0YHRgdGL0LvQutC4JzsKICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVXJsID0gYmxvY2suZGF0YXNldC5vcmlnaW5hbFVybCB8fCAnJzsKICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGluay10eXBlIj4ke29yaWdpbmFsVHlwZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICR7b3JpZ2luYWxVcmwgPyBgPGEgaHJlZj0iJHtvcmlnaW5hbFVybH0iIGNsYXNzPSJsaW5rLXVybCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgdGl0bGU9IiR7b3JpZ2luYWxVcmx9Ij4ke29yaWdpbmFsVXJsfTwvYT5gIDogYDxzcGFuIGNsYXNzPSJsaW5rLXVybCBsaW5rLXVybC0tZW1wdHkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvc3Bhbj5gfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXRpbmcnKTsKICAgICAgICAgICAgZGVsZXRlIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUeXBlOwogICAgICAgICAgICBkZWxldGUgYmxvY2suZGF0YXNldC5vcmlnaW5hbFVybDsKICAgICAgICAgICAgZGVsZXRlIGJsb2NrLmRhdGFzZXQuaXNOZXdMaW5rOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDQutC90L7Qv9C60YMg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICBjb25zdCBuZXdFZGl0QnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uJyk7CiAgICAgICAgICAgIGlmIChuZXdFZGl0QnRuKSB7CiAgICAgICAgICAgICAgICBuZXdFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZW50ZXJMaW5rRWRpdE1vZGUoYmxvY2spOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPCiAgICAgICAgZnVuY3Rpb24gYWRkTmV3Q29tbWVudCgpIHsKICAgICAgICAgICAgY29uc3QgY29tbWVudHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzTGlzdCcpOwogICAgICAgICAgICBjb25zdCBuZXdJZCA9IERhdGUubm93KCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBuZXdDb21tZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG5ld0NvbW1lbnQuY2xhc3NOYW1lID0gJ2NvbW1lbnQtYmxvY2snOwogICAgICAgICAgICBuZXdDb21tZW50LmRhdGFzZXQuY29tbWVudElkID0gbmV3SWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICBuZXdDb21tZW50LmRhdGFzZXQuaXNOZXdDb21tZW50ID0gJzEnO25ld0NvbW1lbnQuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudC10ZXh0Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbW1lbnRzTGlzdC5hcHBlbmRDaGlsZChuZXdDb21tZW50KTsKICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vINCh0YDQsNC30YMg0LLRhdC+0LTQuNC8INCyINGA0LXQttC40Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICBlbnRlckNvbW1lbnRFZGl0TW9kZShuZXdDb21tZW50KTsKICAgICAgICB9CgogICAgICAgIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0YHRgdGL0LvQutC4CiAgICAgICAgZnVuY3Rpb24gYWRkTmV3TGluaygpIHsKICAgICAgICAgICAgY29uc3QgbGlua3NMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtzTGlzdCcpOwogICAgICAgICAgICBjb25zdCBuZXdJZCA9IERhdGUubm93KCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBuZXdMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG5ld0xpbmsuY2xhc3NOYW1lID0gJ2xpbmstaXRlbSc7CiAgICAgICAgICAgIG5ld0xpbmsuZGF0YXNldC5saW5rSWQgPSBuZXdJZDsKICAgICAgICAgICAgbmV3TGluay5kYXRhc2V0LmlzTmV3TGluayA9ICcxJzsKICAgICAgICAgICAgbmV3TGluay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWluZm8iPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsaW5rLXR5cGUiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGluay11cmwgbGluay11cmwtLWVtcHR5IiBzdHlsZT0iZGlzcGxheTpub25lIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICBsaW5rc0xpc3QuYXBwZW5kQ2hpbGQobmV3TGluayk7CiAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDQodGA0LDQt9GDINCy0YXQvtC00LjQvCDQsiDRgNC10LbQuNC8INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgZW50ZXJMaW5rRWRpdE1vZGUobmV3TGluayk7CiAgICAgICAgfQoKICAgIC8vID09PT09PT0gQ0FSIERBVEEgZnJvbSBwYXJlbnQgcGFnZSAocG9zdE1lc3NhZ2UpID09PT09PT0KICAgIC8vIFJlY2VpdmVkIHdoZW4gcmVuZGVyUmlnaHRQYW5lKGNhcikgLyBvcGVuRHJhd2VyKHZpbikgaXMgY2FsbGVkIGluIGRyYXdlci5qcy4KICAgIC8vIFBvcHVsYXRlcyBhbGwgW2RhdGEtZmllbGRdIGVsZW1lbnRzIGFuZCB1cGRhdGVzIHRoZSBjYXJkIHRpdGxlLgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAnY2FyX2RhdGEnIHx8ICFlLmRhdGEuY2FyKSByZXR1cm47CiAgICAgIHZhciBjYXIgPSBlLmRhdGEuY2FyOwoKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZmllbGRdJykuZm9yRWFjaChmdW5jdGlvbihlbCkgewogICAgICAgIHZhciBmaWVsZCA9IGVsLmRhdGFzZXQuZmllbGQ7CiAgICAgICAgdmFyIHZhbDsKICAgICAgICBpZiAoZmllbGQgPT09ICdjb25kaXRpb25MYWJlbCcpIHsKICAgICAgICAgIHZhbCA9IGNhci5jb25kaXRpb24gPT09ICd1c2VkJyA/ICfQoSDQv9GA0L7QsdC10LPQvtC8JwogICAgICAgICAgICAgIDogKGNhci5jb25kaXRpb24gPT09ICduZXcnICA/ICfQndC+0LLRi9C5JyA6IGNhci5jb25kaXRpb24pOwogICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT09ICdzdGF0dXNMYWJlbCcpIHsKICAgICAgICAgIHZhbCA9IGNhci5zdGF0dXMgfHwgbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsID0gY2FyW2ZpZWxkXTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09ICcnKSB7CiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9ICfigJQnOwogICAgICAgIH0gZWxzZSBpZiAoZWwuZGF0YXNldC5mb3JtYXQgPT09ICdjdXJyZW5jeScpIHsKICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gTnVtYmVyKHZhbCkudG9Mb2NhbGVTdHJpbmcoJ3J1LVJVJykgKyAnwqDigr0nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IFN0cmluZyh2YWwpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBLZWVwIGNhcmQgdGl0bGUgc3RhdGljOyBWSU4gaXMgc2hvd24gaW4gdGhlIG91dGVyIHJpZ2h0LXBhbmUgaGVhZGVyLgogICAgICB2YXIgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkVGl0bGUnKTsKICAgICAgaWYgKHRpdGxlRWwpIHsKICAgICAgICB0aXRsZUVsLnRleHRDb250ZW50ID0gJ9Ca0LDRgNGC0L7Rh9C60LAg0LDQstGC0L7QvNC+0LHQuNC70Y8nOwogICAgICB9CiAgICB9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=';
// ======= SPLIT VIEW: right pane state machine (open / collapsed) =======
const splitRoot = document.getElementById('splitRoot');
const splitHandle = document.getElementById('splitHandle');
const rightPane = document.getElementById('rightPane');

const SNAP_HANDLE_PX = 0;    // kept for app.js compatibility
const CARD_MIN_WIDTH = 280;  // minmax(280px, 1fr) in CSS
const LEFT_PANE_MIN = CARD_MIN_WIDTH + 2 * 24 + 16; // 1 col + side pads + gap
const RIGHT_PANE_MIN = 280;   // kept for compatibility
const MIN_OPEN_WIDTH = 600;   // minimum open width (default state)
const MAX_OPEN_WIDTH = 900;   // maximum open width (fixed cap)
const HANDLE_WIDTH = 12;      // split handle width = collapsed tail

// rightPaneState: 'open' | 'collapsed'
let rightPaneState = 'collapsed';
let isDragging = false;
let dragStartX = 0;
let dragStartRightWidth = 0;
let dragMaxWidth = 0;
let currentRightPaneWidth = MIN_OPEN_WIDTH;
let rafId = null;
let pendingWidth = 0;

function isNarrowScreen() {
  return window.matchMedia('(max-width: 600px)').matches;
}

function getRightPaneMaxWidth() {
  const totalWidth = splitRoot ? splitRoot.offsetWidth : window.innerWidth;
  const handleWidth = splitHandle ? splitHandle.offsetWidth : HANDLE_WIDTH;
  const dynamicMax = totalWidth - handleWidth - LEFT_PANE_MIN;
  return Math.max(MIN_OPEN_WIDTH, dynamicMax);
}

function setRightPaneWidth(width) {
  if (!rightPane) return;
  const max = getRightPaneMaxWidth();
  const clamped = Math.min(max, Math.max(MIN_OPEN_WIDTH, width));
  rightPane.style.width = clamped + 'px';
  rightPane.style.flex = '0 0 ' + clamped + 'px';
  rightPane.style.transform = '';
  currentRightPaneWidth = clamped;
}

function collapseRightPane() {
  if (!rightPane) return;
  rightPaneState = 'collapsed';
  // Shrink physical width to 0 so leftPane expands; splitHandle stays as the visible tail
  rightPane.style.width = '0px';
  rightPane.style.flex = '0 0 0px';
  rightPane.style.transform = '';
  currentRightPaneWidth = MIN_OPEN_WIDTH;
}

function expandRightPane() {
  if (!rightPane) return;
  rightPaneState = 'open';
  setRightPaneWidth(MIN_OPEN_WIDTH);
}

function onSplitPointerMove(e) {
  if (!isDragging) return;
  if (rightPaneState === 'collapsed') return;
  const rawDelta = e.clientX - dragStartX;
  pendingWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
  if (rafId === null) {
    rafId = requestAnimationFrame(function() {
      rafId = null;
      setRightPaneWidth(pendingWidth);
    });
  }
}

function stopSplitDrag(e) {
  if (!isDragging) return;
  isDragging = false;
  if (rafId !== null) {
    cancelAnimationFrame(rafId);
    rafId = null;
  }
  document.body.classList.remove('split-dragging');
  document.body.style.userSelect = '';
  document.body.style.cursor = '';
  if (splitHandle) {
    splitHandle.releasePointerCapture(e.pointerId);
    splitHandle.removeEventListener('pointermove', onSplitPointerMove);
    splitHandle.removeEventListener('pointerup', stopSplitDrag);
    splitHandle.removeEventListener('pointercancel', stopSplitDrag);
    const rawDelta = e.clientX - dragStartX;
    const finalWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
    setRightPaneWidth(finalWidth);
  }
}

if (splitHandle) {
  splitHandle.addEventListener('pointerdown', function(e) {
    e.preventDefault();
    if (rightPaneState === 'collapsed') {
      // Any interaction with the handle expands back to MIN_OPEN_WIDTH
      expandRightPane();
      return;
    }
    isDragging = true;
    dragStartX = e.clientX;
    dragStartRightWidth = currentRightPaneWidth;
    dragMaxWidth = getRightPaneMaxWidth();
    document.body.classList.add('split-dragging');
    document.body.style.userSelect = 'none';
    document.body.style.cursor = 'col-resize';
    rightPane.style.transform = '';
    splitHandle.style.transform = '';
    splitHandle.setPointerCapture(e.pointerId);
    splitHandle.addEventListener('pointermove', onSplitPointerMove);
    splitHandle.addEventListener('pointerup', stopSplitDrag);
    splitHandle.addEventListener('pointercancel', stopSplitDrag);
  });
}

window.addEventListener('resize', function() {
  if (!rightPane) return;
  if (rightPaneState === 'open') {
    setRightPaneWidth(currentRightPaneWidth);
  } else {
    // Maintain collapsed state
    collapseRightPane();
  }
});

// Initialize right pane width
collapseRightPane();

// Wire up the collapse button in the drawer header
const rightPaneCollapseBtn = document.getElementById('rightPaneCollapseBtn');
if (rightPaneCollapseBtn) {
  rightPaneCollapseBtn.addEventListener('click', collapseRightPane);
}

// ======= IFRAME LOADING =======

// Posts the full car object (looked up by vin) to the already-loaded iframe.
// The iframe listens via window.addEventListener('message', ...) and populates
// all [data-field] elements and the card title.
function postCarDataToIframe(vin) {
  const iframe = document.getElementById('drawerIframe');
  if (!iframe || !iframe.contentWindow) return;
  const car = getCarByVin(vin);
  if (!car) return;
  iframe.contentWindow.postMessage({ type: 'car_data', car: car }, '*');
}

function getCarByVin(vin) {
  if (!vin || !window.CARS_DATA || !Array.isArray(window.CARS_DATA)) return null;
  return window.CARS_DATA.find(c => c.vin === vin) || null;
}

function formatHeaderText(value) {
  const raw = value ? String(value).trim() : '';
  if (!raw) return '';
  return raw
    .split(/\s+/)
    .map(word => word
      .split('-')
      .map(part => part ? (part.charAt(0).toLocaleUpperCase('ru-RU') + part.slice(1).toLocaleLowerCase('ru-RU')) : part)
      .join('-'))
    .join(' ');
}

function updateRightPaneHeaderMeta(vin) {
  const metaTextEl = document.getElementById('rightPaneCarMetaText');
  const vinTextEl = document.getElementById('rightPaneVinText');
  if (!metaTextEl || !vinTextEl) return;
  const normalizedVin = vin ? String(vin).trim() : '';

  const car = getCarByVin(normalizedVin);
  const brand = formatHeaderText(car && car.brand ? car.brand : '');
  const model = formatHeaderText(car && car.model ? car.model : '');
  const year = car && car.year ? String(car.year).trim() : '';

  const metaParts = [brand, model, year].filter(Boolean);
  metaTextEl.textContent = metaParts.join(' ');
  vinTextEl.textContent = normalizedVin ? ('VIN:' + normalizedVin) : '';
}

// renderRightPane(car) -- public API.
// Call this to populate the right pane with the full profile of a car.
// Sections populated:
//   data-role="right-section-specs"   -- brand/model/trim/year/color/...
//   data-role="right-section-docs"    -- vin/ptsType/keyNumber/comments
//   data-role="right-section-finance" -- price
//   data-role="right-section-extra"   -- showroom/condition/status/sourceFile
function renderRightPane(car) {
  if (!car) return;
  openDrawer(car.vin);
}

function setDrawerEmptyStateVisible(visible) {
  const emptyState = document.getElementById('drawerEmptyState');
  const drawerIframe = document.getElementById('drawerIframe');
  if (emptyState) {
    emptyState.style.display = visible ? 'flex' : 'none';
  }
  if (drawerIframe) {
    drawerIframe.style.display = visible ? 'none' : 'block';
  }
}

let themedDrawerDataUrl = null;

function getThemedDrawerDataUrl() {
  if (themedDrawerDataUrl) return themedDrawerDataUrl;

  const prefix = 'data:text/html;base64,';
  if (!DRAWER_DATA_URL || !DRAWER_DATA_URL.startsWith(prefix)) {
    themedDrawerDataUrl = DRAWER_DATA_URL;
    return themedDrawerDataUrl;
  }

  try {
    const encoded = DRAWER_DATA_URL.slice(prefix.length);
    const binary = atob(encoded);
    const bytes = Uint8Array.from(binary, ch => ch.charCodeAt(0));
    let html = new TextDecoder('utf-8').decode(bytes);

    html = html
      .replace(
        /(\.add-btn, \.add-comment-btn, \.add-link-btn, #addCommentBtn, #addLinkBtn\{[\s\S]*?background:\s*)#DADADA(\s*!important;)/,
        '$1#EAEAEA$2'
      )
      .replace(
        /(\.add-btn:hover, \.add-comment-btn:hover, \.add-link-btn:hover, #addCommentBtn:hover, #addLinkBtn:hover\{[\s\S]*?background:\s*)#D2D2D2(\s*!important;)/,
        '$1#DEDEDE$2'
      )
      .replace(
        /(#additionalSection \.icon-btn\.icon-btn--upload\s*\{\s*background:\s*)#DADADA(;)/,
        '$1#EAEAEA$2'
      )
      .replace(
        /(#additionalSection \.icon-btn\.icon-btn--upload:hover\s*\{\s*background:\s*)#D2D2D2(;)/,
        '$1#DEDEDE$2'
      )
      .replace(
        /(\.tile\.is-add\{[\s\S]*?background:\s*)#E5E5E5(;)/,
        '$1#EAEAEA$2'
      );

    const outBytes = new TextEncoder().encode(html);
    let outBinary = '';
    for (let index = 0; index < outBytes.length; index++) {
      outBinary += String.fromCharCode(outBytes[index]);
    }

    themedDrawerDataUrl = prefix + btoa(outBinary);
    return themedDrawerDataUrl;
  } catch (error) {
    themedDrawerDataUrl = DRAWER_DATA_URL;
    return themedDrawerDataUrl;
  }
}

// openDrawer(vin) -- load the iframe if needed, then push car data into it.
// vin is optional; if provided the matching car from window.CARS_DATA is shown.
function openDrawer(vin) {
  const drawerIframe = document.getElementById('drawerIframe');
  if (!drawerIframe) return;
  const normalizedVin = vin ? String(vin).trim() : '';
  if (!normalizedVin) {
    updateRightPaneHeaderMeta('');
    setDrawerEmptyStateVisible(true);
    return;
  }

  setDrawerEmptyStateVisible(false);
  updateRightPaneHeaderMeta(vin);
  if (!drawerIframe.src || drawerIframe.src === window.location.href) {
    // First open: load the iframe, then post car data once it is ready.
    if (normalizedVin) {
      drawerIframe.addEventListener('load', function() {
        postCarDataToIframe(normalizedVin);
      }, { once: true });
    }
    drawerIframe.src = getThemedDrawerDataUrl();
  } else {
    // Iframe already loaded -- just refresh the displayed car.
    postCarDataToIframe(normalizedVin);
  }
}

setDrawerEmptyStateVisible(true);

function closeDrawer() {
  // In split view the right pane is always visible; no-op
}
