// ======= DRAWER: state machine (S0–S3), drag, snap =======
//
// ================================================================
// ПРАВАЯ ПАНЕЛЬ -- полная карта блоков, данных и правила редактирования
// ================================================================
//
// 1. БЛОКИ ПРАВОГО ЭКРАНА (index.html -- внешняя оболочка)
// ---------------------------------------------------------
// data-role                    id                   Назначение
// right-pane                   rightPane            Корневой контейнер
// right-pane-inner             --                   Внутренняя обёртка
// right-pane-header            --                   Шапка панели
// right-pane-collapse-btn      rightPaneCollapseBtn Кнопка «Свернуть»
// right-pane-header-actions    drawerHeaderActions  Правый блок шапки
// right-pane-user-block        adminWrapper         Профиль/выход
// right-pane-user-label        adminText            Логин / «ADMIN»
// right-pane-avatar            avatar               Иконка пользователя
// right-pane-content           drawerContent        Область контента
// right-pane-iframe            drawerIframe         iframe карточки авто
//
// 2. БЛОКИ ВНУТРИ IFRAME (DRAWER_DATA_URL -- закодированный HTML)
// ---------------------------------------------------------
// data-role                        id                  Назначение
// right-inner-wrap                 --                  Корень iframe
// right-card-title                 --                  «Карточка авто»
// right-section-specs              mainSpecsSection    Осн. хар-ки
// right-section-specs-content      mainSpecsContent    Контент секции
// right-section-docs               docsSection         Документы
// right-section-docs-content       docsContent         Контент секции
// right-section-finance            financeSection      Финансы
// right-section-finance-content    financeContent      Контент секции
// right-section-additional         additionalSection   Доп. информация
// right-section-additional-content additionalContent   Контент секции
// right-comments                   commentsSection     Комментарии
// right-comments-list              commentsList        Список комм.
// right-links                      linksSection        Ссылки
// right-links-list                 linksList           Список ссылок
// right-content-header             --                  Заголовок «Контент»
// right-content-kits               kits                Блоки контента
// right-content-add-btn            addKitBtn           Кнопка добавления
// right-archive-header             --                  Заголовок «Архив»
// right-archive-kits               archiveKits         Архивные блоки
// right-viewer                     viewerBackdrop      Просмотр фото
//
// 3. СХЕМА ДАННЫХ АВТО (из window.CARS_DATA / cars-data.js)
// ---------------------------------------------------------
// Блок                         Поля
// right-section-specs          brand, model, year, color, engineType,
//                               mileage, transmission, steeringWheel
// right-section-docs           vin, govNumber, cts, pts, legalEntity,
//                               registered, arrivalDate, forSale
// right-section-finance        entryPrice, entryWithExpenses, repairCost,
//                               salePrice, carrierCost, deregistrationCost
// right-comments               comments[] {text, createdAt}
// right-links                  links[] {type, url}
// right-content-kits           kits[] {id, title, photos[], used, usedDate}
// right-archive-kits           archivedKits[] (то же, что kits, флаг used=true)
// right-card-title             vin (отображается в заголовке)
//
// 4. ФУНКЦИИ И СОБЫТИЯ
// ---------------------------------------------------------
// expandRightPane()    -- открыть панель (устанавливает ширину >= MIN)
// collapseRightPane()  -- свернуть панель (ширина -> 0 / скрыть)
// openDrawer()         -- загрузить DRAWER_DATA_URL в drawerIframe
// closeDrawer()        -- no-op в split-режиме
// setRightPaneWidth(w) -- задать ширину; вызывается при drag
//
// Событие «открыть»: клик по .car-card -> handleCarClick() (app.js)
//   -> expandRightPane() + openDrawer()
// Событие «свернуть»: клик #rightPaneCollapseBtn / drag к левому краю
//
// Зависимость от роли (auth.js):
//   admin        -- доступны все фильтры, полный контент iframe
//   photographer -- заблокированы чужие фильтры; right-pane-user-label
//                   показывает логин фотографа
//
// 5. ПРАВИЛА БЕЗОПАСНОГО РЕДАКТИРОВАНИЯ
// ---------------------------------------------------------
// МОЖНО менять:
//   - CSS-стили (цвета, отступы, шрифты) секций
//   - Текст заголовков секций (.section-header-title)
//   - Порядок .spec-item внутри .specs-grid
//   - Добавлять новые секции-аккордеоны (копируя шаблон collapse-section
//     и регистрируя через setupCollapse())
//   - HTML-комментарии и data-* атрибуты, не ломающие логику
//
// НЕЛЬЗЯ трогать без анализа последствий:
//   - id элементов (на них завязаны getElementById в JS)
//   - data-action атрибуты тайлов (.tile, .collage-cell)
//   - data-kit-id атрибуты (ключ хранилища)
//   - Структуру viewer-backdrop / viewer-stage (обрабатывается openViewer)
//   - Обработчики событий на window (drag, keydown, message)
//   - DRAWER_DATA_URL -- менять только через декод -> правка -> энкод, не вручную
//   - Функции expandRightPane / collapseRightPane / openDrawer в app.js
// ================================================================
const DRAWER_DATA_URL = 'data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InJ1Ij4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIi8+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+CjxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8c3R5bGU+CiAgICA6cm9vdHsKICAgICAgLS1pbnRlci1yZWd1bGFyOiA0MDA7CiAgICAgIC0taW50ZXItbWVkaXVtOiA1MDA7CiAgICAgIC0taW50ZXItc2VtaWJvbGQ6IDYwMDsKCiAgICAgIC0tcGFnZS1iZzogI0YxRjFGMTsKCiAgICAgIC0td2hpdGU6ICNGRkZGRkY7CiAgICAgIC0tdGV4dC1wcmltYXJ5OiAjMUExQTFBOwogICAgICAtLXRleHQtc2Vjb25kYXJ5OiAjNEI1NTYzOwogICAgICAtLXRleHQtdGVydGlhcnk6ICM4MDgwODA7CgogICAgICAtLWJvcmRlcjogI0U4RThFODsKICAgICAgLS1kaXZpZGVyOiAjRThFOEU4OwoKICAgICAgLS1hZGQtcGhvdG8tY29sb3I6IHZhcigtLWJvcmRlcik7CiAgICAgIC0tYWRkLXBob3RvLWNvbG9yLXVzZWQ6IHZhcigtLXVzZWQtYm9yZGVyKTsKCiAgICAgIC0tYnRuLWRhcms6ICMxQTFBMUE7CiAgICAgIC0tYnRuLWRhcmstaG92ZXI6ICMyQTJCMkU7CgogICAgICAtLWJ0bi1kYW5nZXI6ICNGRjRENTc7CiAgICAgIC0tYnRuLWRhbmdlci1ob3ZlcjogI0U2M0I0NTsKCiAgICAgIC0tdXNlZC1iZzogI0VBRjBFRDsKICAgICAgLS11c2VkLWJvcmRlcjogIzAyRDE1QzsKICAgICAgLS11c2VkLWRpdmlkZXI6ICNFN0YwRUI7CiAgICAgIC0tdXNlZC1wYWdlLWJnOiAjRUNGMEVFOwoKICAgICAgLS10aWxlLWVtcHR5OiB2YXIoLS1wYWdlLWJnKTsKICAgICAgLS10aWxlLWFkZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1hZGQtdXNlZDogdHJhbnNwYXJlbnQ7CiAgICAgIC0tdGlsZS1lbXB0eS11c2VkOiAjRDFFREREOwoKICAgICAgLS1zaGFkb3ctZmxvYXQ6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjEyKTsKCiAgICAgIC0tcmFkaXVzLWNhcmQ6IDIwcHg7CiAgICAgIC0tcmFkaXVzLWJ0bjogMTBweDsKICAvKiBEZWZpbmUgbGFyZ2VyIHJhZGl1cyB2YWx1ZXMgdG8gbWF0Y2ggY2FyZCBzdHlsaW5nIGZyb20gcGFnZTEgKi8KICAtLXJhZGl1cy1sZzogMjRweDsKICAtLXJhZGl1cy1tZDogMTJweDsKCiAgICAgIC0tZ2FwLXRpbGVzOiA0cHg7CiAgICAgIC0tdGlsZS1yYXRpbzogMTYvOTsKCiAgICAgIC0tYnRuLXNpemU6IGNsYW1wKDM2cHgsIDR2dywgNDJweCk7CiAgICAgIC0tY2FyZC1wYWQ6IDIwcHg7CgogICAgICAvKiB2aWV3ZXIgY29sb3JzICjQv9C+0LQg0YDQtdGE0LXRgNC10L3RgSkgKi8KICAgICAgLS12aWV3ZXItb3ZlcmxheTogcmdiYSgyMzMsIDIzNiwgMjM5LCAwLjk1KTsgLyog0YHQtdGA0YvQuSDRgdC70L7QuSAqLwogICAgICAtLXZpZXdlci1wYW5lbDogcmdiYSgxNywgMjQsIDM5LCAwLjkyKTsgICAgICAvKiDRgtGR0LzQvdGL0Lkg0LHQu9C+0LogKi8KICAgICAgLS12aWV3ZXItcGFuZWwtMjogcmdiYSgxNywgMjQsIDM5LCAwLjgyKTsKICAgICAgLS12aWV3ZXItc3Ryb2tlOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICAtLXZpZXdlci1zdHJva2UtMjogcmdiYSgyNTUsMjU1LDI1NSwwLjE2KTsKICAgIH0KCiAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveDsgbWFyZ2luOjA7IHBhZGRpbmc6MDt9CiAgICBodG1sLGJvZHl7aGVpZ2h0OmF1dG87bWluLWhlaWdodDowO3dpZHRoOjEwMCU7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTp2aXNpYmxlO30KICAgIGJvZHl7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLWJnKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogICAgfQoKICAgIC53cmFwewogICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgIG1hcmdpbjogMDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogMjBweDsKICAgIH0KCiAgICAvKiBTZWN0aW9uIGhlYWRlciAqLwogICAgLnNlY3Rpb24taGVhZGVyewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47CiAgICAgIGdhcDogMTJweDsKICAgIH0KICAgIC5zZWN0aW9uLXRpdGxlewogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQogICAgLnNlY3Rpb24tYWN0aW9uc3sKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgfQoKICAgIC8qIEJ1dHRvbnMgKi8KICAgIC5pY29uLWJ0bnsKICAgICAgd2lkdGg6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1idG4pOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBjdXJzb3I6cG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlLCB0cmFuc2Zvcm0gMC4xcyBlYXNlOwogICAgICBmbGV4LXNocmluazowOwogICAgICBwYWRkaW5nOiAwOwogICAgICBsaW5lLWhlaWdodDogMDsKICAgIH0KICAgIC5pY29uLWJ0bjphY3RpdmV7dHJhbnNmb3JtOiBzY2FsZSgwLjk4KTt9CiAgICAuaWNvbi1idG4tLWRhcmt7YmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmspOyBjb2xvcjogI2ZmZjt9CiAgICAuaWNvbi1idG4tLWRhcms6aG92ZXJ7YmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIpO30KICAgIC5pY29uLWJ0bi0tZGFuZ2Vye2JhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIpOyBjb2xvcjogI2ZmZjt9CiAgICAuaWNvbi1idG4tLWRhbmdlcjpob3ZlcntiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTt9CiAgICAuaWNvbi1idG4tLWdob3N0ewogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICBjb2xvcjojZmZmOwogICAgICBib3JkZXI6IG5vbmU7CiAgICB9CiAgICAuaWNvbi1idG4tLWdob3N0OmhvdmVyeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTYpOyB9CgogICAgLmljb257CiAgICAgIHdpZHRoOiAyNHB4OwogICAgICBoZWlnaHQ6IDI0cHg7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgfQogICAgLmljb24gc3ZnewogICAgICB3aWR0aDogMThweDsgICAgICAgICAgICAgICAvKiDQstC40LfRg9Cw0LvRjNC90L4gItGC0L7QvdGM0YjQtSIgKi8KICAgICAgaGVpZ2h0OiAxOHB4OwogICAgICBkaXNwbGF5OmJsb2NrOwogICAgICBvcGFjaXR5OiAwLjkyOwogICAgfQoKICAgIC5yb3RhdGUtNDV7IHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTsgfQoKICAgIC8qID09PT09INCh0LLQvtGA0LDRh9C40LLQsNC10LzRi9C1INGB0LXQutGG0LjQuCDQutCw0YDRgtC+0YfQutC4INCw0LLRgtC+0LzQvtCx0LjQu9GPID09PT09ICovCiAgICAuY29sbGFwc2Utc2VjdGlvbiB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgLyogVXNlIGxhcmdlciBib3JkZXItcmFkaXVzIGZvciBjb2xsYXBzaWJsZSBzZWN0aW9ucyB0byBtYXRjaCBwYWdlMSBkZXNpZ24gKi8KICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWxnKTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgYm94LXNoYWRvdzogbm9uZTsKICAgIH0KICAgIC5zZWN0aW9uLWhlYWRlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgcGFkZGluZzogMTZweCAyMHB4OwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2U7CiAgICB9CiAgICAuc2VjdGlvbi1oZWFkZXI6aG92ZXIgewogICAgICAvKiBVc2UgbGlnaHQgZ3JleSBob3ZlciBjb2xvdXIgc2ltaWxhciB0byBwYWdlMSAoI0VERURFRCkgKi8KICAgICAgYmFja2dyb3VuZDogI0VERURFRDsKICAgIH0KICAgIC5zZWN0aW9uLWhlYWRlci1sZWZ0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAxMnB4OwogICAgfQogICAgLnNlY3Rpb24taGVhZGVyLXRpdGxlIHsKICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItc2VtaWJvbGQpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICB9CiAgICAuY29sbGFwc2UtaWNvbiB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBjb2xvcjogI0RBREFEQTsKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTsKICAgIH0KICAgIC5jb2xsYXBzZS1pY29uIHN2ZyB7CiAgICAgIHdpZHRoOiAyNHB4OwogICAgICBoZWlnaHQ6IDI0cHg7CiAgICB9CiAgICAuY29sbGFwc2UtaWNvbi5leHBhbmRlZCB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsKICAgIH0KICAgIC5zZWN0aW9uLWNvbnRlbnQgewogICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgcGFkZGluZzogdmFyKC0tY2FyZC1wYWQpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICB9CiAgICAuc2VjdGlvbi1jb250ZW50LmNvbGxhcHNlZCB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICAuc3BlY3MtZ3JpZCB7CiAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjIwcHgsIDFmcikpOwogICAgICBnYXA6IDIwcHggMjRweDsKICAgIH0KICAgIC5zcGVjLWl0ZW0gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDZweDsKICAgIH0KICAgIC5zcGVjLWxhYmVsIHsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItbWVkaXVtKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICB9CiAgICAuc3BlYy12YWx1ZSB7CiAgICAgIGZvbnQtc2l6ZTogMTVweDsKICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgfQoKICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPICjRgdC60L7Qv9C40YDQvtCy0LDQvdC+INC4INCw0LTQsNC/0YLQuNGA0L7QstCw0L3QviDQuNC3IHBhZ2UxKQogICAgICAg0K3RgtC4INGB0YLQuNC70Lgg0L/RgNC40LzQtdC90Y/RjtGC0YHRjyDRgtC+0LvRjNC60L4g0LLQvdGD0YLRgNC4INGB0LXQutGG0LjQuCAjYWRkaXRpb25hbFNlY3Rpb24KICAgICAgINGH0YLQvtCx0Ysg0LLQvdC10YjQvdC40LUg0Y3Qu9C10LzQtdC90YLRiyDRgdGC0YDQsNC90LjRhtGLINC+0YHRgtCw0LvQuNGB0Ywg0L3QtdC40LfQvNC10L3QvdGL0LzQuC4KICAgICovCgogICAgLyog0JfQsNCz0L7Qu9C+0LLQvtC6INC60LDRgNGC0L7Rh9C60Lgg0LDQstGC0L7QvNC+0LHQuNC70Y8gKi8KICAgIC5jYXItY2FyZC10aXRsZXsKICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItc2VtaWJvbGQpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAvKiDQkdC70L7QuiDQuCDQv9C+0LTQv9GD0L3QutGC0Ysg0LTQvtC/LiDQuNC90YTQvtGA0LzQsNGG0LjQuCAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWJsb2NrIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAyMHB4OwogICAgICBwYWRkaW5nOiAwOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWl0ZW0gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDIwcHg7CiAgICB9CiAgICAvKiDRg9GB0YLRgNCw0L3Rj9C10Lwg0LTQstC+0LnQvdC+0Lkg0L7RgtGB0YLRg9C/INC/0YDQuCDQv9GD0YHRgtGL0YUg0YHQv9C40YHQutCw0YUgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuYWRkaXRpb25hbC1pdGVtLmlzLWVtcHR5IHsKICAgICAgZ2FwOiAwOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hZGRpdGlvbmFsLWl0ZW0uaXMtZW1wdHkgLmNvbW1lbnRzLWxpc3QsCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSAubGlua3MtbGlzdCB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFkZGl0aW9uYWwtaGVhZGVyIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiA4cHg7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFkZGl0aW9uYWwtdGl0bGUgewogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1zZW1pYm9sZCk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsKICAgIH0KICAgIC8qINCh0L/QuNGB0L7QuiDQutC+0LzQvNC10L3RgtCw0YDQuNC10LIgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuY29tbWVudHMtbGlzdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGdhcDogNHB4OwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5jb21tZW50LWJsb2NrIHsKICAgICAgYmFja2dyb3VuZDogI0YxRjFGMTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgZ2FwOiAxMnB4OwogICAgICBtaW4taGVpZ2h0OiBjYWxjKHZhcigtLWJ0bi1zaXplKSArIDQwcHgpOwogICAgICBmb250LWZhbWlseTogSW50ZXIsIHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuY29tbWVudC10ZXh0IHsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgZmxleDogMTsKICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsKICAgICAgcGFkZGluZy1yaWdodDogMjBweDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAuY29tbWVudC1pbnB1dCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIC8qIEluaGVyaXQgdGhlIGxpZ2h0IGdyZXkgYmFja2dyb3VuZCBmcm9tIHRoZSBjb250YWluZXIgKi8KICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgLyogU2hvdyBhIHN1YnRsZSBib3JkZXIgbGlrZSBpbiBwYWdlMSAqLwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKICAgICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OwogICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIG1hcmdpbjogMDsKICAgICAgcmVzaXplOiBub25lOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBtaW4taGVpZ2h0OiAxLjZlbTsKICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICBmbGV4OiAxOwogICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICAgIHRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICB9CgogICAgLyogQ2hhbmdlIGJvcmRlciBjb2xvciBvZiB0aGUgY29tbWVudCB0ZXh0YXJlYSBvbiBmb2N1cyBzaW1pbGFyIHRvIHBhZ2UxICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtaW5wdXQ6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgfQogICAgLyog0KHQv9C40YHQvtC6INGB0YHRi9C70L7QuiAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rcy1saXN0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiA0cHg7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbSB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgYmFja2dyb3VuZDogI0YxRjFGMTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgICAgZ2FwOiAxMnB4OwogICAgICBoZWlnaHQ6IGNhbGModmFyKC0tYnRuLXNpemUpICsgNDBweCk7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaW5mbyB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBmbGV4OiAxOwogICAgICBtaW4td2lkdGg6IDA7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZSB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLW1lZGl1bSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICBmbGV4OiAwIDAgYXV0bzsKICAgIH0KICAgIC8qINC00L7QsdCw0LLQu9GP0LXQvCDQtNCy0L7QtdGC0L7Rh9C40LUg0L/QvtGB0LvQtSDQvdCw0LfQstCw0L3QuNGPINGC0LjQv9CwICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstaXRlbTpub3QoLmVkaXRpbmcpIC5saW5rLXR5cGU6OmFmdGVyIHsKICAgICAgY29udGVudDogIjoiOwogICAgICBtYXJnaW4tcmlnaHQ6IDZweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsIHsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgLyogdW5kZXJsaW5lIG9ubHkgdW5kZXIgdGhlIHRleHQgKG5vdCB0aGUgd2hvbGUgZmxleCB3aWR0aCkgKi8KICAgICAgdGV4dC1kZWNvcmF0aW9uLWxpbmU6IHVuZGVybGluZTsKICAgICAgdGV4dC1kZWNvcmF0aW9uLXN0eWxlOiBkYXNoZWQ7CiAgICAgIHRleHQtZGVjb3JhdGlvbi1jb2xvcjogI0NCRDVFMTsKICAgICAgdGV4dC11bmRlcmxpbmUtb2Zmc2V0OiAycHg7CgogICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgZmxleDogMSAxIGF1dG87CiAgICAgIG1pbi13aWR0aDogMDsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay11cmw6aG92ZXIgewogICAgICB0ZXh0LWRlY29yYXRpb24tc3R5bGU6IHNvbGlkOwogICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6ICM2NDc0OEI7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstZWRpdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBmbGV4OiAxOwogICAgICBtaW4td2lkdGg6IDA7CiAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdHlwZS1pbnB1dCB7CiAgICAgIHdpZHRoOiAxMjBweDsKICAgICAgbWluLXdpZHRoOiAxMjBweDsKICAgICAgcGFkZGluZzogNnB4IDEwcHg7CiAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgZmxleDogMCAwIGF1dG87CiAgICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybC1pbnB1dCB7CiAgICAgIGZsZXg6IDE7CiAgICAgIG1pbi13aWR0aDogMTQwcHg7CiAgICAgIHBhZGRpbmc6IDZweCAxMHB4OwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogNDAwOwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay10eXBlLWlucHV0OmZvY3VzLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybC1pbnB1dDpmb2N1cyB7CiAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgIGJvcmRlci1jb2xvcjogIzk0QTNCODsKICAgIH0KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay1hY3Rpb25zIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiA4cHg7CiAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgfQogICAgLyog0KHRgtC40LvQuCDQutC90L7Qv9C+0Log0LLQvdGD0YLRgNC4INCx0LvQvtC60LAg0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L7QuSDQuNC90YTQvtGA0LzQsNGG0LjQuCAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5lZGl0LWJ1dHRvbiB7CiAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBib3JkZXI6IG5vbmU7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmVkaXQtYnV0dG9uOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogIzJBMkEyQTsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQgewogICAgICBiYWNrZ3JvdW5kOiAjREFEQURBOwogICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tdXBsb2FkOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogI0QyRDJEMjsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbiB7CiAgICAgIC8qIE1hdGNoIHBhZ2UxOiByZWQgZmlsbGVkIGJ1dHRvbiB3aXRoIHdoaXRlIGljb24gKi8KICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlcik7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICB9CiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXItaG92ZXIpOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgIH0KCiAgICAvKiBFbnN1cmUgdGhlIHRyYXNoIGljb24gaW5zaWRlIHRoZSBkZWxldGUgYnV0dG9uIHVzZXMgdGhlIGJ1dHRvbidzIHdoaXRlIGNvbG91ciAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b24gc3ZnLAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b246aG92ZXIgc3ZnIHsKICAgICAgZmlsbDogI0ZGRkZGRjsKICAgIH0KCiAgICAvKiBGb3JjZSBwYXRocyBpbnNpZGUgdGhlIHRyYXNoIGljb24gdG8gdXNlIHdoaXRlIGZpbGwgZm9yIHByb3BlciBjb250cmFzdCAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b24gc3ZnIHBhdGgsCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbjpob3ZlciBzdmcgcGF0aCB7CiAgICAgIGZpbGw6ICNGRkZGRkYgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBSZW1vdmUgcm91bmRlZCBjb3JuZXJzIGZyb20gdGhlIHRleHRhcmVhIG9ubHkgd2hlbiBlZGl0aW5nIHRvIG1hdGNoIHBhZ2UxICovCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmNvbW1lbnQtYmxvY2suZWRpdGluZyAuY29tbWVudC1pbnB1dHsKICAgICAgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIFVzZSBidXR0b24tc2l6ZWQgcmFkaXVzIGZvciBsaW5rIGlucHV0cyB0byBiZXR0ZXIgbWF0Y2ggcGFnZTEgKi8KICAgICNhZGRpdGlvbmFsU2VjdGlvbiAubGluay10eXBlLWlucHV0LAogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybC1pbnB1dHsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgICB9CgogICAgLyogT24gZm9jdXMsIHVzZSB0ZXJ0aWFyeSB0ZXh0IGNvbG91ciBmb3IgbGluayBpbnB1dCBib3JkZXJzIChzaW1pbGFyIHRvIHBhZ2UxKSAqLwogICAgI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXR5cGUtaW5wdXQ6Zm9jdXMsCiAgICAjYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsLWlucHV0OmZvY3VzewogICAgICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgfQoKICAgIC8qIEtpdHMgZ3JpZCAo0LrQsNC6INCyINCc0LXQvdGOLmh0bTogYXV0by1maWxsICsgbWlubWF4KSAqLwogICAgLmtpdHN7CiAgICAgIGRpc3BsYXk6Z3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoNTIwcHgsIDFmcikpOwogICAgICBnYXA6IDIwcHg7CiAgICAgIGFsaWduLWl0ZW1zOnN0YXJ0OwogICAgfQoKICAgIEBtZWRpYSAobWF4LXdpZHRoOiAxMTAwcHgpewogICAgICAua2l0c3sgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoNDYwcHgsIDFmcikpOyB9CiAgICB9CiAgICBAbWVkaWEgKG1heC13aWR0aDogNzgwcHgpewogICAgICBib2R5eyBwYWRkaW5nOiAyMHB4OyB9Ci5raXRzeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgfQogICAgfQoKICAgIC8qIEtpdCBjYXJkICovCiAgICAua2l0LWNhcmR7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogICAgICBwYWRkaW5nOiB2YXIoLS1jYXJkLXBhZCk7CiAgICAgIG1pbi13aWR0aDogMDsKICAgICAgCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIH0KCiAgICAvKiBEcmFnIGhhbmRsZSAo0LLQtdGA0YXQvdC40Lkg0LrQvtC90YLRg9GAKSAqLwogICAgLmtpdC1kcmFnLWhhbmRsZXsKICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgIHRvcDowOwogICAgICBsZWZ0OjA7CiAgICAgIHJpZ2h0OjA7CiAgICAgIGhlaWdodDogMTRweDsKICAgICAgY3Vyc29yOiBncmFiOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogdmFyKC0tcmFkaXVzLWNhcmQpOwogICAgfQogICAgLmtpdC1kcmFnLWhhbmRsZTpob3ZlcnsgYmFja2dyb3VuZDogcmdiYSgyNiwyNiwyNiwwLjAzKTsgfQogICAgLmtpdC1jYXJkLmlzLWRyYWdnaW5nIC5raXQtZHJhZy1oYW5kbGV7IGN1cnNvcjogZ3JhYmJpbmc7IH0KCiAgICAua2l0LWNhcmQuaXMtZHJhZ2dpbmd7CiAgICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1mbG9hdCk7CiAgICB9CgogICAgLmtpdC1wbGFjZWhvbGRlcnsKICAgICAgLyogcGxhY2Vob2xkZXIgb2NjdXBpZXMgc3BhY2UgYnV0IGlzIGludmlzaWJsZSAobm8gJ2xhbmRpbmcgc2xvdCcgVUkpICovCiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtY2FyZCk7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgKyAua2l0LXBsYWNlaG9sZGVyeyBib3JkZXItY29sb3I6IHZhcigtLXVzZWQtYm9yZGVyKTsgfQoKICAgIC5raXQtY2FyZC5pcy11c2VkewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS11c2VkLWJnKTsKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS11c2VkLWJvcmRlcik7CiAgICB9CgogICAgLmtpdC10b3B7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgZ2FwOiAxMnB4OwogICAgfQoKICAgIC5raXQtdGl0bGV7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIG1pbi13aWR0aDogMDsKICAgICAgZmxleDogMTsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICB9CiAgICAua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdeyBvdXRsaW5lOm5vbmU7IH0KICAgIC5raXQtYWN0aW9uc3sKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBmbGV4LXNocmluazowOwogICAgfQoKICAgIC8qIGRpdmlkZXIgbXVzdCBzcGFuIGZ1bGwgd2lkdGggKi8KICAgIC5raXQtZGl2aWRlcnsKICAgICAgaGVpZ2h0OiAxcHg7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWRpdmlkZXIpOwogICAgICBtYXJnaW46IDIwcHggMDsgLyogMTZweCDQvtGCINGI0LDQv9C60Lgg0LTQviDQu9C40L3QuNC4INC4IDE2cHgg0L7RgiDQu9C40L3QuNC4INC00L4gJ9CY0YHQv9C+0LvRjNC30L7QstCw0L3QvicgKi8KICAgICAgLyogZnVsbC1ibGVlZCDQstC90YPRgtGA0Lgg0LrQsNGA0YLQvtGH0LrQuCDQv9GA0LggcGFkZGluZyA0MHB4ICovCiAgICAgIG1hcmdpbi1sZWZ0OiBjYWxjKHZhcigtLWNhcmQtcGFkKSAqIC0xKTsKICAgICAgbWFyZ2luLXJpZ2h0OiBjYWxjKHZhcigtLWNhcmQtcGFkKSAqIC0xKTsKICAgIH0KCiAgICAua2l0LWNhcmQuaXMtdXNlZCAua2l0LWRpdmlkZXJ7IGJhY2tncm91bmQ6IHZhcigtLXVzZWQtYm9yZGVyKTsgfQoKICAgIC8qIFVzZWQgcm93ICovCiAgICAua2l0LXVzZWQtcm93ewogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgZ2FwOiAxMHB4OwogICAgICB1c2VyLXNlbGVjdDpub25lOwogICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwoKICAgICAgLyogc2FtZSB0eXBvZ3JhcGh5IGFzIGZvb3RlciAoItCS0YHQtdCz0L4g0YTQvtGC0L4iLCAi0JfQsNCz0YDRg9C20LXQvdC+IikgKi8KICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItcmVndWxhcik7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKCiAgICAgIC8qIHJvdyBpdHNlbGYgaXMgbm90IGNsaWNrYWJsZTsgb25seSB0aGUgY2hlY2tib3ggaXMgKi8KICAgICAgY3Vyc29yOiBkZWZhdWx0OwogICAgfQoKICAgIC5raXQtY2hlY2t7IGN1cnNvcjogZGVmYXVsdDsgfQogICAgLmtpdC1jYXJkLmlzLWVkaXQgLmtpdC1jaGVja3sgY3Vyc29yOiBwb2ludGVyOyB9Cgoua2l0LWNoZWNrewogICAgICB3aWR0aDogMjBweDsKICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtYmcpOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgZmxleC1zaHJpbms6MDsKICAgIH0KICAgIC5raXQtY2FyZC5pcy11c2VkIC5raXQtY2hlY2t7IGJhY2tncm91bmQ6ICMwMkQxNUM7IH0KICAgIC5raXQtY2hlY2sgc3Zne3dpZHRoOiAxNHB4OyBoZWlnaHQ6IDE0cHg7IGNvbG9yOiAjZmZmOyBkaXNwbGF5Om5vbmU7IG9wYWNpdHk6IDE7fQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLmtpdC1jaGVjayBzdmd7ZGlzcGxheTpibG9jazt9CgogICAgLyogUGhvdG8gZ3JpZCAqLwogICAgLmtpdC1ncmlkewogICAgICBkaXNwbGF5OmdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIG1pbm1heCgwLCAxZnIpKTsKICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMiwgYXV0byk7CiAgICAgIGdhcDogdmFyKC0tZ2FwLXRpbGVzKTsKICAgIH0KCiAgICAudGlsZXsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBhc3BlY3QtcmF0aW86IHZhcigtLXRpbGUtcmF0aW8pOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10aWxlLWVtcHR5KTsKICAgICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgICBib3JkZXItcmFkaXVzOiAwOyAvKiDQutCy0LDQtNGA0LDRgtC90YvQtSAqLwogICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAudGlsZS5pcy1lbXB0eXsgYmFja2dyb3VuZDogdmFyKC0tdGlsZS1lbXB0eS11c2VkKTsgfQoKICAgIC50aWxlLmlzLWFkZHsKICAgICAgLyog0LHQtdC3INC+0LHQstC+0LTQutC4OyDQvdC10LnRgtGA0LDQu9GM0L3Ri9C5INGB0LXRgNGL0Lkg0YfRg9GC0Ywg0YHQstC10YLQu9C10LUsINCx0LvQuNC30LrQviDQuiDRhNC+0L3Rgzsg0L/Qu9GO0YEg4oCUINGH0ZHRgNC90YvQuSAqLwogICAgICBiYWNrZ3JvdW5kOiAjREFEQURBOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGNvbG9yOiAjMUExQTFBOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDE0MG1zIGVhc2U7CiAgICB9CiAgICAudGlsZS5pcy1hZGQ6aG92ZXJ7CiAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICB9CiAgICAudGlsZS5pcy1hZGQuaXMtZHJhZ292ZXJ7CiAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICB9CgogICAgLyogUGx1cyBzaXplIGluICJhZGQgcGhvdG8iIHRpbGUgKi8KICAgIC50aWxlLmlzLWFkZCAuaWNvbnsgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgfQogICAgLnRpbGUuaXMtYWRkIC5pY29uIHN2Z3sgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgb3BhY2l0eTogMTsgfQogICAgLmtpdC1jYXJkLmlzLXVzZWQgLnRpbGUuaXMtYWRkewogICAgICBiYWNrZ3JvdW5kOiAjRDFFREREOwogICAgICBjb2xvcjogIzFBMUExQTsKICAgIH0KCiAgICAudGlsZSBpbWd7CiAgICAgIHdpZHRoOjEwMCU7CiAgICAgIGhlaWdodDoxMDAlOwogICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgZGlzcGxheTpibG9jazsKICAgIH0KCiAgICAvKiBIb3Zlcjogb25seSBkYXJrZW4sIG5vIGljb25zICovCiAgICAudGlsZS5pcy1waG90bzo6YWZ0ZXIsCiAgICAuY29sbGFnZS1jZWxsLmlzLXBob3RvOjphZnRlcnsKICAgICAgY29udGVudDoiIjsKICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgIGluc2V0OjA7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMCk7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KICAgIC50aWxlLmlzLXBob3RvOmhvdmVyOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjI1KTsgfQoKICAgIC8qIGNvbGxhZ2UgKHRpbGUgNikgKi8KICAgIC50aWxlLmlzLWNvbGxhZ2V7IHBhZGRpbmc6MDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IH0KICAgIC5jb2xsYWdlLWdyaWR7CiAgICAgIHdpZHRoOjEwMCU7CiAgICAgIGhlaWdodDoxMDAlOwogICAgICBkaXNwbGF5OmdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIDFmcik7CiAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDIsIDFmcik7CiAgICAgIGdhcDogdmFyKC0tZ2FwLXRpbGVzKTsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICB9CiAgICAuY29sbGFnZS1jZWxsewogICAgICBwb3NpdGlvbjpyZWxhdGl2ZTsKICAgICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10aWxlLWVtcHR5KTsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAuY29sbGFnZS1jZWxsLmlzLWVtcHR5eyBiYWNrZ3JvdW5kOiB2YXIoLS10aWxlLWVtcHR5LXVzZWQpOyB9CiAgICAuY29sbGFnZS1jZWxsIGltZ3sgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IG9iamVjdC1maXQ6IGNvdmVyOyBkaXNwbGF5OmJsb2NrOyB9CiAgICAuY29sbGFnZS1jZWxsLmlzLXBob3RvOmhvdmVyOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjI1KTsgfQoKICAgIC5tb3JlLW92ZXJsYXl7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICBpbnNldDowOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjYpOwogICAgICBjb2xvcjojZmZmOwogICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQoKICAgIC5raXQtZm9vdGVyewogICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOwogICAgICBnYXA6IDEycHg7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBmb250LXdlaWdodDogdmFyKC0taW50ZXItcmVndWxhcik7CiAgICB9CiAgICAua2l0LWNhcmQuaXMtdXNlZCAua2l0LWZvb3RlcnsgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgfQoKICAgIAogICAgLyogPT09PT0gVmlld2VyICjQv9C10YDQtdGA0LDQsdC+0YLQsNC9OiBmdWxsLXNjcmVlbiArIGJsdXIgYmFja2dyb3VuZCArINC70LXQvdGC0LAg0YHQv9GA0LDQstCwKSA9PT09PSAqLwogICAgLnZpZXdlci1iYWNrZHJvcHsKICAgICAgcG9zaXRpb246Zml4ZWQ7CiAgICAgIGluc2V0OjA7CiAgICAgIGRpc3BsYXk6bm9uZTsKICAgICAgei1pbmRleDogOTk5OwogICAgICBwb2ludGVyLWV2ZW50czpub25lOwogICAgfQogICAgLnZpZXdlci1iYWNrZHJvcC5vcGVuewogICAgICBkaXNwbGF5OmJsb2NrOwogICAgICBwb2ludGVyLWV2ZW50czphdXRvOwogICAgfQoKICAgIC8qIEJsdXIgZXZlcnl0aGluZyBiZWhpbmQgdmlld2VyICovCiAgICBib2R5LnZpZXdlci1vcGVuID4gKjpub3QoLnZpZXdlci1iYWNrZHJvcCl7CiAgICAgIGZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOwogICAgfQoKICAgIC52aWV3ZXJ7CiAgICAgIHBvc2l0aW9uOmZpeGVkOwogICAgICBpbnNldDogMDsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDEzMnB4IDFmcjsKICAgICAgZ2FwOiAxNnB4OwogICAgICB6LWluZGV4OiAxMDAwOwogICAgfQoKICAgIEBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCl7CiAgICAgIC52aWV3ZXJ7IHBhZGRpbmc6IDE2cHg7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMTEwcHggMWZyOyB9CiAgICB9CgogICAgLnZpZXdlci1yYWlsewogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBwYWRkaW5nOiAxMHB4OwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgZ2FwOiA4cHg7CiAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICB9CgogICAgLnJhaWwtYnRuewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAzNnB4OwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wOCk7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgY29sb3I6I2ZmZjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgICBmbGV4LXNocmluazowOwogICAgfQogICAgLnJhaWwtYnRuOmhvdmVyeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTQpOyB9CiAgICAucmFpbC1idG46ZGlzYWJsZWR7IG9wYWNpdHk6IDAuNTsgY3Vyc29yOiBkZWZhdWx0OyB9CgogICAgLnZpZXdlci10aHVtYnN7CiAgICAgIG92ZXJmbG93OmF1dG87CiAgICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgZ2FwOiA4cHg7CiAgICAgIHBhZGRpbmctcmlnaHQ6IDJweDsKICAgICAgbWluLWhlaWdodDogMDsKICAgICAgZmxleDogMTsKICAgIH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhcnsgd2lkdGg6IDZweDsgfQogICAgLnZpZXdlci10aHVtYnM6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1ieyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTgpOyBib3JkZXItcmFkaXVzOiA2cHg7IH0KICAgIC52aWV3ZXItdGh1bWJzOjotd2Via2l0LXNjcm9sbGJhci10cmFja3sgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA2KTsgfQoKICAgIC50aHVtYnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIGFzcGVjdC1yYXRpbzogMS8xOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBvdmVyZmxvdzpoaWRkZW47CiAgICAgIGN1cnNvcjpwb2ludGVyOwogICAgICBwb3NpdGlvbjpyZWxhdGl2ZTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBmbGV4LXNocmluazogMDsKICAgIH0KICAgIC50aHVtYiBpbWd7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBvYmplY3QtZml0OiBjb3ZlcjsgZGlzcGxheTpibG9jazsgfQogICAgLnRodW1iOjphZnRlcnsKICAgICAgY29udGVudDoiIjsKICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgIGluc2V0OjA7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41OCk7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpLCBvcGFjaXR5IDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKTsKICAgICAgcG9pbnRlci1ldmVudHM6bm9uZTsKICAgIH0KICAgIC50aHVtYjpob3Zlcjo6YWZ0ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41OCk7IH0KICAgIC50aHVtYi5hY3RpdmV7CiAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjM1KTsKICAgIH0KICAgIC50aHVtYi5hY3RpdmU6OmFmdGVyeyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMCk7IH0KICAgIC50aHVtYiBpbWd7IHRyYW5zaXRpb246IG9wYWNpdHkgMC40NXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpOyB9CiAgICAudGh1bWIuYWN0aXZlIGltZ3sgb3BhY2l0eTogMTsgfQoKICAgIC8qIFJpZ2h0OiB2ZXJ0aWNhbCBmaWxtc3RyaXAgKHByZXYvY3VycmVudC9uZXh0KSAqLwogICAgLnZpZXdlci1zdGFnZXsKICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgICAgbWluLWhlaWdodDogMDsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICB9CgogICAgLnN0YWdlLXN0YWNrewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBnYXA6IDEycHg7CiAgICAgIHBhZGRpbmc6IDE4cHggMTZweDsKICAgIH0KCiAgICAuc3RhZ2UtaXRlbXsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICB1c2VyLXNlbGVjdDpub25lOwogICAgICAtd2Via2l0LXVzZXItZHJhZzpub25lOwogICAgfQoKICAgIC5zdGFnZS1pdGVtLnByZXZpZXd7CiAgICAgIGhlaWdodDogMTh2aDsKICAgICAgb3BhY2l0eTogMC4zMiAhaW1wb3J0YW50OwogICAgICBjdXJzb3I6cG9pbnRlcjsKICAgIAogICAgICAKICAgICAgCiAgICB9CgogICAgLnN0YWdlLWl0ZW0ucHJldmlldzpob3Zlcnsgb3BhY2l0eTogMC4zMiAhaW1wb3J0YW50OyB9CgogICAgLnN0YWdlLWl0ZW0ubWFpbnsKICAgICAgaGVpZ2h0OiA1OHZoOwogICAgfQoKICAgIEBtZWRpYSAobWF4LWhlaWdodDogNzQwcHgpewogICAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3eyBoZWlnaHQ6IDE2dmg7IH0KICAgICAgLnN0YWdlLWl0ZW0ubWFpbnsgaGVpZ2h0OiA1MnZoOyB9CiAgICB9CgogICAgLnN0YWdlLWltZ3sKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgICBvYmplY3QtZml0OiBjb250YWluOwogICAgICB1c2VyLXNlbGVjdDpub25lOwogICAgICAtd2Via2l0LXVzZXItZHJhZzpub25lOwogICAgfQoKICAgIC5zdGFnZS1pdGVtLm1haW4gLnN0YWdlLWltZ3sKICAgICAgbWF4LXdpZHRoOiA5NiU7CiAgICAgIG1heC1oZWlnaHQ6IDk2JTsKICAgIH0KCiAgICAvKiBzdWJ0bGUgaG92ZXIgb24gcHJldmlld3MgKi8KICAgIC8qIFRvcCBjb250cm9scyAqLwogICAgLnZpZXdlci10b3BiYXJ7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICB0b3A6IDE0cHg7CiAgICAgIHJpZ2h0OiAxNHB4OwogICAgICBkaXNwbGF5OmZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgZ2FwOiAxMHB4OwogICAgICB6LWluZGV4OiA1OwogICAgfQogICAgLnZpZXdlci1jb3VudGVyewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMjBweDsKICAgICAgbGVmdDogMjBweDsKICAgICAgei1pbmRleDogMjU7CiAgICAgIGNvbG9yOiAjMDAwMDAwOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgfQoKICAgIC8qIFJpZ2h0IHNpZGUgdmVydGljYWwgbmF2IGJ1dHRvbnMgKG9wdGlvbmFsKSAqLwogICAgLnZuYXZ7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICByaWdodDogMTZweDsKICAgICAgdG9wOiA1MCU7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgIGdhcDogMTBweDsKICAgICAgei1pbmRleDogNTsKICAgIH0KICAgIC52bmF2IC5uYXYtYnRuewogICAgICB3aWR0aDogNDZweDsKICAgICAgaGVpZ2h0OiA0NnB4OwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xMCk7CiAgICAgIGNvbG9yOiNmZmY7CiAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBjdXJzb3I6cG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlOwogICAgfQogICAgLnZuYXYgLm5hdi1idG46aG92ZXJ7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xNik7IH0KICAgIC52bmF2IC5uYXYtYnRuIHN2Z3sgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweDsgZGlzcGxheTpibG9jazsgfQoKICAgIC8qIHByZXZlbnQgYmFja2Ryb3AgY2xpY2sgc2VsZWN0aW5nICovCiAgICAudmlld2VyLCAudmlld2VyICp7IC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KICAKICAgIC5pY29uLWJ0bi0tdXBsb2FkewogICAgICAvKiBzYW1lIHN0eWxlIGFzICJhZGQgcGhvdG8iIHRpbGUgKi8KICAgICAgYmFja2dyb3VuZDogI0RBREFEQTsKICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAxNDBtcyBlYXNlLCB0cmFuc2Zvcm0gMC4xcyBlYXNlOwogICAgfQogICAgLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgICAgIGJhY2tncm91bmQ6ICNEMkQyRDI7CiAgICB9CgogIAogICAgLyogPT09PT0gVmlld2VyIG92ZXJyaWRlcyB0byBtYXRjaCBsYXRlc3Qgc3BlYyA9PT09PSAqLwogICAgLyogQmFja2dyb3VuZDogYmx1ciBvbmx5LCBubyB0aW50ICovCiAgICBib2R5LnZpZXdlci1vcGVuID4gKjpub3QoLnZpZXdlci1iYWNrZHJvcCl7CiAgICAgIGZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOwogICAgfQoKICAgIC52aWV3ZXJ7IHBhZGRpbmc6IDA7IGdhcDogMDsgfSAvKiBmdWxsLXNjcmVlbiwgbm8gZXh0cmEgbWFyZ2lucyAqLwoKICAgIC8qIExlZnQgcmFpbCB1c2VzIGJsdXIgKGdsYXNzKSAqLwogICAgLnZpZXdlci1yYWlsewogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOwogICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgIHdpZHRoOiAxMzJweDsKICAgIH0KCiAgICAvKiBSYWlsIGJ1dHRvbnM6IGJsYWNrIHdpdGggd2hpdGUgYXJyb3cgKi8KICAgIC5yYWlsLWJ0bnsKICAgICAgYmFja2dyb3VuZDogIzFBMUExQTsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgaGVpZ2h0OiA1MnB4OwogICAgfQogICAgLnJhaWwtYnRuOmhvdmVyeyBiYWNrZ3JvdW5kOiAjMkEyQjJFOyB9CgogICAgLyogdGh1bWJzIGdhcCA0cHggKi8KICAgIC52aWV3ZXItdGh1bWJzeyBnYXA6IDRweDsgfQogICAgLnRodW1iewogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xOCk7CiAgICB9CgogICAgLyogU3RhZ2U6IGFsc28gZ2xhc3MgYmx1ciAqLwogICAgLnZpZXdlci1zdGFnZXsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA4KTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxOHB4KTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgfQoKICAgIC8qIFZlcnRpY2FsIHN0YWNrOiBzaG93IHByZXYvbmV4dCBzbGlnaHRseSAqLwogICAgLnN0YWdlLXN0YWNrewogICAgICBnYXA6IDRweDsKICAgICAgcGFkZGluZzogMDsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CiAgICAuc3RhZ2UtaXRlbS5wcmV2aWV3ewogICAgICBoZWlnaHQ6IDE4dmg7CiAgICAgIG9wYWNpdHk6IDAuMzIgIWltcG9ydGFudDsKICAgIH0KICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIGhlaWdodDogNjR2aDsKICAgIH0KICAgIC5zdGFnZS1pdGVtLm1haW4gLnN0YWdlLWltZ3sKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgLnN0YWdlLWltZ3sgbWF4LXdpZHRoOiAxMDAlOyBtYXgtaGVpZ2h0OiAxMDAlOyB9CgogICAgLyogQ2xvc2UgYnV0dG9uOiBzdGFuZGFyZCBibGFjayBzcXVhcmUgd2l0aCByYWRpdXMgKHVzZXMgb3VyIGljb24tYnRuIGRhcmspICovCiAgICAjdmlld2VyQ2xvc2V7CiAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUE7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKICAgICAgYm9yZGVyOiBub25lOwogICAgfQoKICAgIC8qIFRvcGJhciBwb3NpdGlvbmluZyAqLwogICAgLnZpZXdlci10b3BiYXJ7IHRvcDogMjBweDsgcmlnaHQ6IDIwcHg7IGdhcDogMTBweDsgfQoKICAgIC8qIERlbGV0ZSBidXR0b246IG9ubHkgaW4gZWRpdCwgb24gbWFpbiBwaG90byB0b3AtcmlnaHQgd2l0aCAyMHB4IGluc2V0ICovCiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMjBweDsKICAgICAgcmlnaHQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDY7CiAgICB9CiAgICAvKiBXaGVuIGRlbGV0ZSBzaG93biwga2VlcCBjbG9zZSBhdCB0aGUgdmVyeSB0b3AtcmlnaHQgKHN0YWNrKSAqLwogICAgI3ZpZXdlckNsb3NlewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMjBweDsKICAgICAgcmlnaHQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDc7CiAgICB9CgogICAgLyogQ291bnRlciBzdWJ0bGUgKi8KICAgIC52aWV3ZXItY291bnRlcnsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIGxlZnQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDI1OwogICAgICBjb2xvcjogIzAwMDAwMDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIH0KCiAgICAvKiBSZW1vdmUgYW55IHJlbWFpbmluZyBuYXYgYmxvY2tzICovCiAgICAudm5hdnsgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IH0KCiAgCiAgICAvKiA9PT09PSBWaWV3ZXIgdHVuZTogY2VudGVyIGltYWdlIGJpZ2dlciwgcHJldmlld3MgMjAlIHZpc2libGUgYW5kIDIwJSBzbWFsbGVyID09PT09ICovCiAgICAudmlld2VyeyBwYWRkaW5nOiAwOyB9CiAgICAudmlld2VyeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDEzMnB4IDFmcjsgfQogICAgLnZpZXdlci1yYWlseyB3aWR0aDogMTMycHg7IH0KICAgIC52aWV3ZXJ7IGdhcDogNHB4OyB9IC8qIDRweCBiZXR3ZWVuIGxlZnQgcmFpbCBhbmQgc3RhZ2UgKi8KCiAgICAudmlld2VyLXN0YWdleyBwYWRkaW5nLXJpZ2h0OiA0cHg7IH0gLyogNHB4IGZyb20gcmlnaHQgZWRnZSAqLwogICAgLnN0YWdlLXN0YWNrewogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBwYWRkaW5nOiAwOwogICAgICBnYXA6IDRweDsgLyogZ2FwcyBiZXR3ZWVuIHBob3RvcyA0cHggKi8KICAgICAgZGlzcGxheTpncmlkOwogICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDIwdmggMWZyIDIwdmg7IC8qIHZpc2libGUgYXJlYSBmb3IgcHJldi9uZXh0IH4yMCUgKi8KICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7CiAgICAgIGp1c3RpZnktaXRlbXM6IHN0cmV0Y2g7CiAgICB9CiAgICAuc3RhZ2UtaXRlbXsKICAgICAgZGlzcGxheTpmbGV4OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgIG92ZXJmbG93OmhpZGRlbjsKICAgIH0KICAgIC8qIG1haW4gdGFrZXMgbW9zdCBzcGFjZSAqLwogICAgLnN0YWdlLWl0ZW0ubWFpbnsKICAgICAgbWluLWhlaWdodDogMDsKICAgIH0KICAgIC5zdGFnZS1pdGVtLm1haW4gLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDhweCk7ICAvKiA0cHggZnJvbSBsZWZ0IChnYXApICsgNHB4IGZyb20gcmlnaHQgKHN0YWdlIHBhZGRpbmcpIGFwcHJveGltYXRpb24gKi8KICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBtYXgtd2lkdGg6IG5vbmU7CiAgICAgIG1heC1oZWlnaHQ6IG5vbmU7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICB9CiAgICAvKiBwcmV2aWV3cyBhcmUgMjAlIHNtYWxsZXIgdGhhbiBtYWluIHZpc3VhbGx5IHZpYSBzY2FsZSAqLwogICAgLnN0YWdlLWl0ZW0ucHJldmlld3sKICAgICAgb3BhY2l0eTogMC4zMiAhaW1wb3J0YW50OwogICAgfQogICAgLnN0YWdlLWl0ZW0ucHJldmlldyAuc3RhZ2UtaW1newogICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgICAgZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogIAogICAgLyogPT09PT0gUEFUQ0ggdjI3OiBmb3JjZSBvdmVycmlkZSAobWFpbiDQvNCw0LrRgdC40LzQsNC70YzQvdC+INCx0L7Qu9GM0YjQvtC5LCBwcmV2L25leHQgPSDRgtC+0YIg0LbQtSDQutCw0LTRgCwg0LLQuNC00L3QsCDRgtC+0LvRjNC60L4g0L/QvtC70L7RgdC60LApID09PT09ICovCiAgICAudmlld2VyewogICAgICBpbnNldDowOwogICAgICBwYWRkaW5nOjAgIWltcG9ydGFudDsKICAgICAgZ2FwOjRweCAhaW1wb3J0YW50OwogICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDE1NnB4IDFmciAhaW1wb3J0YW50OwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOwogICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMThweCk7CiAgICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE4cHgpOwogICAgfQoKICAgIC8qIFJhaWwgYW5kIHN0YWdlIHRyYW5zcGFyZW50IHNvIG5vIHNlYW1zICovCiAgICAudmlld2VyLXJhaWwsCiAgICAudmlld2VyLXN0YWdlewogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgICBiYWNrZHJvcC1maWx0ZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IG5vbmUgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBMRUZUIFJBSUw6IHNwYWNpbmcgNHB4IGV2ZXJ5d2hlcmUgKi8KICAgIC52aWV3ZXItcmFpbHsKICAgICAgd2lkdGg6IDE1NnB4ICFpbXBvcnRhbnQ7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOwogICAgICBkaXNwbGF5OmZsZXggIWltcG9ydGFudDsKICAgICAgZmxleC1kaXJlY3Rpb246Y29sdW1uICFpbXBvcnRhbnQ7CiAgICAgIGdhcDogNHB4ICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICB9CgogICAgLnJhaWwtYnRuewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiA1NnB4OwogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJhY2tncm91bmQ6ICMxQTFBMUEgIWltcG9ydGFudDsKICAgICAgY29sb3I6ICNGRkZGRkY7CiAgICAgIGRpc3BsYXk6ZmxleCAhaW1wb3J0YW50OwogICAgICBhbGlnbi1pdGVtczpjZW50ZXIgIWltcG9ydGFudDsKICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlciAhaW1wb3J0YW50OwogICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7CiAgICAgIGZsZXg6IDAgMCBhdXRvOwogICAgfQogICAgLnJhaWwtYnRuOmhvdmVyeyBiYWNrZ3JvdW5kOiMyQTJCMkUgIWltcG9ydGFudDsgfQogICAgLnJhaWwtYnRuOmRpc2FibGVkeyBiYWNrZ3JvdW5kOiMxQTFBMUEgIWltcG9ydGFudDsgY3Vyc29yOiBkZWZhdWx0OyB9CiAgICAucmFpbC1idG46ZGlzYWJsZWQgc3ZneyBvcGFjaXR5OiAwLjM1OyB9CgogICAgLnJhaWwtYnRuIHN2Z3sgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgb3BhY2l0eTogMC45MjsgfQoKICAgIC52aWV3ZXItdGh1bWJzewogICAgICBmbGV4OiAxIDEgYXV0bzsKICAgICAgbWluLWhlaWdodDogMDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7CiAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbiAhaW1wb3J0YW50OwogICAgICBnYXA6IDRweCAhaW1wb3J0YW50OwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOwogICAgfQogICAgLnZpZXdlci10aHVtYnM6Oi13ZWJraXQtc2Nyb2xsYmFyeyB3aWR0aDogMDsgaGVpZ2h0OiAwOyB9CgogICAgLnRodW1iewogICAgICB3aWR0aDogMTAwJTsKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKTsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgICBwb3NpdGlvbjpyZWxhdGl2ZTsKICAgICAgZmxleDogMCAwIGF1dG87CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xOCk7CiAgICB9CgogICAgLyogVGh1bWJzIGRhcmtlciB3aGVuIG5vdCBhY3RpdmUgKi8KICAgIC50aHVtYjo6YWZ0ZXJ7CiAgICAgIGNvbnRlbnQ6IiI7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICBpbnNldDowOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKSwgb3BhY2l0eSAwLjQ1cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7CiAgICAgIHBvaW50ZXItZXZlbnRzOm5vbmU7CiAgICB9CiAgICAudGh1bWI6aG92ZXI6OmFmdGVyeyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNTgpOyB9CiAgICAudGh1bWIuYWN0aXZlOjphZnRlcnsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjApOyB9CiAgICAudGh1bWIgaW1neyB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNDVzIGN1YmljLWJlemllcigwLjIyLCAxLCAwLjM2LCAxKTsgfQogICAgLnRodW1iLmFjdGl2ZSBpbWd7IG9wYWNpdHk6IDE7IH0KCiAgICAvKiBTVEFHRTogZm9yY2UgZnVsbCBoZWlnaHQsIG5vIGlubmVyIHBhZGRpbmcgKi8KICAgIC52aWV3ZXItc3RhZ2V7CiAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOwogICAgfQoKICAgIC8qIENvcmU6IGFic29sdXRlIHN0YWNraW5nLCAxOjEgZnJhbWluZyBmb3IgYWxsIHRocmVlICovCiAgICAuc3RhZ2Utc3RhY2t7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwogICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50OwoKICAgICAgLyogVmlzaWJsZSBzbGl2ZXI7IHNtYWxsZXIgPT4gbWFpbiBiaWdnZXIgKi8KICAgICAgLS1wZWVrOiBjbGFtcCg0NHB4LCA3dmgsIDgwcHgpOwogICAgICAtLWdhcDogNHB4OwogICAgfQoKICAgIC5zdGFnZS1pdGVtewogICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICAgICAgbGVmdDogMCAhaW1wb3J0YW50OwogICAgICByaWdodDogMCAhaW1wb3J0YW50OwogICAgICB0b3A6IGNhbGModmFyKC0tcGVlaykgKyB2YXIoLS1nYXApKSAhaW1wb3J0YW50OwogICAgICBib3R0b206IGNhbGModmFyKC0tcGVlaykgKyB2YXIoLS1nYXApKSAhaW1wb3J0YW50OwoKICAgICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CgogICAgICBkaXNwbGF5OmZsZXggIWltcG9ydGFudDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXIgIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50OwogICAgfQoKICAgIC5zdGFnZS1pdGVtLm1haW57CiAgICAgIHotaW5kZXg6IDI7CiAgICAgIG9wYWNpdHk6IDE7CiAgICAgIGN1cnNvcjogZGVmYXVsdDsKICAgICAgdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLnN0YWdlLWl0ZW0ucHJldmlld3sKICAgICAgei1pbmRleDogMTsKICAgICAgb3BhY2l0eTogMC4zMiAhaW1wb3J0YW50OyAgICAgICAgICAgICAgICAvKiDRgtC10LzQvdC10LUgKi8KICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgICAgICAgLyog0YPQsdC40YLRjCDRgdGC0LDRgNGL0LUgMTh2aCAqLwogICAgfQoKICAgIC8qIFNoaWZ0IGJ5IGl0cyBvd24gZnJhbWUgaGVpZ2h0ICsgNHB4IGdhcCBzbyBvbmx5IHBlZWsgaXMgdmlzaWJsZSAqLwogICAgI3N0YWdlUHJldnsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKGNhbGMoLTEwMCUgLSB2YXIoLS1nYXApKSkgIWltcG9ydGFudDsgfQogICAgI3N0YWdlTmV4dHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKGNhbGMoIDEwMCUgKyB2YXIoLS1nYXApKSkgIWltcG9ydGFudDsgfQoKICAgIC8qIFByZXYvTmV4dCBhcmUgMjAlIG5hcnJvd2VyIHRoYW4gbWFpbiAoMTAlIGluc2V0IGZyb20gZWFjaCBzaWRlKSAqLwogICAgI3N0YWdlUHJldiwgI3N0YWdlTmV4dHsKICAgICAgbGVmdDogMTAlICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiAxMCUgIWltcG9ydGFudDsKICAgIH0KCiAgICAuc3RhZ2UtaW1newogICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIG1heC1oZWlnaHQ6IG5vbmUgIWltcG9ydGFudDsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgIH0KICAgIC5zdGFnZS1pdGVtLnByZXZpZXcgLnN0YWdlLWltZ3sKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIERlbGV0ZSBpbnNpZGUgbWFpbiwgMjBweCBpbnNldCAqLwogICAgI3N0YWdlTWFpbnsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAjdmlld2VyRGVsZXRlQnRuewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMjBweDsKICAgICAgcmlnaHQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDEwOwogICAgfQoKICAgICN2aWV3ZXJDbG9zZXsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDIwcHg7CiAgICAgIHJpZ2h0OiAyMHB4OwogICAgICB6LWluZGV4OiAyMDsKICAgIH0KCiAgCiAgICAvKiBDT1VOVEVSIE9WRVJSSURFICovCiAgICAudmlld2VyLXN0YWdlIC52aWV3ZXItY291bnRlcnsKICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICAgIHRvcDogMjBweCAhaW1wb3J0YW50OwogICAgICBsZWZ0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGJvdHRvbTogYXV0byAhaW1wb3J0YW50OwogICAgCiAgCiAgICB9CiAgICAvKiA9PT09PSBQQVRDSCB2MzY6IHNpbmdsZSBjZW50ZXJlZCBwaG90bywgbWF4IGZpbGwgd2l0aCBmaXhlZCBpbnNldHMgPT09PT0gKi8KICAgIC8qIFJpZ2h0IHN0YWdlIHNob3VsZCBiZSBhIGNsZWFuIHZpZXdwb3J0ICovCiAgICAudmlld2VyLXN0YWdlewogICAgICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIFN0YWdlIHN0YWNrIGp1c3QgZmlsbHMgc3RhZ2UgKi8KICAgICNzdGFnZVN0YWNrewogICAgICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBNYWluIHBob3RvIGZyYW1lOiB0b3AvYm90dG9tIDRweCwgbGVmdC9yaWdodCAyMHB4ICovCiAgICAjc3RhZ2VNYWluewogICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICAgICAgdG9wOiA0cHggIWltcG9ydGFudDsKICAgICAgYm90dG9tOiA0cHggIWltcG9ydGFudDsKICAgICAgbGVmdDogdmFyKC0tbWFpbi1sZWZ0LCAyMHB4KSAhaW1wb3J0YW50OwogICAgICByaWdodDogdmFyKC0tbWFpbi1yaWdodCwgMjBweCkgIWltcG9ydGFudDsKICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBQaG90bzogbWF4aW1pemUgYXJlYSB3aXRob3V0IGNyb3BwaW5nIChkZWNpc2lvbjogY29udGFpbikgKi8KICAgICN2aWV3ZXJJbWd7CiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgICBtYXgtd2lkdGg6IG5vbmUgIWltcG9ydGFudDsKICAgICAgbWF4LWhlaWdodDogbm9uZSAhaW1wb3J0YW50OwogICAgICBvYmplY3QtZml0OiBjb250YWluICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogRGVsZXRlIGJ1dHRvbiBzdGF5cyBpbnNpZGUgcGhvdG8sIDIwcHggaW5zZXQgKi8KICAgICN2aWV3ZXJEZWxldGVCdG57CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OwogICAgICB0b3A6IDIwcHggIWltcG9ydGFudDsKICAgICAgcmlnaHQ6IDIwcHggIWltcG9ydGFudDsKICAgICAgei1pbmRleDogMTAgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBDb3VudGVyOiB0b3AtbGVmdCAyMHB4IChhbHJlYWR5KSwga2VlcCBibGFjayAqLwogICAgLnZpZXdlci1jb3VudGVyewogICAgICB0b3A6IDIwcHggIWltcG9ydGFudDsKICAgICAgbGVmdDogMjBweCAhaW1wb3J0YW50OwogICAgICBjb2xvcjogIzAwMDAwMCAhaW1wb3J0YW50OwogICAgICB6LWluZGV4OiAyNSAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIENsb3NlIGJ1dHRvbjogdG9wLXJpZ2h0IDIwcHggKi8KICAgICN2aWV3ZXJDbG9zZXsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHotaW5kZXg6IDMwICFpbXBvcnRhbnQ7CiAgICB9CgogIAogICAgLyogPT09PT0gVmlld2VyIGFjdGlvbnMgc3RhY2sgKGNsb3NlICsgZGVsZXRlKSA9PT09PSAqLwogICAgLnZpZXdlci1hY3Rpb25zewogICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICAgICAgdG9wOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICAgIHotaW5kZXg6IDUwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbiAhaW1wb3J0YW50OwogICAgICBnYXA6IDhweCAhaW1wb3J0YW50OwogICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQgIWltcG9ydGFudDsKICAgIH0KICAgICN2aWV3ZXJDbG9zZSwKICAgICN2aWV3ZXJEZWxldGVCdG57CiAgICAgIHBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsKICAgICAgdG9wOiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIHJpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIGxlZnQ6IGF1dG8gIWltcG9ydGFudDsKICAgICAgYm90dG9tOiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgfQoKICAKCi8qINCU0L7Qv9C+0LvQvdC40YLQtdC70YzQvdCw0Y8g0LjQvdGE0L7RgNC80LDRhtC40Y8gKi8KICAgICAgICAuYWRkaXRpb25hbC1ibG9jayB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGdhcDogMjBweDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIC5hZGRpdGlvbmFsLWl0ZW0gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBnYXA6IDIwcHg7CiAgICAgICAgfQoKICAgICAgICAvKiAtLS0gc3BhY2luZyB3aGVuIGNvbW1lbnRzL2xpbmtzIGxpc3RzIGFyZSBlbXB0eSAtLS0KICAgICAgICAgICDQotGA0LXQsdC+0LLQsNC90LjQtTog0LzQtdC20LTRgyDQutC90L7Qv9C60LDQvNC4ICgrKSAi0JrQvtC80LzQtdC90YLQsNGA0LjQuSIg0LggItCf0YDQuNC60YDQtdC/0LvRkdC90L3Ri9C1INGB0YHRi9C70LrQuCIg0LTQvtC70LbQvdC+INCx0YvRgtGMIDIwcHgsCiAgICAgICAgICAg0LHQtdC3INGD0LTQstC+0LXQvdC40Y8gMjArMjAuINCf0L7RjdGC0L7QvNGDINGD0LHQuNGA0LDQtdC8INCy0L3Rg9GC0YDQtdC90L3QuNC5IGdhcCDRgyDRgdC10LrRhtC40LgsINC60L7Qs9C00LAg0YHQv9C40YHQvtC6INC/0YPRgdGC0L7QuS4gKi8KICAgICAgICAuYWRkaXRpb25hbC1pdGVtLmlzLWVtcHR5IHsgZ2FwOiAwOyB9CiAgICAgICAgLmFkZGl0aW9uYWwtaXRlbS5pcy1lbXB0eSAuY29tbWVudHMtbGlzdCwKICAgICAgICAuYWRkaXRpb25hbC1pdGVtLmlzLWVtcHR5IC5saW5rcy1saXN0IHsgZGlzcGxheTogbm9uZTsgfQoKCiAgICAgICAgLmFkZGl0aW9uYWwtaGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgfQoKICAgICAgICAuYWRkaXRpb25hbC10aXRsZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAiSW50ZXIiLCBzYW5zLXNlcmlmOwogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAvKiDQldC00LjQvdGL0Lkg0YHRgtC40LvRjCDQtNC70Y8g0LLRgdC10YUg0LrQvdC+0L/QvtC6ICovCiAgICAgICAgLmFjdGlvbi1idXR0b24gewogICAgICAgICAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXNpemUpOwogICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1zaXplKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLXJlZ3VsYXIpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtc20pOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMTVzIGVhc2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgIH0KCiAgICAgICAgLmFjdGlvbi1idXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmF5LTEwMCk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZ3JheS00MDApOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgICB9CgogICAgICAgIC8qIEljb24gYnV0dG9ucyAobmV3IHNwZWMpICovCiAgICAgICAgLmljb24tYnRuewogICAgICAgICAgICB3aWR0aDogdmFyKC0tYnRuLXNpemUpOwogICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zbSk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLXJlZ3VsYXIpOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMTVzIGVhc2U7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgIH0KCiAgICAgICAgLmljb24tYnRuOmhvdmVyewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmF5LTEwMCk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZ3JheS00MDApOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgICB9CgogICAgICAgIC5pY29uLWJ0biAuaWNvbnsKICAgICAgICAgICAgd2lkdGg6IDI0cHg7CiAgICAgICAgICAgIGhlaWdodDogMjRweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgIH0KCiAgICAgICAgLyogRGVmYXVsdCBTVkcgc2l6ZSBmb3IgZWRpdCBpY29uICovCiAgICAgICAgLmljb24tYnRuIC5pY29uIHN2Z3sKICAgICAgICAgICAgd2lkdGg6IDE4cHg7CiAgICAgICAgICAgIGhlaWdodDogMThweDsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAvKiBFZGl0IChwZW5jaWwpIGJ1dHRvbiAqLwogICAgICAgIC5pY29uLWJ0bi5lZGl0LWJ1dHRvbnsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzFBMUExQTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgICB9CgogICAgICAgIC5pY29uLWJ0bi5lZGl0LWJ1dHRvbjpob3ZlcnsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzJBMkEyQTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgICB9CgogICAgICAgIC8qIFVwbG9hZCAoKykgYnV0dG9uICovCiAgICAgICAgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWR7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNEQURBREE7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgfQoKICAgICAgICAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZDpob3ZlcnsKICAgICAgICAgICAgYmFja2dyb3VuZDogI0QyRDJEMjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICB9CgogICAgICAgIC8qIFBsdXMgU1ZHIHNpemUgKHNhbWUgYXMgZWRpdCkgKi8KICAgICAgICAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZCAuaWNvbiBzdmd7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgfQoKCiAgICAgICAgLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ0biB7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1yZWQtZXJyb3IpOwogICAgICAgIH0KCiAgICAgICAgLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ0bjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXJlZC1lcnJvcik7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcmVkLWVycm9yKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLmRlbGV0ZS1idXR0b246OmJlZm9yZSB7IGNvbnRlbnQ6IG5vbmU7IH0KICAgICAgICAuZGVsZXRlLWJ1dHRvbiBzdmd7d2lkdGg6MThweDtoZWlnaHQ6MThweDtkaXNwbGF5OmJsb2NrO30KCiAgICAgICAgLmRvd25sb2FkLWJ1dHRvbiBzdmcgewogICAgICAgICAgICB3aWR0aDogMjBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLyog0JrQvtC80LzQtdC90YLQsNGA0LjQuSAqLwogICAgICAgIC5jb21tZW50cy1saXN0IHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiA0cHg7IC8qINCe0YLRgdGC0YPQvyDQvNC10LbQtNGDINCx0LvQvtC60LDQvNC4ICovCiAgICAgICAgfQoKICAgICAgICAuY29tbWVudC1ibG9jayB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICAgICAgICAgIGdhcDogMTJweDsKICAgICAgICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgKyA0MHB4KTsgLyog0JzQuNC90LjQvNCw0LvRjNC90LDRjyDQstGL0YHQvtGC0LAg0LrQsNC6INGDINGB0YHRi9C70L7QuiAqLwogICAgICAgIAogICAgICAgICAgICBmb250LWZhbWlseTogSW50ZXIsIHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICB9CgogICAgICAgIC5jb21tZW50LXRleHQgewogICAgICAgICAgICBmb250OiBpbmhlcml0OwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkOwoKICAgICAgICAgICAgLyog0L7RgdGC0LDQstC70Y/QtdC8IOKAnNCy0L7Qt9C00YPRheKAnSDQtNC+INC60L3QvtC/0LrQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPICovCiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgICAgICAgfQoKICAgICAgICAuY29tbWVudC1pbnB1dCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBmb250OiBpbmhlcml0OwogICAgICAgICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CgogICAgICAgICAgICAvKiDQstCy0L7QtCDQv9GA0Y/QvNC+IOKAnNCyINGB0LXRgNC+0Lwg0LrRg9Cx0LjQutC14oCdICovCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHJlc2l6ZTogbm9uZTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsgLyog0YPQsdC40YDQsNC10Lwg0YHQutGA0L7Qu9C7ICovCiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEuNmVtOwogICAgICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7CgogICAgICAgICAgICAvKiDQp9GC0L7QsdGLINCv0L3QtNC10LrRgS9DaHJvbWUg0L3QtSDigJzQv9C+0LTRgtCw0YHQutC40LLQsNC74oCdINGA0LDQt9C80LXRgNGLINGC0LXQutGB0YLQsCAqLwogICAgICAgICAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICAgICAgICAgIHRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICAgICAgfQoKICAgICAgICAuY29tbWVudC1pbnB1dDpmb2N1cyB7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICAgIH0KCiAgICAgICAgLmNvbW1lbnQtaW5wdXQ6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWdyYXktNTAwKTsKICAgICAgICB9CgogICAgICAgIC8qINCh0YHRi9C70LrQuCAqLwogICAgICAgIC5saW5rcy1saXN0IHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiA0cHg7IC8qINCe0YLRgdGC0YPQvyDQvNC10LbQtNGDINCx0LvQvtC60LDQvNC4ICovCiAgICAgICAgfQoKICAgICAgICAubGluay1pdGVtIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRjFGMUYxOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgICAgICAgICBnYXA6IDEycHg7CiAgICAgICAgICAgIGhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgKyA0MHB4KTsKICAgICAgICB9CgogICAgICAgIC5saW5rLWl0ZW0uZWRpdGluZ3sKICAgICAgICAgICAgLyog0YTQuNC60YHQuNGA0YPQtdC8INCy0YvRgdC+0YLRgyDQuCDQstGL0YDQsNCy0L3QuNCy0LDQvdC40LUg0LjQvdC/0YPRgtC+0LIg0L/QviDRhtC10L3RgtGA0YMgKi8KICAgICAgICB9CgogICAgICAgIAogICAgICAgIC5saW5rLWluZm8gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBnYXA6IDhweDsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgbWluLXdpZHRoOiAwOyAvKiDQktCw0LbQvdC+INC00LvRjyDQvtCx0YDQtdC30LrQuCDRgtC10LrRgdGC0LAgKi8KICAgICAgICB9CgogICAgICAgIC5saW5rLXR5cGUgewogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1pbnRlci1tZWRpdW0pOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgZmxleDogMCAwIGF1dG87IC8qINC/0L7QutCw0LfRi9Cy0LDQtdC8INGC0LXQutGB0YIg0YLQuNC/0LAg0L/QvtC70L3QvtGB0YLRjNGOICovCiAgICAgICAgfQoKLyog0JTQstC+0LXRgtC+0YfQuNC1INC/0L7RgdC70LUg0L3QsNC30LLQsNC90LjRjyAo0YLQvtC70YzQutC+INCyICLRgdC/0L7QutC+0LnQvdC+0LwiINGA0LXQttC40LzQtSkgKi8KLmxpbmstaXRlbTpub3QoLmVkaXRpbmcpIC5saW5rLXR5cGU6OmFmdGVyewogICAgICAgICAgICBjb250ZW50OiAiOiI7CiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNnB4OwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICB9CgogICAgICAgIC5saW5rLXVybCB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCB2YXIoLS1ncmF5LTQwMCk7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAgICAgICBmbGV4OiAxIDEgYXV0bzsgICAvKiDRgdGB0YvQu9C60LAg0LfQsNC90LjQvNCw0LXRgiDQvtGB0YLQsNGC0L7QuiAqLwogICAgICAgICAgICBtaW4td2lkdGg6IDA7ICAgICAgLyog0L/QvtC30LLQvtC70Y/QtdGCINGA0LXQsNC70YzQvdC+INGB0LbQuNC80LDRgtGM0YHRjyAqLwogICAgICAgICAgICBtYXgtd2lkdGg6IG5vbmU7ICAgLyog0L3QtSDQvtCz0YDQsNC90LjRh9C40LLQsNC10LwgMzAwcHggKi8KICAgICAgICB9CgogICAgICAgIC5saW5rLXVybDpob3ZlciB7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1ncmF5LTYwMCk7CiAgICAgICAgfQoKICAgICAgICAubGluay1lZGl0IHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIG1pbi13aWR0aDogMDsKICAgICAgICAKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKICAgICAgICB9CgogICAgICAgIC5saW5rLXR5cGUtaW5wdXQgewogICAgICAgICAgICB3aWR0aDogMTIwcHg7IC8qINC40YHRhdC+0LTQvdC+0LUg0L/Rg9GB0YLQvtC1INGB0L7RgdGC0L7Rj9C90LjQtSAqLwogICAgICAgICAgICBtaW4td2lkdGg6IDEyMHB4OwogICAgICAgICAgICBwYWRkaW5nOiA2cHggMTBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLW1lZGl1bSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zbSk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIGhlaWdodDogdmFyKC0tYnRuLXNpemUpOwoKICAgICAgICAgICAgLyog0YfRgtC+0LHRiyDQvdC1INGA0LDRgdGC0Y/Qs9C40LLQsNC70L4g0LrQsNGA0YLQvtGH0LrRgyDQsdC10YHQutC+0L3QtdGH0L3QviAqLwogICAgICAgIAogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsKICAgICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7fQoKICAgICAgICAubGluay11cmwtaW5wdXQgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBtaW4td2lkdGg6IDE0MHB4OwogICAgICAgICAgICBwYWRkaW5nOiA2cHggMTBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXNtKTsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1idG4tc2l6ZSk7CgogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstdHlwZS1pbnB1dDpmb2N1cywgLmxpbmstdXJsLWlucHV0OmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ncmF5LTUwMCk7CiAgICAgICAgfQoKICAgICAgICAubGluay1hY3Rpb25zIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgIH0KCiAgICAgICAgLyog0JDQtNCw0L/RgtC40LLQvdC+0YHRgtGMICovCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDkwMHB4KSB7CiAgICAgICAgICAgIC5zcGVjcy1ncmlkIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3MDBweCkgewogICAgICAgICAgICAuc3BlY3MtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay11cmwgewogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAyMDBweDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSB7CiAgICAgICAgICAgIC5saW5rLWl0ZW0gewogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay1pbmZvIHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay11cmwgewogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lOwogICAgICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstZWRpdCB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdHlwZS1pbnB1dCB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxpbmstdXJsLWlucHV0IHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGluay1hY3Rpb25zIHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7CiAgICAgICAgICAgIC5zcGVjcy1ncmlkIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAuc2VjdGlvbi1jb250ZW50IHsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE2cHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5saW5rLXVybCB7CiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDE1MHB4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgCi8qID09PT09IEFVVE9DT05URU5UOiBhcHBsaWVkIHN0eWxlcyBmcm9tICLQmtCw0YDRgtC+0YfQutC4INC60L7QvdGC0LXQvdGCIiA9PT09PSAqLwo6cm9vdHsKICAtLWludGVyLXJlZ3VsYXI6IDQwMDsKICAtLWludGVyLW1lZGl1bTogNTAwOwogIC0taW50ZXItc2VtaWJvbGQ6IDYwMDsKICAtLWludGVyLWJvbGQ6IDcwMDsKCiAgLS1wYWdlLWJnOiAjRjFGMUYxOwoKICAtLXdoaXRlOiAjRkZGRkZGOwogIC0tdGV4dC1wcmltYXJ5OiAjMUExQTFBOwogIC0tdGV4dC1zZWNvbmRhcnk6ICM0QjU1NjM7CiAgLS10ZXh0LXRlcnRpYXJ5OiAjODA4MDgwOwoKICAtLWJvcmRlcjogI0U4RThFODsKICAtLWRpdmlkZXI6ICNFOEU4RTg7CgogIC0tYnRuLWRhcms6ICMxQTFBMUE7CiAgLS1idG4tZGFyay1ob3ZlcjogIzJBMkIyRTsKCiAgLS1idG4tZGFuZ2VyOiAjRkY0RDU3OwogIC0tYnRuLWRhbmdlci1ob3ZlcjogI0U2M0I0NTsKCiAgLS1zaGFkb3ctY2FyZDogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4wNCksIDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMDIpOwogIC0tc2hhZG93LWZsb2F0OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4xMik7CgogIC0tcmFkaXVzLWNhcmQ6IDIwcHg7CiAgLS1yYWRpdXMtYnRuOiAxMHB4OwogIC0tcmFkaXVzLW1kOiAxMnB4OwoKICAtLWJ0bi1zaXplOiBjbGFtcCgzNnB4LCA0dncsIDQycHgpOwogIC0tY2FyZC1wYWQ6IDIwcHg7CgogIC8qIGFsaWFzZXMgdG8ga2VlcCBleGlzdGluZyBydWxlcyB3b3JraW5nICovCiAgLS1ncmF5LTEwMDogdmFyKC0tcGFnZS1iZyk7CiAgLS1ncmF5LTIwMDogdmFyKC0tYm9yZGVyKTsKICAtLWdyYXktMzAwOiB2YXIoLS1ib3JkZXIpOwogIC0tZ3JheS00MDA6ICNEMUQ1REI7CiAgLS1ncmF5LTUwMDogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CiAgLS1ncmF5LTYwMDogIzRCNTU2MzsKCiAgLS1ib3JkZXItbGlnaHQ6IHZhcigtLWJvcmRlcik7CiAgLS1ib3JkZXItcmVndWxhcjogdmFyKC0tYm9yZGVyKTsKCiAgLS1yYWRpdXMtc206IHZhcigtLXJhZGl1cy1idG4pOwogIC0tcmFkaXVzLWxnOiB2YXIoLS1yYWRpdXMtY2FyZCk7CiAgLS1zcGFjZS11bml0OiAyMHB4OwogIC0tYnV0dG9uLXNpemU6IHZhcigtLWJ0bi1zaXplKTsKICAtLXJlZC1lcnJvcjogdmFyKC0tYnRuLWRhbmdlcik7Cn0KCmJvZHl7CiAgYmFja2dyb3VuZDogdmFyKC0tcGFnZS1iZyk7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgcGFkZGluZzogMjBweDsKfQoKLmNvbGxhcHNlLXNlY3Rpb257CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtY2FyZCk7CiAgYm94LXNoYWRvdzogbm9uZTsKfQoKLnNlY3Rpb24taGVhZGVyOmhvdmVyeyBiYWNrZ3JvdW5kOiAjRURFREVEOyB9Cgouc2VjdGlvbi1oZWFkZXItdGl0bGV7CiAgZm9udC13ZWlnaHQ6IHZhcigtLWludGVyLXNlbWlib2xkKTsKICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKfQoKLnNlY3Rpb24tY29udGVudHsKICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlcik7CiAgcGFkZGluZzogdmFyKC0tY2FyZC1wYWQpOwogIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKfQoKLyogQnV0dG9ucyAodW5pZnkgd2l0aCBpY29uLWJ0biBsb29rKSAqLwouYWN0aW9uLWJ1dHRvbnsKICB3aWR0aDogdmFyKC0tYnRuLXNpemUpOwogIGhlaWdodDogdmFyKC0tYnRuLXNpemUpOwogIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1idG4pOwogIGJvcmRlcjogbm9uZTsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyayk7CiAgY29sb3I6ICNmZmY7CiAgY3Vyc29yOiBwb2ludGVyOwogIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZSwgdHJhbnNmb3JtIDAuMXMgZWFzZTsKICBwYWRkaW5nOiAwOwogIGxpbmUtaGVpZ2h0OiAwOwp9Ci5hY3Rpb24tYnV0dG9uOmhvdmVyeyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyay1ob3Zlcik7IGNvbG9yOiNmZmY7IH0KLmFjdGlvbi1idXR0b246YWN0aXZleyB0cmFuc2Zvcm06IHNjYWxlKDAuOTgpOyB9CgovKiBJY29ucyBpbnNpZGUgYWN0aW9uIGJ1dHRvbnMgKi8KLmFjdGlvbi1idXR0b24gc3ZnewogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKICBkaXNwbGF5OiBibG9jazsKfQoKLyogUGx1cyBidXR0b25zIGluICLQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPIiAqLwouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWR7CiAgYmFja2dyb3VuZDogI0RBREFEQTsKICBjb2xvcjogIzFBMUExQTsKfQouYWRkaXRpb25hbC1oZWFkZXIgLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXJ7CiAgYmFja2dyb3VuZDogI0QyRDJEMjsKICBjb2xvcjogIzFBMUExQTsKfQoKCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idG4sCi5hY3Rpb24tYnV0dG9uLmRlbGV0ZS1idXR0b257CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhbmdlcik7CiAgY29sb3I6ICNmZmY7Cn0KLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ0bjpob3ZlciwKLmFjdGlvbi1idXR0b24uZGVsZXRlLWJ1dHRvbjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyKTsKICBjb2xvcjogI2ZmZjsKfQoKLyogSW5uZXIgYmxvY2tzICovCi5jb21tZW50LWJsb2NrLAoubGluay1pdGVtewogIGJhY2tncm91bmQ6ICNGMUYxRjE7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlICovCi5jb21tZW50LWlucHV0LAoubGluay10eXBlLWlucHV0LAoubGluay11cmwtaW5wdXR7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtYnRuKTsKfQouY29tbWVudC1pbnB1dDpmb2N1cywKLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstdXJsLWlucHV0OmZvY3VzewogIG91dGxpbmU6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKLyogTGluayB1bmRlcmxpbmUgc3R5bGUgY2xvc2VyIHRvIHJlZiAqLwoubGluay11cmx7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoubGluay11cmw6aG92ZXJ7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKfQoKLmtpdC1jYXJkewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogMjBweDsKfQoKCi5raXQtZGl2aWRlcnsKICBoZWlnaHQ6IDFweDsKICBiYWNrZ3JvdW5kOiB2YXIoLS1kaXZpZGVyKTsKfQoKCiAgICAgICAgLyog0YPQvdC40YTQuNC60LDRhtC40Y8g0YLQtdC60YHRgtCwINC60L7QvNC80LXQvdGC0LDRgNC40LXQsiDQuCDRgdGB0YvQu9C+0Log0L/QvtC0INGB0YLQuNC70Ywg0LvQtdC50LHQu9C+0LIgKEludGVyIDE0LzQwMCkgKi8KICAgICAgICAuY29tbWVudC10ZXh0LAogICAgICAgIC5saW5rLXR5cGUgewogICAgICAgICAgICBmb250LWZhbWlseTogSW50ZXIsIHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgY29sb3I6ICMxQTFBMUE7CiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLmxpbmstdXJsLAogICAgICAgIC5saW5rLXVybDp2aXNpdGVkLAogICAgICAgIC5saW5rLXVybDpob3ZlciwKICAgICAgICAubGluay11cmw6YWN0aXZlLAogICAgICAgIC5saW5rLXVybDpmb2N1cyB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBJbnRlciwgc3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICBjb2xvcjogIzFBMUExQTsKICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7CiAgICAgICAgfQoKCi8qID09PSBMaW5rIGVkaXQgbW9kZTogc2FtZSB0eXBvZ3JhcGh5L2NvbG9ycyBhcyB2aWV3IG1vZGUsIG5vIHVuZGVybGluZSA9PT0gKi8KLmxpbmstaW5mb3ttaW4td2lkdGg6MDt9Ci5saW5rLXR5cGV7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7ICAgICAvKiDQv9C+0LrQsNC30YvQstCw0LXQvCDQsiDQvtC00L3RgyDRgdGC0YDQvtC60YMgKi8KICBvdmVyZmxvdzogdmlzaWJsZTsgICAgICAgLyog0J3QlSDQvtCx0YDQtdC30LDQtdC8ICovCiAgdGV4dC1vdmVyZmxvdzogY2xpcDsgICAgIC8qINCx0LXQtyDRgtGA0L7QtdGC0L7Rh9C40Y8gKi8KICBtYXgtd2lkdGg6IG5vbmU7ICAgICAgICAgLyog0LHQtdC3INC70LjQvNC40YLQsCDRiNC40YDQuNC90YsgKi8KICBtaW4td2lkdGg6IDA7CiAgZmxleDogMCAwIGF1dG87ICAgICAgICAgIC8qINGI0LjRgNC40L3QsCA9INGB0L7QtNC10YDQttC40LzQvtC1ICovCn0KCi5saW5rLXVybHsKICBmbGV4OiAxIDEgYXV0bzsKICBtaW4td2lkdGg6IDA7CiAgbWF4LXdpZHRoOiBub25lOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLyogRWRpdGluZyBsYXlvdXQgc3RheXMgYWxpZ25lZCB3aXRoIGJ1dHRvbnMgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLWVkaXR7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogOHB4OwogIGZsZXg6IDE7CiAgbWluLXdpZHRoOiAwOwp9CgovKiBJbnB1dHMgaW4gZWRpdCBtb2RlOiB3aGl0ZSBibG9ja3MgbGlrZSBpbiBpbmFjdGl2ZSBtb2RlLCBrZWVwIGJ1dHRvbi1oZWlnaHQgKi8KLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXR5cGUtaW5wdXQsCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjMUExQTFBOwoKICBiYWNrZ3JvdW5kOiAjRkZGRkZGOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWJ0bik7CiAgcGFkZGluZzogMCAxMnB4OwoKICBoZWlnaHQ6IHZhcigtLWJ0bi1zaXplKTsKICBsaW5lLWhlaWdodDogY2FsYyh2YXIoLS1idG4tc2l6ZSkgLSAycHgpOyAvKiBjb21wZW5zYXRlIGJvcmRlciAqLwoKICBvdmVyZmxvdzogaGlkZGVuOwogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay10eXBlLWlucHV0ewogIC8qINGI0LjRgNC40L3RgyDQt9Cw0LTQsNGR0YIgSlMsINC/0L7Qu9C1INGA0LDRgdGC0ZHRgiDQv9C+INC80LXRgNC1INCy0LLQvtC00LAgKi8KICBmbGV4OiAwIDAgYXV0bzsKICB3aWR0aDogMTIwcHg7CiAgbWF4LXdpZHRoOiA2MCU7Cn0KCi5saW5rLWl0ZW0uZWRpdGluZyAubGluay11cmwtaW5wdXR7CiAgZmxleDogMSAxIGF1dG87CiAgbWluLXdpZHRoOiAwOwp9CgoubGluay1pdGVtLmVkaXRpbmcgLmxpbmstdHlwZS1pbnB1dDpmb2N1cywKLmxpbmstaXRlbS5lZGl0aW5nIC5saW5rLXVybC1pbnB1dDpmb2N1c3sKICBvdXRsaW5lOiBub25lOwogIGJveC1zaGFkb3c6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKfQoKCi8qIC0tLSBGSVg6IHJlbW92ZSByb3VuZGVkICJjYXBzdWxlIiBhcm91bmQgY29tbWVudCB0ZXh0YXJlYSBPTkxZIGluIGVkaXQgbW9kZSAtLS0gKi8KLmNvbW1lbnQtYmxvY2suZWRpdGluZyAuY29tbWVudC1pbnB1dHsKICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7Cn0KCjwvc3R5bGU+CjxzdHlsZT4KLyogRm9yY2UgbGluayB1bmRlcmxpbmUgdG8gYmUgYmxhY2sgYW5kIG9ubHkgdW5kZXIgdGhlIHRleHQgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybCwKI2FkZGl0aW9uYWxTZWN0aW9uIC5saW5rLXVybDp2aXNpdGVkLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmhvdmVyLAojYWRkaXRpb25hbFNlY3Rpb24gLmxpbmstdXJsOmFjdGl2ZSB7CiAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsKICB0ZXh0LWRlY29yYXRpb24tbGluZTogdW5kZXJsaW5lICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjMDAwICFpbXBvcnRhbnQ7CiAgdGV4dC1kZWNvcmF0aW9uLXRoaWNrbmVzczogZnJvbS1mb250OwogIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMnB4Owp9Cgo8L3N0eWxlPgo8c3R5bGU+Ci8qIFJlc3RvcmUgYnV0dG9uIGNvbG9ycyAob3ZlcnJpZGUgYW55IGdlbmVyaWMgbGluayBjb2xvciBydWxlcykgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi0tdXBsb2FkIHsgYmFja2dyb3VuZDogI0RBREFEQSAhaW1wb3J0YW50OyBjb2xvcjogIzFBMUExQSAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmVkaXQtYnV0dG9uIHsgYmFja2dyb3VuZDogIzFBMUExQSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmRlbGV0ZS1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyKSAhaW1wb3J0YW50OyBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmFjdGlvbi1idXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSkgIWltcG9ydGFudDsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLXJlZ3VsYXIpICFpbXBvcnRhbnQ7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpICFpbXBvcnRhbnQ7IH0KI2FkZGl0aW9uYWxTZWN0aW9uIC5hY3Rpb24tYnV0dG9uOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmctaG92ZXIpICFpbXBvcnRhbnQ7IH0KPC9zdHlsZT4KPHN0eWxlPgovKiA9PT0gQnV0dG9uIGNvbG9yIHN0YW5kYXJkaXphdGlvbiAobWF0Y2ggcGFnZTJfZml4ZWQuaHRtKSA9PT0gKi8KLmljb24tYnRuewogIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlLCAjZmZmKTsKICBib3JkZXI6IG5vbmU7CiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSwgIzFBMUExQSk7Cn0KLmljb24tYnRuLS1kYXJrewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKSAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7Cn0KLmljb24tYnRuLS1kYXJrOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyLCAjMkEyQjJFKSAhaW1wb3J0YW50Owp9Ci5pY29uLWJ0bi0tZGFuZ2VyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQouaWNvbi1idG4tLWRhbmdlcjpob3ZlcnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFuZ2VyLWhvdmVyLCAjRTYzQjQ1KSAhaW1wb3J0YW50Owp9CgovKiBBZGRpdGlvbmFsLWluZm8gaW50ZXJuYWwgYnV0dG9ucyAqLwouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQouYWN0aW9uLWJ1dHRvbi5kZWxldGUtYnV0dG9uOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXItaG92ZXIsICNFNjNCNDUpICFpbXBvcnRhbnQ7Cn0KCi8qICJBZGQiIGJ1dHRvbnMgKHBsdXMpIGluIHNlY3Rpb24gaGVhZGVycykgKi8KLmFkZC1idG4sIC5hZGQtY29tbWVudC1idG4sIC5hZGQtbGluay1idG4sICNhZGRDb21tZW50QnRuLCAjYWRkTGlua0J0bnsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyaywgIzFBMUExQSkgIWltcG9ydGFudDsKICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwogIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50Owp9Ci5hZGQtYnRuOmhvdmVyLCAuYWRkLWNvbW1lbnQtYnRuOmhvdmVyLCAuYWRkLWxpbmstYnRuOmhvdmVyLCAjYWRkQ29tbWVudEJ0bjpob3ZlciwgI2FkZExpbmtCdG46aG92ZXJ7CiAgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIsICMyQTJCMkUpICFpbXBvcnRhbnQ7Cn0KCi8qIEVkaXQgYnV0dG9ucyBpbnNpZGUgY29udGVudCAqLwouZWRpdC1idXR0b24uaWNvbi1idG4sIC5lZGl0LWJ1dHRvbnsKICAvKiBpZiBpdCdzIGEgcGxhaW4gYnV0dG9uIHdpdGhvdXQgbW9kaWZpZXIgY2xhc3MgKi8KICBiYWNrZ3JvdW5kOiB2YXIoLS1idG4tZGFyaywgIzFBMUExQSk7CiAgY29sb3I6ICNmZmY7Cn0KLmVkaXQtYnV0dG9uOmhvdmVyewogIGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLWhvdmVyLCAjMkEyQjJFKTsKfQo8L3N0eWxlPgo8c3R5bGU+Ci8qIEVuc3VyZSBhZGRpdGlvbmFsLXNlY3Rpb24gYnV0dG9ucyBmb2xsb3cgcGFnZTJfZml4ZWQuaHRtIHBhbGV0dGUgKi8KI2FkZGl0aW9uYWxTZWN0aW9uIC5pY29uLWJ0bi5pY29uLWJ0bi0tZGFyayB7IGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYXJrLCAjMUExQTFBKTsgY29sb3I6I2ZmZjsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmljb24tYnRuLS1kYXJrOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYnRuLWRhcmstaG92ZXIsICMyQTJCMkUpOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLWRhbmdlciB7IGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXIsICNGRjRENTcpOyBjb2xvcjojZmZmOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLWRhbmdlcjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLWJ0bi1kYW5nZXItaG92ZXIsICNFNjNCNDUpOyB9CiNhZGRpdGlvbmFsU2VjdGlvbiAuaWNvbi1idG4uaWNvbi1idG4tLXVwbG9hZCB7IGJhY2tncm91bmQ6I0RBREFEQTsgY29sb3I6IzFBMUExQTsgfQojYWRkaXRpb25hbFNlY3Rpb24gLmljb24tYnRuLmljb24tYnRuLS11cGxvYWQ6aG92ZXIgeyBiYWNrZ3JvdW5kOiNEMkQyRDI7IH0KPC9zdHlsZT4KPHN0eWxlPgovKiBSZW1vdmUgImFjdGl2ZSIgLyB0YXAgaGlnaGxpZ2h0IGJhY2tncm91bmQgb24gY2FyZHMgKNCa0L7QvdGC0LXQvdGCICsg0JDRgNGF0LjQsikgKi8KLmtpdC1jYXJkLAoudGlsZSwKLmNvbGxhZ2UtY2VsbCwKLmtpdC1kcmFnLWhhbmRsZSwKLmtpdC1hY3Rpb25zIGJ1dHRvbnsKICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50Owp9Cgoua2l0LWNhcmQ6Zm9jdXMsCi5raXQtY2FyZDpmb2N1cy13aXRoaW4sCi5raXQtY2FyZDphY3RpdmV7CiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OwogIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKfQoKLyogS2VlcCBjYXJkIGJhY2tncm91bmRzIHN0YWJsZSB3aGVuIGludGVyYWN0ZWQgd2l0aCAqLwoua2l0LWNhcmQ6YWN0aXZleyBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSwgI2ZmZikgIWltcG9ydGFudDsgfQoua2l0LWNhcmQuaXMtdXNlZDphY3RpdmV7IGJhY2tncm91bmQ6IHZhcigtLXVzZWQtYmcsICNEMUVEREQpICFpbXBvcnRhbnQ7IH0KCi8qIEFsc28ga2lsbCBhbnkgZm9jdXMgcmluZyBjYXVzZWQgYnkgY2xpY2thYmxlIGNoaWxkcmVuICovCi5raXQtY2FyZCAqOmZvY3VzeyBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7IH0KPC9zdHlsZT4KPHN0eWxlPgovKiA9PT0gS2lsbCBtb2JpbGUgdGFwL2FjdGl2ZSBoaWdobGlnaHQgb24gQUxMIGNsaWNrYWJsZSBjZWxscyBpbnNpZGUg0JrQvtC90YLQtdC90YIv0JDRgNGF0LjQsiA9PT0gKi8KLmtpdHMsIC5raXRzICp7CiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9CgoudGlsZSwgLmNvbGxhZ2UtY2VsbCwgLmtpdC10aXRsZSwgLmtpdC1jaGVjaywgLmtpdC1kcmFnLWhhbmRsZXsKICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50Owp9CgovKiBQcmV2ZW50IGFueSBVQSBhY3RpdmUgYmFja2dyb3VuZCBmbGFzaCAqLwoudGlsZTphY3RpdmUsCi5jb2xsYWdlLWNlbGw6YWN0aXZlLAoua2l0LXRpdGxlOmFjdGl2ZSwKLmtpdC1jaGVjazphY3RpdmV7CiAgYmFja2dyb3VuZDogaW5oZXJpdCAhaW1wb3J0YW50Owp9CgovKiBJZiBzb21ldGhpbmcgYXBwbGllcyBhIHRyYW5zbHVjZW50IG92ZXJsYXkgdmlhIGJhY2tncm91bmQtY29sb3IsIG5ldXRyYWxpemUgaXQgKi8KLnRpbGUuaXMtcGhvdG86YWN0aXZlOjphZnRlciwKLmNvbGxhZ2UtY2VsbC5pcy1waG90bzphY3RpdmU6OmFmdGVyewogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4yNSk7IC8qIHNhbWUgYXMgaG92ZXIsIG5vIGV4dHJhIGZsYXNoICovCn0KPC9zdHlsZT4KPHN0eWxlPgovKiDQmtC+0L3RgtC10L3RgiArINCQ0YDRhdC40LI6IHRoZXNlIGFyZSBwbGFpbiBoZWFkZXJzLCBzaG91bGQgTk9UIGluaGVyaXQgY29sbGFwc2Utc2VjdGlvbiBoZWFkZXIgaG92ZXIvYmFja2dyb3VuZC9wYWRkaW5nICovCi53cmFwID4gLnNlY3Rpb24taGVhZGVyewogIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICBjdXJzb3I6IGRlZmF1bHQgIWltcG9ydGFudDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Ci53cmFwID4gLnNlY3Rpb24taGVhZGVyOmhvdmVyLAoud3JhcCA+IC5zZWN0aW9uLWhlYWRlcjphY3RpdmUsCi53cmFwID4gLnNlY3Rpb24taGVhZGVyOmZvY3VzLAoud3JhcCA+IC5zZWN0aW9uLWhlYWRlcjpmb2N1cy13aXRoaW57CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50Owp9Cjwvc3R5bGU+CjxzdHlsZT4KICBodG1sLGJvZHl7aGVpZ2h0OjEwMCU7fQogIGJvZHl7bWFyZ2luOjA7IHBhZGRpbmc6MjBweDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7fQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5Pgo8ZGl2IGNsYXNzPSJ3cmFwIiBkYXRhLXJvbGU9InJpZ2h0LWlubmVyLXdyYXAiPgogICAgPCEtLSDQmtCw0YDRgtC+0YfQutCwINCw0LLRgtC+0LzQvtCx0LjQu9GPINC4INGB0LLQvtGA0LDRh9C40LLQsNC10LzRi9C1INGB0LXQutGG0LjQuCAtLT4KICAgIDxkaXYgY2xhc3M9ImNhci1jYXJkLXRpdGxlIiBpZD0iY2FyZFRpdGxlIiBkYXRhLXJvbGU9InJpZ2h0LWNhcmQtdGl0bGUiPtCa0LDRgNGC0L7Rh9C60LAg0LDQstGC0L7QvNC+0LHQuNC70Y88L2Rpdj4KCiAgICA8IS0tINCR0JvQntCaIDE6INCe0YHQvdC+0LLQvdGL0LUg0YXQsNGA0LDQutGC0LXRgNC40YHRgtC40LrQuCAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbGxhcHNlLXNlY3Rpb24iIGlkPSJtYWluU3BlY3NTZWN0aW9uIiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tc3BlY3MiPgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9Im1haW5TcGVjc0hlYWRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItbGVmdCI+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iY29sbGFwc2UtaWNvbiIgaWQ9Im1haW5TcGVjc0ljb24iPgogICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC4wNjEgMTkuMDYxTDE3LjEyMSAxMmwtNy4wNi03LjA2MWwtMi4xMjIgMi4xMjJMMTIuODc5IDEybC00Ljk0IDQuOTM5eiIgZmlsbD0iY3VycmVudENvbG9yIi8+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9InNlY3Rpb24taGVhZGVyLXRpdGxlIj7QntGB0L3QvtCy0L3Ri9C1INGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60Lg8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWNvbnRlbnQgY29sbGFwc2VkIiBpZD0ibWFpblNwZWNzQ29udGVudCIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLXNwZWNzLWNvbnRlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9InNwZWNzLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCc0LDRgNC60LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJicmFuZCI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0JzQvtC00LXQu9GMPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ibW9kZWwiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCa0L7QvNC/0LvQtdC60YLQsNGG0LjRjzwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InRyaW0iPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCT0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InllYXIiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCm0LLQtdGCPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0iY29sb3IiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCi0LjQvyDRgdCw0LvQvtC90LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJpbnRlcmlvclR5cGUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCe0LHRitC10Lw8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJlbmdpbmVWb2x1bWUiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCbLtChLjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImhvcnNlcG93ZXIiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCf0YDQuNCy0L7QtDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9ImRyaXZlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QmtCf0J88L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJnZWFyYm94Ij7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj5WSU48L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJ2aW4iPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPuKEliDQutGD0LfQvtCy0LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJib2R5TnVtYmVyIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tINCR0JvQntCaIDI6INCU0L7QutGD0LzQtdC90YLRiyDQuCDRgNC10LPQuNGB0YLRgNCw0YbQuNGPIC0tPgogICAgPGRpdiBjbGFzcz0iY29sbGFwc2Utc2VjdGlvbiIgaWQ9ImRvY3NTZWN0aW9uIiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tZG9jcyI+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIiBpZD0iZG9jc0hlYWRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItbGVmdCI+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iY29sbGFwc2UtaWNvbiIgaWQ9ImRvY3NJY29uIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICA8cGF0aCBkPSJNMTAuMDYxIDE5LjA2MUwxNy4xMjEgMTJsLTcuMDYtNy4wNjFsLTIuMTIyIDIuMTIyTDEyLjg3OSAxMmwtNC45NCA0LjkzOXoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWN0aW9uLWhlYWRlci10aXRsZSI+0JTQvtC60YPQvNC10L3RgtGLINC4INGA0LXQs9C40YHRgtGA0LDRhtC40Y88L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWNvbnRlbnQgY29sbGFwc2VkIiBpZD0iZG9jc0NvbnRlbnQiIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1kb2NzLWNvbnRlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9InNwZWNzLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPlZJTjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InZpbiI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0J/QotChPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0icHRzVHlwZSI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+4oSWINC60LvRjtGH0LA8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJrZXlOdW1iZXIiPuKAlDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCa0L7QvNC80LXQvdGC0LDRgNC40Lg8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJjb21tZW50cyI+4oCUPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSDQkdCb0J7QmiAzOiDQpNC40L3QsNC90YHRiyDQuCDRgNCw0YHRhdC+0LTRiyAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbGxhcHNlLXNlY3Rpb24iIGlkPSJmaW5hbmNlU2VjdGlvbiIgZGF0YS1yb2xlPSJyaWdodC1zZWN0aW9uLWZpbmFuY2UiPgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgaWQ9ImZpbmFuY2VIZWFkZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyLWxlZnQiPgogICAgICAgICAgPHNwYW4gY2xhc3M9ImNvbGxhcHNlLWljb24iIGlkPSJmaW5hbmNlSWNvbiI+CiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA2MSAxOS4wNjFMMTcuMTIxIDEybC03LjA2LTcuMDYxbC0yLjEyMiAyLjEyMkwxMi44NzkgMTJsLTQuOTQgNC45Mzl6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItdGl0bGUiPtCk0LjQvdCw0L3RgdGLINC4INGA0LDRgdGF0L7QtNGLPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1jb250ZW50IGNvbGxhcHNlZCIgaWQ9ImZpbmFuY2VDb250ZW50IiBkYXRhLXJvbGU9InJpZ2h0LXNlY3Rpb24tZmluYW5jZS1jb250ZW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjcy1ncmlkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QptC10L3QsDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InByaWNlIj7igJQ8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tINCR0JvQntCaIDQ6INCU0L7Qv9C+0LvQvdC40YLQtdC70YzQvdCw0Y8g0LjQvdGE0L7RgNC80LDRhtC40Y8gLS0+CiAgICA8ZGl2IGNsYXNzPSJjb2xsYXBzZS1zZWN0aW9uIiBpZD0iYWRkaXRpb25hbFNlY3Rpb24iIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1hZGRpdGlvbmFsIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIiBpZD0iYWRkaXRpb25hbEhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXItbGVmdCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb2xsYXBzZS1pY29uIiBpZD0iYWRkaXRpb25hbEljb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTAuMDYxIDE5LjA2MUwxNy4xMjEgMTJsLTcuMDYtNy4wNjFsLTIuMTIyIDIuMTIyTDEyLjg3OSAxMmwtNC45NCA0LjkzOXoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNlY3Rpb24taGVhZGVyLXRpdGxlIj7QlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWNvbnRlbnQiIGNvbGxhcHNlZCBpZD0iYWRkaXRpb25hbENvbnRlbnQiIGRhdGEtcm9sZT0icmlnaHQtc2VjdGlvbi1hZGRpdGlvbmFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWNzLWdyaWQiIGlkPSJleHRyYVNwZWNzR3JpZCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweDsiPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCo0L7Rg9GA0YPQvDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtdmFsdWUiIGRhdGEtZmllbGQ9InNob3dyb29tIj7igJQ8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWMtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLWxhYmVsIj7QotC40L88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJjb25kaXRpb25MYWJlbCI+4oCUPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjLWl0ZW0iPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy1sYWJlbCI+0KHRgtCw0YLRg9GBPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3BlYy12YWx1ZSIgZGF0YS1maWVsZD0ic3RhdHVzTGFiZWwiPuKAlDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BlYy1pdGVtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNwZWMtbGFiZWwiPtCY0YHRgtC+0YfQvdC40Lo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzcGVjLXZhbHVlIiBkYXRhLWZpZWxkPSJzb3VyY2VGaWxlIj7igJQ8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFkZGl0aW9uYWwtYmxvY2siPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tINCa0L7QvNC80LXQvdGC0LDRgNC40LggLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFkZGl0aW9uYWwtaXRlbSIgaWQ9ImNvbW1lbnRzU2VjdGlvbiIgZGF0YS1yb2xlPSJyaWdodC1jb21tZW50cyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFkZGl0aW9uYWwtdGl0bGUiPtCa0L7QvNC80LXQvdGC0LDRgNC40Lk8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLXVwbG9hZCBhZGQtYnV0dG9uIiBpZD0iYWRkQ29tbWVudEJ0biIgdGl0bGU9ItCU0L7QsdCw0LLQuNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuSIgYXJpYS1sYWJlbD0i0JTQvtCx0LDQstC40YLRjCDQutC+0LzQvNC10L3RgtCw0YDQuNC5Ij48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xOSAxMWgtNlY1aC0ydjZINXYyaDZ2Nmgydi02aDZ6Ii8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21tZW50cy1saXN0IiBpZD0iY29tbWVudHNMaXN0IiBkYXRhLXJvbGU9InJpZ2h0LWNvbW1lbnRzLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDQn9GA0LjQutGA0LXQv9C70ZHQvdC90YvQtSDRgdGB0YvQu9C60LggLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFkZGl0aW9uYWwtaXRlbSIgaWQ9ImxpbmtzU2VjdGlvbiIgZGF0YS1yb2xlPSJyaWdodC1saW5rcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZGRpdGlvbmFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFkZGl0aW9uYWwtdGl0bGUiPtCf0YDQuNC60YDQtdC/0LvRkdC90L3Ri9C1INGB0YHRi9C70LrQuDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tdXBsb2FkIGFkZC1idXR0b24iIGlkPSJhZGRMaW5rQnRuIiB0aXRsZT0i0JTQvtCx0LDQstC40YLRjCDRgdGB0YvQu9C60YMiIGFyaWEtbGFiZWw9ItCU0L7QsdCw0LLQuNGC0Ywg0YHRgdGL0LvQutGDIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xOSAxMWgtNlY1aC0ydjZINXYyaDZ2Nmgydi02aDZ6Ii8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rcy1saXN0IiBpZD0ibGlua3NMaXN0IiBkYXRhLXJvbGU9InJpZ2h0LWxpbmtzLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10aXRsZSIgZGF0YS1yb2xlPSJyaWdodC1jb250ZW50LWhlYWRlciIgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEycHg7Ij7QmtC+0L3RgtC10L3RgjxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS11cGxvYWQiIGlkPSJhZGRLaXRCdG4iIGRhdGEtcm9sZT0icmlnaHQtY29udGVudC1hZGQtYnRuIiB0aXRsZT0i0JTQvtCx0LDQstC40YLRjCDQutC+0L3RgtC10L3RgiIgYXJpYS1sYWJlbD0i0JTQvtCx0LDQstC40YLRjCDQutC+0L3RgtC10L3RgiI+PHNwYW4gY2xhc3M9Imljb24iIGlkPSJzdmdQbHVzQnRuIj48L3NwYW4+PC9idXR0b24+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tYWN0aW9ucyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0ia2l0cyIgaWQ9ImtpdHMiIGRhdGEtcm9sZT0icmlnaHQtY29udGVudC1raXRzIj48L2Rpdj4KCiAgICA8IS0tINCQ0YDRhdC40LIgLS0+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciIgZGF0YS1yb2xlPSJyaWdodC1hcmNoaXZlLWhlYWRlciIgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsiPgogICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj7QkNGA0YXQuNCyPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tYWN0aW9ucyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0ia2l0cyIgaWQ9ImFyY2hpdmVLaXRzIiBkYXRhLXJvbGU9InJpZ2h0LWFyY2hpdmUta2l0cyI+PC9kaXY+CgogIDwvZGl2PgoKICA8IS0tIFZpZXdlciAtLT4KICA8ZGl2IGNsYXNzPSJ2aWV3ZXItYmFja2Ryb3AiIGlkPSJ2aWV3ZXJCYWNrZHJvcCIgZGF0YS1yb2xlPSJyaWdodC12aWV3ZXIiIGFyaWEtaGlkZGVuPSJ0cnVlIiB0YWJpbmRleD0iLTEiPgogICAgPGRpdiBjbGFzcz0idmlld2VyIiByb2xlPSJkaWFsb2ciIGFyaWEtbW9kYWw9InRydWUiIGFyaWEtbGFiZWw9ItCf0YDQvtGB0LzQvtGC0YAg0YTQvtGC0L4iPgogICAgICA8ZGl2IGNsYXNzPSJ2aWV3ZXItcmFpbCI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFpbC1idG4iIGlkPSJyYWlsVXAiIGFyaWEtbGFiZWw9ItCf0YDQvtC60YDRg9GC0LjRgtGMINCy0LLQtdGA0YUiPgogICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNy40MSAxNS40MSAxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PC9zdmc+CiAgICAgICAgPC9idXR0b24+CiAgICAgICAgPGRpdiBjbGFzcz0idmlld2VyLXRodW1icyIgaWQ9InZpZXdlclRodW1icyI+PC9kaXY+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFpbC1idG4iIGlkPSJyYWlsRG93biIgYXJpYS1sYWJlbD0i0J/RgNC+0LrRgNGD0YLQuNGC0Ywg0LLQvdC40LciPgogICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJtNy40MSA4LjU5IDQuNTkgNC41OCA0LjU5LTQuNThMMTggMTBsLTYgNi02LTZ6Ii8+PC9zdmc+CiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgoKICAgICAgCiAgICAgIDxkaXYgY2xhc3M9InZpZXdlci1zdGFnZSIgaWQ9InZpZXdlclN0YWdlIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ2aWV3ZXItY291bnRlciIgaWQ9InZpZXdlckNvdW50ZXIiPjAvMDwvZGl2Pgo8ZGl2IGNsYXNzPSJ2aWV3ZXItYWN0aW9ucyIgaWQ9InZpZXdlckFjdGlvbnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIiBpZD0idmlld2VyQ2xvc2UiIGFyaWEtbGFiZWw9ItCX0LDQutGA0YvRgtGMIj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIHJvdGF0ZS00NSIgaWQ9InN2Z0Nsb3NlIj48L3NwYW4+CiAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciIgaWQ9InZpZXdlckRlbGV0ZUJ0biIgdGl0bGU9ItCj0LTQsNC70LjRgtGMINGE0L7RgtC+IiBhcmlhLWxhYmVsPSLQo9C00LDQu9C40YLRjCDRhNC+0YLQviIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIiBpZD0ic3ZnVHJhc2hWaWV3ZXIiPjwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIAogICAgICA8L2Rpdj4KCjxkaXYgY2xhc3M9InN0YWdlLXN0YWNrIiBpZD0ic3RhZ2VTdGFjayI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGFnZS1pdGVtIG1haW4iIGlkPSJzdGFnZU1haW4iPgo8aW1nIGNsYXNzPSJzdGFnZS1pbWciIGlkPSJ2aWV3ZXJJbWciIGFsdD0i0KTQvtGC0L4g0LDQstGC0L7QvNC+0LHQuNC70Y8iPgogICAgICAgICAgPC9kaXY+CjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVJbnB1dCIgYWNjZXB0PSJpbWFnZS8qIiBtdWx0aXBsZSBzdHlsZT0iZGlzcGxheTpub25lOyIgLz4KCiAgPHNjcmlwdD4KICAgIC8qID09PT09IFNWRyBJQ09OUyAocHJvdmlkZWQpID09PT09ICovCiAgICBjb25zdCBTVkdfRE9XTkxPQUQgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik02IDE4aDEydjJINnptNS0xNHY4LjU4Nkw2LjcwNyA4LjI5M0w1LjI5MyA5LjcwN0wxMiAxNi40MTRsNi43MDctNi43MDdsLTEuNDE0LTEuNDE0TDEzIDEyLjU4NlY0eiIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfVFJBU0ggPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01IDIwYTIgMiAwIDAgMCAyIDJoMTBhMiAyIDAgMCAwIDItMlY4aDJWNmgtNFY0YTIgMiAwIDAgMC0yLTJIOWEyIDIgMCAwIDAtMiAydjJIM3YyaDJ6TTkgNGg2djJIOXpNOCA4aDl2MTJIN1Y4eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTkgMTBoMnY4SDl6bTQgMGgydjhoLTJ6Ii8+PC9zdmc+YDsKICAgIGNvbnN0IFNWR19QTFVTID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTFoLTZWNWgtMnY2SDV2Mmg2djZoMnYtNmg2eiIvPjwvc3ZnPmA7CiAgICBjb25zdCBTVkdfSU1BR0VfQUREID0gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHRpdGxlPkltYWdlLWFkZCBTVkcgSWNvbjwvdGl0bGU+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNCA1aDEzdjdoMlY1YzAtMS4xMDMtLjg5Ny0yLTItMkg0Yy0xLjEwMyAwLTIgLjg5Ny0yIDJ2MTJjMCAxLjEwMy44OTcgMiAyIDJoOHYtMkg0eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0ibTggMTFsLTMgNGgxMWwtNC02bC0zIDR6Ii8+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTkgMTRoLTJ2M2gtM3YyaDN2M2gydi0zaDN2LTJoLTN6Ii8+PC9zdmc+YDsKICAgIC8vIHVzZXIncyBuZXcgZWRpdCBpY29uCiAgICBjb25zdCBTVkdfRURJVCA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+YDsKICAgIGNvbnN0IFNWR19DSEVDSyA9IGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDE2LjIgNC44IDEybC0xLjQgMS40TDkgMTkgMjEgN2wtMS40LTEuNHoiLz48L3N2Zz5gOwogICAgY29uc3QgU1ZHX1JFU1RPUkUgPSBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMCAxMWg2djdoMnYtOGExIDEgMCAwIDAtMS0xaC03VjZsLTUgNGw1IDR6Ii8+PC9zdmc+YDsKCiAgICAvLyBtb3VudCBpY29ucwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N2Z1BsdXNCdG4nKS5pbm5lckhUTUwgPSBTVkdfUExVUzsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdmdUcmFzaFZpZXdlcicpLmlubmVySFRNTCA9IFNWR19UUkFTSDsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdmdDbG9zZScpLmlubmVySFRNTCA9IFNWR19QTFVTOwoKCiAgICAvKiA9PT09PSBIRUxQRVJTID09PT09ICovCiAgICBmdW5jdGlvbiB1aWQoKXsKICAgICAgaWYgKHdpbmRvdy5jcnlwdG8gJiYgY3J5cHRvLnJhbmRvbVVVSUQpIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpOwogICAgICByZXR1cm4gJ2lkXycgKyBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KSArICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhZDIobil7IHJldHVybiBTdHJpbmcobikucGFkU3RhcnQoMiwnMCcpOyB9CiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGQpewogICAgICAvLyBkZC5tbS55eXl5CiAgICAgIGNvbnN0IGRheSA9IHBhZDIoZC5nZXREYXRlKCkpOwogICAgICBjb25zdCBtb24gPSBwYWQyKGQuZ2V0TW9udGgoKSsxKTsKICAgICAgY29uc3QgeXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIHJldHVybiBgJHtkYXl9LiR7bW9ufS4ke3lyfWA7CiAgICB9CgogICAgZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZCl7CiAgICAgIC8vIGRkLm1tLnl5eXkgSEg6TU0gKNCx0LXQtyDRgdC10LrRg9C90LQpCiAgICAgIGNvbnN0IGRheSA9IHBhZDIoZC5nZXREYXRlKCkpOwogICAgICBjb25zdCBtb24gPSBwYWQyKGQuZ2V0TW9udGgoKSsxKTsKICAgICAgY29uc3QgeXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIGNvbnN0IGhoID0gcGFkMihkLmdldEhvdXJzKCkpOwogICAgICBjb25zdCBtbSA9IHBhZDIoZC5nZXRNaW51dGVzKCkpOwogICAgICByZXR1cm4gYCR7ZGF5fS4ke21vbn0uJHt5cn0gJHtoaH06JHttbX1gOwogICAgfQoKCiAgICBmdW5jdGlvbiBjcmVhdGVLaXQoKXsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogdWlkKCksCiAgICAgICAgdGl0bGU6ICfQndC+0LLRi9C5INC60L7QvdGC0LXQvdGCJywKICAgICAgICBwaG90b3M6IFtdLAogICAgICAgIHVzZWQ6IGZhbHNlLAogICAgICAgIHVzZWREYXRlOiBudWxsLAogICAgICAgIGNyZWF0ZWRBdDogbnVsbAogICAgICB9OwogICAgfQoKCiAgICAvKiA9PT09PSBTVEFURSA9PT09PSAqLwogICAgY29uc3Qga2l0c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2tpdHMnKTsKICAgIGNvbnN0IGFyY2hpdmVLaXRzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGl2ZUtpdHMnKTsKICAgIGNvbnN0IGFkZEtpdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRLaXRCdG4nKTsKICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKTsKCiAgICAvLyBWaWV3ZXIKICAgIGNvbnN0IHZpZXdlckJhY2tkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckJhY2tkcm9wJyk7CiAgICBjb25zdCB2aWV3ZXJUaHVtYnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyVGh1bWJzJyk7CiAgICBjb25zdCB2aWV3ZXJJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VySW1nJyk7CmNvbnN0IHN0YWdlU3RhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhZ2VTdGFjaycpOwogICAgY29uc3Qgdmlld2VyQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyQ2xvc2UnKTsKY29uc3Qgdmlld2VyQ291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJDb3VudGVyJyk7CiAgICBjb25zdCB2aWV3ZXJEZWxldGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyRGVsZXRlQnRuJyk7CiAgICBjb25zdCByYWlsVXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFpbFVwJyk7CiAgICBjb25zdCByYWlsRG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWlsRG93bicpOwoKICAgIGxldCBraXRzID0gW2NyZWF0ZUtpdCgpXTsKICAgIGxldCBhcmNoaXZlZEtpdHMgPSBbXTsKCiAgICAvLyBtaXNzaW5nIHN0YXRlIHZhcnMKICAgIGxldCBhY3RpdmVFZGl0S2l0SWQgPSBudWxsOwogICAgbGV0IHZpZXdlcktpdElkID0gbnVsbDsKICAgIGxldCB2aWV3ZXJJbmRleCA9IDA7CiAgICBsZXQgdmlld2VyQ2FuRGVsZXRlID0gZmFsc2U7CgogICAgZnVuY3Rpb24gZ2V0S2l0QnlJZChraXRJZCl7CiAgICAgIHJldHVybiBraXRzLmZpbmQoaz0+ay5pZD09PWtpdElkKSB8fCBhcmNoaXZlZEtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpIHx8IG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gaXNLaXRJbk1haW4oa2l0SWQpewogICAgICByZXR1cm4ga2l0cy5zb21lKGs9PmsuaWQ9PT1raXRJZCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldE9ubHlPbmVFZGl0KGtpdElkKXsKICAgICAgYWN0aXZlRWRpdEtpdElkID0ga2l0SWQ7CiAgICAgIHJlbmRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4aXRFZGl0KCl7CiAgICAgIGFjdGl2ZUVkaXRLaXRJZCA9IG51bGw7CiAgICAgIHJlbmRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzRWRpdChraXRJZCl7IHJldHVybiBhY3RpdmVFZGl0S2l0SWQgPT09IGtpdElkOyB9CgogICAgZnVuY3Rpb24gZXNjYXBlSHRtbChzdHIpewogICAgICByZXR1cm4gU3RyaW5nKHN0cikKICAgICAgICAucmVwbGFjZUFsbCgnJicsJyZhbXA7JykKICAgICAgICAucmVwbGFjZUFsbCgnPCcsJyZsdDsnKQogICAgICAgIC5yZXBsYWNlQWxsKCc+JywnJmd0OycpCiAgICAgICAgLnJlcGxhY2VBbGwoJyInLCcmcXVvdDsnKQogICAgICAgIC5yZXBsYWNlQWxsKCInIiwnJiMwMzk7Jyk7CiAgICB9CgogICAgCiAgICAvLyAtLS0gWklQIGRvd25sb2FkIChubyBleHRlcm5hbCBsaWJzKS4gU3RvcmVkIG1ldGhvZCAobm8gY29tcHJlc3Npb24pIC0tLQogICAgZnVuY3Rpb24gc2FuaXRpemVGaWxlTmFtZShuYW1lKXsKICAgICAgcmV0dXJuIChuYW1lIHx8ICdjb250ZW50JykKICAgICAgICAudG9TdHJpbmcoKQogICAgICAgIC50cmltKCkKICAgICAgICAucmVwbGFjZSgvW1wvXFw6Kj8iPD58XSsvZywgJ18nKQogICAgICAgIC5yZXBsYWNlKC9ccysvZywgJyAnKQogICAgICAgIC5zbGljZSgwLCA4MCkgfHwgJ2NvbnRlbnQnOwogICAgfQoKICAgIGZ1bmN0aW9uIGRhdGFVcmxUb0Jsb2IodXJsKXsKICAgICAgLy8gZmV0Y2ggd29ya3MgZm9yIGRhdGE6IFVSTHMgYW5kIGJsb2I6IFVSTHMKICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyID0+IHIuYmxvYigpKTsKICAgIH0KCiAgICAvLyBDUkMzMiBmb3IgWklQCiAgICBjb25zdCBfY3JjVGFibGUgPSAoKCkgPT4gewogICAgICBjb25zdCB0YWJsZSA9IG5ldyBVaW50MzJBcnJheSgyNTYpOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKXsKICAgICAgICBsZXQgYyA9IGk7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCA4OyBrKyspewogICAgICAgICAgYyA9IChjICYgMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSk7CiAgICAgICAgfQogICAgICAgIHRhYmxlW2ldID0gYyA+Pj4gMDsKICAgICAgfQogICAgICByZXR1cm4gdGFibGU7CiAgICB9KSgpOwoKICAgIGZ1bmN0aW9uIGNyYzMyKGJ1Zil7CiAgICAgIGxldCBjID0gMHhGRkZGRkZGRjsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpKyspewogICAgICAgIGMgPSBfY3JjVGFibGVbKGMgXiBidWZbaV0pICYgMHhGRl0gXiAoYyA+Pj4gOCk7CiAgICAgIH0KICAgICAgcmV0dXJuIChjIF4gMHhGRkZGRkZGRikgPj4+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gdTE2KG4peyByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW24gJiAyNTUsIChuID4+PiA4KSAmIDI1NV0pOyB9CiAgICBmdW5jdGlvbiB1MzIobil7IHJldHVybiBuZXcgVWludDhBcnJheShbbiAmIDI1NSwgKG4gPj4+IDgpICYgMjU1LCAobiA+Pj4gMTYpICYgMjU1LCAobiA+Pj4gMjQpICYgMjU1XSk7IH0KCiAgICBmdW5jdGlvbiBjb25jYXRVaW50OChhcnJheXMpewogICAgICBjb25zdCB0b3RhbCA9IGFycmF5cy5yZWR1Y2UoKHMsYSk9PnMrYS5sZW5ndGgsMCk7CiAgICAgIGNvbnN0IG91dCA9IG5ldyBVaW50OEFycmF5KHRvdGFsKTsKICAgICAgbGV0IG9mZiA9IDA7CiAgICAgIGZvciAoY29uc3QgYSBvZiBhcnJheXMpeyBvdXQuc2V0KGEsIG9mZik7IG9mZiArPSBhLmxlbmd0aDsgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGZ1bmN0aW9uIGRvc0RhdGVUaW1lKGRhdGUpewogICAgICBjb25zdCBkID0gZGF0ZSBpbnN0YW5jZW9mIERhdGUgPyBkYXRlIDogbmV3IERhdGUoKTsKICAgICAgY29uc3QgdGltZSA9CiAgICAgICAgKChkLmdldEhvdXJzKCkgJiAweDFGKSA8PCAxMSkgfAogICAgICAgICgoZC5nZXRNaW51dGVzKCkgJiAweDNGKSA8PCA1KSB8CiAgICAgICAgKChNYXRoLmZsb29yKGQuZ2V0U2Vjb25kcygpLzIpKSAmIDB4MUYpOwogICAgICBjb25zdCBkYXkgPSBkLmdldERhdGUoKTsKICAgICAgY29uc3QgbW9udGggPSBkLmdldE1vbnRoKCkgKyAxOwogICAgICBjb25zdCB5ZWFyID0gZC5nZXRGdWxsWWVhcigpIC0gMTk4MDsKICAgICAgY29uc3QgZG9zRGF0ZSA9CiAgICAgICAgKCh5ZWFyICYgMHg3RikgPDwgOSkgfAogICAgICAgICgobW9udGggJiAweDBGKSA8PCA1KSB8CiAgICAgICAgKGRheSAmIDB4MUYpOwogICAgICByZXR1cm4geyB0aW1lLCBkYXRlOiBkb3NEYXRlIH07CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gbWFrZVppcChmaWxlcyl7CiAgICAgIC8vIGZpbGVzOiBbe25hbWUsIGJsb2J9XQogICAgICBjb25zdCBsb2NhbFBhcnRzID0gW107CiAgICAgIGNvbnN0IGNlbnRyYWxQYXJ0cyA9IFtdOwogICAgICBsZXQgb2Zmc2V0ID0gMDsKCiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIGNvbnN0IGR0ID0gZG9zRGF0ZVRpbWUobm93KTsKCiAgICAgIGZvciAoY29uc3QgZiBvZiBmaWxlcyl7CiAgICAgICAgY29uc3QgbmFtZUJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGYubmFtZSk7CiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGF3YWl0IGYuYmxvYi5hcnJheUJ1ZmZlcigpKTsKICAgICAgICBjb25zdCBjcmMgPSBjcmMzMihkYXRhKTsKICAgICAgICBjb25zdCBjb21wU2l6ZSA9IGRhdGEubGVuZ3RoOwogICAgICAgIGNvbnN0IHVuY29tcFNpemUgPSBkYXRhLmxlbmd0aDsKCiAgICAgICAgLy8gTG9jYWwgZmlsZSBoZWFkZXIKICAgICAgICBjb25zdCBsb2NhbEhlYWRlciA9IGNvbmNhdFVpbnQ4KFsKICAgICAgICAgIHUzMigweDA0MDM0YjUwKSwgICAgICAgIC8vIHNpZ25hdHVyZQogICAgICAgICAgdTE2KDIwKSwgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBuZWVkZWQKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGZsYWdzCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBjb21wcmVzc2lvbiAwID0gc3RvcmVkCiAgICAgICAgICB1MTYoZHQudGltZSksICAgICAgICAgICAvLyBtb2QgdGltZQogICAgICAgICAgdTE2KGR0LmRhdGUpLCAgICAgICAgICAgLy8gbW9kIGRhdGUKICAgICAgICAgIHUzMihjcmMpLCAgICAgICAgICAgICAgIC8vIGNyYzMyCiAgICAgICAgICB1MzIoY29tcFNpemUpLCAgICAgICAgICAvLyBjb21wcmVzc2VkIHNpemUKICAgICAgICAgIHUzMih1bmNvbXBTaXplKSwgICAgICAgIC8vIHVuY29tcHJlc3NlZCBzaXplCiAgICAgICAgICB1MTYobmFtZUJ5dGVzLmxlbmd0aCksICAvLyBmaWxlIG5hbWUgbGVuZ3RoCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBleHRyYSBsZW5ndGgKICAgICAgICAgIG5hbWVCeXRlcwogICAgICAgIF0pOwoKICAgICAgICBsb2NhbFBhcnRzLnB1c2gobG9jYWxIZWFkZXIsIGRhdGEpOwoKICAgICAgICAvLyBDZW50cmFsIGRpcmVjdG9yeSBoZWFkZXIKICAgICAgICBjb25zdCBjZW50cmFsSGVhZGVyID0gY29uY2F0VWludDgoWwogICAgICAgICAgdTMyKDB4MDIwMTRiNTApLCAgICAgICAgLy8gc2lnbmF0dXJlCiAgICAgICAgICB1MTYoMjApLCAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIG1hZGUgYnkKICAgICAgICAgIHUxNigyMCksICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gbmVlZGVkCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBmbGFncwogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gY29tcHJlc3Npb24KICAgICAgICAgIHUxNihkdC50aW1lKSwKICAgICAgICAgIHUxNihkdC5kYXRlKSwKICAgICAgICAgIHUzMihjcmMpLAogICAgICAgICAgdTMyKGNvbXBTaXplKSwKICAgICAgICAgIHUzMih1bmNvbXBTaXplKSwKICAgICAgICAgIHUxNihuYW1lQnl0ZXMubGVuZ3RoKSwKICAgICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGV4dHJhCiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBjb21tZW50CiAgICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBkaXNrIG51bWJlcgogICAgICAgICAgdTE2KDApLCAgICAgICAgICAgICAgICAgLy8gaW50ZXJuYWwgYXR0cnMKICAgICAgICAgIHUzMigwKSwgICAgICAgICAgICAgICAgIC8vIGV4dGVybmFsIGF0dHJzCiAgICAgICAgICB1MzIob2Zmc2V0KSwgICAgICAgICAgICAvLyBsb2NhbCBoZWFkZXIgb2Zmc2V0CiAgICAgICAgICBuYW1lQnl0ZXMKICAgICAgICBdKTsKCiAgICAgICAgY2VudHJhbFBhcnRzLnB1c2goY2VudHJhbEhlYWRlcik7CgogICAgICAgIG9mZnNldCArPSBsb2NhbEhlYWRlci5sZW5ndGggKyBkYXRhLmxlbmd0aDsKICAgICAgfQoKICAgICAgY29uc3QgY2VudHJhbERpciA9IGNvbmNhdFVpbnQ4KGNlbnRyYWxQYXJ0cyk7CiAgICAgIGNvbnN0IGNlbnRyYWxPZmZzZXQgPSBvZmZzZXQ7CiAgICAgIG9mZnNldCArPSBjZW50cmFsRGlyLmxlbmd0aDsKCiAgICAgIC8vIEVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeQogICAgICBjb25zdCBlbmQgPSBjb25jYXRVaW50OChbCiAgICAgICAgdTMyKDB4MDYwNTRiNTApLAogICAgICAgIHUxNigwKSwgICAgICAgICAgICAgICAgIC8vIGRpc2sKICAgICAgICB1MTYoMCksICAgICAgICAgICAgICAgICAvLyBzdGFydCBkaXNrCiAgICAgICAgdTE2KGZpbGVzLmxlbmd0aCksICAgICAgLy8gZW50cmllcyBvbiBkaXNrCiAgICAgICAgdTE2KGZpbGVzLmxlbmd0aCksICAgICAgLy8gdG90YWwgZW50cmllcwogICAgICAgIHUzMihjZW50cmFsRGlyLmxlbmd0aCksIC8vIGNlbnRyYWwgZGlyIHNpemUKICAgICAgICB1MzIoY2VudHJhbE9mZnNldCksICAgICAvLyBjZW50cmFsIGRpciBvZmZzZXQKICAgICAgICB1MTYoMCkgICAgICAgICAgICAgICAgICAvLyBjb21tZW50IGxlbmd0aAogICAgICBdKTsKCiAgICAgIGNvbnN0IHppcEJ5dGVzID0gY29uY2F0VWludDgoWy4uLmxvY2FsUGFydHMsIGNlbnRyYWxEaXIsIGVuZF0pOwogICAgICByZXR1cm4gbmV3IEJsb2IoW3ppcEJ5dGVzXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vemlwJyB9KTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBkb3dubG9hZEtpdFppcChraXRJZCl7CiAgICAgIGNvbnN0IGtpdCA9IGdldEtpdEJ5SWQoa2l0SWQpOwogICAgICBpZiAoIWtpdCkgcmV0dXJuOwoKICAgICAgY29uc3QgcGhvdG9zID0gKGtpdC5waG90b3MgfHwgW10pLnNsaWNlKCk7CiAgICAgIGlmICghcGhvdG9zLmxlbmd0aCl7CiAgICAgICAgYWxlcnQoJ9Cd0LXRgiDRhNC+0YLQvtCz0YDQsNGE0LjQuSDQtNC70Y8g0YHQutCw0YfQuNCy0LDQvdC40Y8uJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBCdWlsZCBmaWxlIGxpc3QKICAgICAgY29uc3QgZmlsZXMgPSBbXTsKICAgICAgbGV0IGkgPSAxOwogICAgICBmb3IgKGNvbnN0IHAgb2YgcGhvdG9zKXsKICAgICAgICB0cnl7CiAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZGF0YVVybFRvQmxvYihwLnNyYyk7CiAgICAgICAgICBjb25zdCBleHQgPSAoYmxvYi50eXBlIHx8ICcnKS5pbmNsdWRlcygncG5nJykgPyAncG5nJwogICAgICAgICAgICAgICAgICAgOiAoYmxvYi50eXBlIHx8ICcnKS5pbmNsdWRlcygnd2VicCcpID8gJ3dlYnAnCiAgICAgICAgICAgICAgICAgICA6IChibG9iLnR5cGUgfHwgJycpLmluY2x1ZGVzKCdnaWYnKSA/ICdnaWYnCiAgICAgICAgICAgICAgICAgICA6ICdqcGcnOwogICAgICAgICAgY29uc3QgbnVtID0gU3RyaW5nKGkrKykucGFkU3RhcnQoMiwnMCcpOwogICAgICAgICAgZmlsZXMucHVzaCh7IG5hbWU6IGBwaG90b18ke251bX0uJHtleHR9YCwgYmxvYiB9KTsKICAgICAgICB9Y2F0Y2goZXJyKXt9CiAgICAgIH0KCiAgICAgIGlmICghZmlsZXMubGVuZ3RoKXsKICAgICAgICBhbGVydCgn0J3QtSDRg9C00LDQu9C+0YHRjCDQv9C+0LTQs9C+0YLQvtCy0LjRgtGMINGE0L7RgtC+0LPRgNCw0YTQuNC4INC00LvRjyDRgdC60LDRh9C40LLQsNC90LjRjy4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHppcEJsb2IgPSBhd2FpdCBtYWtlWmlwKGZpbGVzKTsKICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgY29uc3QgdGl0bGUgPSBzYW5pdGl6ZUZpbGVOYW1lKGtpdC50aXRsZSB8fCAnY29udGVudCcpOwogICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHppcEJsb2IpOwogICAgICBhLmRvd25sb2FkID0gYCR7dGl0bGV9LnppcGA7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgIGEuY2xpY2soKTsKICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsKICAgICAgICBhLnJlbW92ZSgpOwogICAgICB9LCAxMDAwKTsKICAgIH0KCgpmdW5jdGlvbiByZW5kZXIoKXsKICAgICAgZnVuY3Rpb24gcmVuZGVyTGlzdChsaXN0LCBob3N0RWwsIG1vZGUpewogICAgICAgIGNvbnN0IGlzQXJjaGl2ZSA9IG1vZGUgPT09ICdhcmNoaXZlJzsKICAgICAgICBob3N0RWwuaW5uZXJIVE1MID0gbGlzdC5tYXAoa2l0ID0+IHsKICAgICAgICAgIGNvbnN0IGVkaXQgPSAoIWlzQXJjaGl2ZSkgJiYgaXNFZGl0KGtpdC5pZCk7CiAgICAgICAgICBjb25zdCB1c2VkQ2xhc3MgPSBraXQudXNlZCA/ICdpcy11c2VkJyA6ICcnOwogICAgICAgICAgY29uc3QgZWRpdENsYXNzID0gZWRpdCA/ICdpcy1lZGl0JyA6ICcnOwoKICAgICAgICAgIGNvbnN0IHRpdGxlQXR0ciA9IGVkaXQgPyAnY29udGVudGVkaXRhYmxlPSJ0cnVlIicgOiAnJzsKICAgICAgICAgIGNvbnN0IHRpdGxlRGF0YSA9IGtpdC50aXRsZSB8fCAn0J3QvtCy0YvQuSDQutC+0L3RgtC10L3Rgic7CgogICAgICAgICAgY29uc3QgdG90YWwgPSBraXQucGhvdG9zLmxlbmd0aDsKICAgICAgICAgIGNvbnN0IHVwbG9hZGVkID0ga2l0LmNyZWF0ZWRBdCA/IGtpdC5jcmVhdGVkQXQgOiAn4oCUJzsKCiAgICAgICAgICAvLyBJbiBhcmNoaXZlOiBubyBhZGQtcGhvdG9zIHRpbGUKICAgICAgICAgIGNvbnN0IHByZXZpZXdOb0FkZCA9IGlzQXJjaGl2ZSA/IHRydWUgOiAhIWtpdC51c2VkOwoKICAgICAgICAgIGNvbnN0IHBob3RvVGlsZSA9IChwaG90bywgZ2xvYmFsSW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKCFwaG90bykgcmV0dXJuIGA8ZGl2IGNsYXNzPSJ0aWxlIGlzLWVtcHR5Ij48L2Rpdj5gOwogICAgICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpbGUgaXMtcGhvdG8iIGRhdGEtYWN0aW9uPSJvcGVuIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiBkYXRhLWluZGV4PSIke2dsb2JhbEluZGV4fSI+CiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtwaG90by5zcmN9IiBhbHQ9ItCk0L7RgtC+Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH07CgogICAgICAgICAgbGV0IHJlbWFpbmluZyA9IDA7CiAgICAgICAgICBsZXQgbWFpblBob3RvcyA9IFtdOwogICAgICAgICAgbGV0IGNvbGxhZ2VQaG90b3MgPSBbXTsKICAgICAgICAgIGxldCBtYWluSWR4QmFzZSA9IDA7CiAgICAgICAgICBsZXQgY29sbGFnZUlkeEJhc2UgPSAwOwogICAgICAgICAgbGV0IGZpcnN0Q2VsbEh0bWwgPSAnJzsKCiAgICAgICAgICBpZiAocHJldmlld05vQWRkKXsKICAgICAgICAgICAgLy8gWzBdIGZpcnN0IGNlbGwgcGhvdG8vZW1wdHk7IFsxLi40XSBtYWluOyBbNS4uOF0gY29sbGFnZSAoOSB2aXNpYmxlKQogICAgICAgICAgICBmaXJzdENlbGxIdG1sID0gcGhvdG9UaWxlKGtpdC5waG90b3NbMF0gfHwgbnVsbCwgMCk7CiAgICAgICAgICAgIG1haW5QaG90b3MgPSBraXQucGhvdG9zLnNsaWNlKDEsIDUpOwogICAgICAgICAgICBjb2xsYWdlUGhvdG9zID0ga2l0LnBob3Rvcy5zbGljZSg1LCA5KTsKICAgICAgICAgICAgcmVtYWluaW5nID0gTWF0aC5tYXgoMCwga2l0LnBob3Rvcy5sZW5ndGggLSA5KTsKICAgICAgICAgICAgbWFpbklkeEJhc2UgPSAxOwogICAgICAgICAgICBjb2xsYWdlSWR4QmFzZSA9IDU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBEZWZhdWx0IG1haW4gbGlzdDogZmlyc3QgY2VsbCBpcyBhZGQgcGhvdG9zCiAgICAgICAgICAgIGZpcnN0Q2VsbEh0bWwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aWxlIGlzLWFkZCIgZGF0YS1hY3Rpb249ImFkZC1waG90b3MiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQlNC+0LHQsNCy0LjRgtGMINGE0L7RgtC+IiBhcmlhLWxhYmVsPSLQlNC+0LHQsNCy0LjRgtGMINGE0L7RgtC+Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0lNQUdFX0FERH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgbWFpblBob3RvcyA9IGtpdC5waG90b3Muc2xpY2UoMCwgNCk7CiAgICAgICAgICAgIGNvbGxhZ2VQaG90b3MgPSBraXQucGhvdG9zLnNsaWNlKDQsIDgpOwogICAgICAgICAgICByZW1haW5pbmcgPSBNYXRoLm1heCgwLCBraXQucGhvdG9zLmxlbmd0aCAtIDgpOwogICAgICAgICAgICBtYWluSWR4QmFzZSA9IDA7CiAgICAgICAgICAgIGNvbGxhZ2VJZHhCYXNlID0gNDsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBjb2xsYWdlQ2VsbCA9IChwaG90bywgZ2xvYmFsSW5kZXgsIGlzTGFzdENlbGwpID0+IHsKICAgICAgICAgICAgaWYgKCFwaG90bykgcmV0dXJuIGA8ZGl2IGNsYXNzPSJjb2xsYWdlLWNlbGwgaXMtZW1wdHkiPjwvZGl2PmA7CiAgICAgICAgICAgIGNvbnN0IG1vcmUgPSAoaXNMYXN0Q2VsbCAmJiByZW1haW5pbmc+MCkgPyBgPGRpdiBjbGFzcz0ibW9yZS1vdmVybGF5Ij7QldGJ0LUgJHtyZW1haW5pbmd9PC9kaXY+YCA6ICcnOwogICAgICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbGxhZ2UtY2VsbCBpcy1waG90byIgZGF0YS1hY3Rpb249Im9wZW4iIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIGRhdGEtaW5kZXg9IiR7Z2xvYmFsSW5kZXh9Ij4KICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3Bob3RvLnNyY30iIGFsdD0i0KTQvtGC0L4iPgogICAgICAgICAgICAgICAgJHttb3JlfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgfTsKCiAgICAgICAgICBjb25zdCBbQSxCLEMsRF0gPSBbbWFpblBob3Rvc1swXXx8bnVsbCwgbWFpblBob3Rvc1sxXXx8bnVsbCwgbWFpblBob3Rvc1syXXx8bnVsbCwgbWFpblBob3Rvc1szXXx8bnVsbF07CgogICAgICAgICAgY29uc3QgY2VsbHMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKXsKICAgICAgICAgICAgY2VsbHMucHVzaChjb2xsYWdlQ2VsbChjb2xsYWdlUGhvdG9zW2ldIHx8IG51bGwsIGNvbGxhZ2VJZHhCYXNlICsgaSwgaSA9PT0gMykpOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBhY3Rpb25zSHRtbCA9ICcnOwogICAgICAgICAgaWYgKGlzQXJjaGl2ZSl7CiAgICAgICAgICAgIGFjdGlvbnNIdG1sID0gYAogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIiBkYXRhLWFjdGlvbj0iYXJjaGl2ZS1kb3dubG9hZCIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSIgdGl0bGU9ItCh0LrQsNGH0LDRgtGMIiBhcmlhLWxhYmVsPSLQodC60LDRh9Cw0YLRjCI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+JHtTVkdfRE9XTkxPQUR9PC9zcGFuPgogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIiBkYXRhLWFjdGlvbj0iYXJjaGl2ZS1yZXN0b3JlIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0JLQtdGA0L3Rg9GC0YwiIGFyaWEtbGFiZWw9ItCS0LXRgNC90YPRgtGMINC40Lcg0LDRgNGF0LjQstCwIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj4ke1NWR19SRVNUT1JFfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFuZ2VyIiBkYXRhLWFjdGlvbj0iYXJjaGl2ZS1kZWxldGUiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQo9C00LDQu9C40YLRjCIgYXJpYS1sYWJlbD0i0KPQtNCw0LvQuNGC0Ywg0L3QsNCy0YHQtdCz0LTQsCI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+JHtTVkdfVFJBU0h9PC9zcGFuPgogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgfSBlbHNlIGlmIChlZGl0KXsKICAgICAgICAgICAgYWN0aW9uc0h0bWwgPSBgCiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciIgZGF0YS1hY3Rpb249ImRlbGV0ZS1raXQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQkiDQsNGA0YXQuNCyIiBhcmlhLWxhYmVsPSLQn9C10YDQtdC80LXRgdGC0LjRgtGMINCyINCw0YDRhdC40LIiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX1RSQVNIfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFjdGlvbnNIdG1sID0gYAogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIiBkYXRhLWFjdGlvbj0iZG93bmxvYWQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQodC60LDRh9Cw0YLRjCIgYXJpYS1sYWJlbD0i0KHQutCw0YfQsNGC0YwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0RPV05MT0FEfTwvc3Bhbj4KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayIgZGF0YS1hY3Rpb249ImVkaXQiIGRhdGEta2l0LWlkPSIke2tpdC5pZH0iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPiR7U1ZHX0VESVR9PC9zcGFuPgogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHVzZWRUZXh0ID0ga2l0LnVzZWQKICAgICAgICAgICAgPyBg0JjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC+OiAke2tpdC51c2VkRGF0ZSB8fCBraXQuY3JlYXRlZEF0IHx8IGZvcm1hdERhdGUobmV3IERhdGUoKSl9YAogICAgICAgICAgICA6ICfQmNGB0L/QvtC70YzQt9C+0LLQsNC90L4nOwoKICAgICAgICAgIGNvbnN0IHVzZWRDaGVja0h0bWwgPSBpc0FyY2hpdmUKICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz0ia2l0LWNoZWNrIj4ke1NWR19DSEVDS308L2Rpdj5gCiAgICAgICAgICAgIDogYDxkaXYgY2xhc3M9ImtpdC1jaGVjayIgZGF0YS1hY3Rpb249InRvZ2dsZS11c2VkIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9Ij4ke1NWR19DSEVDS308L2Rpdj5gOwoKICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGVIdG1sID0gaXNBcmNoaXZlCiAgICAgICAgICAgID8gJycKICAgICAgICAgICAgOiBgPGRpdiBjbGFzcz0ia2l0LWRyYWctaGFuZGxlIiBkYXRhLWtpdC1pZD0iJHtraXQuaWR9IiB0aXRsZT0i0J/QtdGA0LXRgtCw0YnQuNGC0YwiPjwvZGl2PmA7CgogICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWNhcmQgJHt1c2VkQ2xhc3N9ICR7ZWRpdENsYXNzfSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSI+CiAgICAgICAgICAgICAgJHtkcmFnSGFuZGxlSHRtbH0KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtdG9wIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC10aXRsZSIgJHt0aXRsZUF0dHJ9IGRhdGEtYWN0aW9uPSJ0aXRsZSIgZGF0YS1raXQtaWQ9IiR7a2l0LmlkfSI+JHtlc2NhcGVIdG1sKHRpdGxlRGF0YSl9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtYWN0aW9ucyI+JHthY3Rpb25zSHRtbH08L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWRpdmlkZXIiPjwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJraXQtdXNlZC1yb3ciPgogICAgICAgICAgICAgICAgJHt1c2VkQ2hlY2tIdG1sfQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LXVzZWQtdGV4dCI+JHt1c2VkVGV4dH08L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2l0LWdyaWQiPgogICAgICAgICAgICAgICAgJHtmaXJzdENlbGxIdG1sfQogICAgICAgICAgICAgICAgJHtwaG90b1RpbGUoQSwgbWFpbklkeEJhc2UrMCl9CiAgICAgICAgICAgICAgICAke3Bob3RvVGlsZShCLCBtYWluSWR4QmFzZSsxKX0KICAgICAgICAgICAgICAgICR7cGhvdG9UaWxlKEMsIG1haW5JZHhCYXNlKzIpfQogICAgICAgICAgICAgICAgJHtwaG90b1RpbGUoRCwgbWFpbklkeEJhc2UrMyl9CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZSBpcy1jb2xsYWdlIj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sbGFnZS1ncmlkIj4ke2NlbGxzLmpvaW4oJycpfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtpdC1mb290ZXIiPgogICAgICAgICAgICAgICAgPGRpdj7QktGB0LXQs9C+INGE0L7RgtC+OiAke3RvdGFsfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj7Ql9Cw0LPRgNGD0LbQtdC90L46ICR7dXBsb2FkZWR9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDsKICAgICAgICB9KS5qb2luKCcnKTsKCiAgICAgICAgaWYgKGlzQXJjaGl2ZSAmJiBsaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICBob3N0RWwuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOjE0cHg7IHBhZGRpbmc6IDZweCAycHg7Ij7QkiDQsNGA0YXQuNCy0LUg0L/QvtC60LAg0L3QuNGH0LXQs9C+INC90LXRgjwvZGl2PmA7CiAgICAgICAgfQogICAgICB9CgogICAgICByZW5kZXJMaXN0KGtpdHMsIGtpdHNFbCwgJ21haW4nKTsKICAgICAgcmVuZGVyTGlzdChhcmNoaXZlZEtpdHMsIGFyY2hpdmVLaXRzRWwsICdhcmNoaXZlJyk7CiAgICB9CgoKICAgIC8qID09PT09IEVWRU5UUyA9PT09PSAqLwoKICAgIGFkZEtpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBraXRzLnB1c2goY3JlYXRlS2l0KCkpOwogICAgICByZW5kZXIoKTsKICAgIH0pOwoKICAgIC8vIERlbGVnYXRlZCBjbGljayBpbnNpZGUga2l0cwogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IGFjdGlvbkVsID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpOwogICAgICBpZiAoIWFjdGlvbkVsKSByZXR1cm47CiAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbkVsLmRhdGFzZXQuYWN0aW9uOwogICAgICBjb25zdCBraXRJZCA9IGFjdGlvbkVsLmRhdGFzZXQua2l0SWQ7CgogICAgICBpZiAoYWN0aW9uID09PSAnZWRpdCcpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgc2V0T25seU9uZUVkaXQoa2l0SWQpOwogICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSBraXRzRWwucXVlcnlTZWxlY3RvcihgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2tpdElkfSJdIC5raXQtdGl0bGVgKTsKICAgICAgICAgIGlmICh0aXRsZUVsKXsKICAgICAgICAgICAgdGl0bGVFbC5mb2N1cygpOwogICAgICAgICAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0aXRsZUVsKTsKICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOwogICAgICAgICAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsKICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTsKICAgICAgICAgIH0KICAgICAgICB9LDApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2RlbGV0ZS1raXQnKXsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGlmICghY29uZmlybSgn0J/QtdGA0LXQvNC10YHRgtC40YLRjCDRjdGC0L7RgiDQutC+0L3RgtC10L3RgiDQsiDQsNGA0YXQuNCyPycpKSByZXR1cm47CiAgICAgICAgY29uc3QgaWR4ID0ga2l0cy5maW5kSW5kZXgoayA9PiBrLmlkID09PSBraXRJZCk7CiAgICAgICAgaWYgKGlkeCAhPT0gLTEpewogICAgICAgICAgY29uc3QgW2tpdF0gPSBraXRzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAga2l0LmFyY2hpdmVkQXQgPSBmb3JtYXREYXRlKG5ldyBEYXRlKCkpOwogICAgICAgICAgYXJjaGl2ZWRLaXRzLnVuc2hpZnQoa2l0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGtpdHMubGVuZ3RoID09PSAwKSBraXRzID0gW2NyZWF0ZUtpdCgpXTsKICAgICAgICBpZiAoYWN0aXZlRWRpdEtpdElkID09PSBraXRJZCkgYWN0aXZlRWRpdEtpdElkID0gbnVsbDsKICAgICAgICByZW5kZXIoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICdkb3dubG9hZCcpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZG93bmxvYWRLaXRaaXAoa2l0SWQpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ3RvZ2dsZS11c2VkJyl7CiAgICAgICAgLy8gVG9nZ2xlICJ1c2VkIiBvbmx5IGluIGVkaXQgbW9kZSBmb3IgdGhpcyBraXQKICAgICAgICBpZiAoYWN0aXZlRWRpdEtpdElkICE9PSBraXRJZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGtpdCA9IGtpdHMuZmluZChrPT5rLmlkPT09a2l0SWQpOwogICAgICAgIGlmICgha2l0KSByZXR1cm47CiAgICAgICAga2l0LnVzZWQgPSAha2l0LnVzZWQ7CiAgICAgICAgaWYgKGtpdC51c2VkICYmICFraXQudXNlZERhdGUpewogICAgICAgICAga2l0LnVzZWREYXRlID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKTsKICAgICAgICB9CiAgICAgICAgcmVuZGVyKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnYWRkLXBob3RvcycpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZmlsZUlucHV0LmRhdGFzZXQua2l0SWQgPSBraXRJZDsKICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICdvcGVuJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGFjdGlvbkVsLmRhdGFzZXQuaW5kZXgsMTApOwogICAgICAgIG9wZW5WaWV3ZXIoa2l0SWQsIGluZGV4KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0pOwoKCiAgICAvLyBEZWxlZ2F0ZWQgY2xpY2sgaW5zaWRlIGFyY2hpdmUKICAgIGFyY2hpdmVLaXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgY29uc3QgYWN0aW9uRWwgPSBlLnRhcmdldC5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJyk7CiAgICAgIGlmICghYWN0aW9uRWwpIHJldHVybjsKICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uRWwuZGF0YXNldC5hY3Rpb247CiAgICAgIGNvbnN0IGtpdElkID0gYWN0aW9uRWwuZGF0YXNldC5raXRJZDsKCiAgICAgIGlmIChhY3Rpb24gPT09ICdhcmNoaXZlLWRvd25sb2FkJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBkb3dubG9hZEtpdFppcChraXRJZCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uID09PSAnYXJjaGl2ZS1yZXN0b3JlJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBjb25zdCBpZHggPSBhcmNoaXZlZEtpdHMuZmluZEluZGV4KGsgPT4gay5pZCA9PT0ga2l0SWQpOwogICAgICAgIGlmIChpZHggIT09IC0xKXsKICAgICAgICAgIGNvbnN0IFtraXRdID0gYXJjaGl2ZWRLaXRzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAga2l0cy51bnNoaWZ0KGtpdCk7CiAgICAgICAgfQogICAgICAgIHJlbmRlcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FyY2hpdmUtZGVsZXRlJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBpZiAoIWNvbmZpcm0oJ9Cj0LTQsNC70LjRgtGMINGN0YLQvtGCINC60L7QvdGC0LXQvdGCINC90LDQstGB0LXQs9C00LA/INCt0YLQviDQtNC10LnRgdGC0LLQuNC1INC90LXQu9GM0LfRjyDQvtGC0LzQtdC90LjRgtGMLicpKSByZXR1cm47CiAgICAgICAgYXJjaGl2ZWRLaXRzID0gYXJjaGl2ZWRLaXRzLmZpbHRlcihrID0+IGsuaWQgIT09IGtpdElkKTsKICAgICAgICByZW5kZXIoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24gPT09ICdvcGVuJyl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGFjdGlvbkVsLmRhdGFzZXQuaW5kZXgsMTApOwogICAgICAgIG9wZW5WaWV3ZXIoa2l0SWQsIGluZGV4KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0pOwoKICAgIC8qID09PT09IERSQUcgJiBEUk9QIFRPIEFERCBQSE9UT1MgPT09PT0gKi8KICAgIGZ1bmN0aW9uIGdldEFkZFRpbGVGcm9tRXZlbnRUYXJnZXQodGFyZ2V0KXsKICAgICAgY29uc3QgdGlsZSA9IHRhcmdldD8uY2xvc2VzdD8uKCcudGlsZS5pcy1hZGRbZGF0YS1hY3Rpb249ImFkZC1waG90b3MiXScpOwogICAgICByZXR1cm4gdGlsZSB8fCBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFkZFRpbGVEcmFnU3RhdGUodGlsZSwgb24pewogICAgICBpZiAoIXRpbGUpIHJldHVybjsKICAgICAgdGlsZS5jbGFzc0xpc3QudG9nZ2xlKCdpcy1kcmFnb3ZlcicsICEhb24pOwogICAgfQoKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKT0+ewogICAgICBjb25zdCB0aWxlID0gZ2V0QWRkVGlsZUZyb21FdmVudFRhcmdldChlLnRhcmdldCk7CiAgICAgIGlmICghdGlsZSkgcmV0dXJuOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHNldEFkZFRpbGVEcmFnU3RhdGUodGlsZSwgdHJ1ZSk7CiAgICB9KTsKCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGUpPT57CiAgICAgIGNvbnN0IHRpbGUgPSBnZXRBZGRUaWxlRnJvbUV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsKICAgICAgaWYgKCF0aWxlKSByZXR1cm47CiAgICAgIGlmICh0aWxlLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHJldHVybjsKICAgICAgc2V0QWRkVGlsZURyYWdTdGF0ZSh0aWxlLCBmYWxzZSk7CiAgICB9KTsKCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGFzeW5jIChlKT0+ewogICAgICBjb25zdCB0aWxlID0gZ2V0QWRkVGlsZUZyb21FdmVudFRhcmdldChlLnRhcmdldCk7CiAgICAgIGlmICghdGlsZSkgcmV0dXJuOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHNldEFkZFRpbGVEcmFnU3RhdGUodGlsZSwgZmFsc2UpOwogICAgICBjb25zdCBraXRJZCA9IHRpbGUuZGF0YXNldC5raXRJZDsKICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyPy5maWxlcyB8fCBbXSk7CiAgICAgIGlmICgha2l0SWQgfHwgIWZpbGVzLmxlbmd0aCkgcmV0dXJuOwogICAgICBhd2FpdCBhZGRGaWxlc1RvS2l0KGtpdElkLCBmaWxlcyk7CiAgICB9KTsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCk9PnsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbGUuaXMtYWRkLmlzLWRyYWdvdmVyJykuZm9yRWFjaChlbD0+ZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ292ZXInKSk7CiAgICB9KTsKCgogICAgLy8gVGl0bGUgZWRpdGluZzogcmVtZW1iZXIgbGFzdCBmaXR0aW5nIHZhbHVlCiAgICBraXRzRWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIChlKT0+ewogICAgICBjb25zdCB0aXRsZUVsID0gZS50YXJnZXQuY2xvc2VzdCgnLmtpdC10aXRsZVtjb250ZW50ZWRpdGFibGU9InRydWUiXScpOwogICAgICBpZiAoIXRpdGxlRWwpIHJldHVybjsKICAgICAgdGl0bGVFbC5kYXRhc2V0LnByZXZUaXRsZSA9IHRpdGxlRWwudGV4dENvbnRlbnQgfHwgJyc7CiAgICB9KTsKCiAgICAvLyBUaXRsZSBlZGl0aW5nOiBzeW5jIG9uIGlucHV0LCBzdG9wIHR5cGluZyB3aGVuIGVsbGlwc2lzIHJlYWNoZWQKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKT0+ewogICAgICBjb25zdCB0aXRsZUVsID0gZS50YXJnZXQuY2xvc2VzdCgnLmtpdC10aXRsZVtjb250ZW50ZWRpdGFibGU9InRydWUiXScpOwogICAgICBpZiAoIXRpdGxlRWwpIHJldHVybjsKCiAgICAgIC8vIE5vcm1hbGl6ZSBsaW5lIGJyZWFrcyB0byBzcGFjZXMKICAgICAgY29uc3Qgbm9ybWFsaXplZCA9ICh0aXRsZUVsLnRleHRDb250ZW50IHx8ICcnKS5yZXBsYWNlKC9bXHJcbl0rL2csICcgJyk7CiAgICAgIGlmIChub3JtYWxpemVkICE9PSB0aXRsZUVsLnRleHRDb250ZW50KSB0aXRsZUVsLnRleHRDb250ZW50ID0gbm9ybWFsaXplZDsKCiAgICAgIC8vIElmIG92ZXJmbG93IC0+IHJldmVydCB0byBsYXN0IGZpdHRpbmcgdmFsdWUgKGVmZmVjdGl2ZWx5IGJsb2NrcyBmdXJ0aGVyIHR5cGluZykKICAgICAgY29uc3QgcHJldiA9IHRpdGxlRWwuZGF0YXNldC5wcmV2VGl0bGUgPz8gJyc7CiAgICAgIGlmICh0aXRsZUVsLnNjcm9sbFdpZHRoID4gdGl0bGVFbC5jbGllbnRXaWR0aCArIDEpewogICAgICAgIHRpdGxlRWwudGV4dENvbnRlbnQgPSBwcmV2OwoKICAgICAgICAvLyBjYXJldCB0byBlbmQKICAgICAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRpdGxlRWwpOwogICAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTsKICAgICAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpOwogICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aXRsZUVsLmRhdGFzZXQucHJldlRpdGxlID0gdGl0bGVFbC50ZXh0Q29udGVudDsKCiAgICAgIGNvbnN0IGtpdElkID0gdGl0bGVFbC5kYXRhc2V0LmtpdElkOwogICAgICBjb25zdCBraXQgPSBraXRzLmZpbmQoaz0+ay5pZD09PWtpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKICAgICAga2l0LnRpdGxlID0gdGl0bGVFbC50ZXh0Q29udGVudC50cmltKCkgfHwgJ9Cd0L7QstGL0Lkg0LrQvtC90YLQtdC90YInOwogICAgfSk7CgoKICAgIAogICAgLy8gVGl0bGUgZWRpdGluZzogcHJldmVudCBuZXcgbGluZXM7IEVudGVyIGZpbmlzaGVzIGVkaXRpbmcKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpPT57CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LXRpdGxlW2NvbnRlbnRlZGl0YWJsZT0idHJ1ZSJdJyk7CiAgICAgIGlmICghdGl0bGVFbCkgcmV0dXJuOwoKICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKXsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgLy8gZmluYWxpemUgdGl0bGUgdmFsdWUKICAgICAgICB0aXRsZUVsLmJsdXIoKTsKICAgICAgICBleGl0RWRpdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSk7CgogICAgLy8gUGFzdGUgYXMgcGxhaW4gdGV4dCAobm8gbGluZSBicmVha3MpIGludG8gdGl0bGUKICAgIGtpdHNFbC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIChlKT0+ewogICAgICBjb25zdCB0aXRsZUVsID0gZS50YXJnZXQuY2xvc2VzdCgnLmtpdC10aXRsZVtjb250ZW50ZWRpdGFibGU9InRydWUiXScpOwogICAgICBpZiAoIXRpdGxlRWwpIHJldHVybjsKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgdGV4dCA9IChlLmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGEpLmdldERhdGEoJ3RleHQnKSB8fCAnJzsKICAgICAgY29uc3QgY2xlYW4gPSB0ZXh0LnJlcGxhY2UoL1tcclxuXSsvZywgJyAnKS50cmltKCk7CiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGNsZWFuKTsKICAgIH0pOwoKLy8gQ2xpY2sgb3V0c2lkZTogZXhpdCBlZGl0CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICBjb25zdCBjbGlja2VkSW5zaWRlS2l0ID0gISFlLnRhcmdldC5jbG9zZXN0KCcua2l0LWNhcmQnKTsKICAgICAgY29uc3QgY2xpY2tlZEluc2lkZVZpZXdlciA9ICEhZS50YXJnZXQuY2xvc2VzdCgnLnZpZXdlcicpOwogICAgICBpZiAoIWNsaWNrZWRJbnNpZGVLaXQgJiYgIWNsaWNrZWRJbnNpZGVWaWV3ZXIgJiYgYWN0aXZlRWRpdEtpdElkKXsKICAgICAgICBzZXRUaW1lb3V0KCgpPT5leGl0RWRpdCgpLDApOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBFeGl0IGVkaXQgaW1tZWRpYXRlbHkgaWYgY2xpY2sgYW5vdGhlciBraXQgYXJlYQogICAga2l0c0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKT0+ewogICAgICBjb25zdCBraXRDYXJkID0gZS50YXJnZXQuY2xvc2VzdCgnLmtpdC1jYXJkJyk7CiAgICAgIGlmICgha2l0Q2FyZCkgcmV0dXJuOwogICAgICBjb25zdCBraXRJZCA9IGtpdENhcmQuZGF0YXNldC5raXRJZDsKICAgICAgaWYgKGFjdGl2ZUVkaXRLaXRJZCAmJiBhY3RpdmVFZGl0S2l0SWQgIT09IGtpdElkKXsKICAgICAgICBleGl0RWRpdCgpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBBZGQgaW1hZ2UgZmlsZXMgdG8ga2l0ICh1c2VkIGJ5IGZpbGUgaW5wdXQgYW5kIGRyYWcmZHJvcCkKICAgIGFzeW5jIGZ1bmN0aW9uIGFkZEZpbGVzVG9LaXQoa2l0SWQsIGZpbGVzKXsKICAgICAgY29uc3Qga2l0ID0ga2l0cy5maW5kKGs9PmsuaWQ9PT1raXRJZCk7CiAgICAgIGlmICgha2l0KSByZXR1cm47CiAgICAgIGNvbnN0IGltZ0ZpbGVzID0gKGZpbGVzfHxbXSkuZmlsdGVyKGY9PmYgJiYgZi50eXBlICYmIGYudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSk7CiAgICAgIGlmICghaW1nRmlsZXMubGVuZ3RoKSByZXR1cm47CgogICAgICBjb25zdCB0b0RhdGFVcmwgPSAoZmlsZSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnsKICAgICAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoci5yZXN1bHQpOwogICAgICAgIHIub25lcnJvciA9IHJlamVjdDsKICAgICAgICByLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgIH0pOwoKICAgICAgZm9yIChjb25zdCBmIG9mIGltZ0ZpbGVzKXsKICAgICAgICB0cnl7CiAgICAgICAgICBjb25zdCBzcmMgPSBhd2FpdCB0b0RhdGFVcmwoZik7CiAgICAgICAgICBraXQucGhvdG9zLnB1c2goeyBpZDogU3RyaW5nKERhdGUubm93KCkpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMiksIHNyYyB9KTsKICAgICAgICB9Y2F0Y2goZXJyKXt9CiAgICAgIH0KICAgICAga2l0LmNyZWF0ZWRBdCA9IGZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKCkpOwogICAgICByZW5kZXIoKTsKICAgIH0KCiAgICAvLyBGaWxlIGlucHV0IGxvYWQKICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSk9PnsKICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzIHx8IFtdKTsKICAgICAgY29uc3Qga2l0SWQgPSBmaWxlSW5wdXQuZGF0YXNldC5raXRJZDsKICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7CiAgICAgIGlmICghZmlsZXMubGVuZ3RoIHx8ICFraXRJZCkgcmV0dXJuOwogICAgICBhd2FpdCBhZGRGaWxlc1RvS2l0KGtpdElkLCBmaWxlcyk7CiAgICB9KTsKCi8qID09PT09IFZJRVdFUiA9PT09PSAqLwogICAgbGV0IHdoZWVsTG9jayA9IGZhbHNlOwogICAgZnVuY3Rpb24gb25TdGFnZVdoZWVsKGUpewogICAgICBpZiAoIXZpZXdlckJhY2tkcm9wLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHdoZWVsTG9jaykgcmV0dXJuOwogICAgICB3aGVlbExvY2sgPSB0cnVlOwogICAgICBjb25zdCBkaXIgPSBlLmRlbHRhWSA+IDAgPyAxIDogLTE7CiAgICAgIHN0ZXBWaWV3ZXIoZGlyKTsKICAgICAgc2V0VGltZW91dCgoKT0+eyB3aGVlbExvY2sgPSBmYWxzZTsgfSwgNDUwKTsKICAgIH0KCiAgICAKICAgIGZ1bmN0aW9uIGxheW91dFZpZXdlck1haW5JbnNldHMoKXsKICAgICAgLy8gRW5zdXJlIHRoZSBtYWluIHBob3RvIGZyYW1lIGtlZXBzIDIwcHggZ2FwIGZyb20gY291bnRlciAobGVmdCkgYW5kIGNsb3NlIGJ1dHRvbiAocmlnaHQpIG9uIGFueSBzY3JlZW4uCiAgICAgIHRyeXsKICAgICAgICBjb25zdCBzdGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3ZXItc3RhZ2UnKTsKICAgICAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YWdlTWFpbicpOwogICAgICAgIGNvbnN0IGNvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld2VyQ291bnRlcicpOwogICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdlckNsb3NlJyk7CiAgICAgICAgaWYoIXN0YWdlIHx8ICFtYWluKSByZXR1cm47CgogICAgICAgIGNvbnN0IHMgPSBzdGFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBsZXQgbGVmdEluc2V0ID0gMjA7ICAgLy8gbWluaW1hbCBpbnNldCBmcm9tIHN0YWdlIGVkZ2UgaWYgY291bnRlciBpcyBtaXNzaW5nCiAgICAgICAgbGV0IHJpZ2h0SW5zZXQgPSAyMDsgIC8vIG1pbmltYWwgaW5zZXQgZnJvbSBzdGFnZSBlZGdlIGlmIGNsb3NlIGlzIG1pc3NpbmcKCiAgICAgICAgaWYoY291bnRlcil7CiAgICAgICAgICBjb25zdCBjID0gY291bnRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIC8vIHBob3RvIGxlZnQgc2hvdWxkIGJlIGNvdW50ZXIncyByaWdodCArIDIwCiAgICAgICAgICBsZWZ0SW5zZXQgPSBNYXRoLm1heChsZWZ0SW5zZXQsIChjLnJpZ2h0IC0gcy5sZWZ0KSArIDIwKTsKICAgICAgICB9CgogICAgICAgIGlmKGNsb3NlQnRuKXsKICAgICAgICAgIGNvbnN0IGIgPSBjbG9zZUJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIC8vIHBob3RvIHJpZ2h0IHNob3VsZCBiZSBjbG9zZSdzIGxlZnQgLSAyMCAgPT4gcmlnaHRJbnNldCA9IHN0YWdlUmlnaHQgLSAoY2xvc2VMZWZ0IC0gMjApCiAgICAgICAgICByaWdodEluc2V0ID0gTWF0aC5tYXgocmlnaHRJbnNldCwgKHMucmlnaHQgLSBiLmxlZnQpICsgMjApOwogICAgICAgIH0KCiAgICAgICAgbWFpbi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1tYWluLWxlZnQnLCBsZWZ0SW5zZXQgKyAncHgnKTsKICAgICAgICBtYWluLnN0eWxlLnNldFByb3BlcnR5KCctLW1haW4tcmlnaHQnLCByaWdodEluc2V0ICsgJ3B4Jyk7CiAgICAgIH1jYXRjaChlKXt9CiAgICB9CgpmdW5jdGlvbiBvcGVuVmlld2VyKGtpdElkLCBpbmRleCl7CiAgICAgIGNvbnN0IGtpdCA9IGdldEtpdEJ5SWQoa2l0SWQpOwogICAgICBpZiAoIWtpdCB8fCAha2l0LnBob3Rvcy5sZW5ndGgpIHJldHVybjsKCiAgICAgIHZpZXdlcktpdElkID0ga2l0SWQ7CiAgICAgIHZpZXdlckluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIGtpdC5waG90b3MubGVuZ3RoLTEpKTsKICAgICAgdmlld2VyQ2FuRGVsZXRlID0gaXNFZGl0KGtpdElkKSAmJiBpc0tpdEluTWFpbihraXRJZCk7IC8vINGE0LjQutGB0LjRgNGD0LXQvCDRgNC10LbQuNC8INCyINC80L7QvNC10L3RgiDQvtGC0LrRgNGL0YLQuNGPCgogICAgICByZW5kZXJWaWV3ZXIoKTsKICAgICAgdmlld2VyQmFja2Ryb3AuY2xhc3NMaXN0LmFkZCgnb3BlbicpOwogICAgICBsYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCk7CiAgICAgIC8vIGNvdW50ZXIgdGV4dC9tZXRyaWNzIGNhbiBjaGFuZ2UgYWZ0ZXIgcmVuZGVyOyByZWNhbGMgb24gbmV4dCBmcmFtZXMKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT5sYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCkpOwogICAgICBzZXRUaW1lb3V0KCgpPT5sYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCksIDUwKTsKICAgICAgLy8gbWFrZSBFc2MgaGFuZGxpbmcgbW9yZSByZWxpYWJsZQogICAgICB0cnl7IHZpZXdlckJhY2tkcm9wLmZvY3VzKCk7IH1jYXRjaChlKXt9CiAgICAgIHZpZXdlckJhY2tkcm9wLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCdmYWxzZScpOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7CiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgndmlld2VyLW9wZW4nKTsKICAgICAgc3luY1JhaWxCdXR0b25zKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VWaWV3ZXIoKXsKICAgICAgdmlld2VyQmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOwogICAgICB2aWV3ZXJCYWNrZHJvcC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywndHJ1ZScpOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7CiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndmlld2VyLW9wZW4nKTsKICAgICAgdmlld2VyS2l0SWQgPSBudWxsOwogICAgICB2aWV3ZXJJbmRleCA9IDA7CiAgICAgIHZpZXdlckNhbkRlbGV0ZSA9IGZhbHNlOwogICAgICB2aWV3ZXJUaHVtYnMuaW5uZXJIVE1MID0gJyc7CiAgICAgIHRyeXsgZGVsZXRlIHZpZXdlclRodW1icy5kYXRhc2V0LmtpdElkOyB9Y2F0Y2goZSl7fQogICAgICBpZiAodHlwZW9mIHRodW1ic1Njcm9sbFRpbWVyICE9PSAndW5kZWZpbmVkJyAmJiB0aHVtYnNTY3JvbGxUaW1lcil7IGNsZWFyVGltZW91dCh0aHVtYnNTY3JvbGxUaW1lcik7IHRodW1ic1Njcm9sbFRpbWVyID0gbnVsbDsgfQogICAgICB2aWV3ZXJJbWcuc3JjID0gJyc7CiAgICB9CgogICAgbGV0IHRodW1ic1Njcm9sbFRpbWVyID0gbnVsbDsKCmZ1bmN0aW9uIGJ1aWxkVmlld2VyVGh1bWJzKHBob3Rvcyl7CiAgdmlld2VyVGh1bWJzLmlubmVySFRNTCA9IHBob3Rvcy5tYXAoKHAsIGkpPT5gCiAgICA8ZGl2IGNsYXNzPSJ0aHVtYiIgZGF0YS1pbmRleD0iJHtpfSI+CiAgICAgIDxpbWcgc3JjPSIke3Auc3JjfSIgYWx0PSLQnNC40L3QuNCw0YLRjtGA0LAiPgogICAgPC9kaXY+CiAgYCkuam9pbignJyk7CiAgdmlld2VyVGh1bWJzLmRhdGFzZXQua2l0SWQgPSB2aWV3ZXJLaXRJZCB8fCAnJzsKfQoKZnVuY3Rpb24gc2V0QWN0aXZlVGh1bWIoaWR4KXsKICBjb25zdCBwcmV2ID0gdmlld2VyVGh1bWJzLnF1ZXJ5U2VsZWN0b3IoJy50aHVtYi5hY3RpdmUnKTsKICBpZiAocHJldikgcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKCiAgY29uc3QgbmV4dCA9IHZpZXdlclRodW1icy5xdWVyeVNlbGVjdG9yKGAudGh1bWJbZGF0YS1pbmRleD0iJHtpZHh9Il1gKTsKICBpZiAobmV4dCkgbmV4dC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKCiAgY2xlYXJUaW1lb3V0KHRodW1ic1Njcm9sbFRpbWVyKTsKICB0aHVtYnNTY3JvbGxUaW1lciA9IHNldFRpbWVvdXQoKCk9PnsKICAgIGNvbnN0IGFjdGl2ZSA9IHZpZXdlclRodW1icy5xdWVyeVNlbGVjdG9yKCcudGh1bWIuYWN0aXZlJyk7CiAgICBpZiAoYWN0aXZlKSBhY3RpdmUuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiduZWFyZXN0JywgYmVoYXZpb3I6J3Ntb290aCd9KTsKICAgIHN5bmNSYWlsQnV0dG9ucygpOwogIH0sIDE0MCk7Cn0KCmZ1bmN0aW9uIHJlbmRlclZpZXdlcigpewogIGNvbnN0IGtpdCA9IGdldEtpdEJ5SWQodmlld2VyS2l0SWQpOwogIGlmICgha2l0KSByZXR1cm47CiAgY29uc3QgcGhvdG9zID0ga2l0LnBob3RvczsKICBpZiAoIXBob3Rvcy5sZW5ndGgpeyBjbG9zZVZpZXdlcigpOyByZXR1cm47IH0KCiAgdmlld2VySW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbih2aWV3ZXJJbmRleCwgcGhvdG9zLmxlbmd0aC0xKSk7CiAgdmlld2VySW1nLnNyYyA9IHBob3Rvc1t2aWV3ZXJJbmRleF0uc3JjOwogIHZpZXdlckNvdW50ZXIudGV4dENvbnRlbnQgPSBgJHt2aWV3ZXJJbmRleCsxfS8ke3Bob3Rvcy5sZW5ndGh9YDsKICBsYXlvdXRWaWV3ZXJNYWluSW5zZXRzKCk7CiAgdmlld2VyRGVsZXRlQnRuLnN0eWxlLmRpc3BsYXkgPSB2aWV3ZXJDYW5EZWxldGUgPyAnZmxleCcgOiAnbm9uZSc7CgogIC8vIEJ1aWxkIHRodW1icyBvbmx5IHdoZW4gb3BlbmluZyB2aWV3ZXIgLyBzd2l0Y2hpbmcga2l0IC8gcGhvdG8gY291bnQgY2hhbmdlZAogIGlmICh2aWV3ZXJUaHVtYnMuZGF0YXNldC5raXRJZCAhPT0gU3RyaW5nKHZpZXdlcktpdElkKSB8fCB2aWV3ZXJUaHVtYnMuY2hpbGRyZW4ubGVuZ3RoICE9PSBwaG90b3MubGVuZ3RoKXsKICAgIGJ1aWxkVmlld2VyVGh1bWJzKHBob3Rvcyk7CiAgfQoKICBzZXRBY3RpdmVUaHVtYih2aWV3ZXJJbmRleCk7Cn0KCmZ1bmN0aW9uIHN0ZXBWaWV3ZXIoZGVsdGEpewogICAgICBjb25zdCBraXQgPSBnZXRLaXRCeUlkKHZpZXdlcktpdElkKTsKICAgICAgaWYgKCFraXQpIHJldHVybjsKCiAgICAgIGNvbnN0IGxlbiA9IGtpdC5waG90b3MubGVuZ3RoOwogICAgICBpZiAobGVuIDw9IDEpIHJldHVybjsKCiAgICAgIHZpZXdlckluZGV4ID0gKHZpZXdlckluZGV4ICsgZGVsdGEgKyBsZW4pICUgbGVuOwogICAgICByZW5kZXJWaWV3ZXIoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW5jUmFpbEJ1dHRvbnMoKXsKICAgICAgY29uc3QgZWwgPSB2aWV3ZXJUaHVtYnM7CiAgICAgIC8vIHNtYWxsIHRvbGVyYW5jZQogICAgICBjb25zdCBhdFRvcCA9IGVsLnNjcm9sbFRvcCA8PSAyOwogICAgICBjb25zdCBhdEJvdHRvbSA9IChlbC5zY3JvbGxUb3AgKyBlbC5jbGllbnRIZWlnaHQpID49IChlbC5zY3JvbGxIZWlnaHQgLSAyKTsKICAgICAgcmFpbFVwLmRpc2FibGVkID0gYXRUb3A7CiAgICAgIHJhaWxEb3duLmRpc2FibGVkID0gYXRCb3R0b207CiAgICB9CgogICAgdmlld2VyVGh1bWJzLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHN5bmNSYWlsQnV0dG9ucyk7CgogICAgcmFpbFVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHZpZXdlclRodW1icy5zY3JvbGxCeSh7dG9wOiAtMjIwLCBiZWhhdmlvcjogJ3Ntb290aCd9KTsKICAgIH0pOwogICAgcmFpbERvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgdmlld2VyVGh1bWJzLnNjcm9sbEJ5KHt0b3A6IDIyMCwgYmVoYXZpb3I6ICdzbW9vdGgnfSk7CiAgICB9KTsKCiAgICB2aWV3ZXJDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+eyBlLnN0b3BQcm9wYWdhdGlvbigpOyBjbG9zZVZpZXdlcigpOyB9KTsKCiAgICB2aWV3ZXJCYWNrZHJvcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+ewogICAgICAvLyDQutC70LjQuiDQv9C+INGB0LXRgNC+0LzRgyDRhNC+0L3RgyDQt9Cw0LrRgNGL0LLQsNC10YIKICAgICAgaWYgKGUudGFyZ2V0ID09PSB2aWV3ZXJCYWNrZHJvcCkgY2xvc2VWaWV3ZXIoKTsKICAgIH0pOwpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpPT57CiAgICAgIGlmICghdmlld2VyQmFja2Ryb3AuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHJldHVybjsKICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyl7IGUucHJldmVudERlZmF1bHQoKTsgY2xvc2VWaWV3ZXIoKTsgfQogICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzdGVwVmlld2VyKC0xKTsgfQogICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jyl7IGUucHJldmVudERlZmF1bHQoKTsgc3RlcFZpZXdlcigxKTsgfQogICAgCiAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzdGVwVmlld2VyKC0xKTsgfQogICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzdGVwVmlld2VyKDEpOyB9Cn0pOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKT0+ewogICAgICBpZiAoIXZpZXdlckJhY2tkcm9wLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSByZXR1cm47CiAgICAgIGxheW91dFZpZXdlck1haW5JbnNldHMoKTsKICAgICAgLy8gY291bnRlciB0ZXh0L21ldHJpY3MgY2FuIGNoYW5nZSBhZnRlciByZW5kZXI7IHJlY2FsYyBvbiBuZXh0IGZyYW1lcwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PmxheW91dFZpZXdlck1haW5JbnNldHMoKSk7CiAgICAgIHNldFRpbWVvdXQoKCk9PmxheW91dFZpZXdlck1haW5JbnNldHMoKSwgNTApOwogICAgfSk7CgoKICAgIHN0YWdlU3RhY2suYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvblN0YWdlV2hlZWwsIHtwYXNzaXZlOmZhbHNlfSk7CgogICAgdmlld2VyVGh1bWJzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57CiAgICAgIGNvbnN0IHRodW1iID0gZS50YXJnZXQuY2xvc2VzdCgnLnRodW1iJyk7CiAgICAgIGlmICghdGh1bWIpIHJldHVybjsKICAgICAgY29uc3QgaWR4ID0gcGFyc2VJbnQodGh1bWIuZGF0YXNldC5pbmRleCwxMCk7CiAgICAgIHZpZXdlckluZGV4ID0gaWR4OwogICAgICByZW5kZXJWaWV3ZXIoKTsKICAgIH0pOwoKICAgIC8vIERlbGV0ZSBjdXJyZW50IHBob3RvICh2aWV3ZXIgb25seSwgb25seSBpZiBvcGVuZWQgZnJvbSBlZGl0LW1vZGUpCiAgICB2aWV3ZXJEZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgaWYgKCF2aWV3ZXJDYW5EZWxldGUpIHJldHVybjsKCiAgICAgIGNvbnN0IGtpdCA9IGdldEtpdEJ5SWQodmlld2VyS2l0SWQpOwogICAgICBpZiAoIWtpdCkgcmV0dXJuOwoKICAgICAgCgogICAgICBpZiAoIWNvbmZpcm0oJ9Cj0LTQsNC70LjRgtGMINGE0L7RgtC+PyDQrdGC0L4g0LTQtdC50YHRgtCy0LjQtSDQvdC10LvRjNC30Y8g0L7RgtC80LXQvdC40YLRjC4nKSkgcmV0dXJuOwoKICAgICAga2l0LnBob3Rvcy5zcGxpY2Uodmlld2VySW5kZXgsMSk7CiAgICAgIGlmIChraXQucGhvdG9zLmxlbmd0aCA9PT0gMCl7CiAgICAgICAga2l0LmNyZWF0ZWRBdCA9IG51bGw7CiAgICAgICAgY2xvc2VWaWV3ZXIoKTsKICAgICAgfWVsc2V7CiAgICAgICAgdmlld2VySW5kZXggPSBNYXRoLm1pbih2aWV3ZXJJbmRleCwga2l0LnBob3Rvcy5sZW5ndGgtMSk7CiAgICAgICAga2l0LmNyZWF0ZWRBdCA9IGZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKCkpOwogICAgICAgIHJlbmRlclZpZXdlcigpOwogICAgICB9CiAgICAgIHJlbmRlcigpOyAvLyB1cGRhdGUgY291bnRzL2dyaWQKICAgIH0pOwoKCiAgICAvKiA9PT09PSBFRElUIE1PREUgRVhJVCBVWCA9PT09PSAqLwogICAgLy8gRXhpdCBlZGl0IG9uIEVzYwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKT0+ewogICAgICBpZiAoZS5rZXkgIT09ICdFc2NhcGUnKSByZXR1cm47CiAgICAgIGlmICghYWN0aXZlRWRpdEtpdElkKSByZXR1cm47CiAgICAgIC8vIGRvbid0IGludGVyZmVyZSB3aXRoIHZpZXdlciBjb250cm9scyBpZiBuZWVkZWQKICAgICAgZXhpdEVkaXQoKTsKICAgIH0pOwoKICAgIC8vIEV4aXQgZWRpdCB3aGVuIGNsaWNraW5nIG91dHNpZGUgYWxsb3dlZCBhcmVhcyBvZiB0aGUgYWN0aXZlIGNhcmQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpPT57CiAgICAgIGlmICghYWN0aXZlRWRpdEtpdElkKSByZXR1cm47CgogICAgICAvLyBBbGxvdyBjbGlja2luZyBhY3Rpb24gYnV0dG9ucyBpbnNpZGUgdGhlIGFjdGl2ZSBjYXJkIChlZGl0L2RlbGV0ZS9kb3dubG9hZCBldGMuKQogICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWFjdGlvbnNgKSkgcmV0dXJuOwoKICAgICAgLy8gSWYgdmlld2VyIGlzIG9wZW4sIGlnbm9yZSBvdXRzaWRlIGNsaWNrcyAodmlld2VyIG92ZXJsYXkgaGFuZGxlcyBpdHNlbGYpCiAgICAgIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXJCYWNrZHJvcCcpOwogICAgICBpZiAodmlld2VyICYmIHZpZXdlci5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuOwoKICAgICAgY29uc3QgY2FyZCA9IGtpdHNFbC5xdWVyeVNlbGVjdG9yKGAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdYCk7CiAgICAgIGlmICghY2FyZCkgcmV0dXJuOwoKICAgICAgY29uc3QgYWxsb3dlZCA9IGUudGFyZ2V0LmNsb3Nlc3QoCiAgICAgICAgYC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il0gLmtpdC1ncmlkLAogICAgICAgICAua2l0LWNhcmRbZGF0YS1raXQtaWQ9IiR7YWN0aXZlRWRpdEtpdElkfSJdIC5raXQtdGl0bGUsCiAgICAgICAgIC5raXQtY2FyZFtkYXRhLWtpdC1pZD0iJHthY3RpdmVFZGl0S2l0SWR9Il0gLmtpdC1jaGVjaywKICAgICAgICAgLmtpdC1jYXJkW2RhdGEta2l0LWlkPSIke2FjdGl2ZUVkaXRLaXRJZH0iXSAua2l0LWRyYWctaGFuZGxlYAogICAgICApOwoKICAgICAgaWYgKCFhbGxvd2VkKXsKICAgICAgICBleGl0RWRpdCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsKCgoKCiAgICAvKiA9PT09PSBEcmFnIHJlb3JkZXIgKHN0YWJsZSBpUGhvbmUtbGlrZSkgPT09PT0gKi8KICAgIChmdW5jdGlvbiBzZXR1cERyYWdSZW9yZGVyKCl7CiAgICAgIC8qKgogICAgICAgKiBDZW50ZXItYmFzZWQgc3RhYmxlIGdyaWQgcmVvcmRlcmluZyAoU3ByaW5nQm9hcmQtaXNoIOKAnGNlbnRlcnMgZGVjaWRl4oCdKS4KICAgICAgICoKICAgICAgICogR29hbHM6CiAgICAgICAqIC0gVGFyZ2V0IHBvc2l0aW9uIGlzIGRlcml2ZWQgZnJvbSB0aGUgZHJhZ2dlZCBDQVJEIChpdHMgY2VudGVyKSwgbm90IHRoZSBjdXJzb3IuCiAgICAgICAqIC0gT3RoZXIgY2FyZHMg4oCcZGVjaWRl4oCdIHNoaWZ0cyBieSBjb21wYXJpbmcgY2VudGVycyAocm93LW1ham9yIG9yZGVyKS4KICAgICAgICogLSBTaW5nbGUgcGxhY2Vob2xkZXIgKOKAnGhvbGXigJ0pIHJlcHJlc2VudHMgdGhlIGluc2VydGlvbiBzbG90LgogICAgICAgKiAtIEFudGktaml0dGVyOiByQUYgYmF0Y2hpbmcgKyBjb29sZG93biArIGh5c3RlcmVzaXMgKyBzbWFsbCBkZWFkLXpvbmUgYXJvdW5kIGNlbnRlcnMuCiAgICAgICAqCiAgICAgICAqIE1vZGVsOgogICAgICAgKiAxKSBMaWZ0IGRyYWdnZWQgY2FyZCBpbnRvIG92ZXJsYXkgKHBvc2l0aW9uOmZpeGVkIGluIDxib2R5PikKICAgICAgICogMikgTGVhdmUgcGxhY2Vob2xkZXIgaW4gZ3JpZCBhdCBvcmlnaW5hbCBwb3NpdGlvbgogICAgICAgKiAzKSBXaGlsZSBkcmFnZ2luZywgY29tcHV0ZSBkcmFnZ2VkIGNlbnRlcjsgY29tcHV0ZSBjbG9zZXN0IGNhcmQgY2VudGVyOyBkZWNpZGUKICAgICAgICogICAgd2hldGhlciBob2xlIHNob3VsZCBiZSBiZWZvcmUgb3IgYWZ0ZXIgdGhhdCBjYXJkIChieSBjZW50ZXJzKSwgdGhlbiBtb3ZlIHBsYWNlaG9sZGVyLgogICAgICAgKiA0KSBPbiBkcm9wLCBpbnNlcnQgY2FyZCBhdCBwbGFjZWhvbGRlci4KICAgICAgICovCiAgICAgIGNvbnN0IGdyaWQgPSBraXRzRWw7IC8vICNraXRzCiAgICAgIGlmICghZ3JpZCkgcmV0dXJuOwoKICAgICAgLy8gLS0tLSBUdW5pbmcga25vYnMgLS0tLQogICAgICBjb25zdCBBVVRPU0NST0xMX01BUkdJTiA9IDYwOyAvLyBweCBmcm9tIHZpZXdwb3J0IGVkZ2UKICAgICAgY29uc3QgQVVUT1NDUk9MTF9NQVggPSAyMjsgICAgLy8gcHggcGVyIGZyYW1lCgogICAgICAvLyBNb3ZlIHBvbGljeSAoYW50aS1qaXR0ZXIpOiBhbGxvdyBtb3ZlcywgYnV0IG5ldmVyICJjaGF0dGVyIgogICAgICBjb25zdCBNT1ZFX0NPT0xET1dOX01TID0gOTA7ICAvLyBtaW4gdGltZSBiZXR3ZWVuIGhvbGUgbW92ZXMKICAgICAgY29uc3QgTU9WRV9IWVNUX1BYID0gMTI7ICAgICAgLy8gbWluIGNlbnRlciB0cmF2ZWwgYmV0d2VlbiBtb3ZlcwoKICAgICAgLy8gTWlsZCBzbW9vdGhpbmcgb2YgdGhlIGRyYWdnZWQgY2FyZCAoYWRkcyBhIHNtYWxsIGRlbGF5IHNvIHRoZSBmaW5nZXIvY3Vyc29yIGRvZXNuJ3QgInRlbGVwb3J0IiB0aGUgY2FyZCkKICAgICAgY29uc3QgRFJBR19FQVNFID0gMC4zNTsgICAgICAgLy8gMC4uMSAoaGlnaGVyID0gc25hcHBpZXIpCgogICAgICAvLyBQbGFubmluZyArIGNvbW1pdCBwb2xpY3kgKHByZS1wbGFuIHRhcmdldCwgY29tbWl0IG9ubHkgd2hlbiBvdmVybGFwIGlzIHN0cm9uZykKICAgICAgY29uc3QgUExBTl9UUklHR0VSID0gMC4yMDsgICAgICAgLy8gc3RhcnQgInBsYW5uaW5nIiBvbmNlIG92ZXJsYXAgaXMgbm90aWNlYWJsZQogICAgICBjb25zdCBQTEFOX1NUQUJMRV9NUyA9IDkwOyAgICAgICAvLyBjYW5kaWRhdGUgbXVzdCBiZSBzdGFibGUgdGhpcyBsb25nIHRvIGJlY29tZSB0aGUgcGxhbgogICAgICBjb25zdCBQTEFOX1NXSVRDSF9IWVNUID0gMC4xMjsgICAvLyBzd2l0Y2ggcGxhbiBvbmx5IGlmIG5ldyBpcyBiZXR0ZXIgYnkgdGhpcyBtYXJnaW4KICAgICAgY29uc3QgUExBTl9EUk9QID0gMC4wODsgICAgICAgICAgLy8gZHJvcCBwbGFuIGlmIG92ZXJsYXAgZmFsbHMgYmVsb3cgdGhpcwoKICAgICAgY29uc3QgQ09NTUlUX1RSSUdHRVIgPSAwLjgwOyAgICAgLy8gODAlIG92ZXJsYXAgPT4gbW92ZSBwbGFjZWhvbGRlciAoeW91ciAiZGVjaXNpb24gcG9pbnQiKQogICAgICBjb25zdCBDT01NSVRfU1RBQkxFX01TID0gODA7ICAgICAvLyBrZWVwID49IDgwJSBvdmVybGFwIGZvciB0aGlzIGxvbmcgYmVmb3JlIG1vdmluZwogICAgICBjb25zdCBMT0NLX0FGVEVSX01PVkVfTVMgPSAxNjA7ICAvLyBhZnRlciBhIG1vdmUsIGZyZWV6ZSByZS1wbGFubmluZyBicmllZmx5IChwcmV2ZW50cyBwaW5nLXBvbmcpCgogICAgICAvLyBDYW5kaWRhdGUgc3RpY2tpbmVzczoga2VlcCBwcmV2aW91cyBiZXN0IHVubGVzcyB0aGUgbmV3IG9uZSBpcyBjbGVhcmx5IGJldHRlcgogICAgICBjb25zdCBPVkVSTEFQX0hZU1QgPSAwLjEwOwoKICAgICAgLy8gU21hbGwgbG9vay1haGVhZCB1c2luZyBjYXJkIHZlbG9jaXR5IChzdGlsbCAiZnJvbSB0aGUgY2FyZCIsIG5vdCBmcm9tIGN1cnNvcikKICAgICAgY29uc3QgUFJFRElDVF9NUyA9IDkwOyAgICAgICAgLy8gbXMgYWhlYWQKCiAgICAgIGNvbnN0IFJPV19CQU5EX0ZSQUMgPSAwLjQ4OyAgICAvLyBzYW1lIHJvdyBpZiB8ZHl8IDwgbWVkaWFuSCAqIGZyYWMKICAgICAgY29uc3QgQ0VOVEVSX0RFQURfRlJBQyA9IDAuMDg7IC8vIGRlYWQtem9uZSBhcm91bmQgdGFyZ2V0IGNlbnRlciAoZnJhY3Rpb24gb2Ygdy9oKQoKICAgICAgbGV0IGRyYWcgPSBudWxsOwogICAgICBsZXQgcmFmSWQgPSAwOwoKICAgICAgZnVuY3Rpb24gcHgobil7IHJldHVybiBNYXRoLnJvdW5kKG4pICsgJ3B4JzsgfQoKICAgICAgZnVuY3Rpb24gdmlld3BvcnRBdXRvU2Nyb2xsKGNsaWVudFgsIGNsaWVudFkpewogICAgICAgIGNvbnN0IHZoID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgIGNvbnN0IHZ3ID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgbGV0IHZ5ID0gMCwgdnggPSAwOwoKICAgICAgICBpZiAoY2xpZW50WSA8IEFVVE9TQ1JPTExfTUFSR0lOKXsKICAgICAgICAgIHZ5ID0gLUFVVE9TQ1JPTExfTUFYICogKDEgLSBjbGllbnRZIC8gQVVUT1NDUk9MTF9NQVJHSU4pOwogICAgICAgIH0gZWxzZSBpZiAoY2xpZW50WSA+IHZoIC0gQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnkgPSBBVVRPU0NST0xMX01BWCAqICgxIC0gKHZoIC0gY2xpZW50WSkgLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2xpZW50WCA8IEFVVE9TQ1JPTExfTUFSR0lOKXsKICAgICAgICAgIHZ4ID0gLUFVVE9TQ1JPTExfTUFYICogKDEgLSBjbGllbnRYIC8gQVVUT1NDUk9MTF9NQVJHSU4pOwogICAgICAgIH0gZWxzZSBpZiAoY2xpZW50WCA+IHZ3IC0gQVVUT1NDUk9MTF9NQVJHSU4pewogICAgICAgICAgdnggPSBBVVRPU0NST0xMX01BWCAqICgxIC0gKHZ3IC0gY2xpZW50WCkgLyBBVVRPU0NST0xMX01BUkdJTik7CiAgICAgICAgfQoKICAgICAgICBpZiAodnggfHwgdnkpIHdpbmRvdy5zY3JvbGxCeSh2eCwgdnkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBtYWtlUGxhY2Vob2xkZXIoZnJvbUNhcmQpewogICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgcGguY2xhc3NOYW1lID0gJ2tpdC1wbGFjZWhvbGRlcic7CiAgICAgICAgY29uc3QgciA9IGZyb21DYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHBoLnN0eWxlLmhlaWdodCA9IHB4KHIuaGVpZ2h0KTsKICAgICAgICBwaC5zdHlsZS5taW5IZWlnaHQgPSBweChyLmhlaWdodCk7CiAgICAgICAgcGguc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgcGguc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgICAgICByZXR1cm4gcGg7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG5leHRDYXJkQWZ0ZXIobm9kZSl7CiAgICAgICAgbGV0IG4gPSBub2RlID8gbm9kZS5uZXh0RWxlbWVudFNpYmxpbmcgOiBudWxsOwogICAgICAgIHdoaWxlIChuICYmICFuLmNsYXNzTGlzdC5jb250YWlucygna2l0LWNhcmQnKSkgbiA9IG4ubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgIHJldHVybiBuOwogICAgICB9CgogICAgICBmdW5jdGlvbiBpc1BsYWNlaG9sZGVyQXRFbmQoKXsKICAgICAgICBjb25zdCByZWYgPSBuZXh0Q2FyZEFmdGVyKGRyYWc/LnBsYWNlaG9sZGVyKTsKICAgICAgICByZXR1cm4gIXJlZjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZmxpcEFuaW1hdGVBZnRlckRPTUNoYW5nZShkb0NoYW5nZSl7CiAgICAgICAgY29uc3QgZmlyc3QgPSBuZXcgTWFwKCk7CiAgICAgICAgZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcua2l0LWNhcmQsIC5raXQtcGxhY2Vob2xkZXInKS5mb3JFYWNoKG4gPT4gZmlyc3Quc2V0KG4sIG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpKTsKCiAgICAgICAgZG9DaGFuZ2UoKTsKCiAgICAgICAgY29uc3QgbGFzdCA9IG5ldyBNYXAoKTsKICAgICAgICBncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCwgLmtpdC1wbGFjZWhvbGRlcicpLmZvckVhY2gobiA9PiBsYXN0LnNldChuLCBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSk7CgogICAgICAgIGxhc3QuZm9yRWFjaCgobHIsIG5vZGUpPT57CiAgICAgICAgICBjb25zdCBmciA9IGZpcnN0LmdldChub2RlKTsKICAgICAgICAgIGlmICghZnIpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGR4ID0gZnIubGVmdCAtIGxyLmxlZnQ7CiAgICAgICAgICBjb25zdCBkeSA9IGZyLnRvcCAtIGxyLnRvcDsKICAgICAgICAgIGlmIChkeCB8fCBkeSl7CiAgICAgICAgICAgIG5vZGUuYW5pbWF0ZShbCiAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtkeH1weCwgJHtkeX1weClgIH0sCiAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwwKScgfQogICAgICAgICAgICBdLCB7IGR1cmF0aW9uOiAyMjAsIGVhc2luZzogJ2N1YmljLWJlemllciguMiwuODUsLjIsMSknIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBnZXREcmFnVG9wTGVmdCgpewogICAgICAgIC8vIEtlZXAgb3ZlcmxheSBjYXJkIHVuZGVyIHBvaW50ZXIgd2l0aCBmaXhlZCBncmFiIG9mZnNldCwgYnV0IHNtb290aCBhIGJpdCB0byByZWR1Y2Ugaml0dGVyLgogICAgICAgIGNvbnN0IHRhcmdldFRvcCA9IGRyYWcubGFzdENsaWVudFkgLSBkcmFnLmdyYWJEeTsKICAgICAgICBjb25zdCB0YXJnZXRMZWZ0ID0gZHJhZy5sYXN0Q2xpZW50WCAtIGRyYWcuZ3JhYkR4OwoKICAgICAgICBpZiAoZHJhZy5fc21vb3RoVG9wID09IG51bGwpewogICAgICAgICAgZHJhZy5fc21vb3RoVG9wID0gdGFyZ2V0VG9wOwogICAgICAgICAgZHJhZy5fc21vb3RoTGVmdCA9IHRhcmdldExlZnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRyYWcuX3Ntb290aFRvcCArPSAodGFyZ2V0VG9wIC0gZHJhZy5fc21vb3RoVG9wKSAqIERSQUdfRUFTRTsKICAgICAgICAgIGRyYWcuX3Ntb290aExlZnQgKz0gKHRhcmdldExlZnQgLSBkcmFnLl9zbW9vdGhMZWZ0KSAqIERSQUdfRUFTRTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7IHRvcDogZHJhZy5fc21vb3RoVG9wLCBsZWZ0OiBkcmFnLl9zbW9vdGhMZWZ0IH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNsYW1wKG4sIGEsIGIpeyByZXR1cm4gTWF0aC5tYXgoYSwgTWF0aC5taW4oYiwgbikpOyB9CgogICAgICBmdW5jdGlvbiByZWN0RnJvbUNlbnRlcihjeCwgY3ksIHcsIGgpewogICAgICAgIGNvbnN0IGxlZnQgPSBjeCAtIHcvMjsKICAgICAgICBjb25zdCB0b3AgPSBjeSAtIGgvMjsKICAgICAgICByZXR1cm4geyBsZWZ0LCB0b3AsIHJpZ2h0OiBsZWZ0ICsgdywgYm90dG9tOiB0b3AgKyBoLCB3aWR0aDogdywgaGVpZ2h0OiBoIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGludGVyc2VjdGlvbkFyZWEoYSwgYil7CiAgICAgICAgY29uc3QgaXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhLnJpZ2h0LCBiLnJpZ2h0KSAtIE1hdGgubWF4KGEubGVmdCwgYi5sZWZ0KSk7CiAgICAgICAgY29uc3QgaXkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhLmJvdHRvbSwgYi5ib3R0b20pIC0gTWF0aC5tYXgoYS50b3AsIGIudG9wKSk7CiAgICAgICAgcmV0dXJuIGl4ICogaXk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG92ZXJsYXBTY29yZShkcmFnUmVjdCwgdGFyZ2V0UmVjdCl7CiAgICAgICAgY29uc3QgYXJlYSA9IGludGVyc2VjdGlvbkFyZWEoZHJhZ1JlY3QsIHRhcmdldFJlY3QpOwogICAgICAgIGlmICghYXJlYSkgcmV0dXJuIDA7CiAgICAgICAgY29uc3QgYTEgPSBkcmFnUmVjdC53aWR0aCAqIGRyYWdSZWN0LmhlaWdodDsKICAgICAgICBjb25zdCBhMiA9IHRhcmdldFJlY3Qud2lkdGggKiB0YXJnZXRSZWN0LmhlaWdodDsKICAgICAgICByZXR1cm4gYXJlYSAvIE1hdGgubWluKGExLCBhMik7IC8vIDAuLjEKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY29tcHV0ZVJvd01ham9yT3JkZXIoKXsKICAgICAgICBjb25zdCBjYXJkcyA9IFsuLi5ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5raXQtY2FyZCcpXTsKICAgICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICAgIGZvciAoY29uc3QgZWwgb2YgY2FyZHMpewogICAgICAgICAgY29uc3QgciA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICAgIGVsLAogICAgICAgICAgICByZWN0OiByLAogICAgICAgICAgICBjeDogci5sZWZ0ICsgci53aWR0aC8yLAogICAgICAgICAgICBjeTogci50b3AgKyByLmhlaWdodC8yLAogICAgICAgICAgICB3OiByLndpZHRoLAogICAgICAgICAgICBoOiByLmhlaWdodAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4geyBvcmRlcjogW10sIHJvd0JhbmQ6IDAgfTsKCiAgICAgICAgY29uc3QgaHMgPSBpdGVtcy5tYXAoaT0+aS5oKS5zb3J0KChhLGIpPT5hLWIpOwogICAgICAgIGNvbnN0IG1lZEggPSBoc1tNYXRoLmZsb29yKGhzLmxlbmd0aC8yKV0gfHwgMDsKICAgICAgICBjb25zdCByb3dCYW5kID0gTWF0aC5tYXgoMTIsIG1lZEggKiBST1dfQkFORF9GUkFDKTsKCiAgICAgICAgLy8gZ3JvdXAgaW50byByb3dzIGJ5IGNlbnRlclkKICAgICAgICBpdGVtcy5zb3J0KChhLGIpPT5hLmN5IC0gYi5jeSk7CiAgICAgICAgY29uc3Qgcm93cyA9IFtdOwogICAgICAgIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpewogICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dzLmxlbmd0aC0xXTsKICAgICAgICAgIGlmICghcm93KXsKICAgICAgICAgICAgcm93cy5wdXNoKHsgY3k6IGl0LmN5LCBpdGVtczogW2l0XSB9KTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoTWF0aC5hYnMoaXQuY3kgLSByb3cuY3kpIDw9IHJvd0JhbmQpewogICAgICAgICAgICByb3cuaXRlbXMucHVzaChpdCk7CiAgICAgICAgICAgIHJvdy5jeSA9IHJvdy5jeSArIChpdC5jeSAtIHJvdy5jeSkvcm93Lml0ZW1zLmxlbmd0aDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJvd3MucHVzaCh7IGN5OiBpdC5jeSwgaXRlbXM6IFtpdF0gfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIHNvcnQgd2l0aGluIHJvd3MgYnkgY2VudGVyWCBhbmQgZmxhdHRlbgogICAgICAgIGNvbnN0IG9yZGVyID0gW107CiAgICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cyl7CiAgICAgICAgICByb3cuaXRlbXMuc29ydCgoYSxiKT0+YS5jeCAtIGIuY3gpOwogICAgICAgICAgZm9yIChjb25zdCBpdCBvZiByb3cuaXRlbXMpIG9yZGVyLnB1c2goaXQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4geyBvcmRlciwgcm93QmFuZCB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBjb21wdXRlSW5zZXJ0UmVmSW5PcmRlcihvcmRlciwgcm93QmFuZCwgY2hvc2VuSSwgZHJhZ0N4LCBkcmFnQ3kpewogICAgICAgIGNvbnN0IGNob3NlbiA9IG9yZGVyW2Nob3NlbkldOwogICAgICAgIGNvbnN0IHNhbWVSb3cgPSBNYXRoLmFicyhkcmFnQ3kgLSBjaG9zZW4uY3kpIDw9IHJvd0JhbmQvMjsKCiAgICAgICAgaWYgKHNhbWVSb3cpewogICAgICAgICAgY29uc3QgZGVhZFggPSBNYXRoLm1heCg2LCBjaG9zZW4udyAqIENFTlRFUl9ERUFEX0ZSQUMpOwogICAgICAgICAgaWYgKGRyYWdDeCA8IGNob3Nlbi5jeCAtIGRlYWRYKSByZXR1cm4gY2hvc2VuLmVsOyAvLyBiZWZvcmUKICAgICAgICAgIGlmIChkcmFnQ3ggPiBjaG9zZW4uY3ggKyBkZWFkWCkgcmV0dXJuIChjaG9zZW5JICsgMSA8IG9yZGVyLmxlbmd0aCkgPyBvcmRlcltjaG9zZW5JICsgMV0uZWwgOiBudWxsOyAvLyBhZnRlcgogICAgICAgICAgcmV0dXJuIG5leHRDYXJkQWZ0ZXIoZHJhZy5wbGFjZWhvbGRlcik7IC8vIGRlYWQtem9uZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBkZWFkWSA9IE1hdGgubWF4KDYsIGNob3Nlbi5oICogQ0VOVEVSX0RFQURfRlJBQyk7CiAgICAgICAgICBpZiAoZHJhZ0N5IDwgY2hvc2VuLmN5IC0gZGVhZFkpIHJldHVybiBjaG9zZW4uZWw7CiAgICAgICAgICBpZiAoZHJhZ0N5ID4gY2hvc2VuLmN5ICsgZGVhZFkpIHJldHVybiAoY2hvc2VuSSArIDEgPCBvcmRlci5sZW5ndGgpID8gb3JkZXJbY2hvc2VuSSArIDFdLmVsIDogbnVsbDsKICAgICAgICAgIHJldHVybiBuZXh0Q2FyZEFmdGVyKGRyYWcucGxhY2Vob2xkZXIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gY29tcHV0ZUNhbmRpZGF0ZShkcmFnQ3gsIGRyYWdDeSwgZHJhZ1JlY3QpewogICAgICAgIGNvbnN0IHsgb3JkZXIsIHJvd0JhbmQgfSA9IGNvbXB1dGVSb3dNYWpvck9yZGVyKCk7CiAgICAgICAgaWYgKCFvcmRlci5sZW5ndGgpIHJldHVybiB7IHJlZjogbnVsbCwgdGFyZ2V0RWw6IG51bGwsIHRhcmdldFNjb3JlOiAwIH07CgogICAgICAgIGNvbnN0IGRyID0gZHJhZ1JlY3Q7CgogICAgICAgIC8vIDEpIEJlc3Qgb3ZlcmxhcCAod2hvIGlzIG1vc3QgY292ZXJlZCBieSB0aGUgZHJhZ2dlZCBjYXJkKQogICAgICAgIGxldCBiZXN0SSA9IC0xOwogICAgICAgIGxldCBiZXN0U2NvcmUgPSAwOwogICAgICAgIGZvciAobGV0IGk9MDtpPG9yZGVyLmxlbmd0aDtpKyspewogICAgICAgICAgY29uc3QgaXQgPSBvcmRlcltpXTsKICAgICAgICAgIGNvbnN0IHMgPSBvdmVybGFwU2NvcmUoZHIsIGl0LnJlY3QpOwogICAgICAgICAgaWYgKHMgPiBiZXN0U2NvcmUpewogICAgICAgICAgICBiZXN0U2NvcmUgPSBzOwogICAgICAgICAgICBiZXN0SSA9IGk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAyKSBDaG9vc2Ugd2l0aCBzdGlja2luZXNzIChwcmV2ZW50cyByYXBpZCBmbGlwcyB3aGlsZSBob3ZlcmluZykKICAgICAgICBsZXQgY2hvc2VuSSA9IC0xOwogICAgICAgIGxldCBjaG9zZW5TY29yZSA9IDA7CgogICAgICAgIGlmIChiZXN0SSAhPT0gLTEgJiYgYmVzdFNjb3JlID4gMCl7CiAgICAgICAgICBjaG9zZW5JID0gYmVzdEk7CiAgICAgICAgICBjaG9zZW5TY29yZSA9IGJlc3RTY29yZTsKCiAgICAgICAgICBpZiAoZHJhZy5sYXN0VGFyZ2V0RWwpewogICAgICAgICAgICBjb25zdCBwcmV2SSA9IG9yZGVyLmZpbmRJbmRleChpdCA9PiBpdC5lbCA9PT0gZHJhZy5sYXN0VGFyZ2V0RWwpOwogICAgICAgICAgICBpZiAocHJldkkgIT09IC0xKXsKICAgICAgICAgICAgICBjb25zdCBwcmV2U2NvcmUgPSBvdmVybGFwU2NvcmUoZHIsIG9yZGVyW3ByZXZJXS5yZWN0KTsKICAgICAgICAgICAgICBpZiAocHJldlNjb3JlID49IGNob3NlblNjb3JlIC0gT1ZFUkxBUF9IWVNUKXsKICAgICAgICAgICAgICAgIGNob3NlbkkgPSBwcmV2STsKICAgICAgICAgICAgICAgIGNob3NlblNjb3JlID0gcHJldlNjb3JlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBGYWxsYmFjazogY2xvc2VzdCBjZW50ZXIgKGJldHdlZW4gY2FyZHMgLyBpbiBnYXBzKQogICAgICAgICAgbGV0IGNpID0gMDsKICAgICAgICAgIGxldCBiZXN0RCA9IEluZmluaXR5OwogICAgICAgICAgZm9yIChsZXQgaT0wO2k8b3JkZXIubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGNvbnN0IGl0ID0gb3JkZXJbaV07CiAgICAgICAgICAgIGNvbnN0IGR4ID0gZHJhZ0N4IC0gaXQuY3g7CiAgICAgICAgICAgIGNvbnN0IGR5ID0gZHJhZ0N5IC0gaXQuY3k7CiAgICAgICAgICAgIGNvbnN0IGQgPSBkeCpkeCArIGR5KmR5OwogICAgICAgICAgICBpZiAoZCA8IGJlc3REKXsgYmVzdEQgPSBkOyBjaSA9IGk7IH0KICAgICAgICAgIH0KICAgICAgICAgIGNob3NlbkkgPSBjaTsKICAgICAgICAgIGNob3NlblNjb3JlID0gMDsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGNob3NlbiA9IG9yZGVyW2Nob3NlbkldOwogICAgICAgIGRyYWcubGFzdFRhcmdldEVsID0gY2hvc2VuLmVsOwoKICAgICAgICBjb25zdCByZWYgPSBjb21wdXRlSW5zZXJ0UmVmSW5PcmRlcihvcmRlciwgcm93QmFuZCwgY2hvc2VuSSwgZHJhZ0N4LCBkcmFnQ3kpOwogICAgICAgIHJldHVybiB7IHJlZiwgdGFyZ2V0RWw6IGNob3Nlbi5lbCwgdGFyZ2V0U2NvcmU6IGNob3NlblNjb3JlIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNvbXB1dGVJbnNlcnRSZWZGb3JUYXJnZXQodGFyZ2V0RWwsIGRyYWdDeCwgZHJhZ0N5KXsKICAgICAgICBjb25zdCB7IG9yZGVyLCByb3dCYW5kIH0gPSBjb21wdXRlUm93TWFqb3JPcmRlcigpOwogICAgICAgIGlmICghb3JkZXIubGVuZ3RoKSByZXR1cm4gbnVsbDsKCiAgICAgICAgY29uc3QgaSA9IG9yZGVyLmZpbmRJbmRleChpdCA9PiBpdC5lbCA9PT0gdGFyZ2V0RWwpOwogICAgICAgIGlmIChpID09PSAtMSl7CiAgICAgICAgICByZXR1cm4gbmV4dENhcmRBZnRlcihkcmFnLnBsYWNlaG9sZGVyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbXB1dGVJbnNlcnRSZWZJbk9yZGVyKG9yZGVyLCByb3dCYW5kLCBpLCBkcmFnQ3gsIGRyYWdDeSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYW5Gcm9tQ2FuZGlkYXRlKGNhbmQsIGRyYWdSZWN0LCBub3cpewogICAgICAgIGNvbnN0IGVsID0gY2FuZC50YXJnZXRFbDsKICAgICAgICBjb25zdCBzY29yZSA9IGNhbmQudGFyZ2V0U2NvcmU7CgogICAgICAgIC8vIE5vdCBlbm91Z2ggb3ZlcmxhcCA9PiBjYW5kaWRhdGUgcmVzZXRzOyBwbGFuIG1heSBkcm9wIGlmIHdlIG1vdmVkIGF3YXkuCiAgICAgICAgaWYgKCFlbCB8fCBzY29yZSA8IFBMQU5fVFJJR0dFUil7CiAgICAgICAgICBkcmFnLnBsYW5DYW5kRWwgPSBudWxsOwogICAgICAgICAgZHJhZy5wbGFuQ2FuZFN0YXJ0ID0gMDsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTY29yZSA9IDA7CgogICAgICAgICAgaWYgKGRyYWcucGxhbkVsKXsKICAgICAgICAgICAgY29uc3QgY3VyID0gb3ZlcmxhcFNjb3JlKGRyYWdSZWN0LCBkcmFnLnBsYW5FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7CiAgICAgICAgICAgIGlmIChjdXIgPCBQTEFOX0RST1ApewogICAgICAgICAgICAgIGRyYWcucGxhbkVsID0gbnVsbDsKICAgICAgICAgICAgICBkcmFnLnBsYW5TZXRBdCA9IDA7CiAgICAgICAgICAgICAgZHJhZy5wbGFuU2NvcmUgPSAwOwogICAgICAgICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBTYW1lIHBsYW4gdGFyZ2V0OiBqdXN0IHJlZnJlc2ggc2NvcmUuCiAgICAgICAgaWYgKGRyYWcucGxhbkVsID09PSBlbCl7CiAgICAgICAgICBkcmFnLnBsYW5TY29yZSA9IHNjb3JlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gVHJhY2sgYSBzdGFibGUgY2FuZGlkYXRlIGJlZm9yZSBzd2l0Y2hpbmcgcGxhbi4KICAgICAgICBpZiAoZHJhZy5wbGFuQ2FuZEVsICE9PSBlbCl7CiAgICAgICAgICBkcmFnLnBsYW5DYW5kRWwgPSBlbDsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTdGFydCA9IG5vdzsKICAgICAgICAgIGRyYWcucGxhbkNhbmRTY29yZSA9IHNjb3JlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdyAtIChkcmFnLnBsYW5DYW5kU3RhcnQgfHwgbm93KSA8IFBMQU5fU1RBQkxFX01TKSByZXR1cm47CgogICAgICAgIGNvbnN0IGN1ciA9IGRyYWcucGxhbkVsID8gb3ZlcmxhcFNjb3JlKGRyYWdSZWN0LCBkcmFnLnBsYW5FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkgOiAwOwogICAgICAgIGlmICghZHJhZy5wbGFuRWwgfHwgc2NvcmUgPiBjdXIgKyBQTEFOX1NXSVRDSF9IWVNUKXsKICAgICAgICAgIGRyYWcucGxhbkVsID0gZWw7CiAgICAgICAgICBkcmFnLnBsYW5TZXRBdCA9IG5vdzsKICAgICAgICAgIGRyYWcucGxhblNjb3JlID0gc2NvcmU7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG1heWJlTW92ZUhvbGUocHJlZEN4LCBwcmVkQ3ksIHByZWRSZWN0LCBjdXJDeCwgY3VyQ3ksIGN1clJlY3QpewogICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwoKICAgICAgICAvLyBDYW5kaWRhdGUgc2VsZWN0aW9uIHVzZXMgdGhlICpwcmVkaWN0ZWQqIHJlY3QgKGhlbHBzICJwbGFuIGFoZWFkIikKICAgICAgICBjb25zdCBjYW5kID0gY29tcHV0ZUNhbmRpZGF0ZShwcmVkQ3gsIHByZWRDeSwgcHJlZFJlY3QpOwoKICAgICAgICAvLyBVcGRhdGUgcGxhbm5lZCB0YXJnZXQgKHVubGVzcyB3ZSdyZSBpbiBhIHNob3J0IHBvc3QtbW92ZSBsb2NrKQogICAgICAgIGlmIChub3cgPj0gKGRyYWcubG9ja1VudGlsID8/IDApKXsKICAgICAgICAgIHVwZGF0ZVBsYW5Gcm9tQ2FuZGlkYXRlKGNhbmQsIHByZWRSZWN0LCBub3cpOwogICAgICAgIH0KCiAgICAgICAgLy8gRm9yIGNvbW1pdHRpbmcgdGhlIG1vdmUsIHVzZSB0aGUgKmN1cnJlbnQgdmlzdWFsKiByZWN0LgogICAgICAgIC8vIFBpY2sgdGhlIGVsZW1lbnQgd2l0aCB0aGUgc3Ryb25nZXN0IENVUlJFTlQgb3ZlcmxhcC4KICAgICAgICAvLyAoUGxhbm5pbmcgY2FuIGJlIHByZWRpY3RpdmU7IGNvbW1pdHRpbmcgc2hvdWxkIGZvbGxvdyB3aGF0IHRoZSB1c2VyIGFjdHVhbGx5IHNlZXMuKQogICAgICAgIGNvbnN0IHsgb3JkZXI6IGNvbW1pdE9yZGVyIH0gPSBjb21wdXRlUm93TWFqb3JPcmRlcigpOwogICAgICAgIGxldCBjb21taXRUYXJnZXQgPSBudWxsOwogICAgICAgIGxldCBiZXN0T3YgPSAwOwoKICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIGNvbW1pdE9yZGVyKXsKICAgICAgICAgIGNvbnN0IG92ID0gb3ZlcmxhcFNjb3JlKGN1clJlY3QsIGl0LnJlY3QpOwogICAgICAgICAgaWYgKG92ID4gYmVzdE92KXsKICAgICAgICAgICAgYmVzdE92ID0gb3Y7CiAgICAgICAgICAgIGNvbW1pdFRhcmdldCA9IGl0LmVsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gS2VlcCB0aGUgcHJldmlvdXMgY29tbWl0IHRhcmdldCB1bmxlc3MgdGhlIG5ldyBvbmUgaXMgY2xlYXJseSBiZXR0ZXIgKGFudGktZmxpcCkuCiAgICAgICAgaWYgKGRyYWcuY29tbWl0VGFyZ2V0RWwgJiYgY29tbWl0VGFyZ2V0ICYmIGRyYWcuY29tbWl0VGFyZ2V0RWwgIT09IGNvbW1pdFRhcmdldCl7CiAgICAgICAgICBjb25zdCBwcmV2ID0gY29tbWl0T3JkZXIuZmluZChpdCA9PiBpdC5lbCA9PT0gZHJhZy5jb21taXRUYXJnZXRFbCk7CiAgICAgICAgICBpZiAocHJldil7CiAgICAgICAgICAgIGNvbnN0IHByZXZPdiA9IG92ZXJsYXBTY29yZShjdXJSZWN0LCBwcmV2LnJlY3QpOwogICAgICAgICAgICBpZiAocHJldk92ID49IGJlc3RPdiAtIE9WRVJMQVBfSFlTVCl7CiAgICAgICAgICAgICAgY29tbWl0VGFyZ2V0ID0gZHJhZy5jb21taXRUYXJnZXRFbDsKICAgICAgICAgICAgICBiZXN0T3YgPSBwcmV2T3Y7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghY29tbWl0VGFyZ2V0KSByZXR1cm47CgoKICAgICAgICAvLyBTdGFibGUgY29tbWl0IHRpbWVyIGlzIHBlci10YXJnZXQKICAgICAgICBpZiAoZHJhZy5jb21taXRUYXJnZXRFbCAhPT0gY29tbWl0VGFyZ2V0KXsKICAgICAgICAgIGRyYWcuY29tbWl0VGFyZ2V0RWwgPSBjb21taXRUYXJnZXQ7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICB9CgogICAgICAgIC8vIE9ubHkgY29tbWl0IGEgbW92ZSB3aGVuIG92ZXJsYXAgaXMgc3Ryb25nICg+PSA4MCUpIEFORCBzdGFibGUgZm9yIGEgc2hvcnQgdGltZS4KICAgICAgICBpZiAoYmVzdE92ID49IENPTU1JVF9UUklHR0VSKXsKICAgICAgICAgIGlmICghZHJhZy5jb21taXRTaW5jZSkgZHJhZy5jb21taXRTaW5jZSA9IG5vdzsKICAgICAgICAgIGlmIChub3cgLSBkcmFnLmNvbW1pdFNpbmNlIDwgQ09NTUlUX1NUQUJMRV9NUykgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkcmFnLmNvbW1pdFNpbmNlID0gMDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vICJUYWtlIHRoZSB0YXJnZXQncyBzbG90IjoKICAgICAgICAvLyAtIGlmIHRhcmdldCBpcyBBRlRFUiB0aGUgaG9sZSA9PiBtb3ZlIGhvbGUgQUZURVIgdGFyZ2V0IChkcmFnZ2VkIGNhcmQgbGFuZHMgaW50byB0YXJnZXQncyBpbmRleCkKICAgICAgICAvLyAtIGlmIHRhcmdldCBpcyBCRUZPUkUgdGhlIGhvbGUgPT4gbW92ZSBob2xlIEJFRk9SRSB0YXJnZXQKICAgICAgICBjb25zdCBob2xlUG9zID0gZHJhZy5wbGFjZWhvbGRlcjsKICAgICAgICBjb25zdCB0YXJnZXRBZnRlckhvbGUgPSAhIShob2xlUG9zLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGNvbW1pdFRhcmdldCkgJiBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORyk7CiAgICAgICAgY29uc3QgY29tbWl0UmVmID0gdGFyZ2V0QWZ0ZXJIb2xlID8gbmV4dENhcmRBZnRlcihjb21taXRUYXJnZXQpIDogY29tbWl0VGFyZ2V0CgoKICAgICAgICBjb25zdCBjdXJyZW50UmVmID0gbmV4dENhcmRBZnRlcihkcmFnLnBsYWNlaG9sZGVyKTsKICAgICAgICBpZiAoY29tbWl0UmVmID09PSBjdXJyZW50UmVmKSByZXR1cm47CgogICAgICAgIC8vIEV4dHJhIGFudGktY2hhdHRlciBndWFyZHMgKHVzZSBjdXJyZW50IGNlbnRlcikKICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChjdXJDeCAtIChkcmFnLmxhc3RNb3ZlQ3ggPz8gY3VyQ3gpLCBjdXJDeSAtIChkcmFnLmxhc3RNb3ZlQ3kgPz8gY3VyQ3kpKTsKICAgICAgICBpZiAobm93IC0gZHJhZy5sYXN0TW92ZUF0IDwgTU9WRV9DT09MRE9XTl9NUykgcmV0dXJuOwogICAgICAgIGlmIChkaXN0IDwgTU9WRV9IWVNUX1BYKSByZXR1cm47CgogICAgICAgIGZsaXBBbmltYXRlQWZ0ZXJET01DaGFuZ2UoKCk9PnsKICAgICAgICAgIGdyaWQuaW5zZXJ0QmVmb3JlKGRyYWcucGxhY2Vob2xkZXIsIGNvbW1pdFJlZik7CiAgICAgICAgfSk7CgogICAgICAgIGRyYWcubGFzdE1vdmVBdCA9IG5vdzsKICAgICAgICBkcmFnLmxhc3RNb3ZlQ3ggPSBjdXJDeDsKICAgICAgICBkcmFnLmxhc3RNb3ZlQ3kgPSBjdXJDeTsKCiAgICAgICAgLy8gYnJpZWYgbG9jayBwcmV2ZW50cyBpbW1lZGlhdGUgInVuZG8iIHdoZW4gbGF5b3V0IHNoaWZ0cwogICAgICAgIGRyYWcubG9ja1VudGlsID0gbm93ICsgTE9DS19BRlRFUl9NT1ZFX01TOwogICAgICAgIGRyYWcuY29tbWl0U2luY2UgPSAwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKGUpewogICAgICAgIGlmICghZHJhZyB8fCBlLnBvaW50ZXJJZCAhPT0gZHJhZy5wb2ludGVySWQpIHJldHVybjsKICAgICAgICBkcmFnLmxhc3RDbGllbnRYID0gZS5jbGllbnRYOwogICAgICAgIGRyYWcubGFzdENsaWVudFkgPSBlLmNsaWVudFk7CiAgICAgICAgaWYgKCFyYWZJZCkgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGJlZ2luRHJhZyhoYW5kbGVFbCwgZSl7CiAgICAgICAgY29uc3QgY2FyZCA9IGhhbmRsZUVsLmNsb3Nlc3QoJy5raXQtY2FyZCcpOwogICAgICAgIGlmICghY2FyZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGtpdElkID0gY2FyZC5kYXRhc2V0LmtpdElkOwogICAgICAgIGlmICgha2l0SWQpIHJldHVybjsKCiAgICAgICAgLy8gSWdub3JlIGlmIGRyYWcgc3RhcnRlZCBvbiBpbnRlcmFjdGl2ZSBhY3Rpb25zCiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5raXQtYWN0aW9ucycpKSByZXR1cm47CgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgICBjb25zdCByZWN0ID0gY2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBjb25zdCBzdGFydEN4ID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aC8yOwogICAgICAgIGNvbnN0IHN0YXJ0Q3kgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0LzI7CgogICAgICAgIGRyYWcgPSB7CiAgICAgICAgICBwb2ludGVySWQ6IGUucG9pbnRlcklkLAogICAgICAgICAgY2FyZCwKICAgICAgICAgIGtpdElkLAogICAgICAgICAgZ3JhYkR4OiBlLmNsaWVudFggLSByZWN0LmxlZnQsCiAgICAgICAgICBncmFiRHk6IGUuY2xpZW50WSAtIHJlY3QudG9wLAogICAgICAgICAgdzogcmVjdC53aWR0aCwKICAgICAgICAgIGg6IHJlY3QuaGVpZ2h0LAogICAgICAgICAgbGFzdENsaWVudFg6IGUuY2xpZW50WCwKICAgICAgICAgIGxhc3RDbGllbnRZOiBlLmNsaWVudFksCiAgICAgICAgICBhY3RpdmU6IHRydWUsCiAgICAgICAgICBwbGFjZWhvbGRlcjogbWFrZVBsYWNlaG9sZGVyKGNhcmQpLAogICAgICAgICAgbGFzdE1vdmVBdDogMCwKICAgICAgICAgIGxhc3RNb3ZlQ3g6IHN0YXJ0Q3gsCiAgICAgICAgICBsYXN0TW92ZUN5OiBzdGFydEN5LAogICAgICAgICAgLy8gcGxhbm5pbmcgLyBjb21taXQgc3RhdGUgKGFudGktaml0dGVyKQogICAgICAgICAgcGxhbkVsOiBudWxsLAogICAgICAgICAgcGxhblNldEF0OiAwLAogICAgICAgICAgcGxhblNjb3JlOiAwLAogICAgICAgICAgcGxhbkNhbmRFbDogbnVsbCwKICAgICAgICAgIHBsYW5DYW5kU3RhcnQ6IDAsCiAgICAgICAgICBwbGFuQ2FuZFNjb3JlOiAwLAogICAgICAgICAgY29tbWl0U2luY2U6IDAsCiAgICAgICAgICBsb2NrVW50aWw6IDAsCgogICAgICAgICAgY29tbWl0VGFyZ2V0RWw6IG51bGwsCgogICAgICAgICAgLy8gc21vb3RoZWQgcG9zaXRpb24gZm9yIG92ZXJsYXkgY2FyZAogICAgICAgICAgX3Ntb290aFRvcDogcmVjdC50b3AsCiAgICAgICAgICBfc21vb3RoTGVmdDogcmVjdC5sZWZ0LAoKICAgICAgICAgIF9wcmV2VXNlclNlbGVjdDogZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0CiAgICAgICAgfTsKCiAgICAgICAgLy8gSW5zZXJ0IHBsYWNlaG9sZGVyIHdoZXJlIHRoZSBjYXJkIHdhcwogICAgICAgIGdyaWQuaW5zZXJ0QmVmb3JlKGRyYWcucGxhY2Vob2xkZXIsIGNhcmQpOwoKICAgICAgICAvLyBMaWZ0IGNhcmQgaW50byBvdmVybGF5CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYXJkKTsKICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2lzLWRyYWdnaW5nJyk7CiAgICAgICAgY2FyZC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICAgICAgY2FyZC5zdHlsZS50b3AgPSBweChyZWN0LnRvcCk7CiAgICAgICAgY2FyZC5zdHlsZS5sZWZ0ID0gcHgocmVjdC5sZWZ0KTsKICAgICAgICBjYXJkLnN0eWxlLndpZHRoID0gcHgocmVjdC53aWR0aCk7CiAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSBweChyZWN0LmhlaWdodCk7CiAgICAgICAgY2FyZC5zdHlsZS56SW5kZXggPSAnOTk5OSc7CiAgICAgICAgY2FyZC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgIGNhcmQuc3R5bGUubWFyZ2luID0gJzAnOwogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJzsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7CgogICAgICAgIC8vIE1vdmUgbG9vcAogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSwgdHJ1ZSk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgZW5kRHJhZywgdHJ1ZSk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIGVuZERyYWcsIHRydWUpOwoKICAgICAgICBpZiAoIXJhZklkKSByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY2xlYW51cERyYWcoKXsKICAgICAgICBpZiAoIWRyYWcpIHJldHVybjsKCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlLCB0cnVlKTsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBlbmREcmFnLCB0cnVlKTsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyY2FuY2VsJywgZW5kRHJhZywgdHJ1ZSk7CgogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0ID0gZHJhZy5fcHJldlVzZXJTZWxlY3QgPz8gJyc7CgogICAgICAgIGRyYWcuY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnZ2luZycpOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5wb3NpdGlvbiA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS50b3AgPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUubGVmdCA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS53aWR0aCA9ICcnOwogICAgICAgIGRyYWcuY2FyZC5zdHlsZS5oZWlnaHQgPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUuekluZGV4ID0gJyc7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJzsKICAgICAgICBkcmFnLmNhcmQuc3R5bGUubWFyZ2luID0gJyc7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGVuZERyYWcoZSl7CiAgICAgICAgaWYgKCFkcmFnIHx8IChlICYmIGUucG9pbnRlcklkICE9PSBkcmFnLnBvaW50ZXJJZCkpIHJldHVybjsKCiAgICAgICAgZHJhZy5hY3RpdmUgPSBmYWxzZTsKCiAgICAgICAgLy8gUHV0IGNhcmQgYmFjayBpbnRvIGZsb3cgYXQgcGxhY2Vob2xkZXIgcG9zaXRpb24KICAgICAgICBpZiAoZHJhZy5wbGFjZWhvbGRlciAmJiBkcmFnLnBsYWNlaG9sZGVyLnBhcmVudE5vZGUpewogICAgICAgICAgZ3JpZC5pbnNlcnRCZWZvcmUoZHJhZy5jYXJkLCBkcmFnLnBsYWNlaG9sZGVyKTsKICAgICAgICAgIGRyYWcucGxhY2Vob2xkZXIucmVtb3ZlKCk7CiAgICAgICAgfQoKICAgICAgICBjbGVhbnVwRHJhZygpOwoKICAgICAgICAvLyBTeW5jIG1vZGVsIG9yZGVyCiAgICAgICAgdHJ5ewogICAgICAgICAgY29uc3QgaWRzID0gWy4uLmdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmtpdC1jYXJkJyldLm1hcChlbCA9PiBlbC5kYXRhc2V0LmtpdElkKTsKICAgICAgICAgIGNvbnN0IGJ5SWQgPSBuZXcgTWFwKGtpdHMubWFwKGsgPT4gW1N0cmluZyhrLmlkKSwga10pKTsKICAgICAgICAgIGtpdHMgPSBpZHMubWFwKGlkID0+IGJ5SWQuZ2V0KFN0cmluZyhpZCkpKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICBzYXZlU3RhdGUoKTsKICAgICAgICB9Y2F0Y2goXyl7fQoKICAgICAgICBkcmFnID0gbnVsbDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdGljaygpewogICAgICAgIHJhZklkID0gMDsKICAgICAgICBpZiAoIWRyYWcgfHwgIWRyYWcuYWN0aXZlKSByZXR1cm47CgogICAgICAgIHZpZXdwb3J0QXV0b1Njcm9sbChkcmFnLmxhc3RDbGllbnRYLCBkcmFnLmxhc3RDbGllbnRZKTsKCiAgICAgICAgY29uc3QgeyB0b3AsIGxlZnQgfSA9IGdldERyYWdUb3BMZWZ0KCk7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLnRvcCA9IHB4KHRvcCk7CiAgICAgICAgZHJhZy5jYXJkLnN0eWxlLmxlZnQgPSBweChsZWZ0KTsKCiAgICAgICAgLy8gZGVjaXNpb24gdXNlcyB0aGUgQ0FSRCBjZW50ZXIsIG5vdCB0aGUgY3Vyc29yCiAgICAgICAgY29uc3QgZHJhZ0N4ID0gbGVmdCArIGRyYWcudy8yOwogICAgICAgIGNvbnN0IGRyYWdDeSA9IHRvcCArIGRyYWcuaC8yOwoKICAgICAgICAvLyB2ZWxvY2l0eS1iYXNlZCBsb29rLWFoZWFkIChzdGlsbCBkZXJpdmVkIGZyb20gdGhlIGNhcmQncyBtb3Rpb24pCiAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgY29uc3QgZHQgPSBNYXRoLm1heCg4LCBub3cgLSAoZHJhZy5fcHJldlQgPz8gbm93KSk7CiAgICAgICAgY29uc3QgdnggPSAoZHJhZ0N4IC0gKGRyYWcuX3ByZXZDeCA/PyBkcmFnQ3gpKSAvIGR0OyAvLyBweCBwZXIgbXMKICAgICAgICBjb25zdCB2eSA9IChkcmFnQ3kgLSAoZHJhZy5fcHJldkN5ID8/IGRyYWdDeSkpIC8gZHQ7CgogICAgICAgIC8vIGNsYW1wIHRvIGF2b2lkIHdpbGQganVtcHMgb24gZmlyc3QgZnJhbWVzCiAgICAgICAgY29uc3QgY3Z4ID0gY2xhbXAodngsIC0xLjIsIDEuMik7CiAgICAgICAgY29uc3QgY3Z5ID0gY2xhbXAodnksIC0xLjIsIDEuMik7CgogICAgICAgIGNvbnN0IHByZWRDeCA9IGRyYWdDeCArIGN2eCAqIFBSRURJQ1RfTVM7CiAgICAgICAgY29uc3QgcHJlZEN5ID0gZHJhZ0N5ICsgY3Z5ICogUFJFRElDVF9NUzsKCiAgICAgICAgZHJhZy5fcHJldlQgPSBub3c7CiAgICAgICAgZHJhZy5fcHJldkN4ID0gZHJhZ0N4OwogICAgICAgIGRyYWcuX3ByZXZDeSA9IGRyYWdDeTsKCiAgICAgICAgY29uc3QgZGVjaXNpb25SZWN0ID0gcmVjdEZyb21DZW50ZXIocHJlZEN4LCBwcmVkQ3ksIGRyYWcudywgZHJhZy5oKTsKCiAgICAgICAgY29uc3QgY3VycmVudFJlY3QgPSByZWN0RnJvbUNlbnRlcihkcmFnQ3gsIGRyYWdDeSwgZHJhZy53LCBkcmFnLmgpOwoKICAgICAgICBtYXliZU1vdmVIb2xlKHByZWRDeCwgcHJlZEN5LCBkZWNpc2lvblJlY3QsIGRyYWdDeCwgZHJhZ0N5LCBjdXJyZW50UmVjdCk7CgogICAgICAgIHJhZklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spOwogICAgICB9CgogICAgICAvLyBEZWxlZ2F0ZSBwb2ludGVyZG93biB0byBoYW5kbGVzCiAgICAgIGdyaWQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAoZSk9PnsKICAgICAgICBjb25zdCBoYW5kbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcua2l0LWRyYWctaGFuZGxlJyk7CiAgICAgICAgaWYgKCFoYW5kbGUpIHJldHVybjsKICAgICAgICBiZWdpbkRyYWcoaGFuZGxlLCBlKTsKICAgICAgfSwgdHJ1ZSk7CiAgICB9KSgpOzsKCgogICAgLyogPT09PT0gSW5pdGlhbCByZW5kZXIgPT09PT0gKi8KICAgIHJlbmRlcigpOwogIDwvc2NyaXB0PgogIDxzY3JpcHQ+CiAgICAgICAgCiAgICAgICAgLy8g0JDQstGC0L4t0YjQuNGA0LjQvdCwINC00LvRjyDQv9C+0LvRjyAi0KLQuNC/INGB0YHRi9C70LrQuCIgKNGA0LDRgdGC0Y/Qs9C40LLQsNC10YLRgdGPINC/0L4g0LLQstC10LTRkdC90L3QvtC80YMg0YLQtdC60YHRgtGDLAogICAgICAgIC8vINC90L4g0LjRgdGF0L7QtNC90L7QtSDQv9GD0YHRgtC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1INC+0YHRgtCw0ZHRgtGB0Y8g0YTQuNC60YHQuNGA0L7QstCw0L3QvdGL0LwpCiAgICAgICAgY29uc3QgX19tZWFzdXJlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgY29uc3QgX19tZWFzdXJlQ3R4ID0gX19tZWFzdXJlQ2FudmFzLmdldENvbnRleHQoJzJkJyk7CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmtUeXBlV2lkdGgodHlwZUlucHV0KSB7CiAgICAgICAgICAgIGlmICghdHlwZUlucHV0KSByZXR1cm47CgogICAgICAgICAgICBjb25zdCB2YWwgPSAodHlwZUlucHV0LnZhbHVlIHx8ICcnKS50cmltKCk7CgogICAgICAgICAgICAvLyDQuNGB0YXQvtC00L3QvtC1INC/0YPRgdGC0L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUg4oCUINC60LDQuiDRgdC10LnRh9Cw0YEKICAgICAgICAgICAgaWYgKCF2YWwpIHsKICAgICAgICAgICAgICAgIHR5cGVJbnB1dC5zdHlsZS53aWR0aCA9ICcxMjBweCc7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vINCY0LfQvNC10YDRj9C10Lwg0YLQtdC60YHRgiDRgSDRgtC10Lwg0LbQtSDRiNGA0LjRhNGC0L7QvAogICAgICAgICAgICBjb25zdCBjcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHR5cGVJbnB1dCk7CiAgICAgICAgICAgIF9fbWVhc3VyZUN0eC5mb250ID0gYCR7Y3MuZm9udFdlaWdodH0gJHtjcy5mb250U2l6ZX0gJHtjcy5mb250RmFtaWx5fWA7CgogICAgICAgICAgICBjb25zdCB0ZXh0VyA9IF9fbWVhc3VyZUN0eC5tZWFzdXJlVGV4dCh2YWwpLndpZHRoOwogICAgICAgICAgICBjb25zdCBwYWRkaW5nTGVmdCA9IHBhcnNlRmxvYXQoY3MucGFkZGluZ0xlZnQpIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IHBhcnNlRmxvYXQoY3MucGFkZGluZ1JpZ2h0KSB8fCAwOwogICAgICAgICAgICBjb25zdCBib3JkZXJMZWZ0ID0gcGFyc2VGbG9hdChjcy5ib3JkZXJMZWZ0V2lkdGgpIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IGJvcmRlclJpZ2h0ID0gcGFyc2VGbG9hdChjcy5ib3JkZXJSaWdodFdpZHRoKSB8fCAwOwoKICAgICAgICAgICAgLy8gKyDQvdC10LHQvtC70YzRiNCw0Y8g0YHRgtGA0LDRhdC+0LLQutCwCiAgICAgICAgICAgIGxldCBkZXNpcmVkID0gTWF0aC5jZWlsKHRleHRXICsgcGFkZGluZ0xlZnQgKyBwYWRkaW5nUmlnaHQgKyBib3JkZXJMZWZ0ICsgYm9yZGVyUmlnaHQgKyAxMik7CgogICAgICAgICAgICAvLyDQntCz0YDQsNC90LjRh9C40LLQsNC10Lwg0L/QviDQtNC+0YHRgtGD0L/QvdC+0LzRgyDQvNC10YHRgtGDOiDRgtC40L8g0YLRj9C90LXRgtGB0Y8sINGB0LTQstC40LPQsNGPIFVSTCDQstC/0YDQsNCy0L4sCiAgICAgICAgICAgIC8vINC90L4g0L7RgdGC0LDQstC70Y/QtdC8INC80LjQvdC40LzQsNC70YzQvdC+0LUg0LzQtdGB0YLQviDQv9C+0LQgVVJMINC4INC60L3QvtC/0LrQuAogICAgICAgICAgICBjb25zdCBpdGVtID0gdHlwZUlucHV0LmNsb3Nlc3QoJy5saW5rLWl0ZW0nKTsKICAgICAgICAgICAgY29uc3QgZWRpdFJvdyA9IHR5cGVJbnB1dC5jbG9zZXN0KCcubGluay1lZGl0Jyk7CiAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBpdGVtID8gaXRlbS5xdWVyeVNlbGVjdG9yKCcubGluay1hY3Rpb25zJykgOiBudWxsOwoKICAgICAgICAgICAgY29uc3QgdXJsTWluID0gMTQwOyAvLyDQvNC40L3QuNC80LDQu9GM0L3QviDQv9C+0LQgVVJMCiAgICAgICAgICAgIGxldCBhdmFpbGFibGUgPSBudWxsOwoKICAgICAgICAgICAgaWYgKGl0ZW0gJiYgZWRpdFJvdyAmJiBhY3Rpb25zKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVyA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7CiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zVyA9IGFjdGlvbnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7CgogICAgICAgICAgICAgICAgLy8gZ2FwINC80LXQttC00YMgLmxpbmstZWRpdCDQuCAubGluay1hY3Rpb25zIOKAlCDQvtC9INC30LDQtNCw0L0g0YMgLmxpbmstaXRlbQogICAgICAgICAgICAgICAgY29uc3QgaXRlbUNTID0gZ2V0Q29tcHV0ZWRTdHlsZShpdGVtKTsKICAgICAgICAgICAgICAgIGNvbnN0IHBhZEwgPSBwYXJzZUZsb2F0KGl0ZW1DUy5wYWRkaW5nTGVmdCkgfHwgMDsKICAgICAgICAgICAgICAgIGNvbnN0IHBhZFIgPSBwYXJzZUZsb2F0KGl0ZW1DUy5wYWRkaW5nUmlnaHQpIHx8IDA7CiAgICAgICAgICAgICAgICBjb25zdCBvdXRlckdhcCA9IHBhcnNlRmxvYXQoaXRlbUNTLmdhcCkgfHwgMDsKCiAgICAgICAgICAgICAgICBhdmFpbGFibGUgPSBpdGVtVyAtIHBhZEwgLSBwYWRSIC0gYWN0aW9uc1cgLSBvdXRlckdhcDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGF2YWlsYWJsZSkgewogICAgICAgICAgICAgICAgLy8gZ2FwINCy0L3Rg9GC0YDQuCBlZGl0Um93INC80LXQttC00YMg0L/QvtC70Y/QvNC4CiAgICAgICAgICAgICAgICBjb25zdCBnYXAgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZWRpdFJvdykuZ2FwKSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3QgbWF4VHlwZSA9IE1hdGgubWF4KDEyMCwgYXZhaWxhYmxlIC0gdXJsTWluIC0gZ2FwKTsKICAgICAgICAgICAgICAgIGRlc2lyZWQgPSBNYXRoLm1pbihkZXNpcmVkLCBtYXhUeXBlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZGVzaXJlZCA9IE1hdGgubWF4KGRlc2lyZWQsIDEyMCk7CiAgICAgICAgICAgIHR5cGVJbnB1dC5zdHlsZS53aWR0aCA9IGRlc2lyZWQgKyAncHgnOwogICAgICAgIH0KCiAgICAgICAgLy8g0LDQstGC0L4t0YDQvtGB0YIgdGV4dGFyZWEg0L/QviDQstGL0YHQvtGC0LUKICAgICAgICBmdW5jdGlvbiBhdXRvc2l6ZVRleHRhcmVhKGVsKSB7CiAgICAgICAgICAgIGlmICghZWwpIHJldHVybjsKICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAoZWwuc2Nyb2xsSGVpZ2h0KSArICdweCc7CiAgICAgICAgfQoKICAgICAgICAvLyDQn9C+0LTRgdGC0YDQsNC40LLQsNC10Lwg0YjQuNGA0LjQvdGDINC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0YDQsNC30LzQtdGA0LAg0L7QutC90LAKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGluay1pdGVtLmVkaXRpbmcgLmxpbmstdHlwZS1pbnB1dCcpLmZvckVhY2goaW5wID0+IHVwZGF0ZUxpbmtUeXBlV2lkdGgoaW5wKSk7CiAgICAgICAgfSk7CgoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVFbXB0eVN0YXRlcygpIHsKICAgICAgICAgICAgY29uc3QgY29tbWVudHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzTGlzdCcpOwogICAgICAgICAgICBjb25zdCBsaW5rc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua3NMaXN0Jyk7CiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50c1NlY3Rpb24nKTsKICAgICAgICAgICAgY29uc3QgbGlua3NTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtzU2VjdGlvbicpOwoKICAgICAgICAgICAgaWYgKGNvbW1lbnRzU2VjdGlvbiAmJiBjb21tZW50c0xpc3QpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGhhc0NvbW1lbnRzID0gY29tbWVudHNMaXN0LnF1ZXJ5U2VsZWN0b3IoJy5jb21tZW50LWJsb2NrJykgIT09IG51bGw7CiAgICAgICAgICAgICAgICBjb21tZW50c1NlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtZW1wdHknLCAhaGFzQ29tbWVudHMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsaW5rc1NlY3Rpb24gJiYgbGlua3NMaXN0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBoYXNMaW5rcyA9IGxpbmtzTGlzdC5xdWVyeVNlbGVjdG9yKCcubGluay1pdGVtJykgIT09IG51bGw7CiAgICAgICAgICAgICAgICBsaW5rc1NlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtZW1wdHknLCAhaGFzTGlua3MpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINGB0LLQvtGA0LDRh9C40LLQsNC90LjRjy/RgNCw0LfQstC+0YDQsNGH0LjQstCw0L3QuNGPINCx0LvQvtC60L7QsgogICAgICAgIGZ1bmN0aW9uIHNldHVwQ29sbGFwc2UoaGVhZGVySWQsIGNvbnRlbnRJZCwgaWNvbklkLCBkZWZhdWx0RXhwYW5kZWQgPSBmYWxzZSkgewogICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoZWFkZXJJZCk7CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250ZW50SWQpOwogICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWNvbklkKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghaGVhZGVyIHx8ICFjb250ZW50IHx8ICFpY29uKSByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoZGVmYXVsdEV4cGFuZGVkKSB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZWQnKTsKICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdleHBhbmRlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vINCj0L/RgNCw0LLQu9C10L3QuNC1INC60L7QvNC80LXQvdGC0LDRgNC40Y/QvNC4INC4INGB0YHRi9C70LrQsNC80LgKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGB0LLQvtGA0LDRh9C40LLQsNC90LjRjwogICAgICAgICAgICBzZXR1cENvbGxhcHNlKCdtYWluU3BlY3NIZWFkZXInLCAnbWFpblNwZWNzQ29udGVudCcsICdtYWluU3BlY3NJY29uJywgZmFsc2UpOwogICAgICAgICAgICBzZXR1cENvbGxhcHNlKCdkb2NzSGVhZGVyJywgJ2RvY3NDb250ZW50JywgJ2RvY3NJY29uJywgZmFsc2UpOwogICAgICAgICAgICBzZXR1cENvbGxhcHNlKCdmaW5hbmNlSGVhZGVyJywgJ2ZpbmFuY2VDb250ZW50JywgJ2ZpbmFuY2VJY29uJywgZmFsc2UpOwogICAgICAgICAgICBzZXR1cENvbGxhcHNlKCdhZGRpdGlvbmFsSGVhZGVyJywgJ2FkZGl0aW9uYWxDb250ZW50JywgJ2FkZGl0aW9uYWxJY29uJywgZmFsc2UpOwoKICAgICAgICAgICAgLy8g0JrQvdC+0L/QutCwINC90LDQt9Cw0LQKICAgICAgICAgICAgY29uc3QgYmFja0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrQnV0dG9uJyk7CiAgICAgICAgICAgIGlmIChiYWNrQnRuKSB7CiAgICAgICAgICAgICAgICBiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ9CS0L7Qt9Cy0YDQsNGCINC6INGB0L/QuNGB0LrRgyDQsNCy0YLQvtC80L7QsdC40LvQtdC5Jyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKLy8g0JPQu9C+0LHQsNC70YzQvdGL0Lkg0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQvtCyINC00LvRjyDQstGL0YXQvtC00LAg0LjQtyDRgNC10LbQuNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC60LvQuNC6INC90LUg0L/QviDRgNC10LTQsNC60YLQuNGA0YPQtdC80L7QvNGDINCx0LvQvtC60YMg0Lgg0L3QtSDQv9C+INC10LPQviDQutC90L7Qv9C60LDQvAogICAgICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuY29tbWVudC1ibG9jay5lZGl0aW5nJykgJiYgCiAgICAgICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsb3Nlc3QoJy5saW5rLWl0ZW0uZWRpdGluZycpICYmCiAgICAgICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsb3Nlc3QoJy5lZGl0LWJ1dHRvbicpICYmCiAgICAgICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtYnV0dG9uJykpIHsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyDQktGL0YXQvtC00LjQvCDQuNC3INGA0LXQttC40LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCy0YHQtdGFINCx0LvQvtC60L7QsgogICAgICAgICAgICAgICAgICAgIGV4aXRBbGxFZGl0TW9kZXMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0LTQu9GPINGB0YPRidC10YHRgtCy0YPRjtGJ0LjRhSDRjdC70LXQvNC10L3RgtC+0LIKICAgICAgICAgICAgaW5pdEV4aXN0aW5nSXRlbXMoKTsKICAgICAgICAgICAgLy8g0KHQvtGB0YLQvtGP0L3QuNGPINC/0YPRgdGC0YvRhSDRgdC/0LjRgdC60L7QsiAo0YHQutGA0YvQstCw0LXQvCDQv9GD0YHRgtGL0LUg0LrQvtC90YLQtdC50L3QtdGA0Ysg0Lgg0L3QtSDRg9C00LLQsNC40LLQsNC10Lwg0L7RgtGB0YLRg9C/0YspCiAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CgogICAgICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQvtC80LzQtdC90YLQsNGA0LjRjwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQ29tbWVudEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGFkZE5ld0NvbW1lbnQoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0YHRgdGL0LvQutC4CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRMaW5rQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgYWRkTmV3TGluaygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINC00LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC40YUg0Y3Qu9C10LzQtdC90YLQvtCyCiAgICAgICAgZnVuY3Rpb24gaW5pdEV4aXN0aW5nSXRlbXMoKSB7CiAgICAgICAgICAgIC8vINCa0L7QvNC80LXQvdGC0LDRgNC40LgKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbW1lbnQtYmxvY2s6bm90KC5lZGl0aW5nKScpLmZvckVhY2goYmxvY2sgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZWRpdEJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbicpOwogICAgICAgICAgICAgICAgaWYgKGVkaXRCdG4pIHsKICAgICAgICAgICAgICAgICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICBlbnRlckNvbW1lbnRFZGl0TW9kZShibG9jayk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0KHRgdGL0LvQutC4CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5rLWl0ZW06bm90KC5lZGl0aW5nKScpLmZvckVhY2goYmxvY2sgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZWRpdEJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbicpOwogICAgICAgICAgICAgICAgaWYgKGVkaXRCdG4pIHsKICAgICAgICAgICAgICAgICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICBlbnRlckxpbmtFZGl0TW9kZShibG9jayk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8g0JLRi9GF0L7QtCDQuNC3INCy0YHQtdGFINGA0LXQttC40LzQvtCyINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICBmdW5jdGlvbiBleGl0QWxsRWRpdE1vZGVzKCkgewogICAgICAgICAgICAvLyDQmtC+0LzQvNC10L3RgtCw0YDQuNC4CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21tZW50LWJsb2NrLmVkaXRpbmcnKS5mb3JFYWNoKGJsb2NrID0+IHsKICAgICAgICAgICAgICAgIGV4aXRDb21tZW50RWRpdE1vZGUoYmxvY2ssIHRydWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vINCh0YHRi9C70LrQuAogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGluay1pdGVtLmVkaXRpbmcnKS5mb3JFYWNoKGJsb2NrID0+IHsKICAgICAgICAgICAgICAgIGV4aXRMaW5rRWRpdE1vZGUoYmxvY2ssIHRydWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vINCg0LXQttC40Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQutC+0LzQvNC10L3RgtCw0YDQuNGPCiAgICAgICAgZnVuY3Rpb24gZW50ZXJDb21tZW50RWRpdE1vZGUoYmxvY2spIHsKICAgICAgICAgICAgLy8g0JLRi9GF0L7QtNC40Lwg0LjQtyDQtNGA0YPQs9C40YUg0YDQtdC20LjQvNC+0LIKICAgICAgICAgICAgZXhpdEFsbEVkaXRNb2RlcygpOwoKICAgICAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuY29tbWVudC10ZXh0Jyk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGV4dEVsZW1lbnQgPyAodGV4dEVsZW1lbnQudGV4dENvbnRlbnQgfHwgJycpIDogJyc7CiAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gYmxvY2suZGF0YXNldC5pc05ld0NvbW1lbnQgPT09ICcxJzsKCiAgICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDRgtC10LrRg9GJ0LjQuSDQutC+0L3RgtC10L3RggogICAgICAgICAgICBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVGV4dCA9IGN1cnJlbnRUZXh0OwoKICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgnZWRpdGluZycpOwogICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9ImNvbW1lbnQtaW5wdXQiIHBsYWNlaG9sZGVyPSLQktCy0LXQtNC40YLQtSDQutC+0LzQvNC10L3RgtCw0YDQuNC5IiByb3dzPSIxIj48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhbmdlciBkZWxldGUtYnV0dG9uIiB0aXRsZT0i0KPQtNCw0LvQuNGC0YwiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgYXJpYS1oaWRkZW49InRydWUiIGZvY3VzYWJsZT0iZmFsc2UiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTUgMjBhMiAyIDAgMCAwIDIgMmgxMGEyIDIgMCAwIDAgMi0yVjhoMlY2aC00VjRhMiAyIDAgMCAwLTItMkg5YTIgMiAwIDAgMC0yIDJ2MkgzdjJoMnpNOSA0aDZ2Mkg5ek04IDhoOXYxMkg3Vjh6Ii8+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNOSAxMGgydjhIOXptNCAwaDJ2OGgtMnoiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmNvbW1lbnQtaW5wdXQnKTsKCiAgICAgICAgICAgIC8vINC30LDQv9C+0LvQvdGP0LXQvCDQuCDRgNCw0YHRgtGP0LPQuNCy0LDQtdC8INC/0L4g0YLQtdC60YHRgtGDCiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gY3VycmVudFRleHQ7CiAgICAgICAgICAgIGF1dG9zaXplVGV4dGFyZWEodGV4dGFyZWEpOwogICAgICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IGF1dG9zaXplVGV4dGFyZWEodGV4dGFyZWEpKTsKCiAgICAgICAgICAgIC8vINC60YPRgNGB0L7RgCDQsiDQutC+0L3QtdGGINC4INCx0LXQtyDRgdC60YDQvtC70Lst0YHQvNC10YnQtdC90LjRjwogICAgICAgICAgICB0cnkgeyB0ZXh0YXJlYS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7IH0gY2F0Y2ggKGUpIHsgdGV4dGFyZWEuZm9jdXMoKTsgfQogICAgICAgICAgICBjb25zdCBlbmQgPSB0ZXh0YXJlYS52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKGVuZCwgZW5kKTsKICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjdXJyZW50VGV4dDsKICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTsKICAgICAgICAgICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UodGV4dGFyZWEudmFsdWUubGVuZ3RoLCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpOwoKICAgICAgICAgICAgLy8gRW50ZXIvRXNjYXBlINGD0L/RgNCw0LLQu9GP0Y7RgiDQt9Cw0LLQtdGA0YjQtdC90LjQtdC8INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgLy8gLSBFbnRlcjog0YHQvtGF0YDQsNC90LjRgtGMINC4INCy0YvQudGC0LgKICAgICAgICAgICAgLy8gLSBTaGlmdCtFbnRlcjog0L/QtdGA0LXQvdC+0YEg0YHRgtGA0L7QutC4CiAgICAgICAgICAgIC8vIC0gRXNjYXBlOiDQvtGC0LzQtdC90LAg0Lgg0LLRi9GF0L7QtAogICAgICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXYpIHsKICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBleGl0Q29tbWVudEVkaXRNb2RlKGJsb2NrLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0VudGVyJyAmJiAhZXYuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyAvLyDQvdC1INC00L7QsdCw0LLQu9GP0LXQvCDQv9C10YDQtdCy0L7QtCDRgdGC0YDQvtC60LgKICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBleGl0Q29tbWVudEVkaXRNb2RlKGJsb2NrLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGD0LTQsNC70LXQvdC40Y8KICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmRlbGV0ZS1idXR0b24nKTsKICAgICAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGlmICghd2luZG93LmNvbmZpcm0oJ9Cj0LTQsNC70LjRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40Lk/JykpIHJldHVybjsKICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgfSk7fQoKICAgICAgICAvLyDQktGL0YXQvtC0INC40Lcg0YDQtdC20LjQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LrQvtC80LzQtdC90YLQsNGA0LjRjwogICAgICAgIGZ1bmN0aW9uIGV4aXRDb21tZW50RWRpdE1vZGUoYmxvY2ssIHNhdmUgPSB0cnVlKSB7CiAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gYmxvY2sucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTsKICAgICAgICAgICAgY29uc3QgaXNOZXcgPSBibG9jay5kYXRhc2V0LmlzTmV3Q29tbWVudCA9PT0gJzEnOwoKICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYmxvY2suZGF0YXNldC5vcmlnaW5hbFRleHQgfHwgJyc7CgogICAgICAgICAgICBpZiAoc2F2ZSAmJiB0ZXh0YXJlYSkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRhcmVhLnZhbHVlLnRyaW0oKTsKCiAgICAgICAgICAgICAgICBpZiAobmV3VGV4dCkgewogICAgICAgICAgICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQuNC30LzQtdC90LXQvdC40Y8KICAgICAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1lbnQtdGV4dCI+JHtuZXdUZXh0fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g0J/Rg9GB0YLQvtC5INGC0LXQutGB0YIg0LfQsNC/0YDQtdGJ0ZHQvToKICAgICAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDQvdC+0LLQvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjzog0YPQtNCw0LvRj9C10Lwg0LHQu9C+0LoKICAgICAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC10LPQvjog0L7RgtC60LDRgtGL0LLQsNC10Lwg0LrQsNC6INCx0YvQu9C+CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tbWVudC10ZXh0Ij4ke29yaWdpbmFsVGV4dH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDQntGC0LzQtdC90LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjzoKICAgICAgICAgICAgICAgIC8vIC0g0L3QvtCy0YvQuSDQv9GD0YHRgtC+0Lkg0LHQu9C+0Log0L3QtSDRgdC+0YXRgNCw0L3Rj9C10LwKICAgICAgICAgICAgICAgIC8vIC0g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNC5INC+0YLQutCw0YLRi9Cy0LDQtdC8CiAgICAgICAgICAgICAgICBpZiAoaXNOZXcgJiYgIW9yaWdpbmFsVGV4dC50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICBibG9jay5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21tZW50LXRleHQiPiR7b3JpZ2luYWxUZXh0fTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXRpbmcnKTsKICAgICAgICAgICAgZGVsZXRlIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUZXh0OwogICAgICAgICAgICBkZWxldGUgYmxvY2suZGF0YXNldC5pc05ld0NvbW1lbnQ7CgogICAgICAgICAgICBjb25zdCBuZXdFZGl0QnRuID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uJyk7CiAgICAgICAgICAgIGlmIChuZXdFZGl0QnRuKSB7CiAgICAgICAgICAgICAgICBuZXdFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZW50ZXJDb21tZW50RWRpdE1vZGUoYmxvY2spOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vINCg0LXQttC40Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDRgdGB0YvQu9C60LgKICAgICAgICBmdW5jdGlvbiBlbnRlckxpbmtFZGl0TW9kZShibG9jaykgewogICAgICAgICAgICAvLyDQktGL0YXQvtC00LjQvCDQuNC3INC00YDRg9Cz0LjRhSDRgNC10LbQuNC80L7QsgogICAgICAgICAgICBleGl0QWxsRWRpdE1vZGVzKCk7CgogICAgICAgICAgICBjb25zdCB0eXBlRWxlbWVudCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXR5cGUnKTsKICAgICAgICAgICAgY29uc3QgdXJsRWxlbWVudCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXVybCcpOwogICAgICAgICAgICBjb25zdCBpc05ldyA9IGJsb2NrLmRhdGFzZXQuaXNOZXdMaW5rID09PSAnMSc7CgogICAgICAgICAgICBjb25zdCByYXdUeXBlID0gdHlwZUVsZW1lbnQgPyAodHlwZUVsZW1lbnQudGV4dENvbnRlbnQgfHwgJycpLnRyaW0oKSA6ICcnOwogICAgICAgICAgICBjb25zdCByYXdVcmwgPSB1cmxFbGVtZW50ID8gKCh1cmxFbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8IHVybEVsZW1lbnQudGV4dENvbnRlbnQgfHwgJycpLnRyaW0oKSkgOiAnJzsKCiAgICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQvtGA0LjQs9C40L3QsNC70YzQvdGL0LUg0LfQvdCw0YfQtdC90LjRjyAo0LTQu9GPINC+0YLQutCw0YLQsCkKICAgICAgICAgICAgYmxvY2suZGF0YXNldC5vcmlnaW5hbFR5cGUgPSByYXdUeXBlOwogICAgICAgICAgICBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVXJsICA9IHJhd1VybDsKCiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2VkaXRpbmcnKTsKICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1lZGl0Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImxpbmstdHlwZS1pbnB1dCIgcGxhY2Vob2xkZXI9ItCi0LjQvyDRgdGB0YvQu9C60LgiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ1cmwiIGNsYXNzPSJsaW5rLXVybC1pbnB1dCIgcGxhY2Vob2xkZXI9Imh0dHBzOi8vLi4uIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFuZ2VyIGRlbGV0ZS1idXR0b24iIHRpdGxlPSLQo9C00LDQu9C40YLRjCIgYXJpYS1sYWJlbD0i0KPQtNCw0LvQuNGC0YwiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01IDIwYTIgMiAwIDAgMCAyIDJoMTBhMiAyIDAgMCAwIDItMlY4aDJWNmgtNFY0YTIgMiAwIDAgMC0yLTJIOWEyIDIgMCAwIDAtMiAydjJIM3YyaDJ6TTkgNGg2djJIOXpNOCA4aDl2MTJIN1Y4eiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTkgMTBoMnY4SDl6bTQgMGgydjhoLTJ6Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIGNvbnN0IHR5cGVJbnB1dCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXR5cGUtaW5wdXQnKTsKICAgICAgICAgICAgY29uc3QgdXJsSW5wdXQgID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmxpbmstdXJsLWlucHV0Jyk7CgogICAgICAgICAgICAvLyDQlNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQtdC5INGB0YHRi9C70LrQuCDQvNC+0LbQvdC+INC/0L7QtNGB0LrQsNC30LDRgtGMINC00LXRhNC+0LvRgiwg0L3QviDQtNC70Y8g0L3QvtCy0L7QuSDigJQg0YLQvtC70YzQutC+IHBsYWNlaG9sZGVyCiAgICAgICAgICAgIGlmICghaXNOZXcpIHsKICAgICAgICAgICAgICAgIHR5cGVJbnB1dC52YWx1ZSA9IHJhd1R5cGUgfHwgJ9Ci0LjQvyDRgdGB0YvQu9C60LgnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdHlwZUlucHV0LnZhbHVlID0gcmF3VHlwZTsKICAgICAgICAgICAgICAgIHR5cGVJbnB1dC5wbGFjZWhvbGRlciA9ICfQotC40L8g0YHRgdGL0LvQutC4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxJbnB1dC52YWx1ZSAgPSByYXdVcmw7CgogICAgICAgICAgICAvLyDQsNCy0YLQvi3RiNC40YDQuNC90LAg0YLQuNC/0LAKICAgICAgICAgICAgdXBkYXRlTGlua1R5cGVXaWR0aCh0eXBlSW5wdXQpOwoKICAgICAgICAgICAgLy8gRW50ZXIvRXNjYXBlINC30LDQstC10YDRiNCw0Y7RgiDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1CiAgICAgICAgICAgIGNvbnN0IG9uS2V5ID0gKGV2KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRXNjYXBlJykgewogICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZXhpdExpbmtFZGl0TW9kZShibG9jaywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGV4aXRMaW5rRWRpdE1vZGUoYmxvY2ssIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdHlwZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleSk7CiAgICAgICAgICAgIHVybElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleSk7CgogICAgICAgICAgICAvLyDQn9C10YDQtdGA0LDRgdGH0ZHRgiDRiNC40YDQuNC90Ysg0L/RgNC4INCy0LLQvtC00LUKICAgICAgICAgICAgdHlwZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gdXBkYXRlTGlua1R5cGVXaWR0aCh0eXBlSW5wdXQpKTsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHVwZGF0ZUxpbmtUeXBlV2lkdGgodHlwZUlucHV0KSk7CgogICAgICAgICAgICAvLyDQo9C00LDQu9C10L3QuNC1CiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtYnV0dG9uJyk7CiAgICAgICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5jb25maXJtKCfQo9C00LDQu9C40YLRjCDRgdGB0YvQu9C60YM/JykpIHJldHVybjsKICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTdGF0ZXMoKTsKICAgICAgICAgICAgfSk7Ly8g0KTQvtC60YPRgSDQsiBVUkwsINC10YHQu9C4INGC0LjQvyDRg9C20LUg0LfQsNC/0L7Qu9C90LXQvSwg0LjQvdCw0YfQtSDQsiDRgtC40L8KICAgICAgICAgICAgKHR5cGVJbnB1dC52YWx1ZSA/IHVybElucHV0IDogdHlwZUlucHV0KS5mb2N1cygpOwogICAgICAgIH0KCiAgICAgICAgLy8g0JLRi9GF0L7QtCDQuNC3INGA0LXQttC40LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINGB0YHRi9C70LrQuAogICAgICAgIGZ1bmN0aW9uIGV4aXRMaW5rRWRpdE1vZGUoYmxvY2ssIHNhdmUgPSB0cnVlKSB7CiAgICAgICAgICAgIGNvbnN0IHR5cGVJbnB1dCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5saW5rLXR5cGUtaW5wdXQnKTsKICAgICAgICAgICAgY29uc3QgdXJsSW5wdXQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubGluay11cmwtaW5wdXQnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChzYXZlICYmIHR5cGVJbnB1dCAmJiB1cmxJbnB1dCkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3VHlwZSA9IHR5cGVJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdVcmwgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHlwZSAmJiBuZXdVcmwpIHsKICAgICAgICAgICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0LjQt9C80LXQvdC10L3QuNGPCiAgICAgICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpbmstdHlwZSI+JHtuZXdUeXBlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7bmV3VXJsID8gYDxhIGhyZWY9IiR7bmV3VXJsfSIgY2xhc3M9ImxpbmstdXJsIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiB0aXRsZT0iJHtuZXdVcmx9Ij4ke25ld1VybH08L2E+YCA6IGA8c3BhbiBjbGFzcz0ibGluay11cmwgbGluay11cmwtLWVtcHR5IiBzdHlsZT0iZGlzcGxheTpub25lIj48L3NwYW4+YH0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpbmstYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INGH0YLQvi3RgtC+INGD0LTQsNC70LjQu9C4INC4INC90LUg0LLQstC10LvQuCDQt9Cw0LzQtdC90YM6CiAgICAgICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0L3QvtCy0L7QuSDRgdGB0YvQu9C60Lgg0YPQtNCw0LvRj9C10Lwg0L/Rg9GB0YLQvtC5INCx0LvQvtC6CiAgICAgICAgICAgICAgICAgICAgLy8gLSDQtNC70Y8g0YHRg9GJ0LXRgdGC0LLRg9GO0YnQtdC5INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC60LDQuiDQsdGL0LvQvgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gYmxvY2suZGF0YXNldC5pc05ld0xpbmsgPT09ICcxJzsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVHlwZSA9IGJsb2NrLmRhdGFzZXQub3JpZ2luYWxUeXBlIHx8ICfQotC40L8g0YHRgdGL0LvQutC4JzsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFVybCA9IGJsb2NrLmRhdGFzZXQub3JpZ2luYWxVcmwgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgYmxvY2suaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpbmstdHlwZSI+JHtvcmlnaW5hbFR5cGV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtvcmlnaW5hbFVybCA/IGA8YSBocmVmPSIke29yaWdpbmFsVXJsfSIgY2xhc3M9ImxpbmstdXJsIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiB0aXRsZT0iJHtvcmlnaW5hbFVybH0iPiR7b3JpZ2luYWxVcmx9PC9hPmAgOiBgPHNwYW4gY2xhc3M9ImxpbmstdXJsIGxpbmstdXJsLS1lbXB0eSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9zcGFuPmB9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbi1idG4gaWNvbi1idG4tLWRhcmsgZWRpdC1idXR0b24iIHRpdGxlPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIgYXJpYS1sYWJlbD0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiPjxzcGFuIGNsYXNzPSJpY29uIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiAyLjAxMmwzIDNMMTYuNzEzIDcuM2wtMy0zek00IDE0djNoM2w4LjI5OS04LjI4N2wtMy0zem0wIDZoMTZ2Mkg0eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8g0J7RgtC80LXQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y86CiAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDQvdC+0LLQvtCz0L4g0LHQu9C+0LrQsCDQsdC10Lcg0LfQsNC/0L7Qu9C90LXQvdC40Y86INGD0LTQsNC70Y/QtdC8CiAgICAgICAgICAgICAgICAvLyAtINC00LvRjyDRgdGD0YnQtdGB0YLQstGD0Y7RidC10LPQvjog0L7RgtC60LDRgtGL0LLQsNC10Lwg0LrQsNC6INCx0YvQu9C+CiAgICAgICAgICAgICAgICBjb25zdCBpc05ldyA9IGJsb2NrLmRhdGFzZXQuaXNOZXdMaW5rID09PSAnMSc7CiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHsKICAgICAgICAgICAgICAgICAgICAvLyDQndC+0LLRi9C5INCx0LvQvtC6INC90LXQu9GM0LfRjyAi0L7RgtC80LXQvdC40YLRjCIg0Lgg0L7RgdGC0LDQstC40YLRjCDQvdCwINGB0YLRgNCw0L3QuNGG0LUg4oCUINGD0LTQsNC70Y/QtdC8LgogICAgICAgICAgICAgICAgICAgIGJsb2NrLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKLy8g0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC+0YDQuNCz0LjQvdCw0LvRjNC90YvQtSDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFR5cGUgPSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVHlwZSB8fCAn0KLQuNC/INGB0YHRi9C70LrQuCc7CiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFVybCA9IGJsb2NrLmRhdGFzZXQub3JpZ2luYWxVcmwgfHwgJyc7CiAgICAgICAgICAgICAgICBibG9jay5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpbmstdHlwZSI+JHtvcmlnaW5hbFR5cGV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAke29yaWdpbmFsVXJsID8gYDxhIGhyZWY9IiR7b3JpZ2luYWxVcmx9IiBjbGFzcz0ibGluay11cmwiIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiIHRpdGxlPSIke29yaWdpbmFsVXJsfSI+JHtvcmlnaW5hbFVybH08L2E+YCA6IGA8c3BhbiBjbGFzcz0ibGluay11cmwgbGluay11cmwtLWVtcHR5IiBzdHlsZT0iZGlzcGxheTpub25lIj48L3NwYW4+YH0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBibG9jay5jbGFzc0xpc3QucmVtb3ZlKCdlZGl0aW5nJyk7CiAgICAgICAgICAgIGRlbGV0ZSBibG9jay5kYXRhc2V0Lm9yaWdpbmFsVHlwZTsKICAgICAgICAgICAgZGVsZXRlIGJsb2NrLmRhdGFzZXQub3JpZ2luYWxVcmw7CiAgICAgICAgICAgIGRlbGV0ZSBibG9jay5kYXRhc2V0LmlzTmV3TGluazsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC90LAg0LrQvdC+0L/QutGDINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgY29uc3QgbmV3RWRpdEJ0biA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbicpOwogICAgICAgICAgICBpZiAobmV3RWRpdEJ0bikgewogICAgICAgICAgICAgICAgbmV3RWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGVudGVyTGlua0VkaXRNb2RlKGJsb2NrKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjwogICAgICAgIGZ1bmN0aW9uIGFkZE5ld0NvbW1lbnQoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50c0xpc3QnKTsKICAgICAgICAgICAgY29uc3QgbmV3SWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgbmV3Q29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBuZXdDb21tZW50LmNsYXNzTmFtZSA9ICdjb21tZW50LWJsb2NrJzsKICAgICAgICAgICAgbmV3Q29tbWVudC5kYXRhc2V0LmNvbW1lbnRJZCA9IG5ld0lkOwogICAgICAgICAgICAKICAgICAgICAgICAgbmV3Q29tbWVudC5kYXRhc2V0LmlzTmV3Q29tbWVudCA9ICcxJztuZXdDb21tZW50LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1lbnQtdGV4dCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpY29uLWJ0biBpY29uLWJ0bi0tZGFyayBlZGl0LWJ1dHRvbiIgdGl0bGU9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiBhcmlhLWxhYmVsPSLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCI+PHNwYW4gY2xhc3M9Imljb24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2IDIuMDEybDMgM0wxNi43MTMgNy4zbC0zLTN6TTQgMTR2M2gzbDguMjk5LTguMjg3bC0zLTN6bTAgNmgxNnYySDR6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz48L3NwYW4+PC9idXR0b24+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb21tZW50c0xpc3QuYXBwZW5kQ2hpbGQobmV3Q29tbWVudCk7CiAgICAgICAgICAgIHVwZGF0ZUVtcHR5U3RhdGVzKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDQodGA0LDQt9GDINCy0YXQvtC00LjQvCDQsiDRgNC10LbQuNC8INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgZW50ZXJDb21tZW50RWRpdE1vZGUobmV3Q29tbWVudCk7CiAgICAgICAgfQoKICAgICAgICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INGB0YHRi9C70LrQuAogICAgICAgIGZ1bmN0aW9uIGFkZE5ld0xpbmsoKSB7CiAgICAgICAgICAgIGNvbnN0IGxpbmtzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rc0xpc3QnKTsKICAgICAgICAgICAgY29uc3QgbmV3SWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgbmV3TGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBuZXdMaW5rLmNsYXNzTmFtZSA9ICdsaW5rLWl0ZW0nOwogICAgICAgICAgICBuZXdMaW5rLmRhdGFzZXQubGlua0lkID0gbmV3SWQ7CiAgICAgICAgICAgIG5ld0xpbmsuZGF0YXNldC5pc05ld0xpbmsgPSAnMSc7CiAgICAgICAgICAgIG5ld0xpbmsuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1pbmZvIj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGluay10eXBlIj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpbmstdXJsIGxpbmstdXJsLS1lbXB0eSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaW5rLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imljb24tYnRuIGljb24tYnRuLS1kYXJrIGVkaXQtYnV0dG9uIiB0aXRsZT0i0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiIGFyaWEtbGFiZWw9ItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIj48c3BhbiBjbGFzcz0iaWNvbiI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTYgMi4wMTJsMyAzTDE2LjcxMyA3LjNsLTMtM3pNNCAxNHYzaDNsOC4yOTktOC4yODdsLTMtM3ptMCA2aDE2djJINHoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPjwvc3ZnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICAKICAgICAgICAgICAgbGlua3NMaXN0LmFwcGVuZENoaWxkKG5ld0xpbmspOwogICAgICAgICAgICB1cGRhdGVFbXB0eVN0YXRlcygpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g0KHRgNCw0LfRgyDQstGF0L7QtNC40Lwg0LIg0YDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGVudGVyTGlua0VkaXRNb2RlKG5ld0xpbmspOwogICAgICAgIH0KCiAgICAvLyA9PT09PT09IENBUiBEQVRBIGZyb20gcGFyZW50IHBhZ2UgKHBvc3RNZXNzYWdlKSA9PT09PT09CiAgICAvLyBSZWNlaXZlZCB3aGVuIHJlbmRlclJpZ2h0UGFuZShjYXIpIC8gb3BlbkRyYXdlcih2aW4pIGlzIGNhbGxlZCBpbiBkcmF3ZXIuanMuCiAgICAvLyBQb3B1bGF0ZXMgYWxsIFtkYXRhLWZpZWxkXSBlbGVtZW50cyBhbmQgdXBkYXRlcyB0aGUgY2FyZCB0aXRsZS4KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoIWUuZGF0YSB8fCBlLmRhdGEudHlwZSAhPT0gJ2Nhcl9kYXRhJyB8fCAhZS5kYXRhLmNhcikgcmV0dXJuOwogICAgICB2YXIgY2FyID0gZS5kYXRhLmNhcjsKCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWZpZWxkXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICB2YXIgZmllbGQgPSBlbC5kYXRhc2V0LmZpZWxkOwogICAgICAgIHZhciB2YWw7CiAgICAgICAgaWYgKGZpZWxkID09PSAnY29uZGl0aW9uTGFiZWwnKSB7CiAgICAgICAgICB2YWwgPSBjYXIuY29uZGl0aW9uID09PSAndXNlZCcgPyAn0KEg0L/RgNC+0LHQtdCz0L7QvCcKICAgICAgICAgICAgICA6IChjYXIuY29uZGl0aW9uID09PSAnbmV3JyAgPyAn0J3QvtCy0YvQuScgOiBjYXIuY29uZGl0aW9uKTsKICAgICAgICB9IGVsc2UgaWYgKGZpZWxkID09PSAnc3RhdHVzTGFiZWwnKSB7CiAgICAgICAgICB2YWwgPSBjYXIuc3RhdHVzIHx8IG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbCA9IGNhcltmaWVsZF07CiAgICAgICAgfQogICAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQgfHwgdmFsID09PSAnJykgewogICAgICAgICAgZWwudGV4dENvbnRlbnQgPSAn4oCUJzsKICAgICAgICB9IGVsc2UgaWYgKGZpZWxkID09PSAncHJpY2UnKSB7CiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IE51bWJlcih2YWwpLnRvTG9jYWxlU3RyaW5nKCdydS1SVScpICsgJ8Kg4oK9JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBTdHJpbmcodmFsKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8gVXBkYXRlIGNhcmQgdGl0bGUgdG8gc2hvdyBicmFuZCArIG1vZGVsICsgVklOCiAgICAgIHZhciB0aXRsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmRUaXRsZScpOwogICAgICBpZiAodGl0bGVFbCkgewogICAgICAgIHZhciBwYXJ0cyA9IFtjYXIuYnJhbmQsIGNhci5tb2RlbF0uZmlsdGVyKEJvb2xlYW4pOwogICAgICAgIHZhciB0aXRsZSA9IHBhcnRzLmpvaW4oJyAnKTsKICAgICAgICBpZiAoY2FyLnZpbikgdGl0bGUgKz0gJyAoJyArIGNhci52aW4gKyAnKSc7CiAgICAgICAgdGl0bGVFbC50ZXh0Q29udGVudCA9IHRpdGxlIHx8ICfQmtCw0YDRgtC+0YfQutCwINCw0LLRgtC+0LzQvtCx0LjQu9GPJzsKICAgICAgfQogICAgfSk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+';
// ======= SPLIT VIEW: right pane state machine (open / collapsed) =======
const splitRoot = document.getElementById('splitRoot');
const splitHandle = document.getElementById('splitHandle');
const rightPane = document.getElementById('rightPane');

const SNAP_HANDLE_PX = 0;    // kept for app.js compatibility
const CARD_MIN_WIDTH = 280;  // minmax(280px, 1fr) in CSS
const LEFT_PANE_MIN = CARD_MIN_WIDTH + 2 * 24 + 16; // 1 col + side pads + gap
const RIGHT_PANE_MIN = 280;   // kept for compatibility
const MIN_OPEN_WIDTH = 600;   // minimum open width (default state)
const MAX_OPEN_WIDTH = 900;   // maximum open width (fixed cap)
const HANDLE_WIDTH = 12;      // split handle width = collapsed tail

// rightPaneState: 'open' | 'collapsed'
let rightPaneState = 'collapsed';
let isDragging = false;
let dragStartX = 0;
let dragStartRightWidth = 0;
let dragMaxWidth = 0;
let currentRightPaneWidth = MIN_OPEN_WIDTH;
let rafId = null;
let pendingWidth = 0;

function isNarrowScreen() {
  return window.matchMedia('(max-width: 600px)').matches;
}

function getRightPaneMaxWidth() {
  const totalWidth = splitRoot ? splitRoot.offsetWidth : window.innerWidth;
  const handleWidth = splitHandle ? splitHandle.offsetWidth : HANDLE_WIDTH;
  const dynamicMax = totalWidth - handleWidth - LEFT_PANE_MIN;
  return Math.max(MIN_OPEN_WIDTH, dynamicMax);
}

function setRightPaneWidth(width) {
  if (!rightPane) return;
  const max = getRightPaneMaxWidth();
  const clamped = Math.min(max, Math.max(MIN_OPEN_WIDTH, width));
  rightPane.style.width = clamped + 'px';
  rightPane.style.flex = '0 0 ' + clamped + 'px';
  rightPane.style.transform = '';
  currentRightPaneWidth = clamped;
}

function collapseRightPane() {
  if (!rightPane) return;
  rightPaneState = 'collapsed';
  // Shrink physical width to 0 so leftPane expands; splitHandle stays as the visible tail
  rightPane.style.width = '0px';
  rightPane.style.flex = '0 0 0px';
  rightPane.style.transform = '';
  currentRightPaneWidth = MIN_OPEN_WIDTH;
}

function expandRightPane() {
  if (!rightPane) return;
  rightPaneState = 'open';
  setRightPaneWidth(MIN_OPEN_WIDTH);
}

function onSplitPointerMove(e) {
  if (!isDragging) return;
  if (rightPaneState === 'collapsed') return;
  const rawDelta = e.clientX - dragStartX;
  pendingWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
  if (rafId === null) {
    rafId = requestAnimationFrame(function() {
      rafId = null;
      setRightPaneWidth(pendingWidth);
    });
  }
}

function stopSplitDrag(e) {
  if (!isDragging) return;
  isDragging = false;
  if (rafId !== null) {
    cancelAnimationFrame(rafId);
    rafId = null;
  }
  document.body.classList.remove('split-dragging');
  document.body.style.userSelect = '';
  document.body.style.cursor = '';
  if (splitHandle) {
    splitHandle.releasePointerCapture(e.pointerId);
    splitHandle.removeEventListener('pointermove', onSplitPointerMove);
    splitHandle.removeEventListener('pointerup', stopSplitDrag);
    splitHandle.removeEventListener('pointercancel', stopSplitDrag);
    const rawDelta = e.clientX - dragStartX;
    const finalWidth = Math.max(MIN_OPEN_WIDTH, Math.min(dragMaxWidth, dragStartRightWidth - rawDelta));
    setRightPaneWidth(finalWidth);
  }
}

if (splitHandle) {
  splitHandle.addEventListener('pointerdown', function(e) {
    e.preventDefault();
    if (rightPaneState === 'collapsed') {
      // Any interaction with the handle expands back to MIN_OPEN_WIDTH
      expandRightPane();
      return;
    }
    isDragging = true;
    dragStartX = e.clientX;
    dragStartRightWidth = currentRightPaneWidth;
    dragMaxWidth = getRightPaneMaxWidth();
    document.body.classList.add('split-dragging');
    document.body.style.userSelect = 'none';
    document.body.style.cursor = 'col-resize';
    rightPane.style.transform = '';
    splitHandle.style.transform = '';
    splitHandle.setPointerCapture(e.pointerId);
    splitHandle.addEventListener('pointermove', onSplitPointerMove);
    splitHandle.addEventListener('pointerup', stopSplitDrag);
    splitHandle.addEventListener('pointercancel', stopSplitDrag);
  });
}

window.addEventListener('resize', function() {
  if (!rightPane) return;
  if (rightPaneState === 'open') {
    setRightPaneWidth(currentRightPaneWidth);
  } else {
    // Maintain collapsed state
    collapseRightPane();
  }
});

// Initialize right pane width
collapseRightPane();

// Wire up the collapse button in the drawer header
const rightPaneCollapseBtn = document.getElementById('rightPaneCollapseBtn');
if (rightPaneCollapseBtn) {
  rightPaneCollapseBtn.addEventListener('click', collapseRightPane);
}

// ======= IFRAME LOADING =======

// Posts the full car object (looked up by vin) to the already-loaded iframe.
// The iframe listens via window.addEventListener('message', ...) and populates
// all [data-field] elements and the card title.
function postCarDataToIframe(vin) {
  const iframe = document.getElementById('drawerIframe');
  if (!iframe || !iframe.contentWindow) return;
  const car = window.CARS_DATA && window.CARS_DATA.find(c => c.vin === vin);
  if (!car) return;
  iframe.contentWindow.postMessage({ type: 'car_data', car: car }, '*');
}

// renderRightPane(car) -- public API.
// Call this to populate the right pane with the full profile of a car.
// Sections populated:
//   data-role="right-section-specs"   -- brand/model/trim/year/color/...
//   data-role="right-section-docs"    -- vin/ptsType/keyNumber/comments
//   data-role="right-section-finance" -- price
//   data-role="right-section-extra"   -- showroom/condition/status/sourceFile
function renderRightPane(car) {
  if (!car) return;
  openDrawer(car.vin);
}

// openDrawer(vin) -- load the iframe if needed, then push car data into it.
// vin is optional; if provided the matching car from window.CARS_DATA is shown.
function openDrawer(vin) {
  const drawerIframe = document.getElementById('drawerIframe');
  if (!drawerIframe) return;
  if (!drawerIframe.src || drawerIframe.src === window.location.href) {
    // First open: load the iframe, then post car data once it is ready.
    if (vin) {
      drawerIframe.addEventListener('load', function() {
        postCarDataToIframe(vin);
      }, { once: true });
    }
    drawerIframe.src = DRAWER_DATA_URL;
  } else {
    // Iframe already loaded -- just refresh the displayed car.
    if (vin) postCarDataToIframe(vin);
  }
}

function closeDrawer() {
  // In split view the right pane is always visible; no-op
}
